cscope 15 $HOME/work/ray_0720/package/qcloud/src               0000495968
	@libs/qid/include/mcn_api.h

1 #i‚de‡
MCN_API_H_


2 
	#MCN_API_H_


	)

4 
	~"q˛oud.h
"

5 
	#MCN_VERSION
 "1.1"

	)

7 
	em˙_£rvi˚_°©us_e
{

8 
	mMCN_SERVC_DISABLE
,

9 
	mMCN_SERVC_ENABLE
,

10 
	mMCN_SERVC_INIT


11 }
	tMCN_SERVICES_STATUS_E
;

13 
	s_m˙_ddns_pubûsh_°
{

15 
	m«me
[
QCLOUD_PUBLISHED_SERVC_NAME_LEN
+1];

17 
	msub_«me
[
QCLOUD_PUBLISHED_SERVC_NAME_LEN
+1];

19 
	mlogö_∑th
[
MAX_QID_HOST_LEN
+1];

21 
	mis_published
;

23 
	mis_¥iv©e
;

24 }
	tm˙_ddns_publish_°
;

26 
	s_m˙_£rvi˚_p‹t_°
{

28 
	m«me
[
QCLOUD_PUBLISHED_SERVC_NAME_LEN
+1];

30 
	msub_«me
[
QCLOUD_PUBLISHED_SERVC_NAME_LEN
+1];

32 
	m¥Ÿo
[
POROT_MAPPING_PROTO_NAME_LEN
+1];

34 
	möäl_p‹t
;

36 
	mexäl_p‹t
;

38 }
	tm˙_£rvi˚_p‹t
;

40 #ifde‡
__˝lu•lus


51 
my˛oudNAS_devi˚_upd©e_öfo
(
q˛oud_°
 *
˘x
, 
time_t
 *
ªp‹t_≥riod
);

68 
my˛oudNAS_upd©e_published_£rvi˚
(
q˛oud_°
 *
˘x
,

69 
m˙_ddns_publish_°
 *
£rvc_li°
, 
num_£rvc
);

85 
my˛oudNAS_upd©e_£rvi˚_p‹t
(
q˛oud_°
 *
˘x
,

86 
m˙_£rvi˚_p‹t
 *
p‹t_li°
, 
num_£rvc
);

102 
my˛oudNAS_£t_ddns_°©us
(
q˛oud_°
 *
˘x
, 
a˘ivü˘i⁄
);

113 
my˛oudNAS_gë_ddns_°©us
(
q˛oud_°
 *
˘x
);

115 #ifde‡
__˝lu•lus


	@libs/qid/include/qcloud.h

1 #i‚de‡
QCLOUD_H_


2 
	#QCLOUD_H_


	)

4 
	#STATUS_FLAG_LEN
 (16)

	)

5 
	#QID_DEVICE_NAME_LEN
 (30)

	)

6 
	#QID_DEVICE_ID_LEN
 (256)

	)

7 
	#QID_MAC_STR_LONG_LEN
 (20)

	)

8 
	#QID_SN_STR_LEN
 (512)

	)

13 
	#QID_CONFIG_VERSION
 "1"

	)

15 
	#QID_API_VERSION
 "v1.1"

	)

17 
	#QID_CONF_PATH
 "/ëc/c⁄fig/qid.c⁄f"

	)

19 
	#QID_CONF_SECTION
 "\"QNAP ID Sîvi˚\""

	)

21 
	#MAX_QID_HOST_LEN
 (254)

	)

23 
	#MAX_QID_LEN
 (254)

	)

25 
	#MAX_PASSWD_LEN
 (512)

	)

27 
	#MAX_APPID_LEN
 (256)

	)

29 
	#MAX_APPKEY_LEN
 (256)

	)

31 
	#MAX_APPVER_LEN
 (64)

	)

33 
	#DDNS_SERVC_NAME_LEN
 (32)

	)

35 
	#POROT_MAPPING_PROTO_NAME_LEN
 (4)

	)

37 
	#QCLOUD_STATUS_MSG_STR_LEN
 (512)

	)

39 
	#QCLOUD_PUBLISHED_SERVC_NAME_LEN
 (32)

	)

41 
	#GEOINFO_STR_LEN
 64

	)

43 
	#MAX_PATH_LEN
 (32*1024)

	)

45 
	#QPKG_INFO_PATH
 "/tmp/qpkg_öfo.c⁄f"

	)

51 
	#QID_ERR_NO_ERROR
 (0)

	)

53 
	#QID_ERR_INVALID_PARAM
 (-1)

	)

55 
	#QID_ERR_BUFFER_LEN
 (-2)

	)

57 
	#QID_ERR_INVALID_CREDENTIAL
 (-3)

	)

59 
	#QID_ERR_NO_INTERNET
 (-10)

	)

61 
	#QID_ERR_CONNECT_SERVER
 (-11)

	)

63 
	#QID_ERR_UNKNOWN_RESPONSE
 (-12)

	)

65 
	#QID_ERR_RESPONSE_TIME
 (-13)

	)

67 
	#QID_ERR_RES_NOT_FOUND
 (-100)

	)

69 
	#QID_ERR_SERVICE_NO_SIGNIN
 (-101)

	)

71 
	#QID_ERR_QID_VALIDATING
 (-102)

	)

73 
	#QID_ERR_QID_REGISTER_FAILED
 (-103)

	)

75 
	#QID_ERR_QID_ALREADY_USED
 (-104)

	)

77 
	#QID_ERR_DEVICE_NAME_ALREADY_USED
 (-105)

	)

79 
	#QID_ERR_QID_VALIDATED
 (-106)

	)

81 
	#QID_ERR_WONT_EXECUTED
 (-107)

	)

83 
	#QID_ERR_INVALID_QID_PASSWD
 (-108)

	)

85 
	#QID_ERR_QID_NOT_FOUND
 (-109)

	)

87 
	#QID_SERVC_AUTH_TOKEN_NOT_FOUND
 (100009)

	)

89 
	#ERR_UNKNOWN_ERROR
 (1000001)

	)

92 
	#QID_INVALID_AUTH_TOKEN
 (1013001)

	)

94 
	#QID_TOKEN_SCOPE_UNMATCHED
 (1013002)

	)

96 
	#QID_SERVC_QID_NOT_FOUND
 (10131006)

	)

98 
	#QID_SERVC_WRONG_PASSWORD
 (10131007)

	)

101 
	#MCN_ERR_DEVICE_ID_NOT_FOUND
 (1020001)

	)

103 
	#QID_ERR_DEVICE_NAME_BEEN_USED
 (1020002)

	)

105 
	#MCN_ERR_IGD_NOT_PUBLIC
 (1020010)

	)

107 
	#MCN_ERR_IGD_IP_DETECT
 (1020011)

	)

109 
	#MCN_ERR_JSON_FORMAT
 (1020012)

	)

111 
	#MCN_ERR_IGD_UPNP_NA
 (1020013)

	)

113 
	#MCN_ERR_DDNS_NAME_NOT_FOUND
 (1060001)

	)

115 
	#MCN_ERR_DDNS_EXISTS
 (1060003)

	)

117 
	#MCN_ERR_EMPTY_WAN_IP
 (1060004)

	)

119 
	#MCN_ERR_VLINK_NOT_FOUND
 (1070001)

	)

121 
	#MCN_ERR_VLINK_EXISTS
 (1070002)

	)

123 
	#QID_ERR_QPKG_NOT_FOUND
 (1030002)

	)

130 
	#QID_LOG_STDERR
 1<<0

	)

132 
	#QID_LOG_STDOUT
 1<<1

	)

134 
	#QID_LOG_FILE
 1<<2

	)

136 
	#QID_LOG_CURL
 1<<5

	)

140 
	s_q«p_≠p_öfo


143 
	m≠pid
[
MAX_APPID_LEN
+1];

145 
	msub_≠pid
[
MAX_APPID_LEN
+1];

147 
	m≠pkey
[
MAX_APPKEY_LEN
+1];

149 
	m≠pvî
[
MAX_APPVER_LEN
+1];

150 }
	tq«p_≠p_öfo
;

153 
	s_q«p_dev_öfo


156 
	mqid_accou¡
[
MAX_QID_LEN
+1];

158 
	mqid_°©us
[
STATUS_FLAG_LEN
+1];

160 
	mmac_°r
[
QID_MAC_STR_LONG_LEN
+1];

162 
	mhw_¢
[
QID_SN_STR_LEN
+1];

164 
	mdevi˚_id
[
QID_DEVICE_ID_LEN
+1];

170 
	mdevi˚_«me
[
QID_DEVICE_NAME_LEN
+1];

176 
	mddns_£rvî_ho°
[
MAX_QID_HOST_LEN
+1];

178 
	mddns_°©us
[
STATUS_FLAG_LEN
+1];

181 
	mdevi˚_ty≥
[
MAX_QID_LEN
+1];

182 
	mdevi˚_modñ
[
MAX_QID_LEN
+1];

183 
	mfúmw¨e_vîsi⁄
[
MAX_QID_LEN
+1];

184 
	mœ°_upd©e_time
[
MAX_QID_LEN
+1];

185 
	mtokí
[
MAX_QID_LEN
+1];

186 
	mfw_£rül_numbî
[
MAX_QID_LEN
+1];

187 }
	tq«p_dev_öfo
;

190 
	eq˛oud_«me_°©us_e
{

192 
	mQCLOUD_NAME_FREE
,

194 
	mQCLOUD_NAME_BEEN_USED
,

196 
	mQCLOUD_NAME_INVALID_FORMAT


197 }
	tQCLOUD_NAME_STATUS_E
;

201 
	sq˛oud_ªtu∫ed_msg_°_
{

203 
	m°©us_code
;

205 
	m°©us_msg
[
QCLOUD_STATUS_MSG_STR_LEN
+1];

206 }
	tQCLOUD_STATUS_MSG
;

209 #ifde‡
__˝lu•lus


220 
q˛oud_°
* 
q˛oud_öô_˘x
(
q«p_≠p_öfo
 *
öfo
);

228 
q˛oud_˛ónup_˘x
(
q˛oud_°
 *
˘x
);

239 
ª£t_q˛oud_˘x_c⁄f
(
q˛oud_°
 *
˘x
);

248 
ª£t_q˛oud_ªque°_hash
();

259 
q˛oud_£t_log
(
q˛oud_°
 *
˘x
, 
mode
, 
Àvñ
);

268 
q˛oud_gë_devi˚_öfo
(
q˛oud_°
 *
˘x
, 
q«p_dev_öfo
 *
dev_öfo
);

282 
q˛oud_check_bödög_°©us
(
q˛oud_°
 *
˘x
);

298 
q˛oud_gë_exã∫Æ_ù
(
q˛oud_°
 *
˘x
, * 
buf
, 
size_t
 
buf_Àn
);

300 #ifde‡
__˝lu•lus


	@libs/qid/include/qcloud_dao.h

2 #i‚de‡
QCLOUD_DAO_H_


3 
	#QCLOUD_DAO_H_


	)

6 
	#DB_QID_TABLE
 "QID"

	)

8 
	#DB_CREATE_TABLE
 "CREATE TABLE IF NOT EXISTS %†(%s);"

	)

10 
	#DB_INSERT_DATA
 "INSERT OR REPLACE INTO %†(%sËvÆue†(%s);"

	)

12 
	#DB_QUERY_DATA
 "SELECT %†FROM %†WHERE %s;"

	)

14 
	#DB_DELETE_DATA
 "DELETE FROM %†WHERE %s;"

	)

16 
	#DB_UPDATE_DATA
 "UPDATE %†SET %†WHERE %s;"

	)

18 
	#DB_DROP_TABLE
 "DROP TABLE %s;"

	)

21 
	#QCLOUD_DAO_DB_PATH
 "/ëc/c⁄fig/qidDB.db"

	)

22 
	#QCLOUD_DAO_DB_QID
 "u£r_accou¡"

	)

23 
	#QCLOUD_DAO_DB_LOCAL_USER
 "loˇl_u£r"

	)

26 #ifde‡
__˝lu•lus


30 
	e_q˛oud_dao_ty≥
{

31 
dao_ty≥_db
 = 0,

32 
dao_ty≥_c⁄fig


33 }
	tq˛oud_dao_ty≥
;

35 
	e_q˛oud_qid_èbÀ_cﬁumn
{

36 
db_cﬁumn_qid
 = 0,

37 
db_cﬁumn_loˇl_accou¡


38 }
	tq˛oud_qid_èbÀ_cﬁumn
;

46 
dao_¸óã_c⁄èöî
(
q˛oud_dao_ty≥
 
ty≥
, *
fûe_∑th
, * 
èbÀ_«me
,

47 
key_∑ú_°
 *
key_li°
, 
li°_size
);

63 
dao_£¨ch_°rög
(
q˛oud_dao_ty≥
 
ty≥
, *
fûe_∑th
, *
èbÀ_«me
,

64 
key_∑ú_°
 *
c⁄dôi⁄_li°
, key_∑ú_° *
key_li°
, 
c⁄d_li°_size
);

76 
dao_ö£π_°rög_vÆue
(
q˛oud_dao_ty≥
 
ty≥
, *
fûe_∑th
, *
èbÀ_«me
,

77 
key_∑ú_°
 *
key_li°
, 
li°_size
);

89 
dao_dñëe_°rög_vÆue
(
q˛oud_dao_ty≥
 
ty≥
, *
fûe_∑th
, *
èbÀ_«me
,

90 
key_∑ú_°
 *
c⁄d_li°
, 
li°_size
);

102 
dao_upd©e_°rög_vÆue
(
q˛oud_dao_ty≥
 
ty≥
, *
fûe_∑th
, *
èbÀ_«me
,

103 
key_∑ú_°
 *
c⁄d_li°
, 
c⁄d_li°_size
,

104 
key_∑ú_°
 *
d©a_li°
, 
d©a_li°_size
);

107 
dao_dr›_c⁄èöî
(
q˛oud_dao_ty≥
 
ty≥
, *
fûe_∑th
, *
èbÀ_«me
);

110 #ifde‡
__˝lu•lus


	@libs/qid/include/qcloud_gen_apirequest.h

9 #i‚de‡
QCLOUD_GEN_APIREQUEST_H_


10 
	#QCLOUD_GEN_APIREQUEST_H_


	)

12 
	~"q˛oud.h
"

13 
	~"comm_hdr.h
"

15 
	#JSON_STR_LOCAL_SERVICE
 "loˇl_£rvi˚s"

	)

16 
	#JSON_STR_LOCAL_USERS
 "loˇl_u£rs"

	)

17 
	#JSON_STR_DEVICE_INFO
 "öfo"

	)

18 
	#JSON_STR_PUBLISHED_ACCESS_CODE
 "ac˚ss_code"

	)

19 
	#JSON_STR_IPV4
 "ùv4"

	)

20 
	#JSON_STR_IPV6
 "ùv6"

	)

21 
	#JSON_STR_WAN_IPS
 "w™_ùs"

	)

22 
	#JSON_STR_LAN_IPS
 "œn_ùs"

	)

23 
	#JSON_STR_LAN_GATEWAY
 "œn_g©eway"

	)

25 
	#JSON_STR_PACKAGE_ID
 "∑ckage_id"

	)

26 
	#JSON_STR_PACKAGE_AUTHOR
 "auth‹"

	)

27 
	#JSON_STR_PACKAGE_CATEGORY
 "ˇãg‹y"

	)

28 
	#JSON_STR_PACKAGE_CURR_VERSION
 "cuºít_vîsi⁄"

	)

29 
	#JSON_STR_PACKAGE_NAME
 "«me"

	)

30 
	#JSON_STR_PACKAGE_DESC
 "des¸ùti⁄"

	)

31 
	#JSON_STR_PACKAGE_LANG_EN_US
 "í_US"

	)

32 
	#JSON_STR_PACKAGE_CNT_SUM
 "cou¡î_sum"

	)

33 
	#JSON_STR_PACKAGE_CNT_DOWNLOADED
 "dow∆ﬂded"

	)

34 
	#JSON_STR_PACKAGE_CNT_UPDATED
 "upd©ed"

	)

35 
	#JSON_STR_PACKAGE_CNT_UNINSTALLED
 "unö°ÆÀd"

	)

36 
	#JSON_STR_PACKAGE_CNT_INSTALLED
 "ö°ÆÀd"

	)

39 #ifde‡
__˝lu•lus


43 
gíî©e_ﬂuth_ªque°
(* 
gø¡_ty≥
, * 
˛õ¡_id
,

44 * 
˛õ¡_£¸ë
, * 
qid
,

45 * 
∑sswd
, *
msg_buff
, 
size_t
 
buff_size
 );

47 
gíî©e_devi˚_öfo_roŸ
(
q˛oud_°
 *
˘x
, *
devi˚_«me
,

48 *
msg_buff
, 
size_t
 
buff_size
);

50 
js⁄_∑r£
(*
ª•
, 
key_∑ú_°
 *
íåy_li°
, 
size_t
 
num_li°
);

52 
gíî©e_devi˚_loˇl_u£r_°r
(* 
ªt
,

53 
size_t
 
ªt_size
,

54 ** 
u£rs
,

55 
u£r_cou¡
);

57 
gíî©e_devi˚_£rvi˚_p‹t_°r
(* 
ªt
,

58 
size_t
 
ªt_size
,

59 
m˙_£rvi˚_p‹t
 *
p‹t_li°
,

60 
num_£rvc
);

62 
gíî©e_devi˚_loˇl_£rvi˚_°r
(* 
ªt
,

63 
size_t
 
ªt_size
,

64 
m˙_ddns_publish_°
 *
£rvc_li°
,

65 
num_£rvc
);

67 
gíî©e_ddns_£rvi˚_°r
(
q˛oud_°
 *
˘x
, * 
ªt
, 
size_t
 
size
,

68 
√ed_devi˚_id
);

70 
∑r£_js⁄_q˛oud_dóÀr_li°
(*
ª•
, * 
p‹t_ty≥
,

71 
URL_T
 **
ªtu∫ed_li°
, 
size_t
 *
cou¡
);

73 
∑r£_js⁄_q˛oud_devi˚_öfo
(*
ª•
, 
q«p_dev_öfo
 **
devc_öfo
, 
size_t
* 
li°_size
);

75 
gíî©e_p‹t_ã°_°r
(
q˛oud_°
 *
˘x
, * 
ªt
, 
size_t
 
size
,

76 * 
uæ
);

78 
∑r£_exã∫Æ_ù
(* 
ª•
, * 
exã∫Æ_ù
, 
size_t
 
ù_Àn
);

80 #ifde‡
__˝lu•lus


	@libs/qid/include/qcloud_tool.h

7 #i‚de‡
QCLOUD_UTIL_H_


8 
	#QCLOUD_UTIL_H_


	)

10 
	#QCLOUD_HOST_LEN
 (256)

	)

21 
q˛oud_toﬁ_gë_ho°
(* 
£rvî_«me
, *
£rvî_ho°
);

	@libs/qid/include/qid_api.h

1 #i‚de‡
QID_API_H_


2 
	#QID_API_H_


	)

4 
	~"q˛oud.h
"

6 #ifde‡
__˝lu•lus


21 
q«p_id_is_devi˚_«me_avaûabÀ
(
q˛oud_°
 *
˘x
, *
devi˚_«me
);

36 
q«p_id_upd©e_devi˚_«me
(
q˛oud_°
 *
˘x
, *
«me
);

52 
q«p_id_signö
 (
q˛oud_°
 *
˘x
, *
qid
, *
∑sswd
);

66 
q«p_id_böd_devi˚
 (
q˛oud_°
 *
˘x
, * 
devi˚_«me
);

78 
q«p_id_unböd_devi˚
 (
q˛oud_°
 *
˘x
);

80 #ifde‡
__˝lu•lus


	@libs/qid/include/qid_httpc.h

8 #i‚de‡
QID_HTTPC_H_


9 
	#QID_HTTPC_H_


	)

11 
	~"qid_≠i.h
"

12 
	~"m˙_≠i.h
"

13 
	~"qid_°ru˘.h
"

15 
	#QID_HTTPC_FLAG_NONE
 0x00000000

	)

16 
	#QID_HTTPC_FLAG_AUTH
 0x00000001

17 
	#QID_HTTPC_FLAG_PROXY
 0x00000002

18 
	#QID_HTTPC_FLAG_CHECK_SUM
 0x00000004

19 
	#QID_HTTPC_FLAG_REQUEST
 0x00000008

20 
	#QID_HTTPC_FLAG_APP_AUTH
 0X00000010

21 

	)

22 
	#QID_HTTPC_FLAG_DDNS
 (0x0100|
QID_HTTPC_FLAG_REQUEST
)

	)

23 
	#QID_HTTPC_FLAG_CLOUDLINK
 (0x0200|
QID_HTTPC_FLAG_REQUEST
)

	)

24 
	#QID_HTTPC_FLAG_SERVICE
 (0x0300|
QID_HTTPC_FLAG_REQUEST
)

	)

25 
	#QID_HTTPC_FLAG_PORTMAPPING
 (0x0400|
QID_HTTPC_FLAG_REQUEST
)

	)

26 
	#QID_HTTPC_FLAG_USERS
 (0x0500|
QID_HTTPC_FLAG_REQUEST
)

	)

27 
	#QID_HTTPC_FLAG_ACCESSCODE
 (0x0600|
QID_HTTPC_FLAG_REQUEST
)

	)

28 
	#QID_HTTPC_FLAG_DEVICE
 (0x0700|
QID_HTTPC_FLAG_REQUEST
)

	)

30 
	#X_QNAP_MAC_HDR_FIELD
 "X-QNAP-MAC: %s"

	)

31 
	#X_QNAP_HW_SN_HDR_FIELD
 "X-QNAP-HW-SN: %s"

	)

32 
	#X_QNAP_MODEL_HDR_FIELD
 "X-QNAP-MODEL: %s"

	)

33 
	#X_QNAP_FW_VER_HDR_FIELD
 "X-QNAP-FW-VER: %s"

	)

34 
	#X_QNAP_APPID_HDR_FIELD
 "X-QNAP-APP-ID: %s"

	)

35 
	#X_QNAP_APP_VER_HDR_FIELD
 "X-QNAP-APP-VER: %s"

	)

36 
	#X_QNAP_TIME_HDR_FIELD
 "X-QNAP-TIME: %ld"

	)

37 
	#X_QNAP_CHECK_HDR_FIELD
 "X-QNAP-CHECK: %s"

	)

38 
	#OAUTH_HDR_FIELD
 "Auth‹iz©i⁄: Bóª∏%s"

	)

39 
	#X_QNAP_DEVICE_TOKEN_HDR_FIELD
 "X-QNAP-DEVICE-TOKEN: %s"

	)

40 
	#X_QNAP_SUID_HDR_FIELD
 "X-QNAP-SUID: %s"

	)

41 
	#X_QNAP_SUBAPP_ID
 "X-QNAP-SUBAPP-ID: %s"

	)

44 
	#HTTP_RESP_OK
 "{\"mesßge\": \"OK.\", \"code\": 0}"

	)

45 
	#HTTP_HASHED_RESP_OK
 (100)

	)

46 
	#AUTH_TOKEN_VALID_LIMIT
 (0.9)

	)

48 
	e_METHOD
{

49 
	mGET
 = 0,

50 
	mPOST
,

51 
	mPUT
,

52 
	mDELETE


53 }
	tHTTP_METHOD_E
;

55 
	eªque°_d©a_ty≥
{

56 
	me_ddns
 = 0,

57 
	me_˛oudlök
,

58 
	me_loˇl£rvi˚
,

59 
	me_£rvi˚_p‹t
,

60 
	me_u£rs
,

61 
	me_ac˚ss_code
,

62 
	me_devi˚_öfo
,

63 
	mnum_ªque°_d©a_ty≥


64 }
	gªque°_d©a_ty≥_E
;

66 #ifde‡
__˝lu•lus


75 
qid_hâpc_ªque°_ex
–
q˛oud_°
 *
˘x
, 
Êag
,

76 
HTTP_METHOD_E
 
mëhod
, *
uæ
, *
hódî
,

77 *
body
, **
ª•_size
, 
size_t
 
ª•_buf_size
);

79 
qid_hâpc_ªque°
–
q˛oud_°
 *
˘x
, 
Êag
,

80 
HTTP_METHOD_E
 
mëhod
, *
uæ
, *
d©a
, **
ª•
);

85 
qid_hâpc_ª‰esh_tokí
 (
q˛oud_°
 *
˘x
);

90 
qid_hâpc_ª‰esh_v1_tokí
 (
q˛oud_°
 *
˘x
);

92 
qid_hâpc_ﬂuth_h™dÀr
(
q˛oud_°
 *
˘x
, * 
ª•
, 
gø¡_ty≥
,

93 
key_∑ú_°
 *
ª•n_fõlds
, 
size_t
 
num_fõlds
);

95 
qid_hâpc_≠i_h™dÀr
(
q˛oud_°
 *
˘x
, * 
ª•
,

96 
key_∑ú_°
 *
ª•n_fõlds
, 
size_t
 
num_fõlds
);

98 
qid_hâpc_is_tokí_övÆid
–
q˛oud_°
 *
˘x
, * 
ª•
);

100 
qid_hâpc_is_tokí_expúed
();

103 #ifde‡
__˝lu•lus


	@libs/qid/include/qid_openssl_aes.h

8 #i‚de‡
QID_OPENSSL_AES_H_


9 
	#QID_OPENSSL_AES_H_


	)

12 
	~<›ís¶/evp.h
>

14 #ifde‡
__˝lu•lus


22 
qid_´s_öô
–*
key_d©a
, 
key_d©a_Àn
, *
ß…
,

23 
EVP_CIPHER_CTX
 *
e_˘x
, EVP_CIPHER_CTX *
d_˘x
);

28 
qid_´s_˛ón_up
(
EVP_CIPHER_CTX
 *
e
);

34 *
qid_´s_í¸y±
(
EVP_CIPHER_CTX
 *
e
, *
∂aöãxt
, *
Àn
);

39 *
qid_´s_de¸y±
(
EVP_CIPHER_CTX
 *
e
, *
cùhîãxt
, *
Àn
);

41 #ifde‡
__˝lu•lus


	@libs/qid/include/qid_status_code.h

8 #i‚de‡
QID_STATUS_CODE_H_


9 
	#QID_STATUS_CODE_H_


	)

11 
	#MAX_STATUS_CODE_LEN
 9

	)

13 
	#QID_SERVC_ACTION_ERROR
 10

	)

15 
	#QID_SERVC_RES_REQUIRED
 11

	)

17 
	#QID_SERVC_PARAM_TO_LONG
 12

	)

19 
	#QID_SERVC_PARAM_INVALID
 13

	)

21 
	#QID_SERVC_ERROR
 14

	)

23 
	#QID_SERVC_EXPIRED
 15

	)

25 
	#QID_SERVC_NOT_FOUND
 16

	)

27 
	#QID_SERVC_IS_USED
 17

	)

29 
	#QID_SERVC_AUTH_NOT
 32

	)

31 
	#QID_SERVC_PAGE_NOT_FOUND
 34

	)

33 
	#QID_SERVC_RATE_LIMIT_EXCEEDED
 88

	)

35 
	#QID_SERVC_INVALID_TOKEN
 89

	)

37 
	#QID_SERVC_OVER_CAPACITY
 130

	)

39 
	#QID_SERVC_INTERNAL_ERROR
 131

	)

41 
	#QID_SERVC_CANNOT_AUTH
 135

	)

43 
	#QID_SERVC_AUTH_DATA
 215

	)

46 
	#QID_SERCV_HTTP_OK
 200

	)

49 
	#QID_SERCV_HTTP_ERROR
 400

	)

	@libs/qid/include/qid_struct.h

7 #i‚de‡
QID_H_


8 
	#QID_H_


	)

10 
	~"comm_hdr.h
"

11 
	~"q˛oud_utû.h
"

12 
	~"qid_≠i.h
"

13 
	~"qid_sy°em.h
"

14 
	~"buff.h
"

16 
	#QID_STAT_CHECKED_OUT
 "0"

	)

17 
	#QID_STAT_MIGRATION
 "2"

	)

18 
	#QID_STAT_BIND
 "3"

	)

20 
	#OAUTH_GRANT_TYPE_CLIENT_CRED
 "˛õ¡_¸edítüls"

	)

21 
	#OAUTH_GRANT_TYPE_SIGNIN
 "∑ssw‹d"

	)

22 
	#OAUTH_GRANT_TYPE_REFRESH_TOKEN
 "ª‰esh_tokí"

	)

25 
	mOAUTH_GRANT_E_CLIENT_CRED
 = 0,

26 
	mOAUTH_GRANT_E_PASSWD
,

27 
	mOAUTH_GRANT_E_REFRESH_TOKEN


30 
	#MAGIC_LOG_NUMBER
 80682695

	)

34 
	mqid_u£r_code
 = 0,

35 
	mqid_u£r_msg
,

36 
	mqid_u£r_ªgi°îed_devi˚
,

37 
	mqid_u£r_quîy_°©us
 = 
qid_u£r_ªgi°îed_devi˚
,

38 
	mnum_qid_u£r_quîy_ª•


41 
	eqid_ﬂuth_ªque°


43 
	mqid_gø¡_ty≥
 = 0,

44 
	mqid_˛õ¡_id
,

45 
	mqid_˛õ¡_£¸ë
,

46 
	mqid_u£∫ame
,

47 
	mqid_∑ssw‹d
,

48 
	mnum_qid_ﬂuth_ªque°


51 
	eqid_ﬂuth_ª•⁄£


53 
	mqid_ﬂuth_îr‹
 = 0,

54 
	mqid_ﬂuth_îr‹_des¸ùti⁄
,

55 
	mqid_ﬂuth_ª•_ac˚ss_tokí
,

56 
	mqid_ﬂuth_ª•_tokí_ty≥
,

57 
	mqid_ﬂuth_ª•_expúes_ö
,

58 
	mqid_ﬂuth_ª•_ª‰esh_tokí
,

59 
	mnum_ﬂuth_ª•_qid_ﬂuth_ª•⁄£


62 
	eqid_gíîÆ_ª•⁄£


64 
	mqid_code
 = 0, 
	mqid_mesßge
, 
	mqid_ªsu…
, 
	mnum_qid_gíîÆ_ª•⁄£


67 
	eqid_check_ö


69 
	mqid_checkö_auth_tokí
 = 2, 
	mqid_checkö_devi˚_id
, 
	mnum_checkö_ª•_fõlds


72 
	eqid_devi˚_öfo_roŸ


74 
	möfo_roŸ_devi˚_«me
,

75 
	möfo_roŸ_des¸ùti⁄
,

76 
	möfo_roŸ_published_ac˚ss_code
,

77 
	mnum_devi˚_öfo_roŸ_fõlds


80 
	eqid_devi˚_öfo


82 
	mqid_devi˚_devi˚_ty≥
,

83 
	mqid_devi˚_modñ_«me
,

84 
	mqid_devi˚_hw_£rül_numbî
,

85 
	mqid_devi˚_fw_£rül_numbî
,

86 
	mqid_devi˚_mac_addªss
,

88 
	mqid_devi˚_ho°_«me
,

89 
	mqid_devi˚_fúmw¨e_vîsi⁄
,

90 
	mqid_devi˚_˛õ¡_agít_vîsi⁄
,

91 
	mqid_devi˚_œn_ù
,

92 
	mqid_devi˚_œn_g©eway
,

94 
	mqid_devi˚_w™_ù
,

95 
	mqid_devi˚_hdd_öfo
,

96 
	mqid_devi˚_íc_öfo
,

97 
	mnum_devi˚_fõlds


100 
	eqid_ªgi°î_öfo


102 
	mqid_ªgi°î_devi˚_id
 = 0,

103 
	mqid_ªgi°î_u£r_id
,

104 
	mqid_ªgi°î_devi˚_«me
,

105 
	mqid_ªgi°î_des¸ùti⁄
,

106 
	mqid_ªgi°î_devi˚_öfo
,

108 
	mqid_ªgi°î_devi˚_ty≥
,

109 
	mqid_ªgi°î_modñ_«me
,

110 
	mqid_ªgi°î_hw_£rül_numbî
,

111 
	mqid_ªgi°î_fw_£rül_numbî
,

112 
	mqid_ªgi°î_mac_addªss
,

114 
	mqid_ªgi°î_ho°_«me
,

115 
	mqid_ªgi°î_fúmw¨e_vîsi⁄
,

116 
	mqid_ªgi°î_˛õ¡_agít_vîsi⁄
,

117 
	mqid_ªgi°î_œn_ù
,

118 
	mqid_ªgi°î_œn_g©eway
,

120 
	mqid_ªgi°î_w™_ù
,

121 
	mqid_ªgi°î_¸óã_d©e
,

122 
	mqid_ªgi°î_upd©e_d©e
,

123 
	mqid_ªgi°î_°©us
,

124 
	mqid_ªgi°î_published_ac˚ss_code
,

126 
	mnum_qid_ªgi°î


129 
	eqid_upd©e_ª•⁄£


131 
	mqid_upd©e_≥riod
 = 4, 
	mqid_upd©e_push_msg_id
, 
	mqid_upd©e_push_msg


134 
	eqid_böd_devi˚_ª•⁄£


136 
	mqid_böd_code
 = 0, 
	mqid_böd_mesßge
, 
	mqid_böd_devi˚_id
,

137 
	mqid_böd_tokí
, 
	mqid_böd_ªsu…


140 
	emy˛oud«s


142 
	mmy˛oud«s_vlökid
 = 2

145 
	e_qid_°©_e


147 
	mQID_STAT_E_CHECKED_OUT
 = '0',

148 
	mQID_STAT_E_VALIDATING
 = '1',

149 
	mQID_STAT_E_MIGRATION
 = '2',

150 
	mQID_STAT_E_BIND
 = '3',

151 } 
	tQID_STAT_E
;

153 
	eù_°©us


155 
	mIPV4
 = 1,

156 
	mIPV6
,

157 
	mIP_PUBLIC
,

158 
	mIP_PRIVATE


161 
	#ERROR_TO_CHECKOUT
 (-9999)

	)

164 
	sq˛oud_°


168 
q«p_≠p_öfo
 
	m≠p_öfo
;

170 
	mqid_£rvc_ho°
[
MAX_QID_HOST_LEN
 + 1];

172 
	mm˙_£rvc_ho°
[
MAX_QID_HOST_LEN
 + 1];

174 
	mushî_£rvc_ho°
[
MAX_QID_HOST_LEN
 + 1];

176 
	mdóÀr_ù
[
MAX_QID_HOST_LEN
 + 1];

178 
	mqid
[
MAX_QID_LEN
 + 1];

180 
	mmac_°r
[
MAC_STR_LONG_LEN
 + 1];

182 
	mhw_¢
[
META_STR_LEN
 + 1];

184 
	msuid
[
META_STR_LEN
 + 1];

186 
	mmodñ
[
NAME_LEN
 + 1];

188 
	mauth_tokí
[
MAX_APPKEY_LEN
 + 1];

190 
	mª‰esh_tokí
[
MAX_APPKEY_LEN
 + 1];

192 
	mvÆid_≥riod
[
NAME_LEN
 + 1];

194 
time_t
 
	mtokí_œ°_upd©e_time
;

196 
	mfw_vî
[
VERSION_LEN
 + 1];

198 
	mdevi˚_«me
[
NAME_LEN
 + 1];

200 
	mdevi˚_id
[
DEVICE_ID_LEN
 + 1];

202 
	mdevi˚_tokí
[
MAX_APPKEY_LEN
 + 1];

204 
	mhâp_timeout
;

206 
uöt16_t
 
	mdóÀr_¥oxy_p‹t
;

208 * 
	m´s_íc_˘x
;

209 * 
	m´s_dec_˘x
;

212 
	mlog_Êag
;

214 
QNAP_LOG_T
 
	mlog_cb
;

216 
QCLOUD_STATUS_MSG
 
	mœ°_°©us
;

218 
buf_t
* 
	mhâp_ª•
;

221 
	mªböd_Êag
;

224 
	m≠p_tokí
[
MAX_APPKEY_LEN
 + 1];

226 
FILE
* 
	mqid_c⁄f_Â
;

227 
	mqid_c⁄f_buf
[
QID_CONF_BUFF_LEN
+1];

229 
	mœ°_evít_log
[
MAX_SYSTEM_CMD
+1];

232 
	#QID_WRITE_SYSTEM_VAR
(
DEST
, 
VAR
, 
LEN
, 
SET_F
, 
RET
) do{ \

233 if(
DEST
 && DEST !
VAR
){\

234 
	`°∫˝y
(
DEST
, 
VAR
, 
LEN
);\

235 
DEST
[
LEN
] = '\0'; \

237 
RET
 |
	`SET_F
(
VAR
);\

238 }0)

	)

240 #ifde‡
__˝lu•lus


244 
de¸y±_°r
(
q˛oud_°
 *
˘x
, *
°r_buff
, 
size_t
 
buff_size
);

245 * 
í¸y±_°r
(
q˛oud_°
 *
˘x
, *
§c
);

247 
q˛oud_ªlﬂd_c⁄fig
(
q˛oud_°
 *
˘x
);

248 
q«p_id_gë_devi˚_∑sswd
(
q˛oud_°
 *
˘x
, *
pwd_buff
,

249 
size_t
 
buff_Àn
);

251 
q˛oud_gë_°©us_code
(* 
code_°r
);

253 #ifde‡
__˝lu•lus


	@libs/qid/include/qid_system.h

6 #i‚de‡
QID_SYSTEM_H_


7 
	#QID_SYSTEM_H_


	)

9 
	~"c⁄°.h
"

11 
	#DDNS_DOMAIN_NAME_LEN
 (64)

	)

12 
	#DDNS_SERVER_NAME_LEN
 (64)

	)

13 
	#LAN_IP_LIST_LEN
 (512)

	)

14 
	#MAX_IP_NUM
 (8)

	)

15 
	#IP_VERSION_LEN
 (8)

	)

16 
	#IP_VERSION6
 "ù_v6"

	)

17 
	#IP_VERSION4
 "ù_v4"

	)

20 
	#QID_SYS_ENABLE_STR
 "E«bÀ"

	)

21 
	#QID_SYS_INIT_STR
 "Inô"

	)

22 
	#QID_SYS_DISABLE_STR
 "DißbÀ"

	)

23 
	#QID_SYS_TRUE_STR
 "TRUE"

	)

24 
	#QID_SYS_FALSE_STR
 "FALSE"

	)

26 
	#QID_SYS_OAUTH_CLIENT_ID
 "s6BhdRkqt3"

	)

27 
	#QID_SYS_OAUTH_CLIENT_SECRET
 "7FjÂ0ZBr1KtDRbnfVdmIw"

	)

29 
	#QNAP_EVENT_TYPE_INFO
 0

	)

30 
	#QNAP_EVENT_TYPE_WARN
 1

	)

31 
	#QNAP_EVENT_TYPE_ERROR
 2

	)

33 
	#MAX_SYSTEM_CMD
 (512)

	)

35 
	#TMP_SUID_PATH
 "/tmp/tmp_suid"

	)

36 
	#TMP_APP_TOKEN_PATH
 "/tmp/tmp_≠p_tokí"

	)

39 
	#GET_GATEWAY_IP
 "/sbö/rouã -ê| /bö/gª∞%s| /bö/gª∞deÁu… | /bö/cuà-d ' ' -‡10 | /bö/gª∞'[0-9]*\\.[0-9]*\\.[0-9]*\\.[0-9]*'"

	)

40 
	#GET_LOCAL_IP
 "/sbö/ifc⁄figÉth%d 2> /dev//nuŒ | sed -¿'/öë /{s/.*addr://;s/ .*//;p}'| /bö/gª∞'[0-9]*\\.[0-9]*\\.[0-9]*\\.[0-9]*'"

	)

41 
	#GET_HW_SERIAL_NUM
 "/sbö/gë_hw¢"

	)

42 
	#GET_SUID
 "/sbö/gë_suid"

	)

43 
	#CAT
 "/bö/ˇà%s"

	)

44 
	#ECHO_TO_TMP
 "%†> %†"

	)

45 
	#GET_MAC_HAL
 "/sbö/gëcfg MACÉth0 -‡/v¨/MacAddªss"

	)

46 
	#GET_ETH1_MAC_HAL
 "/sbö/gëcfg MACÉth1 -‡/v¨/MacAddªss"

	)

48 
	#GET_DDNS_ENABLE
 "/sbö/gëcfg -‡/ëc/c⁄fig/q«pddns.c⁄‡\"QNAP DDNS Sîvi˚\" \"E«bÀ\" -d \"\""

	)

49 
	#SET_DDNS_STATUS
 "/sbö/£tcfg -‡/ëc/c⁄fig/q«pddns.c⁄‡\"QNAP DDNS Sîvi˚\" \"E«bÀ\" %s"

	)

51 
	#GET_DDNS_ENABLE_VAR
 "/sbö/gëcfg -‡/v¨/q«pddns.c⁄‡\"QNAP DDNS Sîvi˚\" \"E«bÀ\" -d \"\""

	)

52 
	#SET_DDNS_STATUS_VAR
 "/sbö/£tcfg -‡/v¨/q«pddns.c⁄‡\"QNAP DDNS Sîvi˚\" \"E«bÀ\" %s"

	)

53 
	#SET_WAN_IP_DDNS_VAR
 "/sbö/£tcfg -‡/v¨/q«pddns.c⁄‡\"QNAP DDNS Sîvi˚\" \"W™ IP\" %s"

	)

54 
	#GET_WAN_IP_DDNS_VAR
 "/sbö/gëcfg -‡/v¨/q«pddns.c⁄‡\"QNAP DDNS Sîvi˚\" \"W™ IP\" -d \"\""

	)

56 
	#SET_DDNS_HOST_NAME
 "/sbö/£tcfg -‡/ëc/c⁄fig/q«pddns.c⁄‡\"QNAP DDNS Sîvi˚\" \"Ho° Name\" \"%s\""

	)

57 
	#GET_DDNS_HOST_NAME
 "/sbö/gëcfg -‡/ëc/c⁄fig/q«pddns.c⁄‡\"QNAP DDNS Sîvi˚\" \"Ho° Name\" -d \"\""

	)

58 
	#SET_DDNS_SERVER_HOST
 "/sbö/£tcfg -‡/ëc/c⁄fig/q«pddns.c⁄‡\"QNAP DDNS Sîvi˚\" \"Domaö NamêSîvî\" \"%s\""

	)

59 
	#GET_DDNS_SERVER_HOST
 "/sbö/gëcfg -‡/ëc/c⁄fig/q«pddns.c⁄‡\"QNAP DDNS Sîvi˚\" \"Domaö NamêSîvî\" -d \"\""

	)

62 
	#GET_QID_SERVER_HOST
 "/sbö/gëcfg -‡/ëc/c⁄fig/qid.c⁄‡\"QNAP ID Sîvi˚\" \"HOST\" -d \"\""

	)

63 
	#GET_MCN_SERVER_HOST
 "/sbö/gëcfg -‡/ëc/c⁄fig/qid.c⁄‡\"QNAP ID Sîvi˚\" \"MCN_HOST\" -d \"\""

	)

64 
	#GET_USHER_SERVER_HOST
 "/sbö/gëcfg -‡/ëc/c⁄fig/qid.c⁄‡\"QNAP ID Sîvi˚\" \"USHER_HOST\" -d \"\""

	)

65 
	#GET_DEALER_IP
 "/sbö/gëcfg -‡/ëc/c⁄fig/qid.c⁄‡\"QNAP ID Sîvi˚\" \"DEALER_IP\" -d \"\""

	)

66 
	#SET_DEALER_IP
 "/sbö/£tcfg -‡/ëc/c⁄fig/qid.c⁄‡\"QNAP ID Sîvi˚\" \"DEALER_IP\" \"%s\""

	)

67 
	#GET_DEALER_PROXY_PORT
 "/sbö/gëcfg -‡/ëc/c⁄fig/qid.c⁄‡\"QNAP ID Sîvi˚\" \"DEALER_PROXY_PORT\" -d \"\""

	)

68 
	#SET_DEALER_PROXY_PORT
 "/sbö/£tcfg -‡/ëc/c⁄fig/qid.c⁄‡\"QNAP ID Sîvi˚\" \"DEALER_PROXY_PORT\" \"%s\""

	)

69 
	#SET_QID_ID
 "/sbö/£tcfg -‡/ëc/c⁄fig/qid.c⁄‡\"QNAP ID Sîvi˚\" \"QID\" \"%s\""

	)

70 
	#GET_QID_ID
 "/sbö/gëcfg -‡/ëc/c⁄fig/qid.c⁄‡\"QNAP ID Sîvi˚\" \"QID\" -d \"\""

	)

71 
	#SET_QID_AUTH_TOKEN
 "/sbö/£tcfg -‡/ëc/c⁄fig/qid.c⁄‡\"QNAP ID Sîvi˚\" \"AUTH TOKEN\" \"%s\""

	)

72 
	#GET_QID_AUTH_TOKEN
 "/sbö/gëcfg -‡/ëc/c⁄fig/qid.c⁄‡\"QNAP ID Sîvi˚\" \"AUTH TOKEN\" -d \"\""

	)

73 
	#SET_QID_REFRESH_TOKEN
 "/sbö/£tcfg -‡/ëc/c⁄fig/qid.c⁄‡\"QNAP ID Sîvi˚\" \"REFRESH_TOKEN\" \"%s\""

	)

74 
	#GET_QID_REFRESH_TOKEN
 "/sbö/gëcfg -‡/ëc/c⁄fig/qid.c⁄‡\"QNAP ID Sîvi˚\" \"REFRESH_TOKEN\" -d \"\""

	)

75 
	#SET_QID_VALID_PERIOD
 "/sbö/£tcfg -‡/ëc/c⁄fig/qid.c⁄‡\"QNAP ID Sîvi˚\" \"TOKEN_VALID_PERIOD\" \"%s\""

	)

76 
	#GET_QID_VALID_PERIOD
 "/sbö/gëcfg -‡/ëc/c⁄fig/qid.c⁄‡\"QNAP ID Sîvi˚\" \"TOKEN_VALID_PERIOD\" -d \"\""

	)

77 
	#SET_TOKEN_UPDATE_TIME
 "/sbö/£tcfg -‡/ëc/c⁄fig/qid.c⁄‡\"QNAP ID Sîvi˚\" \"LAST_TOKEN_UPDATE\" \"%s\""

	)

78 
	#GET_TOKEN_UPDATE_TIME
 "/sbö/gëcfg -‡/ëc/c⁄fig/qid.c⁄‡\"QNAP ID Sîvi˚\" \"LAST_TOKEN_UPDATE\" -d \"\""

	)

79 
	#SET_DEVICE_NAME
 "/sbö/£tcfg -‡/ëc/c⁄fig/qid.c⁄‡\"QNAP ID Sîvi˚\" \"DEVICE NAME\" \"%s\""

	)

80 
	#GET_DEVICE_NAME
 "/sbö/gëcfg -‡/ëc/c⁄fig/qid.c⁄‡\"QNAP ID Sîvi˚\" \"DEVICE NAME\" -d \"\""

	)

81 
	#SET_QID_STATUS
 "/sbö/£tcfg -‡/ëc/c⁄fig/qid.c⁄‡\"QNAP ID Sîvi˚\" \"STATUS\" \"%s\""

	)

82 
	#GET_QID_STATUS
 "/sbö/gëcfg -‡/ëc/c⁄fig/qid.c⁄‡\"QNAP ID Sîvi˚\" \"STATUS\" -d \"0\""

	)

83 
	#SET_DEVICE_TOKEN
 "/sbö/£tcfg -‡/ëc/c⁄fig/qid.c⁄‡\"QNAP ID Sîvi˚\" \"DEVICE_TOKEN\" \"%s\""

	)

84 
	#GET_DEVICE_TOKEN
 "/sbö/gëcfg -‡/ëc/c⁄fig/qid.c⁄‡\"QNAP ID Sîvi˚\" \"DEVICE_TOKEN\" -d \"0\""

	)

86 
	#RESTART_PORTER
 "/ëc/rc.d/S99p‹ã∏ª°¨à&> /dev/nuŒ"

	)

88 
	#GET_QID_PROTO
 "/sbö/gëcfg -‡/ëc/c⁄fig/qid.c⁄‡\"QNAP ID Sîvi˚\" \"PROTO\" -d \"hâps\""

	)

90 
	#SET_QID_DEVICE_ID
 "/sbö/£tcfg -‡/ëc/c⁄fig/qid.c⁄‡\"QNAP ID Sîvi˚\" \"DEVICE ID\" \"%s\""

	)

91 
	#GET_QID_DEVICE_ID
 "/sbö/gëcfg -‡/ëc/c⁄fig/qid.c⁄‡\"QNAP ID Sîvi˚\" \"DEVICE ID\" -d \"\""

	)

93 
	#GET_QID_DDNS_STATUS
 "/sbö/gëcfg -‡/ëc/c⁄fig/qid.c⁄‡\"QNAP DDNS Sîvi˚\" \"STATUS\" -d \"\""

	)

94 
	#SET_QID_DDNS_STATUS
 "/sbö/£tcfg -‡/ëc/c⁄fig/qid.c⁄‡\"QNAP DDNS Sîvi˚\" \"STATUS\" \"%s\""

	)

96 
	#SET_CONF_SUID_NUM
 "/sbö/£tcfg -‡/ëc/c⁄fig/qid.c⁄‡\"QNAP ID Sîvi˚\" \"SUID\" \"%s\""

	)

97 
	#GET_CONF_SUID_NUM
 "/sbö/gëcfg -‡/ëc/c⁄fig/qid.c⁄‡\"QNAP ID Sîvi˚\" \"SUID\" -d \"\""

	)

99 
	#GET_CURL_LOG_FLAG
 "/sbö/gëcfg -‡/ëc/c⁄fig/qid.c⁄‡\"QNAP ID Sîvi˚\" \"HTTP_FLAG\" -d \"\""

	)

102 
	#GET_MODEL_CMD
 "/sbö/gë_di•œy_«me"

	)

103 
	#GET_FW_VER_CMD
 "/sbö/gëcfg -‡/ëc/deÁu…_c⁄fig/uLöux.c⁄‡Sy°em Vîsi⁄ -d \"4.0.1\""

	)

104 
	#GET_TIME_ZONE
 "/sbö/gëcfg -‡/ëc/c⁄fig/uLöux.c⁄‡Sy°em \"TimêZ⁄e\" -d \"GMT\""

	)

106 
	#GET_GATEWAY_IF
 "√t°© -∫ |awk '{if($1==\"0.0.0.0\"&&$4==\"UG\"Ë¥öà$8}'"

	)

107 
	#GET_GEO_IP_DOC
 "/u§/sbö/gë_geoöfo.sh"

	)

108 
	#GEO_IP_JSON_DOC
 "/tmp/geoù.js⁄"

	)

109 
	#GEO_IP_XML_DOC
 "/tmp/geoù.xml"

	)

112 
	#GET_ISO_DATE
 "/bö/d©ê\"+%%Y-%%m-%%dT%%H:%%M:%%S.%%6N\""

	)

115 
	#HASH_PATH
 "/tmp/qid_hash.c⁄f"

	)

116 
	#GET_QID_REQ_HASH
 "/bö/ˇà%s_ªque°_hash_%†2>/dev/nuŒ"

	)

117 
	#SET_QID_REQ_HASH
 "/bö/echÿ-¿'%s' > %s_ªque°_hash_%s"

	)

118 
	#GET_QID_REQ_HASH_TTL
 "/bö/ˇà%s_ªque°_hash_âl_%†2>/dev/nuŒ"

	)

119 
	#SET_QID_REQ_HASH_TTL
 "/bö/echÿ-¿'%d' > %s_ªque°_hash_âl_%s"

	)

120 
	#ISFILE_EXIST
 "i‡[ -‡%†] ;ÅhíÉchÿ\"exi°\" ; fi"

	)

122 
	#QID_CONF_PATH
 "/ëc/c⁄fig/qid.c⁄f"

	)

126 
	mqidDB_qid
 = 0,

127 
	mqidDB_loˇl_«me
,

128 
	mnum_qidDB


133 
	mqid_c⁄f_ddns_œ°_check_time
 = 0,

134 
	mqid_c⁄f_ddns_œ°_upd©e_time
,

135 
	mqid_c⁄f_ddns_œ°_upd©e_°©us_code
,

136 
	mqid_c⁄f_ddns_√xt_check_time


139 
	s_œn_ù_öfo


141 
	mœn_ù_cou¡
;

142 
	mœn_ù
[
MAX_IP_NUM
][
INET6_ADDRSTRLEN
];

143 
	mœn_ù_vîsi⁄
[
MAX_IP_NUM
][
IP_VERSION_LEN
];

144 
	möãrÁ˚
[
MAX_IP_NUM
][
IP_VERSION_LEN
];

145 
	mœn_gw_öãrÁ˚
[
IP_VERSION_LEN
];

150 
	mœn_ù_li°
[
LAN_IP_LIST_LEN
+1];

151 
	mœn_gw
[
IP_STR_LEN
+1];

152 }
	tœn_ù_öfo_°
;

154 #ifde‡
__˝lu•lus


158 
qid_sys_gë_loˇl_ù_li°
(
œn_ù_öfo_°
 *
œn_öfo
);

160 
qid_sys_gë_hw_£rül_numbî
(*
£rül_num
, 
size_t
 
buff_Àn
);

162 
qid_sys_gë_suid
(*
suid
, 
size_t
 
buff_Àn
);

164 
qid_sys_gë_li˚n£_övÆid
(* 
li˚n£_övÆid
, 
size_t
 
buff_Àn
);

166 
qid_sys_gë_c⁄f_suid
(*
suid
, 
size_t
 
buff_Àn
);

168 
qid_sys_gë_mac
(*
mac_°r
, 
size_t
 
buff_Àn
);

170 
qid_sys_gë_«ssid
–*
«ssid
, 
size_t
 
buff_Àn
);

174 
	#QNAP_SYS_EVENT_LOG
(
Lv
, 
Fmt
, 
Arg
...)do{ \

175 
msg
[256]; \

176 
	`¢¥ötf
(
msg
, (msg), \

177 "LD_LIBRARY_PATH=/u§:/u§/lib /sbö/log_toﬁ -à%d -®\"" 
Fmt
 "\"", 
Lv
, ##
Arg
);\

178 
	`qid_sys_£nd_evít_log
(
Lv
, 
msg
); \

179 }0)

	)

181 
qid_£nd_sys_evít_log
(
Àvñ
, *
¥ev_msg
, * 
msg
);

182 
qid_sys_evít_msg
();

184 
qid_sys_¸óã_qid_c⁄f
();

186 
qid_sys_£t_qid
(*
qid
);

188 
qid_sys_gë_qid
(*
qid
, 
size_t
 
buff_Àn
);

190 
qid_sys_£t_auth_tokí
(*
qid_auth_tokí
);

192 
qid_sys_gë_auth_tokí
(*
tokí
, 
size_t
 
buff_Àn
);

194 
qid_sys_gë_modñ
(*
mode
, 
size_t
 
buff_Àn
);

196 
qid_sys_gë_fw_vî
(*
fw_vî
, 
size_t
 
buff_Àn
);

198 
qid_sys_gë_£rvî_ho°
(*
ho°
, 
size_t
 
buff_Àn
);

200 
qid_sys_gë_m˙_£rvî_ho°
(*
ho°
, 
size_t
 
buff_Àn
);

202 
qid_sys_gë_ushî_£rvî_ho°
(*
ho°
, 
size_t
 
buff_Àn
);

204 
qid_sys_gë_dóÀr_ù
(*
ù
, 
size_t
 
buff_Àn
);

206 
qid_sys_£t_dóÀr_ù
(*
ù
);

208 
qid_sys_gë_dóÀr_¥oxy_p‹t
(*
p‹t
, 
size_t
 
buff_Àn
);

210 
qid_sys_£t_dóÀr_¥oxy_p‹t
(
uöt16_t
 
p‹t
);

212 
qid_sys_£t_devi˚_«me
(*
«me
);

214 
qid_sys_gë_devi˚_«me
 (*
«me
, 
size_t
 
buff_Àn
);

216 
qid_sys_gë_devi˚_ty≥
(*
ty≥
, 
size_t
 
buff_Àn
);

218 
qid_sys_gë_time_z⁄e
(*
tz
, 
size_t
 
buff_Àn
);

220 
qid_sys_gë_qid_°©us
(*
°©us
, 
size_t
 
buff_Àn
);

222 
qid_sys_£t_qid_°©us
(*
°©us
);

224 
qid_sys_£t_qid_devi˚_id
(*
did
);

226 
qid_sys_gë_qid_devi˚_id
(*
did
, 
size_t
 
buff_Àn
);

228 
qid_sys_£t_ddns_°©us
(*
°©us
);

230 
qid_sys_gë_ddns_°©us
(*
°©us
, 
size_t
 
buff_Àn
);

232 
qid_sys_íabÀ_deÁu…_RA_£rvi˚s
();

234 
qid_sys_£t_ª‰esh_tokí
(*
ª‰esh_tokí
);

236 
qid_sys_gë_ª‰esh_tokí
(*
ª‰esh_tokí
, 
size_t
 
buff_Àn
);

238 
qid_sys_gë_tokí_vÆid_≥riod
(*
vÆid_≥riod
, 
size_t
 
buff_Àn
);

240 
qid_sys_£t_tokí_vÆid_≥riod
(*
vÆid_≥riod
);

242 
qid_sys_gë_g©eway_ù
(* 
œn_gw_ù
, * 
œn_gw_öãrÁ˚
);

244 
qid_sys_gë_js⁄_d©e
(* 
d©e_°r
);

246 
qid_sys_£t_devi˚_tokí
(*
devi˚_tokí
);

248 
qid_sys_gë_devi˚_tokí
(*
devi˚_tokí
, 
size_t
 
buff_Àn
);

250 
qid_sys_gë_œ°_upd©e_tokí_time
(*
©
, 
size_t
 
buff_Àn
);

252 
qid_sys_£t_œ°_upd©e_tokí_time
(*
©
);

254 
qid_sys_£t_hash_°rög
(* 
hash_ty≥
, * 
öput
);

256 
qid_sys_gë_hash_°rög
(* 
ªque°_ty≥
, * 
ouçut
, 
size_t
 
buff_Àn
);

258 
qid_sys_£t_hash_°rög_âl
(* 
hash_ty≥
, 
≥riod
);

260 
qid_sys_gë_hash_°rög_âl
(* 
ªque°_ty≥
, * 
ouçut
, 
size_t
 
buff_Àn
);

262 
qid_sys_gë_cuæ_log_Êag
(* 
cuæ_Êag
, 
size_t
 
buff_Àn
);

264 
qid_sys_gë_q˛oud_≠i_¥Ÿo
(*
¥Ÿo
, 
size_t
 
buff_Àn
);

266 
qid_sys_£t_q˛oud_vî
(*
vîsi⁄
);

268 
qid_sys_gë_q˛oud_vî
(*
vîsi⁄
, 
size_t
 
buff_Àn
);

270 
qid_sys_£t_∑ckage_li°_°rög
(* 
∑ckage_li°
);

272 
qid_sys_£t_≠p_tokí
(*
vÆue
);

274 
qid_sys_gë_≠p_tokí
(*
vÆue
, 
size_t
 
buff_Àn
);

276 
qid_sys_gë_geo_ù_js⁄
(*
js⁄_doc
, 
size_t
 
buff_Àn
);

278 
qid_c⁄f_gë_íåy
(* 
qid_c⁄f_buf
,* 
£˘i⁄
, * 
key
, * 
vÆue
, 
size_t
 
vÆue_Àn
);

280 
qid_sys_ª°¨t_p‹ãr
();

282 
qid_sys_nvøm_commô
();

284 #ifde‡
__˝lu•lus


	@libs/qid/mcn_api.c

7 
	~<î∫o.h
>

8 
	~<sys/ty≥s.h
>

9 
	~<ªgex.h
>

11 
	~<sys/ty≥s.h
>

12 
	~<sys/°©.h
>

13 
	~<uni°d.h
>

15 
	~<f˙é.h
>

17 
	~"°d_hdr.h
"

18 
	~"comm_hdr.h
"

19 
	~"m˙_≠i.h
"

21 
	~"q˛oud_utû.h
"

22 
	~"qid_°ru˘.h
"

23 
	~"qid_sy°em.h
"

25 
	~"qid_hâpc.h
"

26 
	~"qid_°©us_code.h
"

27 
	~"q˛oud_gí_≠úeque°.h
"

29 
	#MCN_API_VERSION
 "v1.1"

	)

30 
	#UPDATE_PERIOD_MAX
 24*60*60

31 
	#UPDATE_PERIOD_MIN
 60

32 
	#UPDATE_PERIOD_DEF
 60*60

33 
	#UPDATE_FAILED_NETWORK
 5*60

34 
	#UPDATE_FAILED_RETRY
 60*60

35 
	#MCN_PUBLISHED_UPDATE
 "/sbö/qddns_upd©ê> /dev/nuŒ 2>&1 &"

	)

37 
	#MYCLOUD_GET_SHARED_LINK_URL
 "%s/%s/"

	)

38 
	#MYCLOUD_NOTIFY_SHARED_LINK_URL
 "%s/%s/"

	)

40 
	$my˛oudNAS_devi˚_upd©e_öfo
(
q˛oud_°
 *
˘x
, 
time_t
 *
ªp‹t_≥riod
)

43 
ªt
 = 
ERR_NULL_POINTER
;

44 
Êag
 = 0x0;

45 i‡(!
˘x
 || !
ªp‹t_≥riod
) {

46 
exô
;

49 
key_∑ú_°
 
ª•n_fõlds
[] = { { "code", "\0" },

55 
msg_buff
[
PAYLOAD_LEN_MAX
 + 1];

56 * 
ª•
 = 
NULL
;

57 
uri
[
TMP_BUFF_LEN
 + 1];

59 *
ªp‹t_≥riod
 = 
UPDATE_PERIOD_DEF
;

60 
	`qid_sys_gë_qid_devi˚_id
(
˘x
->
devi˚_id
, 
DEVICE_ID_LEN
);

61 
	`q«p_id_gë_devi˚_«me
(
˘x
,˘x->
devi˚_«me
, 
NAME_LEN
);

62 if(0 =
	`°æí
(
˘x
->
devi˚_id
)){

63 
exô
;

66 
	`¢¥ötf
(
uri
, 
TMP_BUFF_LEN
, "%s/%s/devi˚/%s", 
˘x
->
qid_£rvc_ho°
,

67 
QID_API_VERSION
, 
˘x
->
devi˚_id
);

68 
ªt
 = 
	`gíî©e_devi˚_öfo_roŸ
(
˘x
, ctx->
devi˚_«me
, 
msg_buff
, 
PAYLOAD_LEN_MAX
);

69 i‡(
ªt
 !
NO_ERROR
) {

70 
exô
;

72 
	`q˛oud_ªlﬂd_c⁄fig
(
˘x
);

73 if(0 =
	`°æí
(
˘x
->
devi˚_id
Ë|| 0 =°æí(˘x->
devi˚_tokí
)

74 || 0 =
	`°æí
(
˘x
->
devi˚_«me
Ë|| 0 =°æí(˘x->
auth_tokí
)){

75 
ªt
 = 
NO_ERROR
;

76 
	`QNAP_LOG_DEBUG_NL
("devi˚_id:%s", 
˘x
->
devi˚_id
);

77 
	`QNAP_LOG_DEBUG_NL
("devi˚_tokí:%s", 
˘x
->
devi˚_tokí
);

78 
	`QNAP_LOG_DEBUG_NL
("devi˚_«me:%s", 
˘x
->
devi˚_«me
);

79 
	`QNAP_LOG_DEBUG_NL
("auth_tokí:%s", 
˘x
->
auth_tokí
);

80 
exô
;

83 
Êag
 = 
QID_HTTPC_FLAG_AUTH
 | 
QID_HTTPC_FLAG_DEVICE
;

84 
ªt
 = 
	`qid_hâpc_ªque°_ex
(
˘x
, 
Êag
, 
PUT
, 
uri
, 
NULL
, 
msg_buff
, &
ª•
, 
PAYLOAD_LEN_MAX
);

86 i‡(
ªt
 < 
NO_ERROR
) {

87 
exô
;

92 
ªt
 = 
	`qid_hâpc_≠i_h™dÀr
(
˘x
, 
ª•
, 
ª•n_fõlds
, 
	`NUM_KEY_PAIR
(respn_fields));

94 
exô
:

95 i‡(
ªt
 !
NO_ERROR
) {

96 
	`QNAP_LOG_ERR_NL
("%s", 
	`gë_°ªº‹
(
ªt
));

100 i‡(
ª•n_fõlds
[
qid_upd©e_≥riod
].
vÆue
[0] != '\0'){

104 
ªt
 = 
	`©oi
(
ª•n_fõlds
[
qid_upd©e_≥riod
].
vÆue
);

105 if(
ªt
 <
UPDATE_PERIOD_MAX
 &&Ñë >
UPDATE_PERIOD_MIN
){

106 *
ªp‹t_≥riod
 = 
ªt
;

109 
ªt
 = 
NO_ERROR
;

112  
ªt
;

113 
	}
}

115 
	$my˛oudNAS_devi˚_gë_öfo
(
q˛oud_°
 *
˘x
)

117  
	`q˛oud_check_bödög_°©us
(
˘x
);

118 
	}
}

120 
	$my˛oudNAS_£t_ddns_°©us
(
q˛oud_°
 *
˘x
, 
a˘ivü˘i⁄
)

123 
ªt
 = 
ERR_NULL_POINTER
;

126 
Êag
 = 0;

129 
îr_msg
[
MAX_SYSTEM_CMD
+1];

131 
cuºít_°©us
[
TMP_BUFF_LEN
 + 1];

132 
ddns_°©us
 = 
MCN_SERVC_DISABLE
;

133 
uri
[
TMP_BUFF_LEN
 + 1];

134 
msg
[
PAYLOAD_LEN_MAX
 + 1];

135 
ãmp_°r
[
PAYLOAD_LEN_MAX
 + 1];

136 * 
ª•
 = 
NULL
;

137 
key_∑ú_°
 
ª•n_fõlds
[] =

139 
°©us
[
STATUS_FLAG_LEN
+1];

140 
buff
[
URL_STR_LEN
+1];

141 
¥Ÿo
[
PROTO_STR_LEN
+1];

142 
QCLOUD_STATUS_MSG
 *
œ°_îr‹
;

145 i‡(!
˘x
) {

146 
exô
;

150 
ddns_°©us
 = 
	`my˛oudNAS_gë_ddns_°©us
(
˘x
);

153 
	`qid_sys_gë_qid_°©us
(
msg
, 
PAYLOAD_LEN_MAX
);

156 
	`qid_sys_gë_devi˚_«me
(
˘x
->
devi˚_«me
, 
NAME_LEN
);

159 
	`qid_sys_gë_qid_devi˚_id
(
˘x
->
devi˚_id
, 
DEVICE_ID_LEN
);

162 i‡(
	`°æí
(
˘x
->
devi˚_id
Ë=0 || 
msg
[0] !
QID_STAT_E_BIND
) {

163 
	`QNAP_LOG_DEBUG_NL
("°©us:%s, devi˚_id:%s", 
msg
, 
˘x
->
devi˚_id
);

164 
ªt
 = 
QID_ERR_WONT_EXECUTED
;

165 
exô
;

169 if(
ddns_°©us
 =
MCN_SERVC_ENABLE
 && 
a˘ivü˘i⁄
 =
TRUE


170 && 
˘x
->
ªböd_Êag
 =
FALSE
){

171 
ªt
 = 
NO_ERROR
;

172 
exô
;

176 
	`qid_sys_gë_qid
(
˘x
->
qid
, 
MAX_QID_LEN
);

179 
	`qid_sys_gë_£rvî_ho°
(
buff
, 
MAX_QID_HOST_LEN
);

182 
	`qid_sys_gë_q˛oud_≠i_¥Ÿo
(
¥Ÿo
, 
PROTO_STR_LEN
);

183 if–
¥Ÿo
 [0] == '\0' ){

184 
	`•rötf
(
¥Ÿo
, "https");

188 
	`•rötf
(
˘x
->
qid_£rvc_ho°
, "%s://%s", 
¥Ÿo
, 
buff
);

189 
	`qid_sys_gë_m˙_£rvî_ho°
(
buff
, 
MAX_QID_HOST_LEN
);

190 
	`•rötf
(
˘x
->
m˙_£rvc_ho°
, "%s://%s", 
¥Ÿo
, 
buff
);

191 if(
	`°æí
(
˘x
->
m˙_£rvc_ho°
) == 0 ){

192 
ªt
 = 
ERR_GET_DEVICE_INFO
;

193 
exô
;

197 
	#MYCLOUD_DDNS_UPDATE_URI
 "%s/%s/ddns/devi˚/%s"

	)

198 
	#MYCLOUD_DDNS_POST_URI
 "%s/%s/ddns"

	)

199 
	#MYCLOUD_DDNS_UPDATE_BODY
 "{\"ddns_«me\": \"%s\"}"

	)

200 
Êag
 = 
QID_HTTPC_FLAG_AUTH
;

202 i‡(
a˘ivü˘i⁄
 =
FALSE
 ) {

203 
	`¢¥ötf
(
uri
, 
TMP_BUFF_LEN
, 
MYCLOUD_DDNS_UPDATE_URI
, 
˘x
->
m˙_£rvc_ho°
,

204 
MCN_API_VERSION
, 
˘x
->
devi˚_id
);

205 
ªt
 = 
	`qid_hâpc_ªque°_ex
(
˘x
, 
Êag
, 
DELETE
, 
uri
, 
NULL
, 
msg
, &
ª•
, 
PAYLOAD_LEN_MAX
);

209 
	`¢¥ötf
(
uri
, 
TMP_BUFF_LEN
, 
MYCLOUD_DDNS_POST_URI
, 
˘x
->
m˙_£rvc_ho°
,

210 
MCN_API_VERSION
);

211 
	`gíî©e_ddns_£rvi˚_°r
(
˘x
, 
msg
, 
PAYLOAD_LEN_MAX
, 
a˘ivü˘i⁄
);

212 
ªt
 = 
	`qid_hâpc_ªque°_ex
(
˘x
, 
Êag
, 
POST
, 
uri
, 
NULL
, 
msg
, &
ª•
, 
PAYLOAD_LEN_MAX
);

216 i‡(
ªt
 < 
NO_ERROR
) {

217 
exô
;

223 
ªt
 = 
	`qid_hâpc_≠i_h™dÀr
(
˘x
, 
ª•
, 
ª•n_fõlds
, 
	`NUM_KEY_PAIR
(respn_fields));

224 if(
ªt
 !
NO_ERROR
){

225 if–(
ªt
 =
MCN_ERR_DDNS_EXISTS
 && 
a˘ivü˘i⁄
 =
TRUE
) ||

226 (
ªt
 =
MCN_ERR_DDNS_NAME_NOT_FOUND
 && 
a˘ivü˘i⁄
 =
FALSE
)){

230 
ªt
 = 
NO_ERROR
;

234 
exô
:

236 i‡(
ªt
 !
NO_ERROR
) {

239 
	`qid_sys_gë_ddns_°©us
(
cuºít_°©us
, 
TMP_BUFF_LEN
);

240 i‡(0 =
	`°∫cmp
(
cuºít_°©us
, 
QID_SYS_INIT_STR
, 
TMP_BUFF_LEN
)) {

241 
	`qid_sys_£t_ddns_°©us
(
QID_SYS_DISABLE_STR
);

243 
	`QNAP_LOG_ERR_NL
("%s", 
	`gë_°ªº‹
(
ªt
));

246 
œ°_îr‹
 = 
	`q˛oud_gë_œ°_îr‹
(
˘x
);

249 if(
MCN_ERR_EMPTY_WAN_IP
 =
ªt
){

250 
	`¢¥ötf
(
ãmp_°r
, 
TMP_BUFF_LEN
, 
QID_ERR_CAUSE_DEVICE_INFO
, "WAN IP");

251 
	`¢¥ötf
(
msg
, 
TMP_BUFF_LEN
, 
MCN_SYS_LOG_DDNS_UPDATE_FAILED
,

252 
ãmp_°r
, 
ªt
, 
ERROR_HANDLING_CHECK_INTERNET
);

253 
	`qid_£nd_sys_evít_log
(
QNAP_EVENT_TYPE_INFO
, 
˘x
->
œ°_evít_log
, 
msg
);

254 }if(
ERR_CONNECT_SERVER
 =
ªt
){

255 
	`¢¥ötf
(
ãmp_°r
, 
TMP_BUFF_LEN
, 
MCN_SYS_LOG_DDNS_UPDATE_FAILED
,

256 
QID_ERR_CAUSE_CONNECTION
,
ªt
, 
ERROR_HANDLING_CHECK_INTERNET
);

257 
	`qid_£nd_sys_evít_log
(
QNAP_EVENT_TYPE_INFO
, 
˘x
->
œ°_evít_log
, 
ãmp_°r
);

258 }if(
ERR_API_SERVER
 =
ªt
 || 
ERR_INVALID_VALUE
 ==Ñet){

259 
	`¢¥ötf
(
ãmp_°r
, 
TMP_BUFF_LEN
, 
MCN_SYS_LOG_DDNS_UPDATE_FAILED
,

260 
QID_ERR_CAUSE_PARSE_RESPONSE
,
ªt
, 
ERROR_HANDLING_QCLOUD_SERVER
);

261 
	`qid_£nd_sys_evít_log
(
QNAP_EVENT_TYPE_INFO
, 
˘x
->
œ°_evít_log
, 
ãmp_°r
);

268 i‡(
a˘ivü˘i⁄
 =
TRUE
 ) {

270 
	`qid_sys_£t_ddns_°©us
(
QID_SYS_ENABLE_STR
);

273 
	`¢¥ötf
(
îr_msg
, 
TMP_BUFF_LEN
, 
MCN_SYS_LOG_DDNS_TURN_ON
);

274 
	`qid_£nd_sys_evít_log
(
QNAP_EVENT_TYPE_INFO
, 
˘x
->
œ°_evít_log
, 
îr_msg
);

278 
	`qid_sys_£t_ddns_°©us
(
QID_SYS_DISABLE_STR
);

281 
	`¢¥ötf
(
îr_msg
, 
TMP_BUFF_LEN
, 
MCN_SYS_LOG_DDNS_TURN_OFF
);

282 
	`qid_£nd_sys_evít_log
(
QNAP_EVENT_TYPE_INFO
, 
˘x
->
œ°_evít_log
, 
îr_msg
);

288 
	`qid_sys_ª°¨t_p‹ãr
();

290  
ªt
;

292 
	}
}

294 
	$my˛oudNAS_gë_ddns_°©us
(
q˛oud_°
 *
˘x
)

296 
°©us
[
TMP_BUFF_LEN
 + 1];

298 
	`qid_sys_gë_ddns_°©us
(
°©us
, 
TMP_BUFF_LEN
);

299 i‡(0 =
	`°∫cmp
(
°©us
, 
QID_SYS_ENABLE_STR
, 
TMP_BUFF_LEN
)) {

300  
MCN_SERVC_ENABLE
;

301 } i‡(0 =
	`°∫cmp
(
°©us
, 
QID_SYS_INIT_STR
, 
TMP_BUFF_LEN
)) {

302  
MCN_SERVC_INIT
;

304  
MCN_SERVC_DISABLE
;

305 
	}
}

307 
	$my˛oudNAS_upd©e_published_£rvi˚
(
q˛oud_°
 *
˘x
,

308 
m˙_ddns_publish_°
 *
£rvc_li°
,

309 
num_£rvc
)

311 
ªt
 = 
ERR_NULL_POINTER
, 
Êag
 = 0;

312 if(!
˘x
){

313 
exô
;

315 
uri
[
TMP_BUFF_LEN
 + 1];

316 
msg
[
PAYLOAD_LEN_MAX
 + 1];

317 * 
ª•
 = 
NULL
;

318 
ãmp_°r
[
TMP_BUFF_LEN
 + 1];

319 
m˙_ddns_publish_°
 *
£rvc
;

320 
key_∑ú_°
 
ª•n_fõlds
[] =

322 
buff
[
URL_STR_LEN
+1];

323 
¥Ÿo
[
PROTO_STR_LEN
+1];

324 
	`qid_sys_gë_qid
(
˘x
->
qid
, 
MAX_QID_LEN
);

325 
	`qid_sys_gë_£rvî_ho°
(
buff
, 
MAX_QID_HOST_LEN
);

326 
	`qid_sys_gë_q˛oud_≠i_¥Ÿo
(
¥Ÿo
, 
PROTO_STR_LEN
);

327 if–
¥Ÿo
 [0] == '\0' ){

328 
	`•rötf
(
¥Ÿo
, "https");

330 
	`•rötf
(
˘x
->
qid_£rvc_ho°
, "%s://%s", 
¥Ÿo
, 
buff
);

331 
	`qid_sys_gë_m˙_£rvî_ho°
(
buff
, 
MAX_QID_HOST_LEN
);

332 
	`•rötf
(
˘x
->
m˙_£rvc_ho°
, "%s://%s", 
¥Ÿo
, 
buff
);

333 
	`qid_sys_gë_qid_devi˚_id
(
˘x
->
devi˚_id
, 
DEVICE_ID_LEN
);

334 
	`qid_sys_gë_qid_°©us
(
msg
, 
PAYLOAD_LEN_MAX
);

335 i‡(
	`°æí
(
˘x
->
devi˚_id
Ë=0 || 
msg
[0] !
QID_STAT_E_BIND


336 || 
	`°æí
(
˘x
->
m˙_£rvc_ho°
) == 0) {

337 
	`QNAP_LOG_DEBUG_NL
("%d", 
QID_ERR_WONT_EXECUTED
);

338  
QID_ERR_WONT_EXECUTED
;

341 
	#MYCLOUD_SERVICE_PUBLISH_URI
 "%s/%s/devi˚/%s/loˇl£rvi˚"

	)

342 
	`¢¥ötf
(
uri
, 
TMP_BUFF_LEN
, 
MYCLOUD_SERVICE_PUBLISH_URI
, 
˘x
->
m˙_£rvc_ho°
,

343 
MCN_API_VERSION
, 
˘x
->
devi˚_id
);

345 
£rvc
 = 
£rvc_li°
;

346 
	`gíî©e_devi˚_loˇl_£rvi˚_°r
(
msg
,
PAYLOAD_LEN_MAX
, 
£rvc
, 
num_£rvc
);

347 if–
num_£rvc
 <= 0){

348 
exô
;

350 
Êag
 = 
QID_HTTPC_FLAG_AUTH
 | 
QID_HTTPC_FLAG_SERVICE
;

351 
ªt
 = 
	`qid_hâpc_ªque°_ex
(
˘x
, 
Êag
, 
PUT
, 
uri
, 
NULL
, 
msg
, &
ª•
, 
PAYLOAD_LEN_MAX
);

352 if–
ªt
 < 
NO_ERROR
){

353 
exô
;

358 
ªt
 = 
	`qid_hâpc_≠i_h™dÀr
(
˘x
, 
ª•
, 
ª•n_fõlds
, 
	`NUM_KEY_PAIR
(respn_fields));

360 
exô
:

361 if(
ªt
 !
NO_ERROR
){

362 
	`QNAP_LOG_ERR_NL
("%s", 
	`gë_°ªº‹
(
ªt
));

363 
ªt
){

365 
	`¢¥ötf
(
ãmp_°r
, 
TMP_BUFF_LEN
, 
MCN_SYS_LOG_PUBLISHED_FAILED
,

366 
QID_ERR_CAUSE_CONNECTION
,
ªt
, 
ERROR_HANDLING_QCLOUD_SERVER
);

368 
ERR_CONNECT_SERVER
:

369 
	`¢¥ötf
(
ãmp_°r
, 
TMP_BUFF_LEN
, 
MCN_SYS_LOG_PUBLISHED_FAILED
,

370 
QID_ERR_CAUSE_CONNECTION
,
ªt
, 
ERROR_HANDLING_CHECK_INTERNET
);

372 
ERR_API_SERVER
:

373 
ERR_INVALID_VALUE
:

374 
	`¢¥ötf
(
ãmp_°r
, 
TMP_BUFF_LEN
, 
MCN_SYS_LOG_PUBLISHED_FAILED
,

375 
QID_ERR_CAUSE_PARSE_RESPONSE
,
ªt
, 
ERROR_HANDLING_QCLOUD_SERVER
);

378 
	`qid_£nd_sys_evít_log
(
QNAP_EVENT_TYPE_INFO
, 
˘x
->
œ°_evít_log
, 
ãmp_°r
);

380  
ªt
;

381 
	}
}

383 
	$my˛oudNAS_upd©e_£rvi˚_p‹t
(
q˛oud_°
 *
˘x
,

384 
m˙_£rvi˚_p‹t
 *
p‹t_li°
, 
num_£rvc
)

387 
ªt
 = 
ERR_NULL_POINTER
, 
Êag
 = 0;

389 if(!
˘x
){

390 
exô
;

393 
uri
[
TMP_BUFF_LEN
 + 1];

394 
msg
[
PAYLOAD_LEN_MAX
 + 1];

395 * 
ª•
 = 
NULL
;

396 
ãmp_°r
[
TMP_BUFF_LEN
 + 1];

398 
key_∑ú_°
 
ª•n_fõlds
[] =

400 
buff
[
URL_STR_LEN
+1];

401 
¥Ÿo
[
PROTO_STR_LEN
+1];

402 
	`qid_sys_gë_qid
(
˘x
->
qid
, 
MAX_QID_LEN
);

403 
	`qid_sys_gë_£rvî_ho°
(
buff
, 
MAX_QID_HOST_LEN
);

404 
	`qid_sys_gë_q˛oud_≠i_¥Ÿo
(
¥Ÿo
, 
PROTO_STR_LEN
);

405 if–
¥Ÿo
 [0] == '\0' ){

406 
	`•rötf
(
¥Ÿo
, "https");

408 
	`•rötf
(
˘x
->
qid_£rvc_ho°
, "%s://%s", 
¥Ÿo
, 
buff
);

409 
	`qid_sys_gë_m˙_£rvî_ho°
(
buff
, 
MAX_QID_HOST_LEN
);

410 
	`•rötf
(
˘x
->
m˙_£rvc_ho°
, "%s://%s", 
¥Ÿo
, 
buff
);

411 
	`qid_sys_gë_qid_devi˚_id
(
˘x
->
devi˚_id
, 
DEVICE_ID_LEN
);

412 
	`qid_sys_gë_qid_°©us
(
msg
, 
PAYLOAD_LEN_MAX
);

413 i‡(
	`°æí
(
˘x
->
devi˚_id
Ë=0 || 
msg
[0] !
QID_STAT_E_BIND


414 || 
	`°æí
(
˘x
->
m˙_£rvc_ho°
) == 0) {

415 
	`QNAP_LOG_DEBUG_NL
("%d", 
QID_ERR_WONT_EXECUTED
);

416  
QID_ERR_WONT_EXECUTED
;

419 
	#MYCLOUD_PORT_MAPPING_URI
 "%s/%s/devi˚/%s/loˇÕ‹t"

	)

420 
	`¢¥ötf
(
uri
, 
TMP_BUFF_LEN
, 
MYCLOUD_PORT_MAPPING_URI
, 
˘x
->
m˙_£rvc_ho°
,

421 
MCN_API_VERSION
, 
˘x
->
devi˚_id
);

422 
ªt
 = 
	`gíî©e_devi˚_£rvi˚_p‹t_°r
(
msg
, 
PAYLOAD_LEN_MAX
, 
p‹t_li°
, 
num_£rvc
);

423 if(
ªt
 !
NO_ERROR
){

424 
exô
;

426 
Êag
 = 
QID_HTTPC_FLAG_AUTH
 | 
QID_HTTPC_FLAG_PORTMAPPING
;

427 
ªt
 = 
	`qid_hâpc_ªque°_ex
–
˘x
, 
Êag
, 
PUT
, 
uri
, 
NULL
, 
msg
, &
ª•
, 
PAYLOAD_LEN_MAX
);

428 if–
ªt
 < 
NO_ERROR
){

429 
exô
;

434 
ªt
 = 
	`qid_hâpc_≠i_h™dÀr
(
˘x
, 
ª•
, 
ª•n_fõlds
, 
	`NUM_KEY_PAIR
(respn_fields));

436 
exô
:

437 if(
ªt
 !
NO_ERROR
){

438 
	`QNAP_LOG_ERR_NL
("%s", 
	`gë_°ªº‹
(
ªt
));

439 
ªt
){

441 
	`¢¥ötf
(
ãmp_°r
, 
TMP_BUFF_LEN
, 
MCN_SYS_LOG_PORT_MAPPING_FAILED
,

442 
QID_ERR_CAUSE_CONNECTION
,
ªt
, 
ERROR_HANDLING_QCLOUD_SERVER
);

444 
ERR_CONNECT_SERVER
:

445 
	`¢¥ötf
(
ãmp_°r
, 
TMP_BUFF_LEN
, 
MCN_SYS_LOG_PORT_MAPPING_FAILED
,

446 
QID_ERR_CAUSE_CONNECTION
,
ªt
, 
ERROR_HANDLING_CHECK_INTERNET
);

448 
ERR_API_SERVER
:

449 
ERR_INVALID_VALUE
:

450 
	`¢¥ötf
(
ãmp_°r
, 
TMP_BUFF_LEN
, 
MCN_SYS_LOG_PORT_MAPPING_FAILED
,

451 
QID_ERR_CAUSE_PARSE_RESPONSE
,
ªt
, 
ERROR_HANDLING_QCLOUD_SERVER
);

455 
	`qid_£nd_sys_evít_log
(
QNAP_EVENT_TYPE_INFO
, 
˘x
->
œ°_evít_log
, 
ãmp_°r
);

457  
ªt
;

458 
	}
}

460 
	#ALLOWED_USERS_MSG_FMT
 "ÆlowedU£rs={\"ÆlowedU£rs\": [%s]}"

	)

461 
	#SERVC_USERS_FMT
 "\"%s\","

	)

462 
	$my˛oudNAS_upd©e_¥iv©e_u£r
(
q˛oud_°
 *
˘x
, **
u£rs
,

463 
num_u£rs
)

465 
ªt
 = 
ERR_NULL_POINTER
, 
Êag
 = 0;

467 i‡(!
˘x
 || !
u£rs
) {

468 
exô
;

471 
uri
[
TMP_BUFF_LEN
 + 1];

472 
msg
[
PAYLOAD_LEN_MAX
 + 1];

473 
ãmp_°r
[
TMP_BUFF_LEN
 + 1];

474 * 
ª•
 = 
NULL
;

475 
key_∑ú_°
 
ª•n_fõlds
[] =

477 
buff
[
URL_STR_LEN
+1];

478 
¥Ÿo
[
PROTO_STR_LEN
+1];

479 
	`qid_sys_gë_qid
(
˘x
->
qid
, 
MAX_QID_LEN
);

480 
	`qid_sys_gë_£rvî_ho°
(
buff
, 
MAX_QID_HOST_LEN
);

481 
	`qid_sys_gë_q˛oud_≠i_¥Ÿo
(
¥Ÿo
, 
PROTO_STR_LEN
);

482 if–
¥Ÿo
 [0] == '\0' ){

483 
	`•rötf
(
¥Ÿo
, "https");

485 
	`•rötf
(
˘x
->
qid_£rvc_ho°
, "%s://%s", 
¥Ÿo
, 
buff
);

486 
	`qid_sys_gë_m˙_£rvî_ho°
(
buff
, 
MAX_QID_HOST_LEN
);

487 
	`•rötf
(
˘x
->
m˙_£rvc_ho°
, "%s://%s", 
¥Ÿo
, 
buff
);

488 
	`qid_sys_gë_qid_devi˚_id
(
˘x
->
devi˚_id
, 
DEVICE_ID_LEN
);

489 
	`qid_sys_gë_qid_°©us
(
msg
, 
PAYLOAD_LEN_MAX
);

490 i‡(
	`°æí
(
˘x
->
devi˚_id
Ë=0 || 
msg
[0] !
QID_STAT_E_BIND


491 || 
	`°æí
(
˘x
->
m˙_£rvc_ho°
) == 0) {

492 
	`QNAP_LOG_DEBUG_NL
("%d", 
QID_ERR_WONT_EXECUTED
);

493  
QID_ERR_WONT_EXECUTED
;

496 
	#MYCLOUD_PUBLISHED_USERS_URI
 "%s/%s/devi˚/%s/loˇlu£r"

	)

497 
	`¢¥ötf
(
uri
, 
TMP_BUFF_LEN
, 
MYCLOUD_PUBLISHED_USERS_URI
, 
˘x
->
m˙_£rvc_ho°
,

498 
MCN_API_VERSION
, 
˘x
->
devi˚_id
);

499 if(
num_u£rs
 > 0){

500 
	`gíî©e_devi˚_loˇl_u£r_°r
(
msg
,
PAYLOAD_LEN_MAX
, 
u£rs
, 
num_u£rs
);

502 
	`qid_sys_£t_hash_°rög
("localuser", "0");

505 
Êag
 = 
QID_HTTPC_FLAG_AUTH
 | 
QID_HTTPC_FLAG_USERS
;

506 
ªt
 = 
	`qid_hâpc_ªque°_ex
(
˘x
, 
Êag
, (
num_u£rs
 > 0 ? 
PUT
:
DELETE
),

507 
uri
, 
NULL
, 
msg
, &
ª•
, 
PAYLOAD_LEN_MAX
);

508 if–
ªt
 < 
NO_ERROR
){

509 
exô
;

514 
ªt
 = 
	`qid_hâpc_≠i_h™dÀr
(
˘x
, 
ª•
, 
ª•n_fõlds
, 
	`NUM_KEY_PAIR
(respn_fields));

516 
exô
:

517 if(
ªt
 !
NO_ERROR
){

518 
	`QNAP_LOG_ERR_NL
("%s", 
	`gë_°ªº‹
(
ªt
));

519 
ªt
){

521 
	`¢¥ötf
(
ãmp_°r
, 
TMP_BUFF_LEN
, 
MCN_SYS_LOG_UPDATE_USER_LIST_FAILED
,

522 
QID_ERR_CAUSE_CONNECTION
,
ªt
, 
ERROR_HANDLING_QCLOUD_SERVER
);

524 
ERR_CONNECT_SERVER
:

525 
	`¢¥ötf
(
ãmp_°r
, 
TMP_BUFF_LEN
, 
MCN_SYS_LOG_UPDATE_USER_LIST_FAILED
,

526 
QID_ERR_CAUSE_CONNECTION
,
ªt
, 
ERROR_HANDLING_CHECK_INTERNET
);

528 
ERR_API_SERVER
:

529 
ERR_INVALID_VALUE
:

530 
	`¢¥ötf
(
ãmp_°r
, 
TMP_BUFF_LEN
, 
MCN_SYS_LOG_UPDATE_USER_LIST_FAILED
,

531 
QID_ERR_CAUSE_PARSE_RESPONSE
,
ªt
, 
ERROR_HANDLING_QCLOUD_SERVER
);

535 
	`qid_£nd_sys_evít_log
(
QNAP_EVENT_TYPE_INFO
, 
˘x
->
œ°_evít_log
, 
ãmp_°r
);

538  
ªt
;

539 
	}
}

542 
	#MYCLOUD_ACCESS_CODE_BODY
 "{ \"ac˚ss_code\": \"%s\" }"

	)

543 
	$my˛oudNAS_upd©e_ac˚ss_code
(
q˛oud_°
 *
˘x
, *
ac˚ss_code
)

545 
ªt
 = 
ERR_NULL_POINTER
, 
Êag
 = 0;

547 if(!
˘x
 || !
ac˚ss_code
){

548 
exô
;

551 
uri
[
TMP_BUFF_LEN
+1];

552 
msg
[
PAYLOAD_LEN_MAX
+1];

553 * 
ª•
 = 
NULL
;

554 
ãmp_°r
[
TMP_BUFF_LEN
 + 1];

555 
key_∑ú_°
 
ª•n_fõlds
[] =

560 
buff
[
URL_STR_LEN
+1];

561 
¥Ÿo
[
PROTO_STR_LEN
+1];

562 
	`qid_sys_gë_qid
(
˘x
->
qid
, 
MAX_QID_LEN
);

563 
	`qid_sys_gë_£rvî_ho°
(
buff
, 
MAX_QID_HOST_LEN
);

564 
	`qid_sys_gë_q˛oud_≠i_¥Ÿo
(
¥Ÿo
, 
PROTO_STR_LEN
);

565 if–
¥Ÿo
 [0] == '\0' ){

566 
	`•rötf
(
¥Ÿo
, "https");

568 
	`•rötf
(
˘x
->
qid_£rvc_ho°
, "%s://%s", 
¥Ÿo
, 
buff
);

569 
	`qid_sys_gë_m˙_£rvî_ho°
(
buff
, 
MAX_QID_HOST_LEN
);

570 
	`•rötf
(
˘x
->
m˙_£rvc_ho°
, "%s://%s", 
¥Ÿo
, 
buff
);

571 
	`qid_sys_gë_qid_devi˚_id
(
˘x
->
devi˚_id
, 
DEVICE_ID_LEN
);

572 
	`qid_sys_gë_qid_°©us
(
msg
, 
PAYLOAD_LEN_MAX
);

573 if(
	`°æí
(
˘x
->
devi˚_id
Ë=0 || 
msg
[0] !
QID_STAT_E_BIND


574 || 
	`°æí
(
˘x
->
m˙_£rvc_ho°
) == 0){

575 
	`QNAP_LOG_DEBUG_NL
("%d", 
QID_ERR_WONT_EXECUTED
);

576  
QID_ERR_WONT_EXECUTED
;

579 
	#MYCLOUD_UPDATE_ACCESS_CODE_URI
 "%s/%s/devi˚/%s/ac˚sscode"

	)

580 
	`¢¥ötf
(
uri
, 
TMP_BUFF_LEN
, 
MYCLOUD_UPDATE_ACCESS_CODE_URI
,

581 
˘x
->
m˙_£rvc_ho°
, 
MCN_API_VERSION
, ctx->
devi˚_id
);

583 
	`¢¥ötf
–
msg
, 
PAYLOAD_LEN_MAX
, 
MYCLOUD_ACCESS_CODE_BODY
, 
ac˚ss_code
);

584 
Êag
 = 
QID_HTTPC_FLAG_AUTH
 | 
QID_HTTPC_FLAG_ACCESSCODE
;

585 
ªt
 = 
	`qid_hâpc_ªque°_ex
(
˘x
, 
Êag
, 
PUT
, 
uri
, 
NULL
, 
msg
, &
ª•
, 
PAYLOAD_LEN_MAX
);

586 if–
ªt
 < 
NO_ERROR
){

587 
exô
;

592 
ªt
 = 
	`qid_hâpc_≠i_h™dÀr
(
˘x
, 
ª•
, 
ª•n_fõlds
, 
	`NUM_KEY_PAIR
(respn_fields));

594 
exô
:

595 if(
ªt
 !
NO_ERROR
){

596 
	`QNAP_LOG_ERR_NL
("%s", 
	`gë_°ªº‹
(
ªt
));

597 
ªt
){

599 
	`¢¥ötf
(
ãmp_°r
, 
TMP_BUFF_LEN
, 
MCN_SYS_LOG_ACCESS_CODE_FAILED
,

600 
QID_ERR_CAUSE_CONNECTION
,
ªt
, 
ERROR_HANDLING_QCLOUD_SERVER
);

602 
ERR_CONNECT_SERVER
:

603 
	`¢¥ötf
(
ãmp_°r
, 
TMP_BUFF_LEN
, 
MCN_SYS_LOG_ACCESS_CODE_FAILED
,

604 
QID_ERR_CAUSE_CONNECTION
,
ªt
, 
ERROR_HANDLING_CHECK_INTERNET
);

606 
ERR_API_SERVER
:

607 
ERR_INVALID_VALUE
:

608 
	`¢¥ötf
(
ãmp_°r
, 
TMP_BUFF_LEN
, 
MCN_SYS_LOG_ACCESS_CODE_FAILED
,

609 
QID_ERR_CAUSE_PARSE_RESPONSE
,
ªt
, 
ERROR_HANDLING_QCLOUD_SERVER
);

613 
	`qid_£nd_sys_evít_log
(
QNAP_EVENT_TYPE_INFO
, 
˘x
->
œ°_evít_log
, 
ãmp_°r
);

615  
ªt
;

616 
	}
}

618 
	$my˛oudNAS_is_ªp‹t_p‹t_m≠pög
(
q˛oud_°
 *
˘x
)

620 
ªt
 = 
FALSE
;

621 
ªt
 |
	`my˛oudNAS_gë_ddns_°©us
(
˘x
);

622  
ªt
;

623 
	}
}

625 
	$my˛oudNAS_gë_qid_devi˚_«me_li°
(
q˛oud_°
 *
˘x
, 
q«p_dev_öfo
** 
devi˚_li°
, 
size_t
* 
cou¡
)

627 
ªt
 = 
QID_ERR_WONT_EXECUTED
, 
Êag
 = 0;

628 
uri
[
TMP_BUFF_LEN
+1];

629 
msg
[
PAYLOAD_LEN_MAX
+1];

630 * 
ª•
 = 
NULL
;

632 if(
	`°æí
(
˘x
->
m˙_£rvc_ho°
) == 0){

633 
exô
;

635 
	#MYCLOUD_GET_QID_DEVICE_LIST
 "%s/%s/devi˚?limô=200"

	)

636 
	`¢¥ötf
(
uri
, 
TMP_BUFF_LEN
, 
MYCLOUD_GET_QID_DEVICE_LIST
,

637 
˘x
->
m˙_£rvc_ho°
, 
MCN_API_VERSION
);

638 
Êag
 = 
QID_HTTPC_FLAG_AUTH
;

639 
ªt
 = 
	`qid_hâpc_ªque°_ex
(
˘x
, 
Êag
, 
GET
, 
uri
, 
NULL
, 
msg
, &
ª•
, 
PAYLOAD_LEN_MAX
);

640 if(
ªt
 < 
NO_ERROR
){

641 
exô
;

644 
ªt
 = 
	`∑r£_js⁄_q˛oud_devi˚_öfo
(
ª•
, 
devi˚_li°
, 
cou¡
);

646 
exô
:

647 if(
ªt
 !
NO_ERROR
){

648 
	`QNAP_LOG_ERR_NL
("%s", 
	`gë_°ªº‹
(
ªt
));

650  
ªt
;

651 
	}
}

	@libs/qid/qcloud_dao.c

8 
	~<î∫o.h
>

10 
	~<sys/sockë.h
>

11 
	~<sys/io˘l.h
>

12 
	~<√t/if.h
>

13 
	~<√töë/ö.h
>

14 
	~<°dio.h
>

15 
	~<¨∑/öë.h
>

16 
	~<˘y≥.h
>

18 
	~"sqlôe3.h
"

20 
	~"°d_hdr.h
"

21 
	~"comm_hdr.h
"

22 
	~"qid_sy°em.h
"

23 
	~"q˛oud_dao.h
"

25 
	$db_˛õ¡_¸óã_èbÀ
(*
db_«me
, * 
èbÀ_«me
,

26 
key_∑ú_°
 *
key_li°
, 
li°_size
)

28 
sqlôe3
 *
d©aba£
;

29 
rc
;

30 *
îr‹
;

31 *
°©emít
 = 
NULL
;

32 
cou¡
 = 0;

34 * 
schema
 = (*)
	`mÆloc
–2*()* 
li°_size
* (
key_∑ú_°
));

35 
°©emít
 = (*)
	`mÆloc
–2*()* 
li°_size
* (
key_∑ú_°
));

36  
cou¡
 = 0; cou¡ < 
li°_size
; count++){

37 if(0 ==
cou¡
){

38 
	`•rötf
(
schema
, "%†ch¨(%d)", 
key_li°
[
cou¡
].
key
, 
PAIR_KEY_LEN
);

40 
	`•rötf
(
schema
, "%s, %†ch¨(%d)", schema, 
key_li°
[
cou¡
].
key
, 
PAIR_KEY_LEN
);

43 
	`•rötf
(
°©emít
, 
DB_CREATE_TABLE
, 
èbÀ_«me
, 
schema
);

46 i‡((
rc
 = 
	`sqlôe3_›í
 (
db_«me
, &
d©aba£
)Ë!
SQLITE_OK
)

48 
	`QNAP_LOG_ERR_NL
("* ERROR (%dË- sqlôe3_›í(ËÁûed.", 
rc
);

49 
exô
;

52 i‡((
rc
 = 
	`sqlôe3_exec
 (
d©aba£
,

53 
°©emít
,

54 
NULL
,

55 
NULL
,

56 &
îr‹
)Ë!
SQLITE_OK
){

57 
	`QNAP_LOG_ERR_NL
("* ERROR (%dË- sqlôe3_exec(ËÁûed.", 
rc
);

58 
	`QNAP_LOG_ERR_NL
("°©mít:%s\n", 
°©emít
);

59 
exô
;

62 
exô
:

63 if(
d©aba£
){

65 i‡((
rc
 = 
	`sqlôe3_˛o£
 (
d©aba£
)Ë!
SQLITE_OK
){

66 
	`QNAP_LOG_ERR_NL
("* ERROR (%dË- sqlôe3_˛o£(ËÁûed.", 
rc
);

69 if(
îr‹
 !
NULL
 ) 
	`sqlôe3_‰ì
(error);

70 
	`‰ì
–
°©emít
 );

71 
°©emít
 = 
NULL
;

72 
	`‰ì
–
schema
 );

73 
schema
 = 
NULL
;

74  
rc
;

75 
	}
}

77 
	$c⁄fig_˛õ¡_¸óã_fûe
(*
c⁄fig_∑th
){

78 
£t_cmd
[
MAX_SYSTEM_CMD
+1];

79 
d©a
[
MAX_SYSTEM_CMD
+1];

80 
	`¢¥ötf
(
£t_cmd
, 
MAX_SYSTEM_CMD
, "/bö/touch %s", 
c⁄fig_∑th
);

81  
	`utû_sy°em_cmd
(
£t_cmd
, 
d©a
, 
MAX_SYSTEM_CMD
);

82 
	}
}

84 
	$db_sqlquîy_ˇŒback
(* 
ªt
,
¨gc
,** 
quîy_ªt
,** 
cﬁumn_«me
)

86 
cou¡
 = 0;

87 
key_∑ú_°
 *
ªsu…
 = (key_∑ú_° *)
ªt
;

88 
cou¡
 = 0; cou¡ < 
¨gc
; count++)

90 
	`¢¥ötf
–
ªsu…
[
cou¡
].
key
, 
PAIR_KEY_LEN
, "%s", *(
cﬁumn_«me
+count));

91 
	`¢¥ötf
–
ªsu…
[
cou¡
].
vÆue
, 
PAIR_VALUE_LEN
, "%s", *(
quîy_ªt
+count));

92 
	`QNAP_LOG_DEBUG_NL
("˙t:%d key:%†vÆue:%s", 
cou¡
, 
ªsu…
[cou¡].
key
,Ñesu…[cou¡].
vÆue
);

94  
NO_ERROR
;

95 
	}
}

97 
	$db_˛õ¡_£¨ch_°rög
(*
fûe_∑th
, *
èbÀ_«me
, 
key_∑ú_°
 *
c⁄dôi⁄_li°
,

98 
key_∑ú_°
 *
key_li°
, 
c⁄d_li°_size
)

100 
rc
 = 
ERR_NULL_POINTER
, 
cou¡
 = 0;

101 
sqlôe3
 *
d©aba£
;

102 *
îr‹
;

103 * 
c⁄d
 = (*)
	`ˇŒoc
–2, ()* 
c⁄d_li°_size
* (
key_∑ú_°
));

104 * 
°©emít
 = (*)
	`ˇŒoc
–2, ()* 
c⁄d_li°_size
* (
key_∑ú_°
));

105 if(!
fûe_∑th
 || !
èbÀ_«me
 || !
key_li°
 || !
c⁄dôi⁄_li°
){

106 
exô
;

110 i‡((
rc
 = 
	`sqlôe3_›í
 (
fûe_∑th
, &
d©aba£
)Ë!
SQLITE_OK
){

111 
	`QNAP_LOG_ERR_NL
("* ERROR (%dË- sqlôe3_›í(ËÁûed.", 
rc
);

112 
exô
;

115  
cou¡
 = 0; cou¡ < 
c⁄d_li°_size
; count++){

116 if(0 ==
cou¡
){

117 
	`•rötf
(
c⁄d
, "%†='%s'", 
c⁄dôi⁄_li°
[
cou¡
].
key
, c⁄dôi⁄_li°[cou¡].
vÆue
);

119 
	`•rötf
(
c⁄d
, "%†AND %†='%s'", c⁄d, 
c⁄dôi⁄_li°
[
cou¡
].
key
, c⁄dôi⁄_li°[cou¡].
vÆue
);

123 
	`•rötf
–
°©emít
, 
DB_QUERY_DATA
, "*", 
èbÀ_«me
, 
c⁄d
);

124 
	`QNAP_LOG_INFO_NL
("°©mít:%s\n", 
°©emít
);

126 i‡((
rc
 = 
	`sqlôe3_exec
 (
d©aba£
,

127 
°©emít
,

128 
db_sqlquîy_ˇŒback
,

129 
key_li°
,

130 &
îr‹
)Ë!
SQLITE_OK
){

131 
	`QNAP_LOG_ERR_NL
("* ERROR (%dË- sqlôe3_exec(ËÁûed.", 
rc
);

132 
	`QNAP_LOG_ERR_NL
("°©mít:%s\n", 
°©emít
);

133 
exô
;

135 
	`mem£t
–
°©emít
, 0,2*()* 
c⁄d_li°_size
* (
key_∑ú_°
));

138 
exô
:

139 if(
d©aba£
){

141 i‡((
rc
 = 
	`sqlôe3_˛o£
 (
d©aba£
)Ë!
SQLITE_OK
){

142 
	`QNAP_LOG_ERR_NL
("* ERROR (%dË- sqlôe3_˛o£(ËÁûed.", 
rc
);

145 if(
îr‹
 !
NULL
 ) 
	`sqlôe3_‰ì
(error);

146 if(
°©emít
 !
NULL
 ) 
	`‰ì
(statement);

147  
rc
;

148 
	}
}

150 
	$db_ö£π_°rög_vÆue
(*
fûe_∑th
, *
èbÀ_«me
,

151 
key_∑ú_°
 *
key_li°
, 
li°_size
){

152 
rc
 = 
ERR_NULL_POINTER
, 
cou¡
 = 0;

153 
sqlôe3
 *
d©aba£
;

154 *
îr‹
;

156 * 
key
 = (*)
	`ˇŒoc
–2, ()* 
li°_size
* (
key_∑ú_°
));

157 * 
vÆue
 = (*)
	`ˇŒoc
–2, ()* 
li°_size
* (
key_∑ú_°
));

158 * 
°©emít
 = (*)
	`ˇŒoc
–2, ()* 
li°_size
* (
key_∑ú_°
));

159 if(!
fûe_∑th
 || !
èbÀ_«me
 || !
key_li°
){

160 
exô
;

164 i‡((
rc
 = 
	`sqlôe3_›í
 (
fûe_∑th
, &
d©aba£
)Ë!
SQLITE_OK
){

165 
	`QNAP_LOG_ERR_NL
("* ERROR (%dË- sqlôe3_›í(ËÁûed.", 
rc
);

166 
exô
;

169  
cou¡
 = 0; cou¡ < 
li°_size
; count++){

170 if(0 ==
cou¡
){

171 
	`•rötf
(
key
, "%s", 
key_li°
[
cou¡
].key);

172 
	`•rötf
(
vÆue
, "'%s'", 
key_li°
[
cou¡
].value);

174 
	`•rötf
(
key
, "%s, %s", key, 
key_li°
[
cou¡
].key);

175 
	`•rötf
(
vÆue
, "%s, '%s'", vÆue, 
key_li°
[
cou¡
].value);

178 
	`•rötf
–
°©emít
, 
DB_INSERT_DATA
, 
èbÀ_«me
, 
key
, 
vÆue
);

179 
	`QNAP_LOG_INFO_NL
("°©mít:%s\n", 
°©emít
);

181 i‡((
rc
 = 
	`sqlôe3_exec
 (
d©aba£
,

182 
°©emít
,

183 
NULL
,

184 
NULL
,

185 &
îr‹
)Ë!
SQLITE_OK
){

186 
	`QNAP_LOG_ERR_NL
("* ERROR (%dË- sqlôe3_exec(ËÁûed.", 
rc
);

187 
	`QNAP_LOG_ERR_NL
("°©mít:%s\n", 
°©emít
);

188 
exô
;

190 
exô
:

191 if(
d©aba£
){

193 i‡((
rc
 = 
	`sqlôe3_˛o£
 (
d©aba£
)Ë!
SQLITE_OK
){

194 
	`QNAP_LOG_ERR_NL
("* ERROR (%dË- sqlôe3_˛o£(ËÁûed.", 
rc
);

197 if(
îr‹
 !
NULL
 ) 
	`sqlôe3_‰ì
(error);

198 if(
key
 !
NULL
 ) 
	`‰ì
(key);

199 if(
vÆue
 !
NULL
 ) 
	`‰ì
(value);

200 if(
°©emít
 !
NULL
 ) 
	`‰ì
(statement);

201  
rc
;

202 
	}
}

204 
	$db_dñëe_°rög_vÆue
(*
fûe_∑th
, *
èbÀ_«me
, 
key_∑ú_°
 *
c⁄d_li°
, 
li°_size
)

206 
rc
 = 
ERR_NULL_POINTER
, 
cou¡
 = 0;

207 
sqlôe3
 *
d©aba£
;

208 *
îr‹
;

210 * 
c⁄d
 = (*)
	`ˇŒoc
–2, ()* 
li°_size
* (
key_∑ú_°
));

211 * 
°©emít
 = (*)
	`ˇŒoc
–2, ()* 
li°_size
* (
key_∑ú_°
));

212 if(!
fûe_∑th
 || !
èbÀ_«me
 || !
c⁄d_li°
){

213 
exô
;

217 i‡((
rc
 = 
	`sqlôe3_›í
 (
fûe_∑th
, &
d©aba£
)Ë!
SQLITE_OK
){

218 
	`QNAP_LOG_ERR_NL
("* ERROR (%dË- sqlôe3_›í(ËÁûed.", 
rc
);

219 
exô
;

221 
	`•rötf
(
c⁄d
, "%†='%s'", 
c⁄d_li°
[
cou¡
].
key
, c⁄d_li°[cou¡].
vÆue
);

222  
cou¡
 = 1; cou¡ < 
li°_size
; count++){

223 if(
	`°æí
–
c⁄d_li°
[
cou¡
].
key
Ë>0 && såÀn(c⁄d_li°[cou¡].
vÆue
) > 0 ){

224 
	`•rötf
(
c⁄d
, "%†AND %†='%s'", c⁄d, 
c⁄d_li°
[
cou¡
].
key
, c⁄d_li°[cou¡].
vÆue
);

228 
	`•rötf
–
°©emít
, 
DB_DELETE_DATA
, 
èbÀ_«me
, 
c⁄d
);

229 
	`QNAP_LOG_INFO_NL
("°©mít:%s\n", 
°©emít
);

230 i‡((
rc
 = 
	`sqlôe3_exec
 (
d©aba£
,

231 
°©emít
,

232 
NULL
,

233 
NULL
,

234 &
îr‹
)Ë!
SQLITE_OK
){

235 
	`QNAP_LOG_ERR_NL
("* ERROR (%dË- sqlôe3_exec(ËÁûed.", 
rc
);

236 
	`QNAP_LOG_ERR_NL
("°©mít:%s\n", 
°©emít
);

237 
exô
;

240 
exô
:

241 if(
d©aba£
){

243 i‡((
rc
 = 
	`sqlôe3_˛o£
 (
d©aba£
)Ë!
SQLITE_OK
){

244 
	`QNAP_LOG_ERR_NL
("* ERROR (%dË- sqlôe3_˛o£(ËÁûed.", 
rc
);

247 if(
îr‹
 !
NULL
 ) 
	`sqlôe3_‰ì
(error);

248 if(
c⁄d
 !
NULL
 ) 
	`‰ì
(cond);

249 if(
°©emít
 !
NULL
 ) 
	`‰ì
(statement);

250  
rc
;

251 
	}
}

253 
	$db_upd©e_°rög_vÆue
(*
fûe_∑th
, *
èbÀ_«me
,

254 
key_∑ú_°
 *
c⁄d_li°
, 
c⁄d_li°_size
,

255 
key_∑ú_°
 *
d©a_li°
, 
d©a_li°_size
)

257 
rc
 = 
ERR_NULL_POINTER
, 
cou¡
 = 0;

258 
sqlôe3
 *
d©aba£
;

259 *
îr‹
;

261 * 
c⁄d
 = (*)
	`ˇŒoc
–2, ()* 
c⁄d_li°_size
* (
key_∑ú_°
));

262 * 
£t_d©a
 = (*)
	`ˇŒoc
–2, ()* 
d©a_li°_size
* (
key_∑ú_°
));

263 * 
°©emít
 = (*)
	`ˇŒoc
–2, ()* (
c⁄d_li°_size
+
d©a_li°_size
)* (
key_∑ú_°
));

264 if(!
fûe_∑th
 || !
èbÀ_«me
 || !
c⁄d_li°
){

265 
exô
;

269 i‡((
rc
 = 
	`sqlôe3_›í
 (
fûe_∑th
, &
d©aba£
)Ë!
SQLITE_OK
){

270 
	`QNAP_LOG_ERR_NL
("* ERROR (%dË- sqlôe3_›í(ËÁûed.", 
rc
);

271 
exô
;

273 
	`•rötf
(
c⁄d
, "%†'%s'", 
c⁄d_li°
[
cou¡
].
key
, c⁄d_li°[cou¡].
vÆue
);

274 
	`•rötf
(
£t_d©a
, "%†'%s'", 
d©a_li°
[
cou¡
].
key
, d©a_li°[cou¡].
vÆue
);

276  
cou¡
 = 1; cou¡ < 
d©a_li°_size
; count++){

277 
	`•rötf
(
£t_d©a
, "%†, %†'%s'", së_d©a, 
d©a_li°
[
cou¡
].
key
, d©a_li°[cou¡].
vÆue
);

280  
cou¡
 = 1; cou¡ < 
c⁄d_li°_size
; count++){

281 
	`•rötf
(
c⁄d
, "%†AND %†'%s'", c⁄d, 
c⁄d_li°
[
cou¡
].
key
, c⁄d_li°[cou¡].
vÆue
);

284 
	`•rötf
–
°©emít
, 
DB_UPDATE_DATA
, 
èbÀ_«me
, 
£t_d©a
, 
c⁄d
);

285 
	`QNAP_LOG_INFO_NL
("°©mít:%s\n", 
°©emít
);

286 i‡((
rc
 = 
	`sqlôe3_exec
 (
d©aba£
,

287 
°©emít
,

288 
NULL
,

289 
NULL
,

290 &
îr‹
)Ë!
SQLITE_OK
){

291 
	`QNAP_LOG_ERR_NL
("* ERROR (%dË- sqlôe3_exec(ËÁûed.", 
rc
);

292 
	`QNAP_LOG_ERR_NL
("°©mít:%s\n", 
°©emít
);

293 
exô
;

296 
exô
:

297 if(
d©aba£
){

299 i‡((
rc
 = 
	`sqlôe3_˛o£
 (
d©aba£
)Ë!
SQLITE_OK
){

300 
	`QNAP_LOG_ERR_NL
("* ERROR (%dË- sqlôe3_˛o£(ËÁûed.", 
rc
);

303 if(
îr‹
 !
NULL
 ) 
	`sqlôe3_‰ì
(error);

304 if(
c⁄d
 !
NULL
 ) 
	`‰ì
(cond);

305 if(
£t_d©a
 !
NULL
 ) 
	`‰ì
(set_data);

306 if(
°©emít
 !
NULL
 ) 
	`‰ì
(statement);

307  
rc
;

308 
	}
}

310 
	$db_dr›_èbÀ
(*
fûe_∑th
, *
èbÀ_«me
)

312 
rc
 = 
ERR_NULL_POINTER
;

314 
sqlôe3
 *
d©aba£
 = 
NULL
;

315 *
îr‹
 = 
NULL
;

317 * 
°©emít
 = (*)
	`ˇŒoc
–2, ()* 
PAIR_VALUE_LEN
);

318 if(!
fûe_∑th
 || !
èbÀ_«me
 ){

319 
exô
;

323 i‡((
rc
 = 
	`sqlôe3_›í
 (
fûe_∑th
, &
d©aba£
)Ë!
SQLITE_OK
){

324 
	`QNAP_LOG_ERR_NL
("* ERROR (%dË- sqlôe3_›í(ËÁûed.", 
rc
);

325 
exô
;

327 
	`•rötf
–
°©emít
, 
DB_DROP_TABLE
, 
èbÀ_«me
);

328 
	`QNAP_LOG_INFO_NL
("°©mít:%s\n", 
°©emít
);

330 i‡((
rc
 = 
	`sqlôe3_exec
 (
d©aba£
,

331 
°©emít
,

332 
NULL
,

333 
NULL
,

334 &
îr‹
)Ë!
SQLITE_OK
){

335 
	`QNAP_LOG_ERR_NL
("* ERROR (%dË- sqlôe3_exec(ËÁûed.", 
rc
);

336 
	`QNAP_LOG_ERR_NL
("°©mít:%s\n", 
°©emít
);

337 
exô
;

340 
exô
:

341 if(
d©aba£
){

343 i‡((
rc
 = 
	`sqlôe3_˛o£
 (
d©aba£
)Ë!
SQLITE_OK
){

344 
	`QNAP_LOG_ERR_NL
("* ERROR (%dË- sqlôe3_˛o£(ËÁûed.", 
rc
);

347 if(
îr‹
 !
NULL
 ) 
	`sqlôe3_‰ì
(error);

348 if(
°©emít
 !
NULL
 ) 
	`‰ì
(statement);

350  
rc
;

351 
	}
}

353 
	#SET_CFG_FMT
 "/sbö/£tcfg -‡%†%†\"%s\" \"%s\""

	)

354 
	#GET_CFG_FMT
 "/sbö/gëcfg -‡%†%†\"%s\" -d \"\""

	)

356 
	$c⁄fig_ö£π_°rög_vÆue
(*
fûe_∑th
, * 
£˘i⁄
,

357 *
key
, *
vÆue
)

359 
cmd
[
MAX_SYSTEM_CMD
+1];

360 
d©a
[
MAX_SYSTEM_CMD
+1];

361 if(!
fûe_∑th
 || !
£˘i⁄
 || !
key
 || !
vÆue
){

362  
ERR_NULL_POINTER
;

364 
	`¢¥ötf
(
cmd
, 
MAX_SYSTEM_CMD
, 
SET_CFG_FMT
, 
fûe_∑th
, 
£˘i⁄
, 
key
, 
vÆue
);

365  
	`utû_sy°em_cmd
(
cmd
, 
d©a
, 
MAX_SYSTEM_CMD
);

366 
	}
}

368 
	$c⁄fig_gë_°rög_vÆue
(*
fûe_∑th
, *
£˘i⁄
, *
key
,

369 *
ªtu∫_buff
, 
size_t
 
buff_size
)

371 
cmd
[
MAX_SYSTEM_CMD
+1];

372 
	`¢¥ötf
(
cmd
, 
MAX_SYSTEM_CMD
, 
GET_CFG_FMT
, 
fûe_∑th
, 
£˘i⁄
, 
key
);

373  
	`utû_sy°em_cmd
(
cmd
, 
ªtu∫_buff
, 
buff_size
);

374 
	}
}

376 
	$dao_¸óã_c⁄èöî
(
q˛oud_dao_ty≥
 
ty≥
, *
fûe_∑th
, * 
èbÀ_«me
,

377 
key_∑ú_°
 *
key_li°
, 
li°_size
)

379 
ªt
 = 
NO_ERROR
;

380 
ty≥
)

384 
dao_ty≥_db
:

385 
ªt
 = 
	`db_˛õ¡_¸óã_èbÀ
(
fûe_∑th
, 
èbÀ_«me
, 
key_li°
, 
li°_size
);

387 
dao_ty≥_c⁄fig
:

390  
ªt
;

391 
	}
}

393 
	$dao_£¨ch_°rög
(
q˛oud_dao_ty≥
 
ty≥
, *
fûe_∑th
, *
èbÀ_«me
,

394 
key_∑ú_°
 *
c⁄dôi⁄_li°
, key_∑ú_° *
key_li°
, 
c⁄d_li°_size
)

396 
ªt
 = 
NO_ERROR
;

397 
ty≥
)

401 
dao_ty≥_db
:

402 
ªt
 = 
	`db_˛õ¡_£¨ch_°rög
(
fûe_∑th
, 
èbÀ_«me
, 
c⁄dôi⁄_li°
,

403 
key_li°
, 
c⁄d_li°_size
);

405 
dao_ty≥_c⁄fig
:

406 
ªt
 = 
	`c⁄fig_gë_°rög_vÆue
(
fûe_∑th
, 
èbÀ_«me
, 
	`PAIR_GET_KEY
(
key_li°
, 0),

407 
	`PAIR_GET_VALUE
(
key_li°
, 0), 
PAIR_VALUE_LEN
);

410  
ªt
;

411 
	}
}

413 
	$dao_ö£π_°rög_vÆue
(
q˛oud_dao_ty≥
 
ty≥
, *
fûe_∑th
, *
èbÀ_«me
,

414 
key_∑ú_°
 *
key_li°
, 
li°_size
)

416 
ªt
 = 
NO_ERROR
;

417 
key_∑ú_°
 * 
ôem
;

418 
ty≥
)

422 
dao_ty≥_db
:

423 
ªt
 = 
	`db_ö£π_°rög_vÆue
(
fûe_∑th
, 
èbÀ_«me
, 
key_li°
, 
li°_size
);

425 
dao_ty≥_c⁄fig
:

427 
i
 = 0;

428 
ôem
 = 
key_li°
;

429 ; 
ôem
 && 
i
 < 
li°_size
; i++, item++){

430 
ªt
 = 
	`c⁄fig_ö£π_°rög_vÆue
(
fûe_∑th
, 
èbÀ_«me
, 
ôem
->
key
,

431 
ôem
->
vÆue
);

436  
ªt
;

437 
	}
}

439 
	$dao_dñëe_°rög_vÆue
(
q˛oud_dao_ty≥
 
ty≥
, *
fûe_∑th
, *
èbÀ_«me
,

440 
key_∑ú_°
 *
c⁄d_li°
, 
li°_size
)

442 
ªt
 = 
NO_ERROR
;

443 
ty≥
)

447 
dao_ty≥_db
:

448 
ªt
 = 
	`db_dñëe_°rög_vÆue
(
fûe_∑th
, 
èbÀ_«me
, 
c⁄d_li°
, 
li°_size
);

450 
dao_ty≥_c⁄fig
:

453  
ªt
;

454 
	}
}

456 
	$dao_upd©e_°rög_vÆue
(
q˛oud_dao_ty≥
 
ty≥
, *
fûe_∑th
, *
èbÀ_«me
,

457 
key_∑ú_°
 *
c⁄d_li°
, 
c⁄d_li°_size
,

458 
key_∑ú_°
 *
d©a_li°
, 
d©a_li°_size
)

460 
ªt
 = 
NO_ERROR
;

461 
ty≥
)

465 
dao_ty≥_db
:

466 
ªt
 = 
	`db_upd©e_°rög_vÆue
(
fûe_∑th
, 
èbÀ_«me
, 
c⁄d_li°
,

467 
c⁄d_li°_size
, 
d©a_li°
, 
d©a_li°_size
);

469 
dao_ty≥_c⁄fig
:

472  
ªt
;

473 
	}
}

475 
	$dao_dr›_c⁄èöî
(
q˛oud_dao_ty≥
 
ty≥
, *
fûe_∑th
, *
èbÀ_«me
)

477 
ªt
 = 
NO_ERROR
;

478 
ty≥
)

482 
dao_ty≥_db
:

483 
ªt
 = 
	`db_dr›_èbÀ
(
fûe_∑th
, 
èbÀ_«me
);

485 
dao_ty≥_c⁄fig
:

488  
ªt
;

489 
	}
}

	@libs/qid/qcloud_gen_apirequest.c

3 
	~<cuæ/cuæ.h
>

4 
	~<î∫o.h
>

5 
	~<m©h.h
>

6 
	~<js⁄-c/js⁄.h
>

7 
	~<time.h
>

9 
	~<sys/°©.h
>

10 
	~"°d_hdr.h
"

11 
	~"comm_hdr.h
"

12 
	~"q˛oud_utû.h
"

13 
	~"q˛oud.h
"

14 
	~"qid_°ru˘.h
"

15 
	~"qid_°©us_code.h
"

16 
	~"m˙_≠i.h
"

17 
	~"q˛oud_gí_≠úeque°.h
"

19 
	#SET_JSON_STR
(
ROOT
, 
FIELD
, 
VALUE
)do{ \

20 if((
VALUE
 !
NULL
) && (VALUE[0] != '\0')) { \

21 
	`js⁄_obje˘_obje˘_add
(
ROOT
, 
FIELD
, \

22 
	`js⁄_obje˘_√w_°rög
(
VALUE
)); \

24 }0)

	)

26 
	#JSON_OBJ_MALLOC
(
PTR
, 
mÆloc_ty≥
, 
RETURN_VALUE
) do{ \

27 
PTR
 = 
	`mÆloc_ty≥
(); \

28 if(
PTR
 =
NULL
){ \

29 
	`QNAP_LOG_ERR_NL
("FailedÅo malloc for json_object"); \

30 
RETURN_VALUE
 = 
ERR_NULL_POINTER
; \

32 }0)

	)

34 
	s_q˛oud_ª•⁄£_°
{

35 
	mcode
;

36 *
	mmesßge
;

37 *
	mˇŒ°ack
;

39 
js⁄_obje˘
* 
	mroŸ_obj
;

40 
js⁄_obje˘
* 
	mªsu…
;

42 }
	tq˛oud_ª•⁄£_°
;

44 *
	gq˛oud_js⁄_ª•_code
 = "code";

45 *
	gq˛oud_js⁄_ª•_mesßge
 = "message";

46 *
	gq˛oud_js⁄_ª•_ˇŒ°ack
 = "stacktrace";

47 *
	gq˛oud_js⁄_ª•_ªsu…
 = "result";

49 *
	gEVENT_LEVEL
[] = {"debug","info", "notice","warn", "error","crit","alert", "emerg"};

51 
	$js⁄_gªp_vÆue
–
js⁄_obje˘
* 
js⁄_obj
, 
key_∑ú_°
* 
li°
,

52 
size_t
 
li°_size
, 
ödex
)

54 
ªt
 = 0;

55 
	`js⁄_obje˘_obje˘_f‹óch
–
js⁄_obj
, 
key
, 
vÆue
)

57 if–
	`js⁄_obje˘_gë_ty≥
(
vÆue
Ë=
js⁄_ty≥_obje˘
){

58 
	`js⁄_gªp_vÆue
–
vÆue
, 
li°
, 
li°_size
, 
ödex
);

60 if–
	`°rcmp
–
li°
[
ödex
].
key
, key) == 0){

61 
	`°∫˝y
–
li°
[
ödex
].
vÆue
, 
	`js⁄_obje˘_gë_°rög
–vÆuê), 
PAIR_VALUE_LEN
);

65  
ªt
;

66 
	}
}

68 
	$js⁄_∑r£
(*
ª•
, 
key_∑ú_°
 *
íåy_li°
, 
size_t
 
num_li°
)

71 
js⁄_obje˘
 *
√w_obj
;

75 
√w_obj
 = 
	`js⁄_tokíî_∑r£
(
ª•
);

76 i‡(
√w_obj
 =
NULL
 ) {

77 
	`QNAP_LOG_ERR_NL
("json-c_parse:Åruncated JSON string");

78  
ERR_INVALID_VALUE
;

81 
ödex_˙t
 = 0;

82 
ödex_˙t
 = 0; index_˙à< 
num_li°
; index_cnt++) {

83 
	`js⁄_gªp_vÆue
(
√w_obj
, 
íåy_li°
, 
num_li°
, 
ödex_˙t
);

88 
	`js⁄_obje˘_put
(
√w_obj
);

89  
NO_ERROR
;

90 
	}
}

92 
	$∑r£_js⁄_‰ì_q˛oud_ª•
(
q˛oud_ª•⁄£_°
 *
qªsu…
){

93 if(
qªsu…
){

94 if(
qªsu…
->
mesßge
){

95 
	`‰ì
(
qªsu…
->
mesßge
);

98 if(
qªsu…
->
ˇŒ°ack
){

99 
	`‰ì
(
qªsu…
->
ˇŒ°ack
);

102 if(
qªsu…
->
roŸ_obj
){

103 
	`js⁄_obje˘_put
(
qªsu…
->
roŸ_obj
);

107 
	}
}

109 
	$∑r£_js⁄_q˛oud_roŸ
(*
ª•
, 
q˛oud_ª•⁄£_°
 *
qªsu…
)

111 
rc
 = 
ERR_NULL_POINTER
;

112 
js⁄_obje˘
* 
roŸ_obj
 = 
NULL
;

113 
js⁄_obje˘
* 
èrgë
;

115 if(!
ª•
 || !
qªsu…
){

116 
exô
;

119 if(
ª•
[0] == '\0'){

120 
rc
 = 
ERR_INPUT_LEN
;

121 
exô
;

124 
	`mem£t
(
qªsu…
, 0x0, (
q˛oud_ª•⁄£_°
));

129 
roŸ_obj
 = 
	`js⁄_tokíî_∑r£
(
ª•
);

130 if(!
roŸ_obj
){

131 
rc
 = 
ERR_INVALID_FORMAT
;

132 
	`QNAP_LOG_ERR_NL
("FailedÅoÖarse Qcloud jsonÑesponse.");

133 
	`QNAP_LOG_ERR_NL
("%s", 
ª•
);

134 
exô
;

140 
èrgë
 = 
	`js⁄_obje˘_obje˘_gë
(
roŸ_obj
, 
q˛oud_js⁄_ª•_code
);

141 if–
	`js⁄_obje˘_gë_öt
(
èrgë
) != 0){

142 
	`QNAP_LOG_DEBUG_NL
("DEBUG Q˛oud code: %d", 
	`js⁄_obje˘_gë_öt
(
èrgë
));

144 
qªsu…
->
code
 = (
èrgë
)?
	`js⁄_obje˘_gë_öt
—¨gë):
ERR_INVALID_FORMAT
;

149 
èrgë
 = 
	`js⁄_obje˘_obje˘_gë
(
roŸ_obj
, 
q˛oud_js⁄_ª•_mesßge
);

150 
qªsu…
->
mesßge
 = (
èrgë
)?
	`°rdup
(
	`js⁄_obje˘_gë_°rög
—¨gë)):
NULL
;

152 if(
qªsu…
->
code
 !
NO_ERROR
){

156 
èrgë
 = 
	`js⁄_obje˘_obje˘_gë
(
roŸ_obj
, 
q˛oud_js⁄_ª•_ˇŒ°ack
);

157 
qªsu…
->
ˇŒ°ack
 = 
èrgë
?
	`°rdup
(
	`js⁄_obje˘_gë_°rög
—¨gë)):
NULL
;

158 
	`QNAP_LOG_ERR_NL
("Q˛oud code: %d", 
qªsu…
->
code
);

159 
	`QNAP_LOG_ERR_NL
("Q˛oud msg: %s", 
qªsu…
->
mesßge
?qresult->message:"NULL");

160 
	`QNAP_LOG_ERR_NL
("Q˛oud cÆl°ack: %s", 
qªsu…
->
ˇŒ°ack
?qresult->callstack:"NULL");

161 
qªsu…
->
ªsu…
 = 
NULL
;

162 
rc
 = 
qªsu…
->
code
;

163 
exô
;

166 
qªsu…
->
ªsu…
 = 
	`js⁄_obje˘_obje˘_gë
(
roŸ_obj
, 
q˛oud_js⁄_ª•_ªsu…
);

167 if(!
qªsu…
->
ªsu…
){

168 
	`QNAP_LOG_ERR_NL
("QcloudÑesult objectÇot found");

169 
rc
 = 
ERR_INVALID_VALUE
;

170 
exô
;

173 
rc
 = 
NO_ERROR
;

175 
exô
:

176 if(
rc
 !
NO_ERROR
){

177 
	`QNAP_LOG_ERR_NL
("rc: %d", 
rc
);

180 if(
qªsu…
){

181 
qªsu…
->
roŸ_obj
 =Ñoot_obj;

184  
rc
;

186 
	}
}

188 
	$∑r£_js⁄_q˛oud_dóÀr_li°
(*
ª•
, * 
p‹t_ty≥
,

189 
URL_T
 **
ªtu∫ed_li°
, 
size_t
 *
cou¡
)

192 
rc
 = 
ERR_NULL_POINTER
;

193 
q˛oud_ª•⁄£_°
 
qªsu…
;

194 
i
;

195 
URL_T
* 
dóÀr_li°
;

197 if–!
ª•
 ||Ñesp[0] == '\0' ){

198 
rc
 = 
ERR_INVALID_VALUE
;

199 
exô
;

202 if(!
ªtu∫ed_li°
 || !
cou¡
){

203 
exô
;

206 
rc
 = 
	`∑r£_js⁄_q˛oud_roŸ
(
ª•
, &
qªsu…
);

207 if(
rc
 !
NO_ERROR
){

208 
exô
;

211 
¨øy_li°
 *
dóÀrs
 = 
	`js⁄_obje˘_gë_¨øy
(
qªsu…
.
ªsu…
);

212 
num_dóÀr
 = 
	`js⁄_obje˘_¨øy_Àngth
(
qªsu…
.
ªsu…
);

214 if(
num_dóÀr
 == 0){

215 
	`QNAP_LOG_WARN_NL
("There isÇo dealers..");

216 
rc
 = 
ERR_INVALID_VALUE
;

217 
exô
;

220 
dóÀr_li°
 = 
	`ˇŒoc
(
num_dóÀr
, (
URL_T
));

221 if(!
dóÀr_li°
){

222 
	`QNAP_LOG_ERR_NL
("Allocate dealerÜist failed..");

223 
rc
 =
ERR_NO_MEMORY
;

224 
exô
;

227 *
ªtu∫ed_li°
 = 
dóÀr_li°
;

228 *
cou¡
 = 
num_dóÀr
;

229 
i
 = 0 ; i < 
num_dóÀr
; i++, 
dóÀr_li°
++){

230 
js⁄_obje˘
 *
obj
 = 
	`¨øy_li°_gë_idx
(
dóÀrs
, 
i
);

231 c⁄° *
ù
 = 
	`js⁄_obje˘_gë_°rög
(
	`js⁄_obje˘_obje˘_gë
(
obj
, "dealer_ip"));

232 if(
ù
){

233 
	`°∫˝y
(
dóÀr_li°
->
addr_°r
, 
ù
, 
URL_STR_LEN
);

235 
dóÀr_li°
->
p‹t
 = 
	`js⁄_obje˘_gë_öt
(
	`js⁄_obje˘_obje˘_gë
(
obj
, 
p‹t_ty≥
));

238 
exô
:

239 
	`∑r£_js⁄_‰ì_q˛oud_ª•
(&
qªsu…
);

240  
rc
;

242 
	}
}

244 
	$∑r£_js⁄_q˛oud_devi˚_öfo
(*
ª•
, 
q«p_dev_öfo
 **
devc_öfo
, 
size_t
* 
li°_size
)

246 
rc
 = 
ERR_NULL_POINTER
;

247 
q˛oud_ª•⁄£_°
 
qªsu…
;

248 
˙t
 = 0;

249 
js⁄_obje˘
 *
obj
 = 
NULL
;

250 
js⁄_obje˘
 *
èrgë
 = 
NULL
;

251 
js⁄_obje˘
 *
dev_öfo
 = 
NULL
;

252 c⁄° *
èrgë_°r
;

253 
q«p_dev_öfo
 * 
dev_öfo_li°
 = 
NULL
;

254 if–!(
ª•
)){

255 
exô
;

258 if(
ª•
[0] == '\0'){

259 
rc
 =
ERR_INVALID_VALUE
;

260 
exô
;

263 
	`mem£t
(&
qªsu…
, 0x0, (
q˛oud_ª•⁄£_°
));

264 
rc
 = 
	`∑r£_js⁄_q˛oud_roŸ
(
ª•
, &
qªsu…
);

265 if(
rc
 !
NO_ERROR
){

266 
exô
;

269 
¨øy_li°
 *
öfo_li°
 = 
	`js⁄_obje˘_gë_¨øy
(
qªsu…
.
ªsu…
);

270 
num_dev_öfo
 = 
	`js⁄_obje˘_¨øy_Àngth
(
qªsu…
.
ªsu…
);

272 
rc
 = 
ERR_INVALID_VALUE
;

273 if(
num_dev_öfo
 =0 || 
öfo_li°
 =
NULL
){

274 
	`QNAP_LOG_WARN_NL
("There isÇo device info..");

275 
exô
;

277 
dev_öfo_li°
 = (
q«p_dev_öfo
 *)
	`ˇŒoc
–
num_dev_öfo
, (qnap_dev_info));

278 *
li°_size
 = (
size_t
)
num_dev_öfo
;

280  
˙t
 = 0; c¡ < 
num_dev_öfo
; cnt++){

281 
obj
 = 
	`¨øy_li°_gë_idx
(
öfo_li°
, 
˙t
);

283 
èrgë
 = 
	`js⁄_obje˘_obje˘_gë
(
obj
, "device_id");

284 if(
èrgë
){

285 
èrgë_°r
 = 
	`js⁄_obje˘_gë_°rög
(
èrgë
);

286 if(
èrgë_°r
){

287 
	`°∫˝y
(
dev_öfo_li°
[
˙t
].
devi˚_id
, 
èrgë_°r
, 
QID_DEVICE_ID_LEN
);

288 
rc
 = 
NO_ERROR
;

291 
	`js⁄_obje˘_put
(
èrgë
);

293 
èrgë
 = 
	`js⁄_obje˘_obje˘_gë
(
obj
, "device_name");

294 if(
èrgë
){

295 
èrgë_°r
 = 
	`js⁄_obje˘_gë_°rög
(
èrgë
);

296 if(
èrgë_°r
){

297 
	`°∫˝y
(
dev_öfo_li°
[
˙t
].
devi˚_«me
, 
èrgë_°r
, 
QID_DEVICE_NAME_LEN
);

298 
rc
 = 
NO_ERROR
;

301 
	`js⁄_obje˘_put
(
èrgë
);

303 
èrgë
 = 
	`js⁄_obje˘_obje˘_gë
(
obj
, "token");

304 if(
èrgë
){

305 
èrgë_°r
 = 
	`js⁄_obje˘_gë_°rög
(
èrgë
);

306 if(
èrgë_°r
){

307 
	`°∫˝y
(
dev_öfo_li°
[
˙t
].
tokí
, 
èrgë_°r
, 
MAX_QID_LEN
);

308 
rc
 = 
NO_ERROR
;

311 
	`js⁄_obje˘_put
(
èrgë
);

313 
dev_öfo
 = 
	`js⁄_obje˘_obje˘_gë
(
obj
, "info");

314 
èrgë
 = 
	`js⁄_obje˘_obje˘_gë
(
dev_öfo
, "device_type");

315 if(
èrgë
){

316 
èrgë_°r
 = 
	`js⁄_obje˘_gë_°rög
(
èrgë
);

317 if(
èrgë_°r
){

318 
	`°∫˝y
(
dev_öfo_li°
[
˙t
].
devi˚_ty≥
, 
èrgë_°r
, 
MAX_QID_LEN
);

319 
rc
 = 
NO_ERROR
;

322 
	`js⁄_obje˘_put
(
èrgë
);

324 
èrgë
 = 
	`js⁄_obje˘_obje˘_gë
(
dev_öfo
, "fw_serial_number");

325 if(
èrgë
){

326 
èrgë_°r
 = 
	`js⁄_obje˘_gë_°rög
(
èrgë
);

327 if(
èrgë_°r
){

328 
	`°∫˝y
(
dev_öfo_li°
[
˙t
].
fw_£rül_numbî
, 
èrgë_°r
, 
MAX_QID_LEN
);

329 
rc
 = 
NO_ERROR
;

332 
	`js⁄_obje˘_put
(
èrgë
);

334 
èrgë
 = 
	`js⁄_obje˘_obje˘_gë
(
dev_öfo
, "model_name");

335 if(
èrgë
){

336 
èrgë_°r
 = 
	`js⁄_obje˘_gë_°rög
(
èrgë
);

337 if(
èrgë_°r
){

338 
	`°∫˝y
(
dev_öfo_li°
[
˙t
].
devi˚_modñ
, 
èrgë_°r
, 
MAX_QID_LEN
);

339 
rc
 = 
NO_ERROR
;

342 
	`js⁄_obje˘_put
(
èrgë
);

344 
èrgë
 = 
	`js⁄_obje˘_obje˘_gë
(
dev_öfo
, "firmware_version");

345 if(
èrgë
){

346 
èrgë_°r
 = 
	`js⁄_obje˘_gë_°rög
(
èrgë
);

347 if(
èrgë_°r
){

348 
	`°∫˝y
(
dev_öfo_li°
[
˙t
].
fúmw¨e_vîsi⁄
, 
èrgë_°r
, 
MAX_QID_LEN
);

349 
rc
 = 
NO_ERROR
;

352 
	`js⁄_obje˘_put
(
èrgë
);

353 
èrgë
 = 
	`js⁄_obje˘_obje˘_gë
(
dev_öfo
, "mac_address");

354 if(
èrgë
){

355 
èrgë_°r
 = 
	`js⁄_obje˘_gë_°rög
(
èrgë
);

356 if(
èrgë_°r
){

357 
	`°∫˝y
(
dev_öfo_li°
[
˙t
].
mac_°r
, 
èrgë_°r
, 
QID_MAC_STR_LONG_LEN
);

358 
rc
 = 
NO_ERROR
;

361 
	`js⁄_obje˘_put
(
èrgë
);

362 
	`js⁄_obje˘_put
(
dev_öfo
);

364 
èrgë
 = 
	`js⁄_obje˘_obje˘_gë
(
obj
, "updated_at");

365 if(
èrgë
){

366 
èrgë_°r
 = 
	`js⁄_obje˘_gë_°rög
(
èrgë
);

367 if(
èrgë_°r
){

368 
	`°∫˝y
(
dev_öfo_li°
[
˙t
].
œ°_upd©e_time
, 
èrgë_°r
, 
MAX_QID_LEN
);

369 
rc
 = 
NO_ERROR
;

372 
	`js⁄_obje˘_put
(
èrgë
);

373 
	`js⁄_obje˘_put
(
obj
);

376 
exô
:

377 if–
NO_ERROR
 =
rc
){

378 *
devc_öfo
 = 
dev_öfo_li°
;

380 
	`∑r£_js⁄_‰ì_q˛oud_ª•
(&
qªsu…
);

382  
rc
;

383 
	}
}

385 
js⁄_obje˘
* 
	$gíî©e_devi˚_loˇl_u£r_¨r
(** 
u£rs
, 
num
)

388 
˙t
 = 0, 
rc
 = 
NO_ERROR
;

389 
js⁄_obje˘
 *
íåy
 = 
NULL
;

390 
js⁄_obje˘
 *
ªt
 = 
NULL
;

391 
	`JSON_OBJ_MALLOC
(
ªt
, 
js⁄_obje˘_√w_¨øy
, 
rc
);

392 
˙t
 = 0; c¡ < 
num
; c¡++, 
u£rs
++) {

393 i‡(
	`°æí
(*
u£rs
)) {

394 
	`JSON_OBJ_MALLOC
(
íåy
, 
js⁄_obje˘_√w_obje˘
, 
rc
);

395 
	`SET_JSON_STR
(
íåy
, "u£r_«me", *
u£rs
);

396 
	`js⁄_obje˘_¨øy_add
(
ªt
, 
íåy
);

403 if(
NO_ERROR
 !
rc
){

404 
	`js⁄_obje˘_put
(
ªt
);

405 
ªt
 = 
NULL
;

408  
ªt
;

409 
	}
}

411 
	$∑r£_exã∫Æ_ù
(* 
ª•
, * 
exã∫Æ_ù
, 
size_t
 
ù_Àn
)

413 
ªt
 = 
ERR_NULL_POINTER
;

414 
q˛oud_ª•⁄£_°
 
qªsu…
;

415 if–!
exã∫Æ_ù
 || !
ª•
)

417 
exô
;

419 
	`mem£t
(&
qªsu…
, 0x0, (
q˛oud_ª•⁄£_°
));

420 
ªt
 = 
	`∑r£_js⁄_q˛oud_roŸ
(
ª•
, &
qªsu…
);

421 if(
ªt
 !
NO_ERROR
){

422 if(
ªt
 =
ERR_INVALID_VALUE
){

423 
	`QNAP_LOG_DEBUG_NL
("∑r£_js⁄_q˛oud_roŸÉº‹:Ñë:%d", 
ªt
);

424 
ªt
 = 
MCN_ERR_JSON_FORMAT
;

426 
exô
;

429 
js⁄_obje˘
 *
obj
 = 
	`js⁄_obje˘_obje˘_gë
(
qªsu…
.
ªsu…
, "public_ip");

430 c⁄° *
public_ù
 = 
	`js⁄_obje˘_gë_°rög
(
obj
);

431 if(
public_ù
){

432 
	`°∫˝y
(
exã∫Æ_ù
, 
public_ù
, 
ù_Àn
);

433 
	`QNAP_LOG_DEBUG_NL
("∑r£_exã∫Æ_ùÑë:%s", 
public_ù
);

435 
ªt
 = 
ERR_NULL_POINTER
;

438 
exô
:

439 
	`∑r£_js⁄_‰ì_q˛oud_ª•
(&
qªsu…
);

440  
ªt
;

441 
	}
}

443 
	$gíî©e_p‹t_ã°_°r
(
q˛oud_°
 *
˘x
, * 
ªt
, 
size_t
 
size
,

444 * 
uæ
)

446 
rc
 = 
NO_ERROR
;

447 
js⁄_obje˘
 *
íåy
 = 
NULL
;

448 
	`JSON_OBJ_MALLOC
(
íåy
, 
js⁄_obje˘_√w_obje˘
, 
rc
);

449 if–
NO_ERROR
 !
rc
)

450 
exô
;

452 
	`SET_JSON_STR
(
íåy
, "uæ",
uæ
);

453 
	`SET_JSON_STR
(
íåy
, "method", "GET");

454 
	`¢¥ötf
(
ªt
, 
size
, "%s", 
	`js⁄_obje˘_to_js⁄_°rög
(
íåy
));

455 
exô
:

456  
rc
;

457 
	}
}

459 
js⁄_obje˘
*

460 
	$gíî©e_devi˚_£rvi˚_p‹t_¨r
(
m˙_£rvi˚_p‹t
 *
p‹t_li°
, 
num_£rvc
)

462 
˙t
 = 0, 
rc
 = 
NO_ERROR
;

463 
m˙_£rvi˚_p‹t
 *
li°
 = 
p‹t_li°
;

464 
js⁄_obje˘
 *
íåy
 = 
NULL
;

465 
js⁄_obje˘
 *
ªt
 = 
NULL
;

466 
	`JSON_OBJ_MALLOC
(
ªt
, 
js⁄_obje˘_√w_¨øy
, 
rc
);

467 
˙t
 = 0; c¡ < 
num_£rvc
; c¡++, 
li°
++) {

468 i‡(
	`°æí
(
li°
->
«me
)) {

469 
	`JSON_OBJ_MALLOC
(
íåy
, 
js⁄_obje˘_√w_obje˘
, 
rc
);

471 if(
li°
->
sub_«me
[0] != '\0'){

472 
£rvi˚_«me
[
QCLOUD_PUBLISHED_SERVC_NAME_LEN
+1];

473 
	`¢¥ötf
(
£rvi˚_«me
, 
QCLOUD_PUBLISHED_SERVC_NAME_LEN
, "%s %s",

474 
li°
->
sub_«me
,Üi°->
«me
);

475 
	`°∫˝y
(
li°
->
«me
, 
£rvi˚_«me
, 
QCLOUD_PUBLISHED_SERVC_NAME_LEN
);

478 
	`SET_JSON_STR
(
íåy
, "£rvi˚_«me", 
li°
->
«me
);

479 
	`js⁄_obje˘_obje˘_add
(
íåy
, "external_port",

480 
	`js⁄_obje˘_√w_öt
(
li°
->
exäl_p‹t
));

481 
	`js⁄_obje˘_obje˘_add
(
íåy
, "internal_port",

482 
	`js⁄_obje˘_√w_öt
(
li°
->
öäl_p‹t
));

483 if(
li°
->
exäl_p‹t
 <0 ||Üi°->
öäl_p‹t
 <= 0){

484 
rc
 = 
ERR_INVALID_PORT
;

485 
exô
;

488 
	`SET_JSON_STR
(
íåy
, "¥Ÿocﬁ",
li°
->
¥Ÿo
);

489 
	`js⁄_obje˘_¨øy_add
(
ªt
, 
íåy
);

492 
exô
:

493 if(
NO_ERROR
 !
rc
){

494 
	`js⁄_obje˘_put
(
ªt
);

495 
ªt
 = 
NULL
;

498  
ªt
;

499 
	}
}

501 
js⁄_obje˘
*

502 
	$gíî©e_devi˚_loˇl_£rvi˚_¨r
(
m˙_ddns_publish_°
 *
£rvc_li°
,

503 
num_£rvc
)

505 
˙t
 = 0, 
rc
 = 
NO_ERROR
;

506 
js⁄_obje˘
 *
íåy
 = 
NULL
;

507 
js⁄_obje˘
 *
ªt
 = 
NULL
;

508 
	`JSON_OBJ_MALLOC
(
ªt
, 
js⁄_obje˘_√w_¨øy
, 
rc
);

509 
m˙_ddns_publish_°
* 
£rvc
 = 
£rvc_li°
;

510 
£rv˙ame
[2*
DDNS_SERVC_NAME_LEN
+1];

511 
˙t
 = 0; c¡ < 
num_£rvc
; c¡++, 
£rvc
++) {

512 i‡(
	`°æí
(
£rvc
->
«me
)) {

513 
	`JSON_OBJ_MALLOC
(
íåy
, 
js⁄_obje˘_√w_obje˘
, 
rc
);

514 if(
	`°æí
(
£rvc
->
sub_«me
) > 0){

515 
	`mem£t
(
£rv˙ame
, 0, (servcname));

516 
	`•rötf
(
£rv˙ame
,"%†%s", 
£rvc
->
sub_«me
,£rvc->
«me
);

517 
	`SET_JSON_STR
(
íåy
, "£rvi˚_«me",
£rv˙ame
);

519 
	`SET_JSON_STR
(
íåy
, "£rvi˚_«me",
£rvc
->
«me
);

521 
	`SET_JSON_STR
(
íåy
, "uri",
£rvc
->
logö_∑th
);

522 
	`js⁄_obje˘_obje˘_add
(
íåy
, "private",

523 
	`js⁄_obje˘_√w_boﬁón
(
£rvc
->
is_¥iv©e
));

524 
	`js⁄_obje˘_obje˘_add
(
íåy
, "published",

525 
	`js⁄_obje˘_√w_boﬁón
(
£rvc
->
is_published
));

526 
	`js⁄_obje˘_¨øy_add
(
ªt
, 
íåy
);

530 if(
NO_ERROR
 !
rc
){

531 
	`js⁄_obje˘_put
(
ªt
);

532 
ªt
 = 
NULL
;

535  
ªt
;

536 
	}
}

538 
	$gíî©e_devi˚_loˇl_u£r_°r
(* 
ªt
, 
size_t
 
ªt_size
, ** 
u£rs
, 
u£r_cou¡
)

540 
js⁄_obje˘
* 
ªs
 = 
	`gíî©e_devi˚_loˇl_u£r_¨r
(
u£rs
, 
u£r_cou¡
);

541 if–
ªs
 =
NULL
 ){

542  
ERR_NULL_POINTER
;

544 
	`¢¥ötf
(
ªt
, 
ªt_size
, "%s", 
	`js⁄_obje˘_to_js⁄_°rög
(
ªs
));

545 
	`js⁄_obje˘_put
(
ªs
);

546  
NO_ERROR
;

547 
	}
}

549 
	$gíî©e_devi˚_£rvi˚_p‹t_°r
(* 
ªt
, 
size_t
 
ªt_size
, 
m˙_£rvi˚_p‹t
 *
p‹t_li°
, 
num_£rvc
)

551 
js⁄_obje˘
* 
ªs
 = 
	`gíî©e_devi˚_£rvi˚_p‹t_¨r
(
p‹t_li°
, 
num_£rvc
);

552 if–
ªs
 =
NULL
 ){

553  
ERR_NULL_POINTER
;

555 
	`¢¥ötf
(
ªt
, 
ªt_size
, "%s", 
	`js⁄_obje˘_to_js⁄_°rög
(
ªs
));

556 
	`js⁄_obje˘_put
(
ªs
);

557  
NO_ERROR
;

558 
	}
}

560 
	$gíî©e_devi˚_loˇl_£rvi˚_°r
(* 
ªt
, 
size_t
 
ªt_size
, 
m˙_ddns_publish_°
 *
£rvc_li°
,

561 
num_£rvc
)

563 
js⁄_obje˘
* 
ªs
 = 
	`gíî©e_devi˚_loˇl_£rvi˚_¨r
(
£rvc_li°
, 
num_£rvc
);

564 if–
ªs
 =
NULL
 ){

565  
ERR_NULL_POINTER
;

567 
	`¢¥ötf
(
ªt
, 
ªt_size
, "%s", 
	`js⁄_obje˘_to_js⁄_°rög
(
ªs
));

568 
	`js⁄_obje˘_put
(
ªs
);

569  
NO_ERROR
;

570 
	}
}

572 
	$gíî©e_ddns_£rvi˚_°r
(
q˛oud_°
 *
˘x
, * 
ªt
, 
size_t
 
size
,

573 
√ed_devi˚_id
)

575 
rc
 = 
NO_ERROR
;

576 
js⁄_obje˘
 *
íåy
 = 
NULL
;

578 
	`JSON_OBJ_MALLOC
(
íåy
, 
js⁄_obje˘_√w_obje˘
, 
rc
);

579 i‡(
√ed_devi˚_id
)

580 
	`SET_JSON_STR
(
íåy
, "devi˚_id",
˘x
->
devi˚_id
);

582 
	`¢¥ötf
(
ªt
, 
size
, "%s", 
	`js⁄_obje˘_to_js⁄_°rög
(
íåy
));

584 
exô
:

585  
rc
;

586 
	}
}

588 
js⁄_obje˘
* 
	$gíî©e_devi˚_œnù_li°_¨r
(
œn_ù_öfo_°
 *
œn_ù_öfo
)

590 
˙t
, 
rc
 = 
NO_ERROR
, 
num_js⁄_obj
 = 0;;

591 
js⁄_obje˘
 *
ªt
 = 
NULL
;

592 
js⁄_obje˘
 *
íåy
 = 
NULL
;

593 
	`JSON_OBJ_MALLOC
(
ªt
, 
js⁄_obje˘_√w_¨øy
, 
rc
);

595 if(
œn_ù_öfo
->
œn_ù_cou¡
 == 0){

596 
rc
 = 
ERR_INVALID_VALUE
;

597 
exô
;

600 
˙t
 = 0; c¡ < 
œn_ù_öfo
->
œn_ù_cou¡
; cnt++) {

601 
	`JSON_OBJ_MALLOC
(
íåy
, 
js⁄_obje˘_√w_obje˘
, 
rc
);

602 
	`SET_JSON_STR
(
íåy
, "«me",
œn_ù_öfo
->
öãrÁ˚
[
˙t
]);

603 if–
	`°rcmp
(
IP_VERSION4
, 
œn_ù_öfo
->
œn_ù_vîsi⁄
[
˙t
]) == 0){

604 if(
	`°æí
(
œn_ù_öfo
->
œn_ù
[
˙t
]) != 0){

605 
	`SET_JSON_STR
(
íåy
, 
JSON_STR_IPV4
,
œn_ù_öfo
->
œn_ù
[
˙t
]);

607 }if(
	`°rcmp
(
IP_VERSION6
, 
œn_ù_öfo
->
œn_ù_vîsi⁄
[
˙t
]) == 0){

608 if(
	`°æí
(
œn_ù_öfo
->
œn_ù
[
˙t
]) != 0){

609 
	`SET_JSON_STR
(
íåy
, 
JSON_STR_IPV6
,
œn_ù_öfo
->
œn_ù
[
˙t
]);

612 
	`js⁄_obje˘_¨øy_add
(
ªt
, 
íåy
);

614 
num_js⁄_obj
 = 
	`js⁄_obje˘_¨øy_Àngth
(
ªt
);

615 if–
num_js⁄_obj
 == 0){

616 
rc
 = 
ERR_INVALID_VALUE
;

618 
exô
:

619 if(
NO_ERROR
 !
rc
){

620 
	`QNAP_LOG_INFO_NL
("num_js⁄_obj:%dÜ™_ù_öfo->œn_ù_cou¡:%d", 
num_js⁄_obj
, 
œn_ù_öfo
->
œn_ù_cou¡
);

621 
	`js⁄_obje˘_put
(
ªt
);

622 
ªt
 = 
NULL
;

625  
ªt
;

626 
	}
}

628 
js⁄_obje˘
* 
	$gíî©e_devi˚_w™ù_li°_¨r
(
q˛oud_°
 *
˘x
)

630 
rc
 = 
NO_ERROR
;

631 
js⁄_obje˘
 *
ªt
 = 
NULL
;

632 
js⁄_obje˘
 *
íåy
 = 
NULL
;

633 
	`JSON_OBJ_MALLOC
(
ªt
, 
js⁄_obje˘_√w_¨øy
, 
rc
);

634 
ext_ù
[
IP_STR_LEN
+1];

635 
ªåy_times
 = 0;

636 
tmp_buff
[
TMP_BUFF_LEN
+1];

637 
q˛oud_ª•⁄£_°
 
qªsu…
;

638 
js⁄_obje˘
 *
public_ù
 = 
NULL
;

639 
èg_gë_ext_ù
:

642 
	`q˛oud_gë_exã∫Æ_ù
(
˘x
, 
ext_ù
, (ext_ip));

643 if–
	`°æí
(
ext_ù
) == 0){

644 
rc
 = 
	`qid_sys_gë_geo_ù_js⁄
(
tmp_buff
, 
TMP_BUFF_LEN
);

645 
	`mem£t
(&
qªsu…
, 0x0, (
q˛oud_ª•⁄£_°
));

646 
rc
 = 
	`∑r£_js⁄_q˛oud_roŸ
(
tmp_buff
, &
qªsu…
);

647 if(
rc
 !
NO_ERROR
){

648 
rc
 = 
ERR_GET_DEVICE_INFO
;

649 
exô
;

651 
public_ù
 = 
	`js⁄_obje˘_obje˘_gë
(
qªsu…
.
ªsu…
, "public_ip");

652 if(
public_ù
){

653 
	`°∫˝y
(
ext_ù
, 
	`js⁄_obje˘_gë_°rög
(
public_ù
), 
IP_STR_LEN
);

656 if(
	`°æí
(
ext_ù
Ë=0 && 
ªåy_times
 < 5){

657 
ªåy_times
++;

658 
	`u¶ìp
(500);

659 
èg_gë_ext_ù
;

662 
	`JSON_OBJ_MALLOC
(
íåy
, 
js⁄_obje˘_√w_obje˘
, 
rc
);

663 if–
	`utû_is_vÆid_ùv4
(
ext_ù
Ë=
TRUE
){

664 
	`SET_JSON_STR
(
íåy
, 
JSON_STR_IPV4
,
ext_ù
);

666 
	`SET_JSON_STR
(
íåy
, 
JSON_STR_IPV6
,
ext_ù
);

668 
	`js⁄_obje˘_¨øy_add
(
ªt
, 
íåy
);

670 
exô
:

671 if(
NO_ERROR
 !
rc
){

672 
	`js⁄_obje˘_put
(
ªt
);

673 
ªt
 = 
NULL
;

676  
ªt
;

677 
	}
}

679 
js⁄_obje˘
* 
	$gíî©e_devi˚_g©eway
(
œn_ù_öfo_°
 *
œn_ù_öfo
)

681 
rc
 = 
NO_ERROR
;

682 
js⁄_obje˘
 *
ªt
 = 
NULL
;

683 
	`JSON_OBJ_MALLOC
(
ªt
, 
js⁄_obje˘_√w_obje˘
, 
rc
);

684 
g©eway_ù
[
IP_STR_LEN
+1];

685 
gw_öãrÁ˚
[
IP_STR_LEN
+1];

686 
	`mem£t
(
g©eway_ù
, 0, 
IP_STR_LEN
);

687 
	`mem£t
(
gw_öãrÁ˚
, 0, 
IP_STR_LEN
);

688 
rc
 = 
	`qid_sys_gë_g©eway_ù
(
g©eway_ù
, 
gw_öãrÁ˚
);

689 if(
NO_ERROR
 !
rc
 || 
	`°æí
(
g©eway_ù
Ë=0 || såÀn(
gw_öãrÁ˚
) == 0){

690 
rc
 = 
ERR_INVALID_VALUE
;

691 
exô
;

693 
	`SET_JSON_STR
(
ªt
, "«me",
gw_öãrÁ˚
);

694 if–
	`utû_is_vÆid_ùv4
(
œn_ù_öfo
->
œn_gw
Ë=
TRUE
){

695 
	`SET_JSON_STR
(
ªt
, 
JSON_STR_IPV4
,
œn_ù_öfo
->
œn_gw
);

697 
	`SET_JSON_STR
(
ªt
, 
JSON_STR_IPV6
,
œn_ù_öfo
->
œn_gw
);

700 
exô
:

701 if(
NO_ERROR
 !
rc
){

702 
	`js⁄_obje˘_put
(
ªt
);

703 
ªt
 = 
NULL
;

706  
ªt
;

707 
	}
}

709 
js⁄_obje˘
* 
	$gíî©e_devi˚_öfo
(
q˛oud_°
 *
˘x
, * 
√w_devi˚_«me
)

711 
rc
 = 
NO_ERROR
;

712 
js⁄_obje˘
 *
ªt
 = 
NULL
;

713 
key_∑ú_°
 
devi˚_öfo
 [] =

724 {
JSON_STR_LAN_IPS
, "\0"},

725 {
JSON_STR_LAN_GATEWAY
, "\0"},

727 {
JSON_STR_WAN_IPS
, "\0"}

730 
key_∑ú_°
 
devi˚_msg
 [] =

748 
key_∑ú_°
 *
fõlds
 = 
devi˚_öfo
;

749 
key_∑ú_°
 *
msg_fõlds
 = 
devi˚_msg
;

750 
	`JSON_OBJ_MALLOC
(
ªt
, 
js⁄_obje˘_√w_obje˘
, 
rc
);

751 if–
NO_ERROR
 !
rc
){

752 
exô
;

754 
œn_ù_öfo_°
 
œn_öfo
;

756 
rc
 = 
	`qid_sys_gë_loˇl_ù_li°
(&
œn_öfo
);

757 if–
NO_ERROR
 !
rc
){

758 
exô
;

760 
js⁄_obje˘
* 
œn_ù
 = 
	`gíî©e_devi˚_œnù_li°_¨r
(&
œn_öfo
);

761 if(!
œn_ù
){

762 
rc
 = 
ERR_GET_DEVICE_INFO
;

763 
˘x
->
œ°_°©us
.
°©us_code
 = 
rc
;

764 
	`°∫˝y
(
˘x
->
œ°_°©us
.
°©us_msg
, 
	`PAIR_GET_KEY
(
msg_fõlds
, 
qid_devi˚_œn_ù
)

765 , 
QCLOUD_STATUS_MSG_STR_LEN
);

766 
exô
;

768 
js⁄_obje˘
* 
g©eway
 = 
	`gíî©e_devi˚_g©eway
(&
œn_öfo
);

769 if(!
g©eway
){

770 
rc
 = 
ERR_GET_DEVICE_INFO
;

771 
˘x
->
œ°_°©us
.
°©us_code
 = 
rc
;

772 
	`°∫˝y
(
˘x
->
œ°_°©us
.
°©us_msg
, 
	`PAIR_GET_KEY
(
msg_fõlds
, 
qid_devi˚_œn_g©eway
)

773 , 
QCLOUD_STATUS_MSG_STR_LEN
);

774 
exô
;

777 
js⁄_obje˘
* 
w™_ù
 = 
	`gíî©e_devi˚_w™ù_li°_¨r
(
˘x
);

778 if(!
w™_ù
){

779 
	`QNAP_LOG_ERR_NL
("generate_device_wanip_list_arrÉrror");

780 
rc
 = 
ERR_GET_DEVICE_INFO
;

781 
˘x
->
œ°_°©us
.
°©us_code
 = 
rc
;

782 
	`°∫˝y
(
˘x
->
œ°_°©us
.
°©us_msg
, 
	`PAIR_GET_KEY
(
msg_fõlds
, 
qid_devi˚_w™_ù
)

783 , 
QCLOUD_STATUS_MSG_STR_LEN
);

784 
exô
;

788 
	`qid_sys_gë_devi˚_ty≥
(
	`PAIR_GET_VALUE
(
fõlds
, 
qid_devi˚_devi˚_ty≥
),

789 
PAIR_VALUE_LEN
);

790 if–
	`°æí
(
	`PAIR_GET_VALUE
(
fõlds
, 
qid_devi˚_devi˚_ty≥
)) == 0 ){

791 
rc
 = 
ERR_GET_DEVICE_INFO
;

792 
˘x
->
œ°_°©us
.
°©us_code
 = 
rc
;

793 
	`°∫˝y
(
˘x
->
œ°_°©us
.
°©us_msg
, 
	`PAIR_GET_KEY
(
msg_fõlds
, 
qid_devi˚_devi˚_ty≥
)

794 , 
QCLOUD_STATUS_MSG_STR_LEN
);

795 
exô
;

798 
	`qid_sys_gë_modñ
(
	`PAIR_GET_VALUE
(
fõlds
, 
qid_devi˚_modñ_«me
),

799 
PAIR_VALUE_LEN
);

800 if–
	`°æí
(
	`PAIR_GET_VALUE
(
fõlds
, 
qid_devi˚_modñ_«me
)) == 0 ){

801 
rc
 = 
ERR_GET_DEVICE_INFO
;

802 
˘x
->
œ°_°©us
.
°©us_code
 = 
rc
;

803 
	`°∫˝y
(
˘x
->
œ°_°©us
.
°©us_msg
, 
	`PAIR_GET_KEY
(
msg_fõlds
, 
qid_devi˚_modñ_«me
)

804 , 
QCLOUD_STATUS_MSG_STR_LEN
);

805 
exô
;

808 
rc
 = 
	`qid_sys_gë_hw_£rül_numbî
–
	`PAIR_GET_VALUE
(
fõlds
, 
qid_devi˚_hw_£rül_numbî
),

809 
PAIR_VALUE_LEN
);

811 
rc
 = 
	`qid_sys_gë_suid
–
	`PAIR_GET_VALUE
(
fõlds
, 
qid_devi˚_fw_£rül_numbî
),

812 
PAIR_VALUE_LEN
);

813 if–
	`°æí
(
	`PAIR_GET_VALUE
(
fõlds
, 
qid_devi˚_fw_£rül_numbî
)) == 0 ){

814 
rc
 = 
ERR_GET_DEVICE_INFO
;

815 
˘x
->
œ°_°©us
.
°©us_code
 = 
rc
;

816 
	`°∫˝y
(
˘x
->
œ°_°©us
.
°©us_msg
, 
	`PAIR_GET_KEY
(
msg_fõlds
, 
qid_devi˚_fw_£rül_numbî
)

817 , 
QCLOUD_STATUS_MSG_STR_LEN
);

818 
exô
;

821 
rc
 = 
	`qid_sys_gë_mac
(
	`PAIR_GET_VALUE
(
fõlds
, 
qid_devi˚_mac_addªss
),

822 
PAIR_VALUE_LEN
);

823 if–
	`°æí
(
	`PAIR_GET_VALUE
(
fõlds
, 
qid_devi˚_mac_addªss
)) == 0 ){

824 
rc
 = 
ERR_GET_DEVICE_INFO
;

825 
˘x
->
œ°_°©us
.
°©us_code
 = 
rc
;

826 
	`°∫˝y
(
˘x
->
œ°_°©us
.
°©us_msg
, 
	`PAIR_GET_KEY
(
msg_fõlds
, 
qid_devi˚_mac_addªss
)

827 , 
QCLOUD_STATUS_MSG_STR_LEN
);

828 
exô
;

831 
	`°∫˝y
(
	`PAIR_GET_VALUE
(
fõlds
, 
qid_devi˚_ho°_«me
), 
√w_devi˚_«me
, 
PAIR_VALUE_LEN
);

832 
	`qid_sys_gë_fw_vî
(
	`PAIR_GET_VALUE
(
fõlds
, 
qid_devi˚_fúmw¨e_vîsi⁄
),

833 
PAIR_VALUE_LEN
);

834 if–
	`°æí
(
	`PAIR_GET_VALUE
(
fõlds
, 
qid_devi˚_fúmw¨e_vîsi⁄
)) == 0 ){

835 
rc
 = 
ERR_GET_DEVICE_INFO
;

836 
˘x
->
œ°_°©us
.
°©us_code
 = 
rc
;

837 
	`°∫˝y
(
˘x
->
œ°_°©us
.
°©us_msg
, 
	`PAIR_GET_KEY
(
msg_fõlds
, 
qid_devi˚_fúmw¨e_vîsi⁄
)

838 , 
QCLOUD_STATUS_MSG_STR_LEN
);

839 
exô
;

842 
	`°∫˝y
(
	`PAIR_GET_VALUE
(
fõlds
, 
qid_devi˚_˛õ¡_agít_vîsi⁄
),

843 
VERSION
, 
PAIR_VALUE_LEN
);

844 
	`PAIR_GET_VALUE
(
fõlds
, 
qid_devi˚_˛õ¡_agít_vîsi⁄
)[
PAIR_VALUE_LEN
] = '\0';

846 
˙t
 = 0;

847 
˙t
 = 0; c¡ < 
num_devi˚_fõlds
; cnt++){

848 if(
˙t
 =
qid_devi˚_œn_ù
 ){

849 
	`js⁄_obje˘_obje˘_add
(
ªt
, 
JSON_STR_LAN_IPS
, 
œn_ù
);

850 }if(
˙t
 =
qid_devi˚_œn_g©eway
 ){

851 
	`js⁄_obje˘_obje˘_add
(
ªt
, 
JSON_STR_LAN_GATEWAY
, 
g©eway
);

852 }if(
˙t
 =
qid_devi˚_w™_ù
 ){

853 
	`js⁄_obje˘_obje˘_add
(
ªt
, 
JSON_STR_WAN_IPS
,
w™_ù
);

854 }if(
	`°æí
(
	`PAIR_GET_VALUE
(
fõlds
, 
˙t
))){

855 
	`SET_JSON_STR
(
ªt
, 
	`PAIR_GET_KEY
(
fõlds
, 
˙t
),
	`PAIR_GET_VALUE
(fields, cnt));

859 
exô
:

860 if(
NO_ERROR
 !
rc
){

861 
	`js⁄_obje˘_put
(
ªt
);

862 
ªt
 = 
NULL
;

864  
ªt
;

865 
	}
}

868 
	$gíî©e_devi˚_öfo_roŸ
(
q˛oud_°
 *
˘x
, *
devi˚_«me
,

869 *
msg_buff
, 
size_t
 
buff_size
)

871 
ªt
 = 
ERR_GET_DEVICE_INFO
;

873 
QCLOUD_STATUS_MSG
 *
œ°_îr‹
;

874 
js⁄_obje˘
 *
roŸ
 = 
NULL
;

875 
	`JSON_OBJ_MALLOC
(
roŸ
, 
js⁄_obje˘_√w_obje˘
, 
ªt
);

876 
js⁄_obje˘
* 
döfo
 = 
	`gíî©e_devi˚_öfo
(
˘x
, 
devi˚_«me
);

877 if–!
döfo
){

878 
	`QNAP_LOG_ERR_NL
("FailedÅo create json object for generate_device_info.");

879 
œ°_îr‹
 = 
	`q˛oud_gë_œ°_îr‹
(
˘x
);

880 
ªt
 = 
œ°_îr‹
->
°©us_code
;

881 
exô
;

884 
	`SET_JSON_STR
(
roŸ
, "devi˚_«me", 
devi˚_«me
);

886 
	`js⁄_obje˘_obje˘_add
(
roŸ
, "rebind_by_device_name",

887 
	`js⁄_obje˘_√w_boﬁón
(
˘x
->
ªböd_Êag
));

889 
	`js⁄_obje˘_obje˘_add
(
roŸ
, 
JSON_STR_DEVICE_INFO
, 
döfo
);

891 
	`¢¥ötf
(
msg_buff
, 
buff_size
,"%s", 
	`js⁄_obje˘_to_js⁄_°rög
(
roŸ
));

893 
ªt
 = 
	`js⁄_obje˘_put
(
roŸ
);

894 if–
TRUE
 !
ªt
 ){

895 
	`QNAP_LOG_ERR_NL
("FailedÅo free json object for generate_device_info_root.");

896 
ªt
 = 
ERR_NULL_POINTER
;

898 
ªt
 = 
NO_ERROR
;

901 
exô
:

902  
ªt
;

903 
	}
}

905 
	$gíî©e_ﬂuth_ªque°
(* 
gø¡_ty≥
, * 
˛õ¡_id
,

906 * 
˛õ¡_£¸ë
, * 
qid
,

907 * 
∑sswd
, *
msg_buff
, 
size_t
 
buff_size
 )

909 
key_∑ú_°
 
ﬂuth_ªque°_fõlds
[] =

919 
key_∑ú_°
 *
fõlds
 = 
ﬂuth_ªque°_fõlds
;

920 
	`°∫˝y
(
	`PAIR_GET_VALUE
(
fõlds
, 
qid_gø¡_ty≥
), 
gø¡_ty≥
, 
PAIR_VALUE_LEN
);

921 
	`°∫˝y
(
	`PAIR_GET_VALUE
(
fõlds
, 
qid_˛õ¡_id
), 
˛õ¡_id
, 
PAIR_VALUE_LEN
);

922 
	`°∫˝y
(
	`PAIR_GET_VALUE
(
fõlds
, 
qid_˛õ¡_£¸ë
), 
˛õ¡_£¸ë
, 
PAIR_VALUE_LEN
);

928 if(
qid
){

929 
	`°∫˝y
(
	`PAIR_GET_VALUE
(
fõlds
, 
qid_u£∫ame
), 
qid
, 
PAIR_VALUE_LEN
);

932 if(
∑sswd
){

933 
	`°∫˝y
(
	`PAIR_GET_VALUE
(
fõlds
, 
qid_∑ssw‹d
), 
∑sswd
, 
PAIR_VALUE_LEN
);

936 *
msg_fmt
;

937 
i
, 
ªt
;

938 *
∑ylﬂd
 = 
msg_buff
;

939 *
ícoded_vÆ
;

940 
i
 = 0, 
ªt
 = 0;Ñë < 
buff_size
; i++){

942 i‡(
	`PAIR_GET_VALUE
(
fõlds
, 
i
)[0] != '\0'){

944 if–
i
 =
num_qid_ﬂuth_ªque°
 -1 ){

945 
msg_fmt
 = "%s=%s";

947 
msg_fmt
 = "%s=%s&";

950 
ícoded_vÆ
 = 
	`utû_uæ_ícode
(
	`PAIR_GET_VALUE
(
fõlds
, 
i
)) ;

951 if(
ícoded_vÆ
){

952 
ªt
 +
	`¢¥ötf
(
∑ylﬂd
+ªt, 
buff_size
-ªt, 
msg_fmt
,

953 
	`PAIR_GET_KEY
(
fõlds
, 
i
), 
ícoded_vÆ
);

954 
	`‰ì
(
ícoded_vÆ
);

958 if–
i
 =
num_qid_ﬂuth_ªque°
 -1 ){

963 
i
=0; i < 
num_qid_ﬂuth_ªque°
 ;i++){

964 if–
i
 !
qid_∑ssw‹d
 && i !
qid_˛õ¡_£¸ë
){

965 
	`QNAP_LOG_DEBUG_NL
("%s[%d]%s", 
	`PAIR_GET_KEY
(
fõlds
, 
i
), i,

966 
	`PAIR_GET_VALUE
(
fõlds
, 
i
));

969 
	}
}

972 
js⁄_obje˘
* 
	$gíî©e_js⁄_sh¨e_lök_ªsour˚
(*
ssid
, *
fûe_∑th
,

973 *
fûe_ty≥
){

974 
rc
 = 
NO_ERROR
;

975 
js⁄_obje˘
 *
ªs
 = 
NULL
;

977 
	`JSON_OBJ_MALLOC
(
ªs
, 
js⁄_obje˘_√w_obje˘
, 
rc
);

978 if(
NO_ERROR
 =
rc
 && 
ªs
){

979 
	`SET_JSON_STR
(
ªs
, "ssid", 
ssid
);

980 
	`SET_JSON_STR
(
ªs
, "fûe_∑th", 
fûe_∑th
);

981 
	`SET_JSON_STR
(
ªs
, "fûe_ty≥", 
fûe_ty≥
);

983  
ªs
;

984 
	}
}

	@libs/qid/qcloud_utils.c

7 
	~<sys/°©.h
>

8 
	~"°d_hdr.h
"

9 
	~"q˛oud_utû.h
"

11 
	#HOST_FMT
 "%s.%smyq«p˛oud.com"

	)

12 
	#QNAP_HOST_FMT
 "%s.%sq«p.com"

	)

13 
	#QCLOUD_API_HOST_FMT
 "%s.≠i.%smyq«p˛oud.com"

	)

14 
	#QCLOUD_HOST_FMT
 "%smyq«p˛oud.com"

	)

16 
	#QCLOUD_SERVER_PREFIX
(
i
Ë
£rvî_öfo
[i].
ho°_¥efix


	)

17 
	#QCLOUD_SERVER_TAG
(
i
Ë
£rvî_öfo
[i].
èg


	)

18 
	#QCLOUD_IS_PROD_SITE
(
S
Ë(S[0] ='\0')

	)

19 
	#QCLOUD_SEVC_NAME
(
I
Ë
£rvi˚_«me_li°
[I]

	)

21 *
	g£rvi˚_«me_li°
[] =

23 
QCLOUD_SERVC_WWW_QCLOUD_STR
,

24 
QCLOUD_SERVC_WWW_QID_STR
,

25 
QCLODU_SERVC_WWW_START_STR
,

26 
QCLOUD_SERVC_API_QID_STR
,

27 
QCLOUD_SERVC_API_MCN_STR
,

28 
QCLOUD_SERVC_API_QCLOUD_STR
,

29 
QCLOUD_SERVC_API_QPKG_STR
,

30 
QCLOUD_SERVC_API_USHER_STR
,

31 
QCLOUD_SERVC_API_DDNS_STR
,

32 
QCLOUD_SERVC_API_QSTART_STR
,

36 
	s_q˛oudd_£rvî_öfo_°
{

37 
	mèg
[45];

38 
	mho°_¥efix
[32];

39 }
	tq˛oudd_£rvî_öfo_°
;

41 
q˛oudd_£rvî_öfo_°
 
	g£rvî_öfo
[] = {

42 #i‚de‡
PRODUCTION


52 
	$check_£rvi˚_«me
(*
£rvi˚_«me
){

53 
i
 = 0;

54 ; 
£rvi˚_«me_li°
[
i
] != '\0'; i++){

55 if–0 =
	`°∫ˇ£cmp
(
£rvi˚_«me
, 
£rvi˚_«me_li°
[
i
], 
SERVICE_NAME_LEN
)){

56  
i
;

60 
	}
}

62 * 
	$check_£rvî_ho°
(){

63 *
pch_sôe
;

64 
°©
 
°s
;

65 
i
 = 0;

66 
check_∑th
[
QCLOUD_HOST_LEN
+1];

68 ; 
	`QCLOUD_SERVER_TAG
(
i
) != '\0'; i++){

69 
	`¢¥ötf
(
check_∑th
, 
QCLOUD_HOST_LEN
, "/v¨/%s", 
	`QCLOUD_SERVER_TAG
(
i
));

70 i‡((
	`°©
 (
check_∑th
, &
°s
)) == 0){

74 
pch_sôe
 = 
	`QCLOUD_SERVER_PREFIX
(
i
);

75  
pch_sôe
;

76 
	}
}

78 
	$q˛oud_utû_gë_ho°
(*
£rvi˚_«me
, *
£rvî_ho°
)

80 *
pch_sôe
;

81 
£rvc_id
;

82 if(!
£rvi˚_«me
 || !
£rvî_ho°
){

83 
	`Ârötf
(
°dîr
, "null inputÖarameter\n");

87 
£rvî_ho°
[0] = '\0';

92 if(-1 =(
£rvc_id
 = 
	`check_£rvi˚_«me
(
£rvi˚_«me
))){

93 
	`Ârötf
(
°dîr
, "invalidÖarameter\n");

97 
pch_sôe
 = 
	`check_£rvî_ho°
();

99 
£rvc_id
)

101 
QCLODU_SERVC_WWW_START
:

102 
QCLOUD_SERVC_QSTART
:

103 #i‚de‡
PRODUCTION


104 if(
	`QCLOUD_IS_PROD_SITE
(
pch_sôe
)){

105 
	`¢¥ötf
(
£rvî_ho°
, 
QCLOUD_HOST_LEN
, "%s.qnap.com",

106 
	`QCLOUD_SEVC_NAME
(
£rvc_id
));

108 
	`¢¥ötf
(
£rvî_ho°
, 
QCLOUD_HOST_LEN
, "alpha-%s.qnap.com",

109 
	`QCLOUD_SEVC_NAME
(
£rvc_id
));

112 
	`¢¥ötf
(
£rvî_ho°
, 
QCLOUD_HOST_LEN
, "%s.qnap.com",

113 
	`QCLOUD_SEVC_NAME
(
£rvc_id
));

116 
QCLOUD_SERVC_WWW_QCLOUD
:

117 
	`¢¥ötf
(
£rvî_ho°
, 
QCLOUD_HOST_LEN
, "www."
QCLOUD_HOST_FMT
, 
pch_sôe
);

119 
QCLODU_SERVC_WWW_QID
:

120 
	`¢¥ötf
(
£rvî_ho°
, 
QCLOUD_HOST_LEN
, 
HOST_FMT
, 
£rvi˚_«me
, 
pch_sôe
);

122 
QCLODU_SERVC_API_QID
:

123 
QCLODU_SERVC_API_MCN
:

124 
QCLODU_SERVC_CORE
:

125 
QCLODU_SERVC_QPKG
:

126 
QCLODU_SERVC_USHER
:

127 
	`¢¥ötf
(
£rvî_ho°
, 
QCLOUD_HOST_LEN
, 
QCLOUD_API_HOST_FMT
, 
£rvi˚_«me
, 
pch_sôe
);

129 
QCLOUD_SERVC_DDNS
:

131 
	`¢¥ötf
(
£rvî_ho°
, 
QCLOUD_HOST_LEN
, 
QCLOUD_HOST_FMT
, 
pch_sôe
);

137 
	}
}

	@libs/qid/qid_api.c

6 
	~<î∫o.h
>

7 
	~<sys/sockë.h
>

8 
	~<√töë/ö.h
>

9 
	~<¨∑/öë.h
>

10 
	~<sys/un.h
>

11 
	~<uni°d.h
>

12 
	~<sys/fûe.h
>

14 
	~"°d_hdr.h
"

15 
	~"comm_hdr.h
"

16 
	~"q˛oud_utû.h
"

17 
	~"qid_°ru˘.h
"

18 
	~"qid_sy°em.h
"

19 
	~"qid_≠i.h
"

20 
	~"qid_hâpc.h
"

21 
	~"qid_°©us_code.h
"

22 
	~"utû_´s.h
"

23 
	~"q˛oud_dao.h
"

24 
	~"q˛oud_gí_≠úeque°.h
"

26 
	gnuŒ_°rög
[] = {"\0"};

28 
	#GET_TOKEN
(
GET_FUNC
, 
CTX
, 
BUFF
, 
BUFF_SIZE
) \

30 
ªt
 = 
ERR_NULL_POINTER
; \

31 if(!
CTX
 || !
BUFF
){ \

32 
	`QNAP_LOG_ERR_NL
("rc: [%d]", 
ªt
); \

34 
ªt
 = 
	`GET_FUNC
–
BUFF
, 
BUFF_SIZE
); \

35 if(
ªt
 !
NO_ERROR
){ \

36 
	`QNAP_LOG_ERR_NL
("rc: [%d]", 
ªt
); \

38 
	`de¸y±_°r
(
CTX
, 
BUFF
, 
BUFF_SIZE
); \

40 if(
ªt
 !
NO_ERROR
){ \

41 
	`QNAP_LOG_ERR_NL
("rc: [%d]", 
ªt
); \

43 }0)

	)

45 
	$ª£t_q˛oud_ªque°_hash
()

48 
	`QNAP_LOG_INFO_NL
("reset_qcloud_request_hash");

51 
ªt
 = 
NO_ERROR
;

54 
˙t
 = 0;

57 
key_∑ú_°
 
uæ_fõlds
[] =

70 ;
˙t
 < 
num_ªque°_d©a_ty≥
; cnt++){

71 
ªt
 |
	`qid_sys_£t_hash_°rög
(
uæ_fõlds
[
˙t
].
key
, 
nuŒ_°rög
);

72 
ªt
 |
	`qid_sys_£t_hash_°rög_âl
(
uæ_fõlds
[
˙t
].
key
, 0);

75  
ªt
;

76 
	}
}

79 
	$ª£t_q˛oud_˘x_c⁄f
(
q˛oud_°
 *
˘x
)

81 
ªt
 = 
NO_ERROR
;

84 
	`QNAP_LOG_CRIT_NL
("startÑesetting qcloud config");

87 
	`QID_WRITE_SYSTEM_VAR
(
˘x
->
qid
, 
nuŒ_°rög
, 
MAX_QID_LEN
, 
qid_sys_£t_qid
, 
ªt
);

90 
	`QID_WRITE_SYSTEM_VAR
(
˘x
->
devi˚_«me
, 
nuŒ_°rög
, 
NAME_LEN
,

91 
qid_sys_£t_devi˚_«me
, 
ªt
);

94 
	`QID_WRITE_SYSTEM_VAR
(
˘x
->
auth_tokí
, 
nuŒ_°rög
, 
MAX_APPKEY_LEN
,

95 
qid_sys_£t_auth_tokí
, 
ªt
);

98 
	`QID_WRITE_SYSTEM_VAR
(
˘x
->
devi˚_tokí
, 
nuŒ_°rög
, 
MAX_APPKEY_LEN
,

99 
qid_sys_£t_devi˚_tokí
, 
ªt
);

102 
	`QID_WRITE_SYSTEM_VAR
(
˘x
->
ª‰esh_tokí
, 
nuŒ_°rög
, 
MAX_APPKEY_LEN
,

103 
qid_sys_£t_ª‰esh_tokí
, 
ªt
);

106 
	`QID_WRITE_SYSTEM_VAR
(
˘x
->
devi˚_id
, 
nuŒ_°rög
, 
MAX_QID_LEN
,

107 
qid_sys_£t_qid_devi˚_id
, 
ªt
);

110 
	`QID_WRITE_SYSTEM_VAR
(
˘x
->
dóÀr_ù
, 
nuŒ_°rög
, 
MAX_QID_HOST_LEN
,

111 
qid_sys_£t_dóÀr_ù
, 
ªt
);

114 
˘x
->
dóÀr_¥oxy_p‹t
 = 0;

115 
	`qid_sys_£t_dóÀr_¥oxy_p‹t
(0);

118 
	`qid_sys_£t_œ°_upd©e_tokí_time
(
nuŒ_°rög
);

119 
˘x
->
tokí_œ°_upd©e_time
 = (
time_t
)0;

122 
	`QID_WRITE_SYSTEM_VAR
(
˘x
->
vÆid_≥riod
, 
nuŒ_°rög
, 
NAME_LEN
,

123 
qid_sys_£t_tokí_vÆid_≥riod
, 
ªt
);

126 
	`qid_sys_£t_ddns_°©us
(
QID_SYS_DISABLE_STR
);

129 
	`ª£t_q˛oud_ªque°_hash
();

132 
	`qid_sys_£t_qid_°©us
(
QID_STAT_CHECKED_OUT
);

135 
	`qid_sys_£t_q˛oud_vî
(
nuŒ_°rög
);

138 
	`QNAP_LOG_CRIT_NL
("completeÑesetting qcloud config");

140  
ªt
;

141 
	}
}

143 *
	$°rùe_whôe_•a˚_èû
(*
°r
)

145 i‡(
	`°æí
(
°r
) > 0) {

146 *
p
 = 
°r
 + 
	`°æí
(str) - 1;

147 *
p
 == ' ' || *p == '\t')Ö--;

148 *(
p
+1) = '\0';

150  
°r
;

151 
	}
}

153 *
	$skù_whôe_•a˚
(*
°r
)

155 *
p
 = 
°r
;

156 *
p
 == ' ' || *p == '\t')Ö++;

157  
p
;

158 
	}
}

160 
	$is_commíãd_°rög
(*
°r
)

162 *
q
 = 
	`skù_whôe_•a˚
(
°r
);

163 i‡(*
q
 == '#' || *q == ';')  1;

165 
	}
}

167 
	$de¸y±_°r
(
q˛oud_°
 *
˘x
, *
°r_buff
, 
size_t
 
buff_size
)

169 
	`utû_´s_de¸y±_°r
(
˘x
->
´s_dec_˘x
, 
°r_buff
, 
buff_size
);

170 
	}
}

172 * 
	$í¸y±_°r
(
q˛oud_°
 *
˘x
, *
§c
)

174  
	`utû_´s_í¸y±_°r
(
˘x
->
´s_íc_˘x
, 
§c
);

175 
	}
}

177 
	#QCLOUD_DEF_HTTP_TIMEOUT
 (20)

	)

178 
uöt32_t
 
	gß…
[] = {12345, 54321};

180 
	$q˛oud_ªlﬂd_c⁄fig
(
q˛oud_°
 *
˘x
)

183 
ªt
 = 
NO_ERROR
;

186 if(!
˘x
){

191 
buff
[
URL_STR_LEN
+1];

192 
¥Ÿo
[
PROTO_STR_LEN
+1];

193 
	`mem£t
–
buff
,0, ()*(
URL_STR_LEN
+1));

194 
	`mem£t
–
¥Ÿo
,0, ()*(
PROTO_STR_LEN
+1));

198 
	`qid_sys_gë_qid
(
˘x
->
qid
, 
MAX_QID_LEN
);

200 
	`q«p_id_gë_devi˚_«me
(
˘x
,˘x->
devi˚_«me
, 
NAME_LEN
);

202 
	`qid_sys_gë_qid_devi˚_id
(
˘x
->
devi˚_id
, 
DEVICE_ID_LEN
);

205 
	`GET_TOKEN
(
qid_sys_gë_auth_tokí
, 
˘x
, ctx->
auth_tokí
, 
MAX_APPKEY_LEN
);

206 
	`GET_TOKEN
(
qid_sys_gë_ª‰esh_tokí
, 
˘x
, ctx->
ª‰esh_tokí
, 
MAX_APPKEY_LEN
);

211 #ifde‡
ENCRYPT_DEVICE_TOKEN


212 
	`GET_TOKEN
(
qid_sys_gë_devi˚_tokí
, 
˘x
, ctx->
devi˚_tokí
, 
MAX_APPKEY_LEN
);

214 
	`qid_sys_gë_devi˚_tokí
(
˘x
->
devi˚_tokí
, 
MAX_APPKEY_LEN
);

218 
	`qid_sys_gë_dóÀr_ù
(
˘x
->
dóÀr_ù
, 
MAX_QID_HOST_LEN
);

219 
	`qid_sys_gë_dóÀr_¥oxy_p‹t
(
buff
, (buff));

220 
˘x
->
dóÀr_¥oxy_p‹t
 = 
	`©oi
(
buff
);

223 
	`qid_sys_gë_q˛oud_≠i_¥Ÿo
(
¥Ÿo
, 
PROTO_STR_LEN
);

224 if–
¥Ÿo
 [0] == '\0' ){

225 
	`•rötf
(
¥Ÿo
, "https");

229 
	`qid_sys_gë_£rvî_ho°
(
buff
, 
MAX_QID_HOST_LEN
);

230 
	`•rötf
(
˘x
->
qid_£rvc_ho°
, "%s://%s", 
¥Ÿo
, 
buff
);

231 
	`qid_sys_gë_m˙_£rvî_ho°
(
buff
, 
MAX_QID_HOST_LEN
);

232 
	`•rötf
(
˘x
->
m˙_£rvc_ho°
, "%s://%s", 
¥Ÿo
, 
buff
);

233 
	`qid_sys_gë_ushî_£rvî_ho°
(
buff
, 
MAX_QID_HOST_LEN
);

234 
	`•rötf
(
˘x
->
ushî_£rvc_ho°
, "%s://%s", 
¥Ÿo
, 
buff
);

235 
	`mem£t
(
˘x
->
qid_c⁄f_buf
, 0 , ()*(
QID_CONF_BUFF_LEN
+1));

236 
	}
}

238 
	#QCLOUD_ALPHA_APPID
 "53e33bd4ab6dd106e2f1f29c"

	)

239 
	#QCLOUD_ALPHA_APPKEY
 "h7SCrJ94RNc2s4RUNsZkWNRtYGGPulvSxze23EoyS5SLdNFG"

	)

240 
	#QCLOUD_PRODUCTION_APPID
 "53e33d04d6b82f62690be813"

	)

241 
	#QCLOUD_PRODUCTION_APPKEY
 "z7ΩuNQKb0JkSi7OGqvhCW7wrVJXkWL8H0vTBvóVSoLWLsC"

	)

243 #ifde‡
PERFORMANCE_ANALYSIS


244 
	~<sys/time.h
>

255 
	$q˛oud_´s_˘x_gíî©‹
(
q˛oud_°
 *
˘x
)

257 
ªt
 = 
ERR_INVALID_CREDENTIAL
;

259 
uöt8_t
 *
key_d©a
 = 
NULL
;

260 
key_d©a_Àn
 = 0;

261 
EVP_CIPHER_CTX
 *
í
 = 
NULL
, *
de
 = NULL;

264 
auth_tokí
[
MAX_APPKEY_LEN
 + 1];

265 
ª‰esh_tokí
[
MAX_APPKEY_LEN
 + 1];

266 
	`mem£t
(
auth_tokí
, 0, ()*(
MAX_APPKEY_LEN
 + 1));

267 
	`mem£t
(
ª‰esh_tokí
, 0, ()*(
MAX_APPKEY_LEN
 + 1));

270 
tmp_buff
[
TMP_BUFF_LEN
+1];

273 *
íc_tokí
 = 
NULL
, *
íc_ª‰esh_tokí
 = NULL;

276 
í
 = (
EVP_CIPHER_CTX
*Ë
	`ˇŒoc
(1,(EVP_CIPHER_CTX));

277 
de
 = (
EVP_CIPHER_CTX
*Ë
	`ˇŒoc
(1,(EVP_CIPHER_CTX));

278 if(!
í
 || !
de
){

279 
	`QNAP_LOG_ERR_NL
("failedÅoállocate EVP_CIPHER_CTX");

280 
exô
;

284 
key_d©a
 = (
uöt8_t
 *)
˘x
->
hw_¢
;

285 
key_d©a_Àn
 = 
	`°æí
(
˘x
->
hw_¢
);

288 
ªt
 = 
	`utû_´s_öô
(
key_d©a
, 
key_d©a_Àn
, (
uöt8_t
 *)&
ß…
, 
í
, 
de
);

289 if–
ªt
 !
NO_ERROR
 )

291 
	`QNAP_LOG_ERR_NL
("Couldn't initialize AES cipher");

294 
exô
:

296 if–
ªt
 !
NO_ERROR
 )

298 if–
í
 ) 
	`‰ì
(en);

299 if–
de
 ) 
	`‰ì
(de);

303 
˘x
->
´s_íc_˘x
 = 
í
;

304 
˘x
->
´s_dec_˘x
 = 
de
;

306  
ªt
;

307 
	}
}

309 
	$dëîmöe_≠p_id_n_key
(
q«p_≠p_öfo
 *
öfo
, 
q˛oud_°
 *
˘x
)

312 
li˚n£_övÆid
[
STATUS_FLAG_LEN
+1] = {0};

315 
	`°∫˝y
(
˘x
->
≠p_öfo
.
≠pvî
, 
VERSION
, 
MAX_APPVER_LEN
);

318 
	`qid_sys_gë_li˚n£_övÆid
(
li˚n£_övÆid
, 
STATUS_FLAG_LEN
);

325 if–
li˚n£_övÆid
[0] == '0' )

327 
	`°∫˝y
(
˘x
->
≠p_öfo
.
≠pid
, 
QCLOUD_PRODUCTION_APPID
, 
MAX_APPID_LEN
);

328 
	`°∫˝y
(
˘x
->
≠p_öfo
.
≠pkey
, 
QCLOUD_PRODUCTION_APPKEY
, 
MAX_APPKEY_LEN
);

332 
	`°∫˝y
(
˘x
->
≠p_öfo
.
≠pid
, 
QCLOUD_ALPHA_APPID
, 
MAX_APPID_LEN
);

333 
	`°∫˝y
(
˘x
->
≠p_öfo
.
≠pkey
, 
QCLOUD_ALPHA_APPKEY
, 
MAX_APPKEY_LEN
);

338 
	`°∫˝y
(
˘x
->
≠p_öfo
.
sub_≠pid
, 
öfo
->
≠pid
, 
MAX_APPID_LEN
);

339 
	}
}

341 
q˛oud_°
* 
	$q˛oud_öô_˘x
(
q«p_≠p_öfo
 *
öfo
)

343 
q˛oud_°
 *
˘x
 = 
	`mÆloc
((qcloud_st));

344 
ªt
 = 
ERR_NULL_POINTER
;

345 
cuæ_Êag
[
TMP_BUFF_LEN
+1];

346 
uöt32_t
 
log_Êag
;

350 if(
˘x
 && 
öfo
){

352 
	`mem£t
(
˘x
, 0x0, (
q˛oud_°
));

357 
	`q«p_log_öô_£âög
(&(
˘x
->
log_cb
));

359 
	`q«p_log_öô
("QID_API", 
NULL
, NULL);

361 
	`qid_sys_gë_cuæ_log_Êag
(
cuæ_Êag
, 
TMP_BUFF_LEN
);

362 
log_Êag
 = 
QID_LOG_FILE
;

363 i‡(
MAGIC_LOG_NUMBER
 =
	`©oi
(
cuæ_Êag
)){

364 
log_Êag
 |
QID_LOG_CURL
;

367 
	`q˛oud_£t_log
(
˘x
, 
log_Êag
, 
LOG_DEBUG
);

370 
	`dëîmöe_≠p_id_n_key
(
öfo
, 
˘x
);

376 
	`qid_sys_¸óã_qid_c⁄f
();

385 
ªt
 = 
	`qid_sys_gë_hw_£rül_numbî
(
˘x
->
hw_¢
, 
META_STR_LEN
);

387 if–
NO_ERROR
 !
ªt
){

388 
	`QNAP_LOG_ERR_NL
("ÁûedÅÿgë hw sîü»numbî by bö¨y, ctx->hw_¢:%s", 
˘x
->
hw_¢
);

391 
	`qid_sys_gë_suid
(
˘x
->
suid
, 
META_STR_LEN
);

392 
	`qid_sys_gë_modñ
(
˘x
->
modñ
, 
NAME_LEN
);

393 
	`qid_sys_gë_fw_vî
(
˘x
->
fw_vî
, 
VERSION_LEN
);

398 
	`q˛oud_´s_˘x_gíî©‹
(
˘x
);

399 
˘x
->
hâp_timeout
 = 
QCLOUD_DEF_HTTP_TIMEOUT
;

401 
˘x
->
hâp_ª•
 = 
	`buf_size
(
NULL
, 
PAYLOAD_LEN_MAX
);

404 
	`q˛oud_ªlﬂd_c⁄fig
(
˘x
);

406 
	`QNAP_LOG_INFO_NL
("c‹e:%s", 
˘x
->
qid_£rvc_ho°
);

407 
ªt
 = 
NO_ERROR
;

410 
exô
:

412 if(
ªt
 !
NO_ERROR
 && 
˘x
 !
NULL
)

414 if(
˘x
->
´s_íc_˘x
){
	`‰ì
(ctx->aes_enc_ctx);}

415 if(
˘x
->
´s_dec_˘x
){
	`‰ì
(ctx->aes_dec_ctx);}

416 if(
˘x
){

417 
	`‰ì
(
˘x
);

418 
˘x
 = 
NULL
;

422  
˘x
;

423 
	}
}

425 
	$q˛oud_˛ónup_˘x
(
q˛oud_°
 *
˘x
)

427 if(
˘x
){

431 if(
˘x
->
´s_íc_˘x
){

432 
	`utû_´s_˛ón_up
(
˘x
->
´s_íc_˘x
);

433 
	`‰ì
(
˘x
->
´s_íc_˘x
);

434 
˘x
->
´s_íc_˘x
 = 
NULL
;

437 if(
˘x
->
´s_dec_˘x
){

438 
	`utû_´s_˛ón_up
(
˘x
->
´s_dec_˘x
);

439 
	`‰ì
(
˘x
->
´s_dec_˘x
);

440 
˘x
->
´s_dec_˘x
 = 
NULL
;

444 
	`qid_sys_nvøm_commô
();

447 
	`q«p_log_˛ónup
();

450 
	`buf_de°‹y
(
˘x
->
hâp_ª•
);

453 
	`mem£t
(
˘x
, 0x0, (
q˛oud_°
));

456 
	`‰ì
(
˘x
);

458 
	}
}

460 
	$q˛oud_£t_log
(
q˛oud_°
 *
˘x
, 
mode
, 
Àvñ
)

463 if(
˘x
){

464 
˘x
->
log_Êag
 |
mode
;

465 
pq«p_log
->
Àvñ
 =Üevel;

466 if(
QID_LOG_FILE
 & 
˘x
->
log_Êag
){

467 
	`q«p_log_to_fûe
(
QNAP_QID_LOG_PATH
);

468 }if(
QID_LOG_STDOUT
 & 
˘x
->
log_Êag
){

469 
pq«p_log
->
log_Â
 = 
°dout
;

470 }if(
QID_LOG_STDERR
 & 
˘x
->
log_Êag
){

471 
pq«p_log
->
log_Â
 = 
°dîr
;

473 if(
QID_LOG_CURL
 & 
˘x
->
log_Êag
){

474 
	`QNAP_LOG_SET_DETAIL
();

478 
	}
}

480 
QCLOUD_STATUS_MSG
 * 
	$q˛oud_gë_œ°_îr‹
(
q˛oud_°
 *
˘x
)

482 if(
˘x
Ë &(˘x->
œ°_°©us
);

483  
NULL
;

484 
	}
}

486 
	$q˛oud_gë_devi˚_öfo
(
q˛oud_°
 *
˘x
, 
q«p_dev_öfo
 *
dev_öfo
)

488 
ªt
 = 
NO_ERROR
;

490 if(
dev_öfo
 =
NULL
){

491 
	`QNAP_LOG_ERR_NL
("inputÇullÖointer");

492  
QID_ERR_INVALID_PARAM
;

495 
	`mem£t
(
dev_öfo
, 0X0, (
q«p_dev_öfo
));

497 
	`qid_sys_gë_qid
(
dev_öfo
->
qid_accou¡
, 
MAX_QID_LEN
);

498 
	`qid_sys_gë_hw_£rül_numbî
(
dev_öfo
->
hw_¢
, 
QID_SN_STR_LEN
);

499 
	`qid_sys_gë_mac
(
dev_öfo
->
mac_°r
, 
QID_MAC_STR_LONG_LEN
);

500 
	`qid_sys_gë_qid_°©us
(
dev_öfo
->
qid_°©us
, 
STATUS_FLAG_LEN
);

502 if(
dev_öfo
->
qid_°©us
[0] != '0') {

503 
	`q«p_id_gë_devi˚_«me
(
˘x
, 
dev_öfo
->
devi˚_«me
, 
QID_DEVICE_NAME_LEN
);

504 
	`qid_sys_gë_qid_devi˚_id
(
dev_öfo
->
devi˚_id
, 
DEVICE_ID_LEN
);

505 
	`qid_sys_gë_ddns_°©us
(
dev_öfo
->
ddns_°©us
, 
STATUS_FLAG_LEN
);

506 
	`q˛oud_utû_gë_ho°
(
QCLOUD_SERVC_API_DDNS_STR
, 
dev_öfo
->
ddns_£rvî_ho°
);

507 
dev_öfo
->
ddns_£rvî_ho°
[
MAX_QID_HOST_LEN
]='\0';

510  
ªt
;

511 
	}
}

513 
	$q˛oud_gë_dóÀr_li°
(
q˛oud_°
 *
˘x
)

515 
rc
 = 
QID_ERR_INVALID_PARAM
;

517 if(!
˘x
)

518  
rc
;

520 
uæ
[
PAYLOAD_LEN_1K
+1];

521 *
msg
 = 
NULL
;

522 
	#GET_DEALER_URI_FMT
 "%s/v1.1/ushî/dóÀr?£rvi˚_ty≥ıroxy"

	)

523 
	`¢¥ötf
(
uæ
, 
PAYLOAD_LEN_1K
, 
GET_DEALER_URI_FMT
, 
˘x
->
qid_£rvc_ho°
);

524 
rc
 = 
	`qid_hâpc_ªque°_ex
(
˘x
, 
FALSE
, 
GET
, 
uæ
, 
NULL
, NULL, &
msg
, 
PAYLOAD_LEN_MAX
);

525 if(
rc
 < 
NO_ERROR
 && 
	`°æí
(
msg
)){

526 
ªt
;

529 
URL_T
 *
dóÀr_li°
;

530 
size_t
 
num_dóÀrs
;

535 
rc
 = 
	`∑r£_js⁄_q˛oud_dóÀr_li°
(
msg
, "dóÀr_¥oxy_p‹t", &
dóÀr_li°
,

536 &
num_dóÀrs
);

537 if(
rc
 !
NO_ERROR
){

538 
	`QNAP_LOG_DEBUG_NL
("msg: %s", 
msg
);

539 
	`QNAP_LOG_ERR_NL
("invalid dealerÜist");

540 
ªt
;

546 
	`°∫˝y
(
˘x
->
dóÀr_ù
, 
dóÀr_li°
->
addr_°r
, (
MAX_QID_HOST_LEN
+1));

547 
˘x
->
dóÀr_¥oxy_p‹t
 = 
dóÀr_li°
->
p‹t
;

548 
	`qid_sys_£t_dóÀr_ù
(
˘x
->
dóÀr_ù
);

549 
	`qid_sys_£t_dóÀr_¥oxy_p‹t
(
˘x
->
dóÀr_¥oxy_p‹t
);

551 
ªt
:

552 if(
rc
 !
NO_ERROR
){

553 
	`QNAP_LOG_ERR_NL
("%s", 
	`gë_°ªº‹
(
rc
));

555  
rc
;

556 
	}
}

558 
	$q˛oud_check_bödög_°©us
(
q˛oud_°
 *
˘x
)

560 
rc
 ;

561 
îr_msg
[
TMP_BUFF_LEN
+1];

562 i‡(!
˘x
){

563 
q«p_≠p_öfo
 
öfo
;

564 
	`mem£t
(&
öfo
, 0x0, (
q«p_≠p_öfo
));

565 
	`°r˝y
(
öfo
.
≠pid
, "player");

566 
˘x
 = 
	`q˛oud_öô_˘x
(&
öfo
);

569 if(
˘x
){

570 
ªt
 = 
ERR_NULL_POINTER
, 
Êag
 = 0;

572 
uri
[
TMP_BUFF_LEN
 + 1];

573 * 
ª•
 = 
NULL
;

574 
key_∑ú_°
 
ª•n_fõlds
[] = { { "code", "\0" }, { "message", "\0" }, {"token", "\0"} };

576 
	`q˛oud_ªlﬂd_c⁄fig
(
˘x
);

577 
	`qid_sys_gë_qid_devi˚_id
(
˘x
->
devi˚_id
, 
DEVICE_ID_LEN
);

578 i‡(
˘x
->
devi˚_id
[0] == '\0') {

579 
	`QNAP_LOG_ERR_NL
("empty device id");

580 
exô
;

583 
	`¢¥ötf
(
uri
, 
TMP_BUFF_LEN
, "%s/%s/devi˚/%s", 
˘x
->
qid_£rvc_ho°
,

584 
QID_API_VERSION
, 
˘x
->
devi˚_id
);

585 
Êag
 = 
QID_HTTPC_FLAG_AUTH
;

586 
ªt
 = 
	`qid_hâpc_ªque°_ex
(
˘x
, 
Êag
, 
GET
, 
uri
, 
NULL
, NULL, &
ª•
, 
PAYLOAD_LEN_MAX
);

587 i‡(
ªt
 < 
NO_ERROR
 ||Ñë =
QID_SERCV_HTTP_ERROR
) {

588 
exô
;

593 
ªt
 = 
	`qid_hâpc_≠i_h™dÀr
(
˘x
, 
ª•
, 
ª•n_fõlds
, 
	`NUM_KEY_PAIR
(respn_fields));

598 
	`°∫˝y
(
˘x
->
devi˚_tokí
, 
ª•n_fõlds
[2].
vÆue
, 
MAX_APPKEY_LEN
);

600 
exô
:

604 i‡(
ªt
 !
NO_ERROR
) {

605 
	`QNAP_LOG_ERR_NL
("ªt:%d %s",
ªt
, 
	`gë_°ªº‹
(ret));

607 if–
QID_INVALID_AUTH_TOKEN
 =
ªt
 || 
MCN_ERR_DEVICE_ID_NOT_FOUND
 ==Ñet){

608 
	`q«p_id_gë_devi˚_«me
(
˘x
,˘x->
devi˚_«me
, 
NAME_LEN
);

609 if(
QID_INVALID_AUTH_TOKEN
 =
ªt
){

610 
	`¢¥ötf
(
îr_msg
, 
TMP_BUFF_LEN
, 
QID_SYS_LOG_ERR_CHECKED_OUT
,

611 
˘x
->
qid
, ctx->
devi˚_«me
, 
QID_ERR_CAUSE_INVALID_AUTH_TOKEN
, 
ªt
, 
ERROR_HANDLING_SIGNIN_AGAIN
);

612 }if(
MCN_ERR_DEVICE_ID_NOT_FOUND
 =
ªt
){

613 
	`¢¥ötf
(
îr_msg
, 
TMP_BUFF_LEN
, 
QID_SYS_LOG_ERR_CHECKED_OUT
,

614 
˘x
->
qid
, ctx->
devi˚_«me
, 
QID_ERR_CAUSE_DEVICE_NOT_FOUND
, 
ªt
, 
ERROR_HANDLING_SIGNIN_AGAIN
);

616 if(0 !
	`°æí
(
˘x
->
devi˚_«me
)){

617 
	`qid_£nd_sys_evít_log
(
QNAP_EVENT_TYPE_INFO
, 
˘x
->
œ°_evít_log
, 
îr_msg
);

619 
	`ª£t_q˛oud_˘x_c⁄f
(
˘x
);

622  
ªt
;

624 
rc
 = 
ERR_NULL_POINTER
;

626 
	`QNAP_LOG_DEBUG_NL
("rc: %d", 
rc
);

627  
rc
;

628 
	}
}

630 
	$q«p_id_devi˚_checkout
(
q˛oud_°
 *
˘x
)

632  
	`q«p_id_unböd_devi˚
(
˘x
);

633 
	}
}

635 
	$q«p_id_dow∆ﬂd_fûe
 (
q˛oud_°
 *
˘x
, *
uri
, 
time_t
 
timeout
)

638 
ªt
 = 
ERR_NULL_POINTER
;

640 if(!
˘x
){

641 
exô
;

643 *
ª•
 = 
NULL
;

645 if(
timeout
){

646 
˘x
->
hâp_timeout
 = 
timeout
;

649 
ªt
 = 
	`qid_hâpc_ªque°
(
˘x
, 
FALSE
, 
GET
, 
uri
, 
NULL
, &
ª•
);

650 if(
ªt
 !
NO_ERROR
){

651 
exô
;

654 
exô
:

655 if(
ªt
 < 
NO_ERROR
){

656 
	`QNAP_LOG_ERR_NL
("%s", 
	`gë_°ªº‹
(
ªt
));

658  
ªt
;

660 
	}
}

662 
	$q«p_id_check_öã∫ë
(
q˛oud_°
 *
˘x
, 
time_t
 
timeout
)

664 
buff
[
MAX_QID_HOST_LEN
+1];

665 
	`¢¥ötf
(
buff
, 
MAX_QID_HOST_LEN
, "%s/v1/", 
˘x
->
qid_£rvc_ho°
);

666  
	`q«p_id_dow∆ﬂd_fûe
 (
˘x
, 
buff
, 
timeout
);

667 
	}
}

673 
	$q«p_id_gë_devi˚_id
(
q˛oud_°
 *
˘x
, *
«me
)

676 
rc
 = 
ERR_NULL_POINTER
;

677 
Êag
 = 0;

678 
uri
[
TMP_BUFF_LEN
+1];

679 
msg
[
PAYLOAD_LEN_MAX
+1];

680 *
ª•
 = 
NULL
;

681 *
íc_devi˚_«me
 = 
NULL
;

682 
q«p_dev_öfo
* 
devc_öfo
;

683 
size_t
 
cou¡
;

684 if(!
˘x
 || !
«me
){

685 
exô
;

688 
key_∑ú_°
 
ª•n_fõlds
[] =

695 
íc_devi˚_«me
 = 
	`utû_uæ_ícode
(
«me
);

696 if(!
íc_devi˚_«me
){

697 
rc
 = 
ERR_INVALID_VALUE
;

698 
exô
;

700 
	#DEVICE_SEARCH_URI
 "%s/%s/devi˚/£¨ch?devi˚_«me=%s"

	)

701 
	`¢¥ötf
(
uri
, 
TMP_BUFF_LEN
, 
DEVICE_SEARCH_URI
, 
˘x
->
qid_£rvc_ho°
,

702 
QID_API_VERSION
, 
íc_devi˚_«me
);

704 
Êag
 = 
QID_HTTPC_FLAG_AUTH
;

705 
rc
 = 
	`qid_hâpc_ªque°_ex
(
˘x
, 
Êag
, 
GET
, 
uri
, 
NULL
, 
msg
, &
ª•
, 
PAYLOAD_LEN_MAX
);

706 if(
rc
 < 
NO_ERROR
){

707 
exô
;

710 
rc
 = 
	`qid_hâpc_≠i_h™dÀr
(
˘x
, 
ª•
, 
ª•n_fõlds
, 
	`NUM_KEY_PAIR
(respn_fields));

711 if(
rc
 !
NO_ERROR
){

712 
exô
;

715 
rc
 = 
	`∑r£_js⁄_q˛oud_devi˚_öfo
(
ª•
, &
devc_öfo
, &
cou¡
);

716 
	`°∫˝y
(
˘x
->
devi˚_id
, 
devc_öfo
[0].devi˚_id, 
QID_DEVICE_ID_LEN
);

718 
exô
:

720 if(
íc_devi˚_«me
){

721 
	`‰ì
(
íc_devi˚_«me
);

724 if(
rc
 < 
NO_ERROR
){

725 
	`QNAP_LOG_ERR_NL
("%s", 
	`gë_°ªº‹
(
rc
));

728 if(
devc_öfo
){

729 
	`‰ì
(
devc_öfo
);

732  
rc
;

733 
	}
}

735 
	$q«p_id_gë_devi˚_«me
(
q˛oud_°
 *
˘x
, *
«me
, 
size_t
 
buff_size
)

737 
ªt
 = 
ERR_NULL_POINTER
;

739 
c⁄fig_vîsi⁄
[
VERSION_LEN
+1];

740 
	`qid_sys_gë_q˛oud_vî
(
c⁄fig_vîsi⁄
, 
VERSION_LEN
);

741 if–0 =
	`°∫cmp
(
c⁄fig_vîsi⁄
, 
QID_CONFIG_VERSION
, 
VERSION_LEN
)){

742 
ªt
 = 
	`qid_sys_gë_devi˚_«me
(
«me
, 
buff_size
);

744 if(
ªt
 !
NO_ERROR
){

745 
	`QNAP_LOG_ERR_NL
("%s", 
	`gë_°ªº‹
(
ªt
));

748  
ªt
;

749 
	}
}

751 
	$q«p_id_upd©e_devi˚_«me
(
q˛oud_°
 *
˘x
, *
«me
)

753 
ªt
 = 
ERR_NULL_POINTER
, 
Êag
 = 0;

755 if(!
˘x
){

756 
exô
;

759 
uri
[
TMP_BUFF_LEN
+1];

760 
îr_msg
[
TMP_BUFF_LEN
+1];

761 
msg
[
PAYLOAD_LEN_MAX
+1];

763 * 
ª•
 = 
NULL
;

764 
key_∑ú_°
 
ª•n_fõlds
[] =

769 
	`qid_sys_gë_qid_devi˚_id
(
˘x
->
devi˚_id
, 
DEVICE_ID_LEN
);

770 
	`¢¥ötf
(
uri
, 
TMP_BUFF_LEN
, "%s/%s/devi˚/%s", 
˘x
->
qid_£rvc_ho°
,

771 
QID_API_VERSION
, 
˘x
->
devi˚_id
);

772 
ªt
 = 
	`gíî©e_devi˚_öfo_roŸ
–
˘x
, 
«me
, 
msg
, 
PAYLOAD_LEN_MAX
);

773 i‡(
ªt
 !
NO_ERROR
) {

774 
exô
;

776 
Êag
 = 
QID_HTTPC_FLAG_AUTH
 | 
QID_HTTPC_FLAG_DEVICE
;

777 
ªt
 = 
	`qid_hâpc_ªque°_ex
(
˘x
, 
Êag
, 
PUT
, 
uri
, 
NULL
, 
msg
, &
ª•
, 
PAYLOAD_LEN_MAX
);

778 if(
ªt
 < 
NO_ERROR
){

779 
exô
;

785 
ªt
 = 
	`qid_hâpc_≠i_h™dÀr
(
˘x
, 
ª•
, 
ª•n_fõlds
, 
	`NUM_KEY_PAIR
(respn_fields));

786 if(
ªt
 !
NO_ERROR
){

787 
exô
;

790 
	`°∫˝y
(
˘x
->
devi˚_«me
, 
«me
, 
NAME_LEN
);

791 
	`qid_sys_£t_devi˚_«me
(
˘x
->
devi˚_«me
);

796 
	`qid_sys_ª°¨t_p‹ãr
();

798 
exô
:

799 if(
ªt
 !
NO_ERROR
){

800 
	`QNAP_LOG_ERR_NL
("%s", 
	`gë_°ªº‹
(
ªt
));

802 
	`¢¥ötf
(
îr_msg
, 
TMP_BUFF_LEN
, 
QID_SYS_LOG_UPDATE_DEVICE_NAME
, 
˘x
->
devi˚_«me
);

803 
	`qid_£nd_sys_evít_log
(
QNAP_EVENT_TYPE_INFO
, 
˘x
->
œ°_evít_log
, 
îr_msg
);

805  
ªt
;

806 
	}
}

808 
	$q«p_id_is_devi˚_«me_avaûabÀ
(
q˛oud_°
 *
˘x
, *
öput_devi˚_«me
)

810 
rc
 = 
ERR_NULL_POINTER
;

812 if(!
˘x
){

813 
exô
;

816 
devi˚_«me
[
QID_DEVICE_NAME_LEN
+1];

817 
uri
[
TMP_BUFF_LEN
+1];

819 * 
ª•
 = 
NULL
;

820 
key_∑ú_°
 
check_fõlds
[] =

827 
	`°∫˝y
(
devi˚_«me
, 
öput_devi˚_«me
, 
QID_DEVICE_NAME_LEN
);

828 
devi˚_«me
[
QID_DEVICE_NAME_LEN
] = '\0';

832 
	`¢¥ötf
(
uri
, 
TMP_BUFF_LEN
, "%s/%s/device/search?device_name=%s&is_unique=true",

833 
˘x
->
qid_£rvc_ho°
, 
QID_API_VERSION
, 
devi˚_«me
);

834 
rc
 = 
	`qid_hâpc_ªque°_ex
(
˘x
, 
QID_HTTPC_FLAG_AUTH
, 
GET
, 
uri
, 
NULL
, NULL, &
ª•
,
PAYLOAD_LEN_MAX
);

835 if(
rc
 < 
NO_ERROR
){

836 
exô
;

839 
	`js⁄_∑r£
(
ª•
, 
check_fõlds
, 
	`NUM_KEY_PAIR
(check_fields));

844 
rc
 = 
	`qid_hâpc_≠i_h™dÀr
(
˘x
, 
ª•
, 
check_fõlds
, 
	`NUM_KEY_PAIR
(check_fields));

845 if(
rc
 !
NO_ERROR
){

846 if(
rc
 =
QID_SERVC_PARAM_INVALID
){

847 
rc
 = 
QCLOUD_NAME_INVALID_FORMAT
;

849 
exô
;

852 if–
	`°rcmp
–"åue", 
check_fõlds
[
qid_ªsu…
].
vÆue
) != 0 ){

853 
rc
 = 
QID_ERR_DEVICE_NAME_BEEN_USED
;

855 
rc
 = 
QCLOUD_NAME_FREE
;

859 
exô
:

860 if(
rc
 !
QCLOUD_NAME_FREE
){

861 
	`QNAP_LOG_ERR_NL
("%s", 
	`gë_°ªº‹
(
rc
));

864  
rc
;

865 
	}
}

867 
	$q«p_id_ª‰esh_tokí
(
q˛oud_°
 *
˘x
)

869  
	`qid_hâpc_ª‰esh_tokí
(
˘x
);

870 
	}
}

872 
	$q«p_id_is_tokí_expúed
()

874  
	`qid_hâpc_is_tokí_expúed
();

875 
	}
}

877 
	$q«p_id_≠p_signö
(
q˛oud_°
 *
˘x
)

879 
rc
 = 
ERR_NULL_POINTER
;

881 if(!
˘x
){

882 
exô
;

885 
key_∑ú_°
 
signö_ª•n_fõlds
[] =

895 
msg_buff
[
PAYLOAD_LEN_MAX
+1];

896 
uri
[
TMP_BUFF_LEN
+1];

897 * 
ª•
 = 
NULL
;

898 *
ªque°
 = 
msg_buff
;

900 
	`GET_TOKEN
(
qid_sys_gë_≠p_tokí
, 
˘x
, ctx->
≠p_tokí
, 
MAX_APPKEY_LEN
);

902 if(
˘x
->
≠p_tokí
[0] != '\0'){

903 
rc
 = 
NO_ERROR
;

904 
exô
;

907 
	`¢¥ötf
(
uri
, 
TMP_BUFF_LEN
, "%s/ﬂuth/tokí", 
˘x
->
qid_£rvc_ho°
);

908 
	`gíî©e_ﬂuth_ªque°
–
OAUTH_GRANT_TYPE_CLIENT_CRED
, 
˘x
->
≠p_öfo
.
≠pid
,

909 
˘x
->
≠p_öfo
.
≠pkey
, 
NULL
, NULL, 
ªque°
, 
PAYLOAD_LEN_MAX
);

910 
rc
 = 
	`qid_hâpc_ªque°_ex
(
˘x
, 
FALSE
, 
POST
, 
uri
, 
NULL
, 
ªque°
, &
ª•
, 
PAYLOAD_LEN_MAX
);

911 if(
rc
 < 
NO_ERROR
){

912 
exô
;

915 
rc
 = 
	`qid_hâpc_ﬂuth_h™dÀr
(
˘x
, 
ª•
, 
OAUTH_GRANT_E_CLIENT_CRED
, 
signö_ª•n_fõlds
,

916 
	`NUM_KEY_PAIR
(
signö_ª•n_fõlds
));

918 
exô
:

919 if(
rc
 !
NO_ERROR
){

920 
˘x
->
≠p_tokí
[0] = '\0';

921 
	`QNAP_LOG_ERR_NL
("%s", 
	`gë_°ªº‹
(
rc
));

925  
rc
;

926 
	}
}

928 
	$q«p_id_signö
 (
q˛oud_°
 *
˘x
, *
q«pid
, *
∑sswd
){

929 
ªt
 = 
NO_ERROR
;

932 if(!
˘x
 || !
q«pid
 || !
∑sswd
 ){

933 
ªt
 = 
ERR_NULL_POINTER
;

934 
exô
;

937 
key_∑ú_°
 
signö_ª•n_fõlds
[] =

947 
msg_buff
[
PAYLOAD_LEN_MAX
+1];

948 
uri
[
TMP_BUFF_LEN
+1];

949 * 
ª•
 = 
NULL
;

950 *
ªque°
 = 
msg_buff
;

952 
	`¢¥ötf
(
uri
, 
TMP_BUFF_LEN
, "%s/ﬂuth/tokí", 
˘x
->
qid_£rvc_ho°
);

954 
	`gíî©e_ﬂuth_ªque°
–
OAUTH_GRANT_TYPE_SIGNIN
, 
˘x
->
≠p_öfo
.
≠pid
,

955 
˘x
->
≠p_öfo
.
≠pkey
, 
q«pid
, 
∑sswd
, 
ªque°
, 
PAYLOAD_LEN_MAX
);

956 
ªt
 = 
	`qid_hâpc_ªque°_ex
(
˘x
, 0, 
POST
, 
uri
, 
NULL
, 
ªque°
, &
ª•
, 
PAYLOAD_LEN_MAX
);

957 if(
ªt
 < 
NO_ERROR
){

958 
exô
;

961 
ªt
 = 
	`qid_hâpc_ﬂuth_h™dÀr
(
˘x
, 
ª•
, 
OAUTH_GRANT_E_PASSWD
, 
signö_ª•n_fõlds
,

962 
	`NUM_KEY_PAIR
(
signö_ª•n_fõlds
));

963 if(
ªt
 =
NO_ERROR
){

967 
	`QID_WRITE_SYSTEM_VAR
–
˘x
->
qid
, 
q«pid
, 
MAX_QID_LEN
, 
qid_sys_£t_qid
, 
ªt
);

970 
	`qid_sys_£t_q˛oud_vî
(
QID_CONFIG_VERSION
);

973 
exô
:

974 if(
ªt
 !
NO_ERROR
){

975 
	`QNAP_LOG_ERR_NL
("%s", 
	`gë_°ªº‹
(
ªt
));

977  
ªt
;

978 
	}
}

980 
	$q«p_id_böd_devi˚
 (
q˛oud_°
 *
˘x
, * 
devi˚_«me
)

982 
ªt
 = 
NO_ERROR
, 
Êag
 = 0;

984 
QCLOUD_STATUS_MSG
 *
œ°_îr‹
;

987 if(!
˘x
 || !
devi˚_«me
 ){

988 
ªt
 = 
ERR_NULL_POINTER
;

989 
exô
;

992 
key_∑ú_°
 
ª•n_fõlds
[] =

1000 
îr_msg
[
MAX_SYSTEM_CMD
+1];

1001 
msg_buff
[
PAYLOAD_LEN_MAX
+1];

1002 * 
ª•
 = 
NULL
;

1003 
uri
[
TMP_BUFF_LEN
+1];

1006 
	`¢¥ötf
(
uri
, 
TMP_BUFF_LEN
, "%s/%s/devi˚", 
˘x
->
qid_£rvc_ho°
, 
QID_API_VERSION
);

1007 
ªt
 = 
	`gíî©e_devi˚_öfo_roŸ
–
˘x
, 
devi˚_«me
, 
msg_buff
, 
PAYLOAD_LEN_MAX
);

1008 i‡(
ªt
 !
NO_ERROR
) {

1009 
exô
;

1011 
Êag
 = 
QID_HTTPC_FLAG_AUTH
;

1014 
ªt
 = 
	`qid_hâpc_ªque°_ex
(
˘x
, 
Êag
, 
POST
, 
uri
, 
NULL
, 
msg_buff
, &
ª•
, 
PAYLOAD_LEN_MAX
);

1015 if–
ªt
 < 
NO_ERROR
){

1016 
exô
;

1022 
ªt
 = 
	`qid_hâpc_≠i_h™dÀr
(
˘x
, 
ª•
, 
ª•n_fõlds
, 
	`NUM_KEY_PAIR
(respn_fields));

1023 if–
ªt
 =
NO_ERROR
)

1026 
	`QID_WRITE_SYSTEM_VAR
(
˘x
->
devi˚_id
, 
ª•n_fõlds
[
qid_böd_devi˚_id
].
vÆue
, 
DEVICE_ID_LEN
, 
qid_sys_£t_qid_devi˚_id
, 
ªt
);

1029 
	`°∫˝y
–
˘x
->
devi˚_tokí
, 
ª•n_fõlds
[
qid_böd_tokí
].
vÆue
, 
MAX_APPKEY_LEN
);

1030 
˘x
->
devi˚_tokí
[
MAX_APPKEY_LEN
] = '\0';

1031 #ifde‡
ENCRYPT_DEBVICE_TOKEN


1032 *
íc_dtokí
 = 
	`í¸y±_°r
(
˘x
, ctx->
devi˚_tokí
);

1033 
	`qid_sys_£t_devi˚_tokí
(
íc_dtokí
);

1035 
	`qid_sys_£t_devi˚_tokí
(
˘x
->
devi˚_tokí
);

1041 
	`QID_WRITE_SYSTEM_VAR
(
˘x
->
devi˚_«me
, devi˚_«me, 
NAME_LEN
, 
qid_sys_£t_devi˚_«me
, 
ªt
);

1044 
	`qid_sys_£t_qid_°©us
(
QID_STAT_BIND
);

1047 
	`¢¥ötf
(
îr_msg
, 
TMP_BUFF_LEN
, 
QID_SYS_LOG_CHECKED_IN
, 
˘x
->
qid
, ctx->
devi˚_«me
);

1048 
	`qid_£nd_sys_evít_log
(
QNAP_EVENT_TYPE_INFO
, 
˘x
->
œ°_evít_log
, 
îr_msg
);

1051 
	`my˛oudNAS_£t_ddns_°©us
(
˘x
, 
TRUE
);

1054 
	`qid_sys_£t_q˛oud_vî
(
QID_CONFIG_VERSION
);

1059 
	`qid_sys_ª°¨t_p‹ãr
();

1062 
exô
:

1063 if(
ªt
 !
NO_ERROR
){

1064 
œ°_îr‹
 = 
	`q˛oud_gë_œ°_îr‹
(
˘x
);

1065 
	`QNAP_LOG_ERR_NL
("%s", 
	`gë_°ªº‹
(
ªt
));

1066 
	`QNAP_LOG_ERR_NL
("code:%d msg:%s", 
œ°_îr‹
->
°©us_code
,Üa°_îr‹->
°©us_msg
);

1068  
ªt
;

1069 
	}
}

1071 
	$q«p_id_ªböd_devi˚
 (
q˛oud_°
 *
˘x
, * 
devi˚_«me
)

1073 
˘x
->
ªböd_Êag
 = 
TRUE
;

1074  
	`q«p_id_böd_devi˚
(
˘x
, 
devi˚_«me
);

1075 
	}
}

1077 
	$q«p_id_unböd_devi˚
 (
q˛oud_°
 *
˘x
)

1080 
ªt
 = 
NO_ERROR
;

1083 
Êag
 = 0;

1086 if(!
˘x
){

1087 
	`QNAP_LOG_DEBUG_NL
("ctx is NULL");

1088 
ªt
 = 
ERR_NULL_POINTER
;

1089 
exô
;

1093 
îr_msg
[
MAX_SYSTEM_CMD
+1];

1095 
key_∑ú_°
 
ª•n_fõlds
[] =

1102 
msg_buff
[
PAYLOAD_LEN_MAX
+1];

1103 * 
ª•
 = 
NULL
;

1104 
uri
[
TMP_BUFF_LEN
+1];

1107 
	`qid_sys_gë_qid_devi˚_id
(
˘x
->
devi˚_id
, 
DEVICE_ID_LEN
);

1108 if(
	`°æí
(
˘x
->
devi˚_id
) == 0){

1109 
exô
;

1113 
	`¢¥ötf
(
uri
, 
TMP_BUFF_LEN
, "%s/%s/devi˚/%s", 
˘x
->
qid_£rvc_ho°
,

1114 
QID_API_VERSION
, 
˘x
->
devi˚_id
);

1117 
Êag
 = 
QID_HTTPC_FLAG_AUTH
 | 
QID_HTTPC_FLAG_DEVICE
;

1118 
ªt
 = 
	`qid_hâpc_ªque°_ex
(
˘x
, 
Êag
, 
DELETE
, 
uri
, 
NULL
, 
msg_buff
, &
ª•
,

1119 
PAYLOAD_LEN_MAX
);

1120 if(
ªt
 < 
NO_ERROR
){

1121 
exô
;

1127 
ªt
 = 
	`qid_hâpc_≠i_h™dÀr
(
˘x
, 
ª•
, 
ª•n_fõlds
, 
	`NUM_KEY_PAIR
(respn_fields));

1128 if(
ªt
 !
NO_ERROR
){

1129 
exô
;

1132 
exô
:

1134 if(
ªt
 !
NO_ERROR
) {

1135 
	`QNAP_LOG_ERR_NL
("%s", 
	`gë_°ªº‹
(
ªt
));

1138 if–
ªt
 =
MCN_ERR_DEVICE_ID_NOT_FOUND
 )Ñë = 
NO_ERROR
;

1142 if(
ªt
 =
NO_ERROR
) {

1144 
	`qid_sys_gë_devi˚_«me
(
˘x
->
devi˚_«me
, 
QID_DEVICE_NAME_LEN
);

1145 if(0 !
	`°æí
(
˘x
->
devi˚_«me
)){

1146 
	`¢¥ötf
(
îr_msg
, 
TMP_BUFF_LEN
, 
QID_SYS_LOG_CHECKED_OUT
, 
˘x
->
qid
, ctx->
devi˚_«me
);

1147 
	`qid_£nd_sys_evít_log
(
QNAP_EVENT_TYPE_INFO
, 
˘x
->
œ°_evít_log
, 
îr_msg
);

1149 
	`ª£t_q˛oud_˘x_c⁄f
(
˘x
);

1152  
ªt
;

1153 
	}
}

1155 
	#MYCLOUD_GET_EXTERNAL_IP
 "%s/%s/utûôy/geo/£¨ch"

	)

1156 
	$q˛oud_gë_exã∫Æ_ù
(
q˛oud_°
 *
˘x
, * 
exã∫Æ_ù
, 
size_t
 
ù_Àn
)

1158 
ªt
 = 
ERR_NULL_POINTER
 , 
˙t
 = 0;

1159 
uri
[
TMP_BUFF_LEN
+1];

1160 * 
ª•
 = 
NULL
;

1161 
œn_ù_öfo_°
 
œn_öfo
;

1162 
key_∑ú_°
 
ª•n_fõlds
[] =

1168 
	`¢¥ötf
(
uri
, 
TMP_BUFF_LEN
, 
MYCLOUD_GET_EXTERNAL_IP
, 
˘x
->
m˙_£rvc_ho°
,

1169 
QID_API_VERSION
);

1170 
ªt
 = 
	`qid_hâpc_ªque°_ex
(
˘x
, 
QID_HTTPC_FLAG_APP_AUTH
, 
GET
, 
uri
, 
NULL
, NULL, &
ª•
, 
PAYLOAD_LEN_MAX
);

1172 if(
ªt
 < 
NO_ERROR
){

1173 
˘x
->
œ°_°©us
.
°©us_code
 = 
ªt
;

1174 
	`°∫˝y
(
˘x
->
œ°_°©us
.
°©us_msg
, "C⁄√˘i⁄Éº‹", 
QCLOUD_STATUS_MSG_STR_LEN
);

1175 
exô
;

1181 
ªt
 = 
	`qid_hâpc_≠i_h™dÀr
(
˘x
, 
ª•
, 
ª•n_fõlds
, 
	`NUM_KEY_PAIR
(respn_fields));

1182 if(
ªt
 < 
NO_ERROR
){

1183 
˘x
->
œ°_°©us
.
°©us_code
 = 
ªt
;

1184 
	`°∫˝y
(
˘x
->
œ°_°©us
.
°©us_msg
, 
ª•n_fõlds
[
qid_mesßge
].
vÆue
, 
QCLOUD_STATUS_MSG_STR_LEN
);

1185 
exô
;

1188 
ªt
 = 
	`∑r£_exã∫Æ_ù
–
ª•
, 
exã∫Æ_ù
, 
ù_Àn
);

1190 if(
NO_ERROR
 !
ªt
){

1191 
	`qid_sys_gë_loˇl_ù_li°
(&
œn_öfo
);

1192 
˙t
 = 0; c¡ < 
œn_öfo
.
œn_ù_cou¡
; cnt++) {

1193 if–
	`°rcmp
(
IP_VERSION4
, 
œn_öfo
.
œn_ù_vîsi⁄
[
˙t
]) == 0){

1194 
	`°∫˝y
–
exã∫Æ_ù
, 
œn_öfo
.
œn_ù
[
˙t
], 
ù_Àn
);

1196 }if(
	`°rcmp
(
IP_VERSION6
, 
œn_öfo
.
œn_ù_vîsi⁄
[
˙t
]) == 0){

1197 
	`°∫˝y
–
exã∫Æ_ù
, 
œn_öfo
.
œn_ù
[
˙t
], 
ù_Àn
);

1203 
exô
:

1205  
ªt
;

1206 
	}
}

	@libs/qid/qid_httpc.c

6 
	~<cuæ/cuæ.h
>

7 
	~<î∫o.h
>

8 
	~<m©h.h
>

9 
	~<js⁄-c/js⁄.h
>

11 
	~"°d_hdr.h
"

12 
	~"comm_hdr.h
"

13 
	~"q˛oud_utû.h
"

14 
	~"q˛oud.h
"

15 
	~"qid_°ru˘.h
"

16 
	~"qid_°©us_code.h
"

18 
	~"buff.h
"

19 
	~"sha1.h
"

21 
	~"qid_hâpc.h
"

22 
	~"q˛oud_gí_≠úeque°.h
"

24 
	#GET_TOKEN
(
GET_FUNC
, 
CTX
, 
BUFF
, 
BUFF_SIZE
) \

26 
ªt
 = 
ERR_NULL_POINTER
; \

27 if(!
CTX
 || !
BUFF
){ \

28 
	`QNAP_LOG_ERR_NL
("rc: [%d]", 
ªt
); \

30 
ªt
 = 
	`GET_FUNC
–
BUFF
, 
BUFF_SIZE
); \

31 if(
ªt
 !
NO_ERROR
){ \

32 
	`QNAP_LOG_ERR_NL
("rc: [%d]", 
ªt
); \

34 
	`de¸y±_°r
(
CTX
, 
BUFF
, 
BUFF_SIZE
); \

36 if(
ªt
 !
NO_ERROR
){ \

37 
	`QNAP_LOG_ERR_NL
("rc: [%d]", 
ªt
); \

39 }0)

	)

43 
	sd©a
 {

44 
	måa˚_ascii
;

45 
q˛oud_°
 *
	m˘x
;

48 
	$dump
(c⁄° *
ãxt
, 
FILE
 *
°ªam
, *
±r
, 
size_t
 
size
,

49 
nohex
)

51 
size_t
 
i
;

52 
size_t
 
c
;

54 
width
=0x10;

56 if(
nohex
){

58 
width
 = 0x40;

61 
i
=0; i<
size
; i+
width
) {

63 if(!
nohex
) {

65 
c
 = 0; c < 
width
; c++)

66 if(
i
+
c
 < 
size
)

67 
	`Ârötf
(
°ªam
, "%02x ", 
±r
[
i
+
c
]);

69 
	`Âuts
(" ", 
°ªam
);

72 
c
 = 0; (¯< 
width
Ë&& (
i
+¯< 
size
); c++) {

74 i‡(
nohex
 && (
i
+
c
+1 < 
size
Ë&& 
±r
[i+c]==0x0D &&Ötr[i+c+1]==0x0A) {

75 
i
+=(
c
+2-
width
);

78 
	`Ârötf
(
°ªam
, "%c",

79 (
±r
[
i
+
c
]>=0x20) && (ptr[i+c]<0x80)?ptr[i+c]:'.');

81 i‡(
nohex
 && (
i
+
c
+2 < 
size
Ë&& 
±r
[i+c+1]==0x0D &&Ötr[i+c+2]==0x0A) {

82 
i
+=(
c
+3-
width
);

86 
	`Âutc
('\n', 
°ªam
);

88 
	`fÊush
(
°ªam
);

89 
	}
}

91 
	$my_åa˚
(
CURL
 *
h™dÀ
, 
cuæ_öfŸy≥
 
ty≥
, *
d©a
, 
size_t
 
size
,

92 *
u£Ω
)

94 
d©a
 *
c⁄fig
 = (d©®*)
u£Ω
;

95 c⁄° *
ãxt
;

96 ()
h™dÀ
;

97 
FILE
 *
log_fd
 = 
pq«p_log
->
log_Â
;

100 
	`q«p_log_chk_fûe_size
();

102 
ty≥
) {

103 
CURLINFO_TEXT
:

104 
	`Ârötf
(
log_fd
, "=Info: %s", 
d©a
);

108 
CURLINFO_HEADER_OUT
:

109 
ãxt
 = "=> Send header";

111 
CURLINFO_DATA_OUT
:

112 
ãxt
 = "=> Send data";

114 
CURLINFO_SSL_DATA_OUT
:

115 
ãxt
 = "=> Send SSL data";

117 
CURLINFO_HEADER_IN
:

118 
ãxt
 = "<= Recv header";

120 
CURLINFO_DATA_IN
:

121 
ãxt
 = "<= Recv data";

123 
CURLINFO_SSL_DATA_IN
:

124 
ãxt
 = "<= Recv SSL data";

128 
	`dump
(
ãxt
, 
log_fd
, (*)
d©a
, 
size
, 
c⁄fig
->
åa˚_ascii
);

130 
	}
}

132 
cuæ_¶i°
 * 
	$qid_hâpc_gí_qid_hdr
(
q˛oud_°
 *
˘x
, 
Êag
)

134 
cuæ_¶i°
 * 
hâp_hdr
 = 
NULL
;

135 
hdr_fõld
[
TMP_BUFF_LEN
+1];

136 
rc
 = -1;

138 
	`°∫˝y
(
hdr_fõld
, "Ac˚±:áµliˇti⁄/js⁄", 
TMP_BUFF_LEN
);

139 
hâp_hdr
 = 
	`cuæ_¶i°_≠≥nd
(hâp_hdr, 
hdr_fõld
);

140 if(!
hâp_hdr
){

141 
exô
;

145 
	`¢¥ötf
–
hdr_fõld
, 
TMP_BUFF_LEN
, 
X_QNAP_APPID_HDR_FIELD
, 
˘x
->
≠p_öfo
.
≠pid
 );

146 
hâp_hdr
 = 
	`cuæ_¶i°_≠≥nd
(hâp_hdr, 
hdr_fõld
);

147 if(!
hâp_hdr
){

148 
exô
;

152 
	`¢¥ötf
–
hdr_fõld
, 
TMP_BUFF_LEN
, 
X_QNAP_SUBAPP_ID
, 
˘x
->
≠p_öfo
.
sub_≠pid
);

153 
hâp_hdr
 = 
	`cuæ_¶i°_≠≥nd
(hâp_hdr, 
hdr_fõld
);

154 if(!
hâp_hdr
){

155 
exô
;

159 
	`¢¥ötf
–
hdr_fõld
, 
TMP_BUFF_LEN
, 
X_QNAP_APP_VER_HDR_FIELD
, 
˘x
->
≠p_öfo
.
≠pvî
);

160 
hâp_hdr
 = 
	`cuæ_¶i°_≠≥nd
(hâp_hdr, 
hdr_fõld
);

161 if(!
hâp_hdr
){

162 
exô
;

165 if((
Êag
&
QID_HTTPC_FLAG_AUTH
Ë&& 
	`°æí
(
˘x
->
auth_tokí
)){

166 
	`¢¥ötf
–
hdr_fõld
, 
TMP_BUFF_LEN
, 
OAUTH_HDR_FIELD
, 
˘x
->
auth_tokí
 );

167 
hâp_hdr
 = 
	`cuæ_¶i°_≠≥nd
(hâp_hdr, 
hdr_fõld
);

168 if(!
hâp_hdr
){

169 
exô
;

171 
	`qid_sys_gë_devi˚_tokí
(
˘x
->
devi˚_tokí
, 
MAX_APPKEY_LEN
);

172 
	`¢¥ötf
–
hdr_fõld
, 
TMP_BUFF_LEN
, 
X_QNAP_DEVICE_TOKEN_HDR_FIELD
, 
˘x
->
devi˚_tokí
 );

173 
hâp_hdr
 = 
	`cuæ_¶i°_≠≥nd
(hâp_hdr, 
hdr_fõld
);

174 if(!
hâp_hdr
){

175 
exô
;

179 if(
Êag
&
QID_HTTPC_FLAG_APP_AUTH
){

180 
	`q«p_id_≠p_signö
(
˘x
);

181 
	`¢¥ötf
–
hdr_fõld
, 
TMP_BUFF_LEN
, 
OAUTH_HDR_FIELD
, 
˘x
->
≠p_tokí
);

182 
hâp_hdr
 = 
	`cuæ_¶i°_≠≥nd
(hâp_hdr, 
hdr_fõld
);

183 if(!
hâp_hdr
){

184 
exô
;

188 if(
Êag
&
QID_HTTPC_FLAG_CHECK_SUM
){

190 
sha1_°rög
[
HEADER_LEN
+1];

192 
time_t
 
cuº_time
 = 
	`time
(0);

193 
	`¢¥ötf
–
hdr_fõld
, 
TMP_BUFF_LEN
, 
X_QNAP_TIME_HDR_FIELD
, 
cuº_time
 );

194 
hâp_hdr
 = 
	`cuæ_¶i°_≠≥nd
(hâp_hdr, 
hdr_fõld
);

195 if(!
hâp_hdr
){

196 
	`QNAP_LOG_ERR_NL
("ÁûedÅÿö£π: %s", 
hdr_fõld
);

197 
exô
;

201 
	`¢¥ötf
–
sha1_°rög
, 
HEADER_LEN
, "%s%s%ld%s", 
˘x
->
≠p_öfo
.
≠pkey
,

202 
˘x
->
≠p_öfo
.
≠pid
, 
cuº_time
, ctx->≠p_öfo.
≠pvî
);

204 
	`sha1_csum
((
uöt8_t
*)
sha1_°rög
, 
	`°æí
(sha1_°rög), (uöt8_t*)
hdr_fõld
);

206 
	`utû_c⁄vît_hex_to_ch¨
((
uöt8_t
*)
hdr_fõld
, 
SHA1_SUM_LEN
, 
sha1_°rög
, 
TMP_BUFF_LEN
);

208 
	`¢¥ötf
(
hdr_fõld
, 
TMP_BUFF_LEN
, 
X_QNAP_CHECK_HDR_FIELD
, 
sha1_°rög
);

209 
hâp_hdr
 = 
	`cuæ_¶i°_≠≥nd
(hâp_hdr, 
hdr_fõld
);

210 if(!
hâp_hdr
){

211 
	`QNAP_LOG_ERR_NL
("ÁûedÅÿö£π: %s", 
hdr_fõld
);

212 
exô
;

216 
rc
 = 
NO_ERROR
;

218 
exô
:

219 if(
rc
 !
NO_ERROR
){

220 
	`QNAP_LOG_ERR_NL
("FaûedÅÿ≠≥nd [%s] i¿HTTP hódî", 
hdr_fõld
);

223  
hâp_hdr
;

224 
	}
}

226 
size_t
 
	$„tch_d©a
(*
buf„r
, 
size_t
 
size
, size_à
nmemb
, *
u£Ω
)

228 
buf_t
 *
buf
 = (buf_à*Ë
u£Ω
;

229 
size_t
 
tŸÆ
 = 
size
 * 
nmemb
;

231 i‡(
buf
->
limô
 - buf->
Àn
 < 
tŸÆ
) {

232 
buf
 = 
	`buf_size
(buf, buf->
limô
 + 
tŸÆ
);

233 i‡(
buf
->
limô
 - buf->
Àn
 < 
tŸÆ
) {

234 
	`QNAP_LOG_ERR_NL
("allocate buff failed");

239 
	`buf_c⁄ˇt
(
buf
, 
buf„r
, 
tŸÆ
);

240  
tŸÆ
;

241 
	}
}

243 
	$h™dÀ_hâp_ªque°
 (
q˛oud_°
 *
˘x
, 
Êag
,

244 
HTTP_METHOD_E
 
mëhod
, *
uæ
, *
hódî
,

245 *
body
, **
ª•
, 
size_t
 
ª•_buf_size
)

247 
CURL
 *
cuæ
 = 
	`cuæ_ósy_öô
();

248 
cuæ_¶i°
 *
hâp_hdr
 = 
NULL
;

249 
ªt
 = 
NO_ERROR
;

250 
hâp_code
 = 0;

252 if(!
uæ
 ){

253 
	`QNAP_LOG_ERR_NL
("invalidÖarameter");

254 
ªt
 = 
ERR_NULL_POINTER
;

255 
exô
;

258 i‡(!
cuæ
) {

259 
	`QNAP_LOG_ERR_NL
("Create curl object failed");

260 
ªt
 = 
ERR_OVERFLOW
;

261 
exô
;

264 i‡(
˘x
->
hâp_ª•
 && ctx->hâp_ª•->
d©a
){

265 
˘x
->
hâp_ª•
->
Àn
 = 0;

266 
	`mem£t
–
˘x
->
hâp_ª•
->
d©a
, 0, ctx->hâp_ª•->
limô
);

268 
˘x
->
hâp_ª•
 = 
	`buf_size
(
NULL
, 
PAYLOAD_LEN_MAX
);

271 i‡(!
˘x
->
hâp_ª•
) {

272 
	`QNAP_LOG_ERR_NL
("ctx->http_resp is NULL");

273 
ªt
 = 
ERR_OVERFLOW
;

274 
exô
;

277 
	`cuæ_ósy_£t›t
(
cuæ
, 
CURLOPT_URL
, 
uæ
);

279 
	`cuæ_ósy_£t›t
(
cuæ
, 
CURLOPT_FOLLOWLOCATION
, 1);

281 
	`cuæ_ósy_£t›t
(
cuæ
, 
CURLOPT_WRITEFUNCTION
, 
„tch_d©a
);

283 
	`cuæ_ósy_£t›t
(
cuæ
, 
CURLOPT_WRITEDATA
, 
˘x
->
hâp_ª•
);

285 
mëhod
){

286 
GET
:

288 
POST
:

289 
	`cuæ_ósy_£t›t
(
cuæ
, 
CURLOPT_POST
, 1L);

290 if(
body
){

291 
	`cuæ_ósy_£t›t
(
cuæ
, 
CURLOPT_POSTFIELDS
, 
body
);

294 
PUT
:

295 
	`cuæ_ósy_£t›t
(
cuæ
, 
CURLOPT_CUSTOMREQUEST
, "PUT");

296 if(
body
){

297 
	`cuæ_ósy_£t›t
(
cuæ
, 
CURLOPT_POSTFIELDS
, 
body
);

300 
DELETE
:

301 
	`cuæ_ósy_£t›t
(
cuæ
, 
CURLOPT_CUSTOMREQUEST
, "DELETE");

307 if(
	`QNAP_LOG_DETAIL_IS_ON
()){

308 
d©a
 
c⁄fig
;

309 
c⁄fig
.
åa˚_ascii
 = 1;

310 
	`cuæ_ósy_£t›t
(
cuæ
, 
CURLOPT_DEBUGFUNCTION
, 
my_åa˚
);

311 
	`cuæ_ósy_£t›t
(
cuæ
, 
CURLOPT_DEBUGDATA
, &
c⁄fig
);

313 
	`cuæ_ósy_£t›t
(
cuæ
, 
CURLOPT_VERBOSE
, 1L);

317 
	`cuæ_ósy_£t›t
(
cuæ
, 
CURLOPT_CONNECTTIMEOUT
, 
˘x
->
hâp_timeout
);

318 
	`cuæ_ósy_£t›t
(
cuæ
, 
CURLOPT_TIMEOUT
, 
˘x
->
hâp_timeout
);

320 if(
Êag
 & 
QID_HTTPC_FLAG_PROXY
){

321 
	`cuæ_ósy_£t›t
(
cuæ
, 
CURLOPT_PROXY
, 
˘x
->
dóÀr_ù
);

322 
	`cuæ_ósy_£t›t
(
cuæ
, 
CURLOPT_PROXYPORT
, 
˘x
->
dóÀr_¥oxy_p‹t
);

323 
	`cuæ_ósy_£t›t
(
cuæ
, 
CURLOPT_HTTPPROXYTUNNEL
, 1);

327 
hâp_hdr
 = 
	`qid_hâpc_gí_qid_hdr
(
˘x
, 
Êag
);

330 if(
hâp_hdr
)

331 
	`cuæ_ósy_£t›t
(
cuæ
, 
CURLOPT_HTTPHEADER
, 
hâp_hdr
);

344 
	`cuæ_ósy_£t›t
(
cuæ
, 
CURLOPT_SSL_VERIFYPEER
, 0L);

354 
	`cuæ_ósy_£t›t
(
cuæ
, 
CURLOPT_SSL_VERIFYHOST
, 0L);

357 
ªt
 = 
	`cuæ_ósy_≥rf‹m
(
cuæ
);

358 i‡(
ªt
 !
CURLE_OK
) {

359 
	`QNAP_LOG_ERR_NL
("cuæ_ósy_≥rf‹m faûed: %s", 
	`cuæ_ósy_°ªº‹
(
ªt
));

360 
	`QNAP_LOG_ERR_NL
("uæ: %s", 
uæ
);

361 
ªt
 = 
QID_ERR_CONNECT_SERVER
;

363 
	`cuæ_ósy_gëöfo
 (
cuæ
, 
CURLINFO_RESPONSE_CODE
, &
hâp_code
);

366 
exô
:

368 if(
cuæ
){

369 
	`cuæ_ósy_˛ónup
(
cuæ
);

372 if(
hâp_hdr
){

373 
	`cuæ_¶i°_‰ì_Æl
(
hâp_hdr
);

376 if(
˘x
->
hâp_ª•
){

377 if(
ªt
 =
NO_ERROR
){

378 *
ª•
 = (*)(
˘x
->
hâp_ª•
->
d©a
);

379 
	`QNAP_LOG_DEBUG_NL
("uæ: %s", 
uæ
);

380 
ªt
 = 
hâp_code
;

381 
	`QNAP_LOG_DEBUG_NL
("ªt:%d", 
ªt
);

384 
	`QNAP_LOG_ERR_NL
("response buffer isÇull");

386  
ªt
;

387 
	}
}

389 
	$qid_hâpc_ﬂuth_h™dÀr
(
q˛oud_°
 *
˘x
, * 
ª•
, 
gø¡_ty≥
,

390 
key_∑ú_°
 *
ª•n_fõlds
, 
size_t
 
num_fõlds
)

392 
ªt
 = 
ERR_INVALID_VALUE
;

393 
upd©e_©
[
TMP_BUFF_LEN
+1];

394 * 
ª‰esh_tokí
, *
auth_tokí
, *
code
, *
vÆid_time
, *
îr‹_desc
;

395 *
íc_tokí
 = 
NULL
, *
íc_ª‰esh_tokí
 = NULL;

397 if(
NO_ERROR
 !
	`js⁄_∑r£
–
ª•
, 
ª•n_fõlds
, 
num_fõlds
)){

398 
exô
;

401 
ª‰esh_tokí
 = 
ª•n_fõlds
[
qid_ﬂuth_ª•_ª‰esh_tokí
].
vÆue
;

402 
auth_tokí
 = 
ª•n_fõlds
[
qid_ﬂuth_ª•_ac˚ss_tokí
].
vÆue
;

403 
code
 = 
ª•n_fõlds
[
qid_ﬂuth_îr‹
].
vÆue
;

404 
vÆid_time
 = 
ª•n_fõlds
[
qid_ﬂuth_ª•_expúes_ö
].
vÆue
;

405 
îr‹_desc
 = 
ª•n_fõlds
[
qid_ﬂuth_îr‹_des¸ùti⁄
].
vÆue
;

407 
ªt
 = 
	`q˛oud_gë_°©us_code
(
code
);

408 if(
ªt
 !
NO_ERROR
 || 
auth_tokí
[0] == '\0'){

410 
	`QNAP_LOG_DEBUG_NL
("ªt: %d", 
ªt
);

411 
	`QNAP_LOG_ERR_NL
("%†[%s]", 
îr‹_desc
, 
code
);

413 
˘x
->
œ°_°©us
.
°©us_code
 = 
ªt
;

414 
	`°∫˝y
(
˘x
->
œ°_°©us
.
°©us_msg
, 
îr‹_desc
, 
QCLOUD_STATUS_MSG_STR_LEN
);

415 
exô
;

418 if–
ªt
 =
NO_ERROR
)

421 
íc_tokí
 = 
	`í¸y±_°r
(
˘x
, 
auth_tokí
);

422 if(!
íc_tokí
){

423 
	`QNAP_LOG_ERR_NL
("Encryptáuth_token");

424 
ªt
 = 
ERR_SYSTEM
;

425 
exô
;

428 if((
gø¡_ty≥
 =
OAUTH_GRANT_E_PASSWD
 || gø¡_ty≥ =
OAUTH_GRANT_E_REFRESH_TOKEN
)){

429 
íc_ª‰esh_tokí
 = 
	`í¸y±_°r
(
˘x
, 
ª‰esh_tokí
);

430 if(!
íc_ª‰esh_tokí
){

431 
	`QNAP_LOG_ERR_NL
("EncryptÑefresh_token");

432 
ªt
 = 
ERR_SYSTEM
;

433 
exô
;

436 
	`°∫˝y
(
˘x
->
ª‰esh_tokí
,Ñe‰esh_tokí, 
MAX_APPKEY_LEN
);

437 
	`qid_sys_£t_ª‰esh_tokí
(
íc_ª‰esh_tokí
);

438 
	`°∫˝y
(
˘x
->
auth_tokí
,áuth_tokí, 
MAX_APPKEY_LEN
);

439 
	`qid_sys_£t_auth_tokí
(
íc_tokí
);

440 
	`QID_WRITE_SYSTEM_VAR
–
˘x
->
vÆid_≥riod
, 
vÆid_time
, 
NAME_LEN
,

441 
qid_sys_£t_tokí_vÆid_≥riod
, 
ªt
);

442 
˘x
->
tokí_œ°_upd©e_time
 = 
	`time
(0);

443 
	`¢¥ötf
–
upd©e_©
,
TMP_BUFF_LEN
, "%d", ()
˘x
->
tokí_œ°_upd©e_time
);

444 
	`qid_sys_£t_œ°_upd©e_tokí_time
(
upd©e_©
);

445 }if(
gø¡_ty≥
 =
OAUTH_GRANT_E_CLIENT_CRED
){

446 
	`°∫˝y
(
˘x
->
≠p_tokí
, 
auth_tokí
, 
MAX_APPKEY_LEN
);

447 
	`qid_sys_£t_≠p_tokí
(
íc_tokí
);

450 
˘x
->
œ°_°©us
.
°©us_code
 = 
NO_ERROR
;

451 
˘x
->
œ°_°©us
.
°©us_msg
[0] = '\0';

454 
exô
:

456 if(
íc_tokí
){

457 
	`‰ì
(
íc_tokí
);

460 if(
íc_ª‰esh_tokí
){

461 
	`‰ì
(
íc_ª‰esh_tokí
);

464  
ªt
;

465 
	}
}

467 
	$qid_hâpc_≠i_h™dÀr
(
q˛oud_°
 *
˘x
, * 
ª•
, 
key_∑ú_°
 *
ª•n_fõlds
,

468 
size_t
 
num_fõlds
)

470 
ªt
 = 
NO_ERROR
;

474 if(
˘x
->
œ°_°©us
.
°©us_code
 !
NO_ERROR
){

475 
ªt
 = 
˘x
->
œ°_°©us
.
°©us_code
;

476 
exô
;

479 
ªt
 = 
	`js⁄_∑r£
(
ª•
, 
ª•n_fõlds
, 
num_fõlds
);

480 if(
ªt
 !
NO_ERROR
){

481 
exô
;

484 
ªt
 = 
	`q˛oud_gë_°©us_code
(
ª•n_fõlds
[
qid_u£r_code
].
vÆue
);

486 
exô
:

488 if(
ªt
 !
NO_ERROR
){

489 
key_∑ú_°
 
°ackåa˚
 = {"stacktrace", "\0"};

490 
	`js⁄_∑r£
(
ª•
, &
°ackåa˚
, 
	`NUM_KEY_PAIR
(stacktrace));

491 
˘x
->
œ°_°©us
.
°©us_code
 = 
	`©oi
(
ª•n_fõlds
[
qid_u£r_code
].
vÆue
);

492 
	`°∫˝y
(
˘x
->
œ°_°©us
.
°©us_msg
, 
ª•n_fõlds
[
qid_u£r_msg
].
vÆue
,

493 
QCLOUD_STATUS_MSG_STR_LEN
);

494 
	`QNAP_LOG_ERR_NL
("QID: [%d] %s", 
˘x
->
œ°_°©us
.
°©us_code
,

495 
˘x
->
œ°_°©us
.
°©us_msg
);

496 
	`QNAP_LOG_ERR_NL
("°ackåa˚: %s", 
°ackåa˚
.
vÆue
);

499  
ªt
;

500 
	}
}

502 
	#REFRESH_TOKEN_BODY
 "gø¡_ty≥=%s&˛õ¡_id=%s&˛õ¡_£¸ë=%s&ª‰esh_tokí=%s"

	)

503 
	#RESEND_REQ_TIMES
 (2)

	)

505 
	$qid_hâpc_ª‰esh_tokí
 (
q˛oud_°
 *
˘x
)

507 
ªt
 = 
NO_ERROR
;

508 if(!
˘x
 ){

509 
ªt
 = 
ERR_NULL_POINTER
;

510 
exô
;

513 
key_∑ú_°
 
ª•n_fõlds
[] =

523 
msg_buff
[
PAYLOAD_LEN_MAX
+1];

524 
uri
[
TMP_BUFF_LEN
+1];

525 * 
ª•
 = 
NULL
;

527 
	`q˛oud_ªlﬂd_c⁄fig
(
˘x
);

529 
	`¢¥ötf
(
uri
, 
TMP_BUFF_LEN
, "%s/ﬂuth/tokí", 
˘x
->
qid_£rvc_ho°
);

530 
	`¢¥ötf
(
msg_buff
, 
PAYLOAD_LEN_MAX
, 
REFRESH_TOKEN_BODY
,

531 
OAUTH_GRANT_TYPE_REFRESH_TOKEN
,

532 
˘x
->
≠p_öfo
.
≠pid
, ctx->≠p_öfo.
≠pkey
, ctx->
ª‰esh_tokí
);

534 
ªt
 = 
	`qid_hâpc_ªque°_ex
(
˘x
, 
FALSE
, 
POST
, 
uri
, 
NULL
, 
msg_buff
, &
ª•
, 
PAYLOAD_LEN_MAX
);

535 if(
ªt
 < 
NO_ERROR
){

536 
exô
;

539 
ªt
 = 
	`qid_hâpc_ﬂuth_h™dÀr
(
˘x
, 
ª•
, 
OAUTH_GRANT_E_REFRESH_TOKEN
,

540 
ª•n_fõlds
, 
	`NUM_KEY_PAIR
(respn_fields));

542 
exô
:

543 if(
ªt
 !
NO_ERROR
){

544 
	`QNAP_LOG_ERR_NL
("[%s]", 
	`gë_°ªº‹
(
ªt
));

546  
ªt
;

547 
	}
}

549 
	#V1_REFRESH_TOKEN_BODY
 "˛õ¡_id=%s&˛õ¡_£¸ë=%s&auth_tokí=%s"

	)

551 
	$qid_hâpc_ª‰esh_v1_tokí
 (
q˛oud_°
 *
˘x
)

553 
ªt
 = 
NO_ERROR
;

554 if(!
˘x
 ){

555 
ªt
 = 
ERR_NULL_POINTER
;

556 
exô
;

559 
key_∑ú_°
 
ª•n_fõlds
[] =

569 
msg_buff
[
PAYLOAD_LEN_MAX
+1];

570 
uri
[
TMP_BUFF_LEN
+1];

571 * 
ª•
 = 
NULL
;

573 
	`q˛oud_ªlﬂd_c⁄fig
(
˘x
);

575 
	`¢¥ötf
(
uri
, 
TMP_BUFF_LEN
, "%s/ﬂuth/upgøde", 
˘x
->
qid_£rvc_ho°
);

576 
	`¢¥ötf
(
msg_buff
, 
PAYLOAD_LEN_MAX
, 
V1_REFRESH_TOKEN_BODY
,

577 
˘x
->
≠p_öfo
.
≠pid
, ctx->≠p_öfo.
≠pkey
, ctx->
ª‰esh_tokí
);

579 
ªt
 = 
	`qid_hâpc_ªque°_ex
(
˘x
, 
FALSE
, 
POST
, 
uri
, 
NULL
, 
msg_buff
, &
ª•
, 
PAYLOAD_LEN_MAX
);

580 if(
ªt
 < 
NO_ERROR
){

581 
exô
;

584 
ªt
 = 
	`qid_hâpc_ﬂuth_h™dÀr
(
˘x
, 
ª•
, 
OAUTH_GRANT_E_REFRESH_TOKEN
,

585 
ª•n_fõlds
, 
	`NUM_KEY_PAIR
(respn_fields));

587 
exô
:

588 if(
ªt
 !
NO_ERROR
){

589 
	`QNAP_LOG_ERR_NL
("[%s]", 
	`gë_°ªº‹
(
ªt
));

591  
ªt
;

592 
	}
}

601 
	$qid_hâpc_is_tokí_övÆid
–
q˛oud_°
 *
˘x
, * 
ª•
)

604 
ªt
 = 
NO_ERROR
;

605 
key_∑ú_°
 
msg_fõlds
[] =

612 
ªt
 = 
	`js⁄_∑r£
(
ª•
, 
msg_fõlds
, 
	`NUM_KEY_PAIR
(msg_fields));

613 if(
ªt
 =
NO_ERROR
 && 
msg_fõlds
[
qid_code
].
vÆue
[0] != '\0'){

614 
ªt
 = 
	`©oi
(
msg_fõlds
[
qid_code
].
vÆue
);

615 if(
ªt
 =
QID_INVALID_AUTH_TOKEN
 ||Ñë =
QID_TOKEN_SCOPE_UNMATCHED
){

616 
ªt
 = 
TRUE
;

618 
ªt
 = 
FALSE
;

621 
	`QNAP_LOG_DEBUG_NL
("InvÆidÑe•⁄£: %s", 
ª•
);

624 if(
ªt
 !
FALSE
){

625 
	`QNAP_LOG_ERR_NL
("ªt: [%d]", 
ªt
);

627  
ªt
;

628 
	}
}

637 
	$qid_hâpc_is_tokí_expúed
()

639 
ªt
 = 0;

640 
œ°Upd©e
[
TMP_BUFF_LEN
+1];

641 
tokíVÆidPîiod
[
TMP_BUFF_LEN
+1];

642 
	`qid_sys_gë_tokí_vÆid_≥riod
(
tokíVÆidPîiod
, 
TMP_BUFF_LEN
);

643 
	`qid_sys_gë_œ°_upd©e_tokí_time
(
œ°Upd©e
, 
TMP_BUFF_LEN
);

644 
	`QNAP_LOG_INFO_NL
("lastupdate:%s validperiod:%s sum:%lf cur:%d",

645 
œ°Upd©e
,
tokíVÆidPîiod
,

646 (
	`©oi
(
œ°Upd©e
Ë+átoi(
tokíVÆidPîiod
)*
AUTH_TOKEN_VALID_LIMIT
),

647 ()
	`time
(0));

648 if(
	`©oi
(
œ°Upd©e
Ë+átoi(
tokíVÆidPîiod
)*
AUTH_TOKEN_VALID_LIMIT
 < 
	`time
(0)){

649 
ªt
 = 
TRUE
;

651 
ªt
 = 
FALSE
;

654 if(
ªt
 !
FALSE
){

655 
	`QNAP_LOG_ERR_NL
("ªt: [%d]", 
ªt
);

657  
ªt
;

658 
	}
}

661 
	#HTTPC_RETRY_TIMES
 (2)

	)

663 *
	ghâp_mëhod_°r
 []= {

670 
	$qid_hâpc_ªque°_ex
–
q˛oud_°
 *
˘x
, 
Êag
,

671 
HTTP_METHOD_E
 
mëhod
, *
uæ
, *
hódî
,

672 *
body
, **
ª•
, 
size_t
 
ª•_buf_size
)

674 #ifde‡
PERFORMANCE_ANALYSIS


675 
timevÆ
 
tv
, 
tv2
;

676 
°¨t_utime
, 
íd_utime
;

677 
	`gëtimeofday
(&
tv
,
NULL
);

678 
°¨t_utime
 = 
tv
.
tv_£c
 * 1000000 +Åv.
tv_u£c
;

680 
hex_dige°
[
SHA1_SUM_LEN
+1];

681 
ßved_dige°
[
TMP_BUFF_LEN
+1];

682 
dige°_âl
[
TMP_BUFF_LEN
+1];

683 
dige°
[
TMP_BUFF_LEN
+1];

684 
ªque°_ty≥
 = 0;

685 
ªt
 = 
NO_ERROR
;

686 
i
;

687 
uæ_li°
[
num_ªque°_d©a_ty≥
][
SHA1_SUM_LEN
] =

698 
	`QNAP_LOG_DEBUG_NL
("-----------------------------------------------");

699 
˘x
->
œ°_°©us
.
°©us_code
 = 
NO_ERROR
;

700 
˘x
->
œ°_°©us
.
°©us_msg
[0] = '\0';

702 if(
Êag
 & 
QID_HTTPC_FLAG_AUTH
){

703 
	`GET_TOKEN
(
qid_sys_gë_auth_tokí
, 
˘x
, ctx->
auth_tokí
, 
MAX_APPKEY_LEN
);

704 
	`GET_TOKEN
(
qid_sys_gë_ª‰esh_tokí
, 
˘x
, ctx->
ª‰esh_tokí
, 
MAX_APPKEY_LEN
);

707 if–
Êag
 & 
QID_HTTPC_FLAG_REQUEST
){

710 
ªque°_ty≥
 = (
Êag
 >> 8)-1;

715 
do_ªque°
;

720 
	`qid_sys_gë_hash_°rög_âl
(
uæ_li°
[
ªque°_ty≥
], 
dige°_âl
,
TMP_BUFF_LEN
);

721 if–
	`time
(0Ë> 
	`©oi
(
dige°_âl
)){

722 
	`QNAP_LOG_DEBUG_NL
("Digest[%s]'s TTL(%d) isÉxpired, update",

723 
uæ_li°
[
ªque°_ty≥
], 
	`©oi
(
dige°_âl
));

724 
	`qid_sys_£t_hash_°rög
(
uæ_li°
[
ªque°_ty≥
], "\0");

727 if(
Êag
&
QID_HTTPC_FLAG_REQUEST
){

728  
mëhod
)

730 
DELETE
:

731 #ifde‡
CHECK_DELETE_REQUEST


736 
	`qid_sys_gë_hash_°rög
(
uæ_li°
[
ªque°_ty≥
],

737 
ßved_dige°
,
TMP_BUFF_LEN
);

738 if–
ßved_dige°
[0] == '0')

739  
ªt
;

744 
	`qid_sys_£t_hash_°rög
(
uæ_li°
[
ªque°_ty≥
], "\0");

745 
	`qid_sys_£t_hash_°rög_âl
(
uæ_li°
[
ªque°_ty≥
], 0);

747 
PUT
:

748 
POST
:

752 
	`sha1_csum
((*)
body
, 
	`°æí
(body), 
hex_dige°
);

753 
	`utû_c⁄vît_hex_to_ch¨
((
uöt8_t
*)
hex_dige°
, 
SHA1_SUM_LEN
, 
dige°


754 , 
TMP_BUFF_LEN
);

758 
	`qid_sys_gë_hash_°rög
(
uæ_li°
[
ªque°_ty≥
],

759 
ßved_dige°
,
TMP_BUFF_LEN
);

766 if–
	`°∫cmp
(
dige°
, 
ßved_dige°
, 
SHA1_SUM_LEN
*2) == 0 ){

768 i‡(
˘x
->
hâp_ª•
 && ctx->hâp_ª•->
d©a
){

769 
	`buf_c⁄ˇt
(
˘x
->
hâp_ª•
, (
uöt8_t
*)
HTTP_RESP_OK
, 
	`°æí
(HTTP_RESP_OK));

770 *
ª•
 = (*)(
˘x
->
hâp_ª•
->
d©a
);

771 
ªt
 = 
HTTP_HASHED_RESP_OK
;

773 
ªt
 = 
ERR_BUFF_ALLOC_FAILED
;

775 
exô
;

777 
	`QNAP_LOG_DEBUG_NL
("cuº dige°[%s]ÇŸÉquÆ wôhÖªvious[%s]", 
dige°
, 
ßved_dige°
);

779 
GET
:

786 
do_ªque°
:

787  
i
 = 0; i < 
HTTPC_RETRY_TIMES
; i++){

789 
ªt
 = 
	`h™dÀ_hâp_ªque°
 (
˘x
, 
Êag
, 
mëhod
, 
uæ
, 
hódî
, 
body
, 
ª•
,

790 
ª•_buf_size
);

792 if(
QID_SERCV_HTTP_OK
 =
ªt
 ||Ñë =
NO_ERROR
){

793 
ªt
 = 
NO_ERROR
;

795 }if(
ªt
 =
QID_ERR_CONNECT_SERVER
 ){

802 i‡(
i
 ==0 && !(
Êag
 & 
QID_HTTPC_FLAG_PROXY
)){

806 
ªt
 = 
	`qid_hâpc_is_tokí_övÆid
(
˘x
, *
ª•
);

807 if(
ªt
 !
TRUE
){

813 if((
Êag
&
QID_HTTPC_FLAG_AUTH
)){

814 
ª‰esh_ªt
 = 
	`qid_hâpc_ª‰esh_tokí
(
˘x
);

815 if((
ª‰esh_ªt
 =
NO_ERROR
Ë|| (
QID_SERCV_HTTP_OK
 ==Ñefresh_ret)){

819 }if(
Êag
&
QID_HTTPC_FLAG_APP_AUTH
){

820 
˘x
->
≠p_tokí
[0] = '\0';

821 
	`qid_sys_£t_≠p_tokí
(
˘x
->
≠p_tokí
);

835 if(
NO_ERROR
 =
ªt
 && (
Êag
&
QID_HTTPC_FLAG_REQUEST
)){

836  
mëhod
)

838 
PUT
:

839 
POST
:

843 
	`sha1_csum
((*)
body
, 
	`°æí
(body), 
hex_dige°
);

844 
	`utû_c⁄vît_hex_to_ch¨
((
uöt8_t
*)
hex_dige°
, 
SHA1_SUM_LEN
, 
dige°


845 , 
TMP_BUFF_LEN
);

850 
	`qid_sys_£t_hash_°rög
(
uæ_li°
[
ªque°_ty≥
], 
dige°
);

852 
	`mem£t
(
dige°_âl
, 0 ,
TMP_BUFF_LEN
);

855 #ifde‡
DEBUG


856 
	#HASH_STRING_VALID_PERIOD
 (5)

	)

858 
	#HASH_STRING_VALID_PERIOD
 (86400)

	)

860 
	`qid_sys_£t_hash_°rög_âl
(
uæ_li°
[
ªque°_ty≥
],

861 ()
	`time
(0)+
HASH_STRING_VALID_PERIOD
);

865 
GET
:

872 
exô
:

873 
	`QNAP_LOG_DEBUG_NL
("Aµid: %s", 
˘x
->
≠p_öfo
.
≠pid
);

874 
	`QNAP_LOG_DEBUG_NL
("Sub-Aµid: %s", 
˘x
->
≠p_öfo
.
sub_≠pid
);

875 
	`QNAP_LOG_INFO_NL
("%†%†", 
hâp_mëhod_°r
[
mëhod
], 
uæ
);

876 if(
ªt
 =
NO_ERROR
){

877 
	`QNAP_LOG_INFO_NL
("Done");

879 if(
ªt
 < 
NO_ERROR
){

880 
	`QNAP_LOG_ERR_NL
("I¡î«»îr‹: %s", 
	`gë_°ªº‹
(
ªt
));

881 }i‡(
ªt
 =
HTTP_HASHED_RESP_OK
){

882 
	`QNAP_LOG_INFO_NL
("is cached");

884 
	`QNAP_LOG_ERR_NL
("%d", 
ªt
);

887 #ifde‡
PERFORMANCE_ANALYSIS


888 
	`gëtimeofday
(&
tv2
,
NULL
);

889 
íd_utime
 = 
tv2
.
tv_£c
 * 1000000 +Åv2.
tv_u£c
;

890 
	`QNAP_LOG_INFO_NL
("hâ∞ªque°Éœp£Åimê:%Œu", 
íd_utime
 - 
°¨t_utime
);

892 
	`QNAP_LOG_DEBUG_NL
("-----------------------------------------------");

893  
ªt
;

894 
	}
}

896 
	$qid_hâpc_ªque°
(
q˛oud_°
 *
˘x
, 
Êag
,

897 
HTTP_METHOD_E
 
mëhod
, *
uæ
, *
d©a
, **
ª•
)

899 
ªt
 = 0;

900 
i
;

902  
i
 = 0; i < 
HTTPC_RETRY_TIMES
; i++){

903 
ªt
 = 
	`h™dÀ_hâp_ªque°
(
˘x
, 
Êag
, 
mëhod
, 
uæ
, 
NULL
, 
d©a
, 
ª•
,

904 
PAYLOAD_LEN_MAX
);

905 if–
ªt
 =
QID_ERR_CONNECT_SERVER
 ){

914 if(
QID_SERCV_HTTP_OK
 =
ªt
)

915 
ªt
 = 
NO_ERROR
;

917  
ªt
;

918 
	}
}

920 
	#OAUTH_ERR
(
code
, 
s
Ë{ code, s }

	)

922 
	#ARRAY_SIZE
(
a
Ë(◊Ë/ (◊)[0]))

	)

924 
	sîr‹_£t
{

925 
	mcode
;

926 c⁄° *
	mmsg
;

927 }
	tîr‹_£t
;

929 
îr‹_£t
 
	gﬂuth_îr‹°r
[] = {

930 
OAUTH_ERR
(
OAUTH_ERR_INVALID_REQ
, "invalid_request"),

931 
OAUTH_ERR
(
OAUTH_ERR_INVALID_CLI
, "invalid_client"),

932 
OAUTH_ERR
(
OAUTH_ERR_INVALID_USER
, "invalid_user"),

933 
OAUTH_ERR
(
OAUTH_ERR_INVALID_PASS
, "invalid_password"),

934 
OAUTH_ERR
(
OAUTH_ERR_INVALID_GRANT
, "invalid_grant"),

935 
OAUTH_ERR
(
OAUTH_ERR_QID_NOT_VERIFIED
, "user_not_activated"),

936 
OAUTH_ERR
(
OAUTH_ERR_SERVER
, "server_error"),

937 
OAUTH_ERR
(
NO_ERROR
, "0")

940 
	$q˛oud_gë_°©us_code
–* 
code_°r
 )

942 
˙t
 = 0;

947 if–
code_°r
[0] == '\0'){

948  
NO_ERROR
;

955  
˙t
 = 0; c¡ < 
	`ARRAY_SIZE
(
ﬂuth_îr‹°r
); cnt++){

956 if–
	`°∫cmp
(
ﬂuth_îr‹°r
[
˙t
].
msg
,

957 
code_°r
, 
	`°æí
(
ﬂuth_îr‹°r
[
˙t
].
msg
)) == 0){

958  
ﬂuth_îr‹°r
[
˙t
].
code
;

961  
	`©oi
–
code_°r
);

963 
	}
}

	@libs/qid/qid_openssl_aes.c

8 
	~<›ís¶/´s.h
>

10 
	~"°d_hdr.h
"

11 
	~"comm_hdr.h
"

12 
	~"qid_›ís¶_´s.h
"

15 
	$qid_´s_öô
–*
key_d©a
, 
key_d©a_Àn
,

16 *
ß…
,

17 
EVP_CIPHER_CTX
 *
e_˘x
, EVP_CIPHER_CTX *
d_˘x
)

19 
i
, 
ƒounds
 = 5;

20 
key
[32], 
iv
[32];

27 
i
 = 
	`EVP_ByãsToKey
(
	`EVP_´s_256_cbc
(), 
	`EVP_sha1
(), 
ß…
,

28 
key_d©a
, 
key_d©a_Àn
, 
ƒounds
, 
key
, 
iv
);

29 i‡(
i
 != 32) {

30 
	`QNAP_LOG_ERR_NL
("Key sizêi†%d bô†- should bê256 bôs\n", 
i
);

34 
	`EVP_CIPHER_CTX_öô
(
e_˘x
);

35 
	`EVP_En¸y±Inô_ex
(
e_˘x
, 
	`EVP_´s_256_cbc
(), 
NULL
, 
key
, 
iv
);

36 
	`EVP_CIPHER_CTX_öô
(
d_˘x
);

37 
	`EVP_De¸y±Inô_ex
(
d_˘x
, 
	`EVP_´s_256_cbc
(), 
NULL
, 
key
, 
iv
);

40 
	}
}

42 
	$qid_´s_˛ón_up
(
EVP_CIPHER_CTX
 *
e
)

44 if(
e
)

45 
	`EVP_CIPHER_CTX_˛ónup
(
e
);

46 
	}
}

48 *
	$qid_´s_í¸y±
(
EVP_CIPHER_CTX
 *
e
, *
∂aöãxt
, *
Àn
)

51 if(!
e
 || !
∂aöãxt
 || !
Àn
){

52 
	`QNAP_LOG_ERR_NL
("invalidÖarameter");

53  
NULL
;

57 
c_Àn
 = *
Àn
 + 
AES_BLOCK_SIZE
, 
f_Àn
 = 0;

58 *
cùhîãxt
 = 
	`mÆloc
(
c_Àn
);

61 
	`EVP_En¸y±Inô_ex
(
e
, 
NULL
, NULL, NULL, NULL);

65 
	`EVP_En¸y±Upd©e
(
e
, 
cùhîãxt
, &
c_Àn
, 
∂aöãxt
, *
Àn
);

68 
	`EVP_En¸y±FöÆ_ex
(
e
, 
cùhîãxt
+
c_Àn
, &
f_Àn
);

70 *
Àn
 = 
c_Àn
 + 
f_Àn
;

74  
cùhîãxt
;

75 
	}
}

77 *
	$qid_´s_de¸y±
(
EVP_CIPHER_CTX
 *
e
, *
cùhîãxt
, *
Àn
)

80 if(!
e
 || !
cùhîãxt
 || !
Àn
){

81 
	`QNAP_LOG_ERR_NL
("invalidÖarameter");

82  
NULL
;

86 
p_Àn
 = *
Àn
, 
f_Àn
 = 0;

87 *
∂aöãxt
 = 
	`mÆloc
(
p_Àn
 + 
AES_BLOCK_SIZE
);

89 
	`EVP_De¸y±Inô_ex
(
e
, 
NULL
, NULL, NULL, NULL);

90 
	`EVP_De¸y±Upd©e
(
e
, 
∂aöãxt
, &
p_Àn
, 
cùhîãxt
, *
Àn
);

91 
	`EVP_De¸y±FöÆ_ex
(
e
, 
∂aöãxt
+
p_Àn
, &
f_Àn
);

93 *
Àn
 = 
p_Àn
 + 
f_Àn
;

97  
∂aöãxt
;

98 
	}
}

	@libs/qid/qid_system.c

2 
	~<î∫o.h
>

4 
	~<sys/sockë.h
>

5 
	~<sys/io˘l.h
>

6 
	~<√t/if.h
>

7 
	~<√töë/ö.h
>

8 
	~<°dio.h
>

9 
	~<¨∑/öë.h
>

10 
	~<˘y≥.h
>

12 
	~"°d_hdr.h
"

13 
	~"comm_hdr.h
"

14 
	~"qid_sy°em.h
"

15 
	~"q˛oud_utû.h
"

16 
	~"q˛oud.h
"

17 
	~"q˛oud_dao.h
"

19 
	~<f˙é.h
>

22 
	sqid_c⁄fig_°


25 
	mvîsi⁄
[
VERSION_LEN
 + 1];

27 
	m≠p_tokí
[
MAX_APPKEY_LEN
 + 1];

29 
	mª‰esh_tokí
[
MAX_APPKEY_LEN
 + 1];

31 
	mauth_tokí
[
MAX_APPKEY_LEN
 + 1];

33 
	mtokí_vÆid_≥riod
[
NAME_LEN
 + 1];

35 
	mœ°_tokí_upd©e
[
NAME_LEN
 + 1];

37 
	mqid
[
MAX_QID_LEN
 + 1];

39 
	mdevi˚_id
[
DEVICE_ID_LEN
 + 1];

41 
	mdevi˚_tokí
[
MAX_APPKEY_LEN
 + 1];

43 
	mdevi˚_«me
[
NAME_LEN
 + 1];

45 
	m°©us
[
STATUS_FLAG_LEN
 + 1];

47 
	mdóÀr_ù
[
MAX_QID_HOST_LEN
 + 1];

49 
	mdóÀr_¥oxy_p‹t
[
PROTO_STR_LEN
 + 1];

51 
	mddns_°©us
[
STATUS_FLAG_LEN
 + 1];

53 
qid_c⁄fig_°
 *
	gp_qid_c⁄fig
 = 
NULL
;

57 #i‡
DEBUG


58 
	#LOAD_NVRAM_QCLOUD_CONFIG_CMD
 "/bö/ˇà/tmp/qgíõ/myq«p˛oud_id_ruÀ 2>/dev/nuŒ"

	)

59 
	#SAVE_NVRAM_QCLOUD_CONFIG_CMD
 "/bö/echÿ-¿'%s' > /tmp/qgíõ/myq«p˛oud_id_ruÀ"

	)

60 
	#LOAD_NVRAM_HWSN_CMD
 "/bö/ˇà/tmp/qgíõ/£rül_num_ruÀ 2>/dev/nuŒ"

	)

61 
	#LOAD_NVRAM_SUID_CMD
 "/bö/ˇà/tmp/qgíõ/li˚n£_key 2>/dev/nuŒ"

	)

62 
	#LOAD_LICENSE_INVALID_CMD
 "/bö/ˇà/tmp/qgíõ/li˚n£_övÆid 2>/dev/nuŒ"

	)

63 
	#LOAD_NVRAM_MAC_ADDR_CMD
 "/bö/ˇà/tmp/qgíõ/œn_hwaddr_ruÀ_deÁu… 2>/dev/nuŒ"

	)

64 
	#LOAD_NVRAM_MODEL_NAME_CMD
 "/bö/ˇà/tmp/qgíõ/modñ_«mê2>/dev/nuŒ"

	)

65 
	#LOAD_NVRAM_FW_VER_CMD
 "/bö/ˇà/tmp/qgíõ/fw_vîsi⁄ 2>/dev/nuŒ"

	)

67 
	#LOAD_NVRAM_QCLOUD_CONFIG_CMD
 "/u§/sbö/nvøm gë myq«p˛oud_id_ruÀ 2>/dev/nuŒ"

	)

68 
	#SAVE_NVRAM_QCLOUD_CONFIG_CMD
 "/u§/sbö/nvøm f£àmyq«p˛oud_id_ruÀ='%s'"

	)

69 
	#LOAD_NVRAM_HWSN_CMD
 "/u§/sbö/nvøm gë sîül_num_ruÀ 2>/dev/nuŒ"

	)

70 
	#LOAD_NVRAM_SUID_CMD
 "/u§/sbö/nvøm gëÜi˚n£_key 2>/dev/nuŒ"

	)

71 
	#LOAD_LICENSE_INVALID_CMD
 "/u§/sbö/nvøm gëÜi˚n£_övÆid 2>/dev/nuŒ"

	)

72 
	#LOAD_NVRAM_MAC_ADDR_CMD
 "/u§/sbö/nvøm gëÜ™_hwaddr_ruÀ_deÁu… 2>/dev/nuŒ"

	)

73 
	#LOAD_NVRAM_MODEL_NAME_CMD
 "/u§/sbö/nvøm gë modñ_«mê2>/dev/nuŒ"

	)

74 
	#LOAD_NVRAM_FW_VER_CMD
 "/u§/sbö/nvøm gë fw_vîsi⁄ 2>/dev/nuŒ"

	)

76 
	$lﬂd_nvøm_q˛oud_c⁄fig
(
f‹˚_ªlﬂd
)

78 
ªt
 = 
NO_ERROR
;

80 
d©a_buf
[
TMP_BUFF_LEN
+1];

83 if–
p_qid_c⁄fig
 )

85 if–
f‹˚_ªlﬂd
 ) {

86 
	`‰ì
(
p_qid_c⁄fig
);

87 
p_qid_c⁄fig
 = 
NULL
;

89  
NO_ERROR
;

93 if–
p_qid_c⁄fig
 =
NULL
 )

95 
p_qid_c⁄fig
 = 
	`ˇŒoc
(1, (
qid_c⁄fig_°
));

96 if–
p_qid_c⁄fig
 =
NULL
 )  
ERR_NULL_POINTER
;

100 
	`mem£t
(
d©a_buf
, 0, (data_buf));

101 
ªt
 = 
	`utû_sy°em_cmd
(
LOAD_NVRAM_QCLOUD_CONFIG_CMD
, 
d©a_buf
, 
TMP_BUFF_LEN
);

102 if(
NO_ERROR
 !
ªt
){

103  
ªt
;

109 * 
tokí
 = 
	`°πok
(
d©a_buf
, "^");

110 if(
tokí
Ë
	`°∫˝y
(
p_qid_c⁄fig
->
vîsi⁄
,Åokí, 
VERSION_LEN
);

113 
tokí
 = 
	`°πok
(
NULL
, "^");

114 if(
tokí
Ë
	`°∫˝y
(
p_qid_c⁄fig
->
≠p_tokí
,Åokí, 
MAX_APPKEY_LEN
);

117 
tokí
 = 
	`°πok
(
NULL
, "^");

118 if(
tokí
Ë
	`°∫˝y
(
p_qid_c⁄fig
->
ª‰esh_tokí
,Åokí, 
MAX_APPKEY_LEN
);

121 
tokí
 = 
	`°πok
(
NULL
, "^");

122 if(
tokí
Ë
	`°∫˝y
(
p_qid_c⁄fig
->
auth_tokí
,Åokí, 
MAX_APPKEY_LEN
);

125 
tokí
 = 
	`°πok
(
NULL
, "^");

126 if(
tokí
Ë
	`°∫˝y
(
p_qid_c⁄fig
->
tokí_vÆid_≥riod
,Åokí, 
NAME_LEN
);

129 
tokí
 = 
	`°πok
(
NULL
, "^");

130 if(
tokí
Ë
	`°∫˝y
(
p_qid_c⁄fig
->
œ°_tokí_upd©e
,Åokí, 
NAME_LEN
);

133 
tokí
 = 
	`°πok
(
NULL
, "^");

134 if(
tokí
Ë
	`°∫˝y
(
p_qid_c⁄fig
->
qid
,Åokí, 
MAX_QID_LEN
);

137 
tokí
 = 
	`°πok
(
NULL
, "^");

138 if(
tokí
Ë
	`°∫˝y
(
p_qid_c⁄fig
->
devi˚_id
,Åokí, 
DEVICE_ID_LEN
);

141 
tokí
 = 
	`°πok
(
NULL
, "^");

142 if(
tokí
Ë
	`°∫˝y
(
p_qid_c⁄fig
->
devi˚_tokí
,Åokí, 
MAX_APPKEY_LEN
);

145 
tokí
 = 
	`°πok
(
NULL
, "^");

146 if(
tokí
Ë
	`°∫˝y
(
p_qid_c⁄fig
->
devi˚_«me
,Åokí, 
NAME_LEN
);

149 
tokí
 = 
	`°πok
(
NULL
, "^");

150 if(
tokí
Ë
	`°∫˝y
(
p_qid_c⁄fig
->
°©us
,Åokí, 
STATUS_FLAG_LEN
);

153 
tokí
 = 
	`°πok
(
NULL
, "^");

154 if(
tokí
Ë
	`°∫˝y
(
p_qid_c⁄fig
->
dóÀr_ù
,Åokí, 
NAME_LEN
);

157 
tokí
 = 
	`°πok
(
NULL
, "^");

158 if(
tokí
Ë
	`°∫˝y
(
p_qid_c⁄fig
->
dóÀr_¥oxy_p‹t
,Åokí, 
PROTO_STR_LEN
);

161 
tokí
 = 
	`°πok
(
NULL
, "^");

162 if(
tokí
Ë
	`°∫˝y
(
p_qid_c⁄fig
->
ddns_°©us
,Åokí, 
STATUS_FLAG_LEN
);

164  
NO_ERROR
;

165 
	}
}

167 
	$ßve_nvøm_q˛oud_c⁄fig
()

169 
ªt
 = 
NO_ERROR
;

171 
cmd_buf
[
MAX_SYSTEM_CMD
+1];

172 
d©a_buf
[
TMP_BUFF_LEN
+1];

175 if–
p_qid_c⁄fig
 =
NULL
 )

176  
ERR_NULL_POINTER
;

179 
	`¢¥ötf
(
d©a_buf
, 
TMP_BUFF_LEN
, "%s^%s^%s^%s^%s^%s^%s^%s^%s^%s^%s^%s^%s^%s",

180 
p_qid_c⁄fig
->
vîsi⁄
,

181 
p_qid_c⁄fig
->
≠p_tokí
,

182 
p_qid_c⁄fig
->
ª‰esh_tokí
,

183 
p_qid_c⁄fig
->
auth_tokí
,

184 
p_qid_c⁄fig
->
tokí_vÆid_≥riod
,

185 
p_qid_c⁄fig
->
œ°_tokí_upd©e
,

186 
p_qid_c⁄fig
->
qid
,

187 
p_qid_c⁄fig
->
devi˚_id
,

188 
p_qid_c⁄fig
->
devi˚_tokí
,

189 
p_qid_c⁄fig
->
devi˚_«me
,

190 
p_qid_c⁄fig
->
°©us
,

191 
p_qid_c⁄fig
->
dóÀr_ù
,

192 
p_qid_c⁄fig
->
dóÀr_¥oxy_p‹t
,

193 
p_qid_c⁄fig
->
ddns_°©us
);

196 
	`¢¥ötf
(
cmd_buf
, 
MAX_SYSTEM_CMD
, 
SAVE_NVRAM_QCLOUD_CONFIG_CMD
, 
d©a_buf
);

199 
ªt
 = 
	`sy°em
(
cmd_buf
);

202  
ªt
;

203 
	}
}

205 
	$qid_sys_nvøm_commô
()

207 
ªt
 = 
NO_ERROR
;

209 #i‡
DEBUG


213 
ªt
 = 
	`sy°em
("/usr/sbin/nvram commit");

216  
ªt
;

217 
	}
}

224 
	#SYS_DEVICE_NAME_ITEM
 "DEVICE NAME"

	)

225 
	#SYS_DEVICE_ID_ITEM
 "DEVICE ID"

	)

226 
	#SYS_APP_TOKEN_ITEM
 "APP_TOKEN"

	)

227 
	#SYS_DDNS_UPDATE
 "DDNS_UPDATE"

	)

229 *
	gSYS_QID_CONF_PATH
 = 
QID_CONF_PATH
;

230 *
	gSYS_QID_SECTION
 = 
QID_CONF_SECTION
;

232 
	$£t_v¨übÀ_ß„ty
(*
vÆue
, c⁄° *
£t_fmt
, c⁄° *
gë_fmt
)

234 
cmd_buf
[
MAX_SYSTEM_CMD
+1];

235 
d©a_buf
[
TMP_BUFF_LEN
+1];

237 if(!
vÆue
 || !
£t_fmt
 || !
gë_fmt
){

238  
ERR_NULL_POINTER
;

241 
	`¢¥ötf
(
cmd_buf
, 
MAX_SYSTEM_CMD
, 
£t_fmt
, 
vÆue
);

243 if(
NO_ERROR
 !
	`utû_sy°em_cmd
(
cmd_buf
, 
d©a_buf
, 
TMP_BUFF_LEN
)){

247  
NO_ERROR
;

248 
	}
}

254 *
	$gë_ù_°r
(c⁄° 
sockaddr
 *
ß
, *
s
, 
size_t
 
maxÀn
)

256 
ß
->
ß_Ámûy
) {

257 
AF_INET
:

258 
	`öë_¡›
(
AF_INET
, &(((
sockaddr_ö
 *)
ß
)->
sö_addr
), 
s
, 
maxÀn
);

261 
AF_INET6
:

262 
	`öë_¡›
(
AF_INET6
, &(((
sockaddr_ö6
 *)
ß
)->
sö6_addr
), 
s
, 
maxÀn
);

266 
	`°∫˝y
(
s
, "Unknow¿AF", 
maxÀn
);

267  
NULL
;

270  
s
;

271 
	}
}

273 
	$check_îr‹_°rög
(*
pchSrc
, 
dÀn
)

275 i‡(
dÀn
<=0 || 
pchSrc
==
NULL
)

278 
ödex
 = 0;

279 
ödex
 < 
dÀn
)

281 i‡(
	`i•röt
(*(
pchSrc
+
ödex
)))

283 
ödex
 ++;

288 
	`mem£t
(
pchSrc
, 0x0, 
dÀn
);

290  ++
ödex
;

294 
	}
}

296 
	$qid_sys_gë_js⁄_d©e
(* 
d©e_°r
)

298 
ªt
 = 
NO_ERROR
;

299 
cmd_buff
[
MAX_SYSTEM_CMD
+1];

300 
ª•
[
MAX_SYSTEM_CMD
+1];

301 
	`¢¥ötf
(
cmd_buff
, 
MAX_SYSTEM_CMD
, 
GET_ISO_DATE
);

302 
ªt
 = 
	`utû_sy°em_cmd
(
cmd_buff
, 
ª•
, 
MAX_SYSTEM_CMD
);

303 if–
ªt
 =
NO_ERROR
)

305 
	`¢¥ötf
(
d©e_°r
, 
PAIR_VALUE_LEN
, "%s", 
ª•
);

307  
ªt
;

308 
	}
}

310 *
	$skù_whôe_•a˚
(*
°r
)

312 *
p
 = 
°r
;

313 *
p
 == ' ' || *p == '\t')Ö++;

314  
p
;

315 
	}
}

317 * 
	$fgës_f‹_buf„r
(* 
out_buf
, 
size_t
 
out_buf_Àn
, * 
ö_buf
 )

319 * 
pos
 = 
NULL
;

320 
size_t
 
ö_buf_Àn
 = 
	`°æí
(
ö_buf
) + 1;

321 
size_t
 
£¨ch_Àn
 = 
out_buf_Àn
;

322 
size_t
 
c›y_Àn
 = 0;

323 if–
ö_buf_Àn
 < 
£¨ch_Àn
 ) search_len = in_buf_len;

325 
pos
 = (*)
	`memchr
(
ö_buf
, '\n', 
£¨ch_Àn
);

326 if–
pos
 =
NULL
 )  NULL;

328 
c›y_Àn
 = 
pos
 - 
ö_buf
;

329 
	`mem˝y
(
out_buf
, 
ö_buf
, 
c›y_Àn
);

330 
out_buf
[
c›y_Àn
] = 0;

333  (
pos
 + 1);

334 
	}
}

336 
	$qid_c⁄f_gë_íåy
(* 
qid_c⁄f_buf
,* 
£˘i⁄
, * 
key
, * 
vÆue
, 
size_t
 
vÆue_Àn
)

338 
p
[
TMP_BUFF_LEN
+1];

339 
q
[
TMP_BUFF_LEN
+1];

340 
èrgë_£˘i⁄
[
TMP_BUFF_LEN
+1];

341 
£˘i⁄_found
 = 0;

342 
˙t
 = 0;

343 * 
pch
;

344 *
dñim
 = " = ";

345 
	`•rötf
(
èrgë_£˘i⁄
,"[%s]",
£˘i⁄
);

346 
ªt
 = 
NO_ERROR
;

348 if(
qid_c⁄f_buf
 =
NULL
){

349 
	`QNAP_LOG_ERR_NL
("qid_conf_fp:NULL");

350 
ªt
 = 
ERR_NULL_POINTER
;

351 
exô
;

353 (
qid_c⁄f_buf
 = 
	`fgës_f‹_buf„r
(
p
, (
TMP_BUFF_LEN
+1)*(), qid_conf_buf))){

354 
	`mem£t
(
q
, 0, ()*(
TMP_BUFF_LEN
+1));

355 
	`•rötf
(
p
,"%s", 
	`skù_whôe_•a˚
(p));

356 
˙t
 = 0; c¡ <
	`°æí
(
p
); cnt++){

357 if(
p
[
˙t
] >= 32 &&Ö[cnt] <= 126){

358 
q
[
˙t
] = 
p
[cnt];

361 i‡(
q
[0] == '['){

362 
	`°r˝y
–
p
, 
q
);

364 i‡(
	`°rcmp
(
p
, 
èrgë_£˘i⁄
)==0){

365 
£˘i⁄_found
=1;

367 
£˘i⁄_found
=0;

369 }i‡(
£˘i⁄_found
) {

370 i‡(
q
[0] == '[' || q[0] == '#'){

373 
pch
 = 
	`°πok
(
q
,
dñim
);

374 if–
pch
 !
NULL
){

375 if–
	`°rcmp
–
pch
, 
key
) == 0){

376 
pch
 = 
	`°πok
(
NULL
,
dñim
);

377 if(
pch
 !
NULL
Ë
	`°r˝y
–
vÆue
,Öch );

383 
exô
:

385  
ªt
;

386 
	}
}

388 
	$qid_sys_gë_ù_¥oc_√t_rouã
(
ö_addr_t
 * 
addr
)

390 
d
, 
g
;

391 
buf
[256];

392 
löe
 = 0;

393 
FILE
 * 
f
;

394 * 
p
;

395 
f
 = 
	`f›í
("/proc/net/route", "r");

396 if(!
f
)

397  
ERR_NULL_POINTER
;

398 
	`fgës
(
buf
, (buf), 
f
)) {

399 if(
löe
 > 0) {

400 
p
 = 
buf
;

401 *
p
 && !
	`is•a˚
(*p))

402 
p
++;

403 *
p
 && 
	`is•a˚
(*p))

404 
p
++;

405 if(
	`ssˇnf
(
p
, "%lx%lx", &
d
, &
g
)==2) {

406 if(
d
 == 0) {

407 *
addr
 = 
g
;

408 
	`f˛o£
(
f
);

409  
NO_ERROR
;

413 
löe
++;

416 if(
f
)

417 
	`f˛o£
(
f
);

418  
ERR_NULL_POINTER
;

419 
	}
}

421 
	$qid_sys_gë_g©eway_ù
(* 
œn_gw_ù
, * 
œn_gw_öãrÁ˚
)

424 
cmd_buff
[
MAX_SYSTEM_CMD
+1];

425 
i
;

426 
ªt
 = 
NO_ERROR
;

427 
UG_if
[
IFNAMSIZ
+1];

431 
	`¢¥ötf
(
cmd_buff
, 
MAX_SYSTEM_CMD
, 
GET_GATEWAY_IF
);

432 
i
 = 0;

433 
UG_if
[0] = '\0';

434 ; 
i
 < 3 && 0 =
	`°æí
(
UG_if
); i ++){

435 
ªt
 = 
	`utû_sy°em_cmd
(
cmd_buff
, 
UG_if
, 
IFNAMSIZ
);

436 
	`¶ìp
(1);

439 
ö_addr
 
addr
;

440 
	`mem£t
–&
addr
, 0 ,(
ö_addr
));

441 
	`qid_sys_gë_ù_¥oc_√t_rouã
–&(
addr
.
s_addr
));

442 * 
gw_ù
 = 
	`öë_¡ﬂ
–
addr
 );

444 if–
ªt
 =
NO_ERROR
)

446 
	`•rötf
(
œn_gw_ù
, "%s", 
gw_ù
);

447 
	`•rötf
(
œn_gw_öãrÁ˚
, "%s", 
UG_if
);

450  
ªt
;

451 
	}
}

453 
	$qid_sys_gë_loˇl_ù_li°
(
œn_ù_öfo_°
 *
œn_öfo
)

455 
ªt
 = 
NO_ERROR
;

458 
i
 = 0;

461 
num_nics
 = 0;

464 
ù_addr_buf
[
TMP_BUFF_LEN
+1];

465 
cmd_buff
[
MAX_SYSTEM_CMD
+1];

466 
öãrÁ˚_buf
[
TMP_BUFF_LEN
+1];

467 
buf
[
TMP_BUFF_LEN
] = {0};

470 
ifc⁄f
 
ifc
;

471 
i‰eq
 *
i‰
;

472 
sck
;

475 if(!
œn_öfo
){

476 
	`QNAP_LOG_ERR_NL
("invalidÖarameter");

477  
ERR_INVALID_VALUE
;

481 
	`mem£t
(
œn_öfo
, 0x0, (
œn_ù_öfo_°
));

484 #i‡
DEBUG


485 
	`°r˝y
(
öãrÁ˚_buf
, "eth0");

487 
ªt
 = 
	`utû_sy°em_cmd
("/u§/sbö/nvøm gë w™0_i‚ame", 
öãrÁ˚_buf
, 
TMP_BUFF_LEN
);

488 if–
ªt
 !
NO_ERROR
 ) Ñet;

492 
sck
 = 
	`sockë
(
AF_INET
, 
SOCK_DGRAM
, 0);

493 if(
sck
 < 0){

494 
	`QNAP_LOG_ERR_NL
("sockëÉº‹: %d", 
î∫o
);

498 
ifc
.
ifc_Àn
 = (
buf
);

499 
ifc
.
ifc_buf
 = 
buf
;

500 if(
	`io˘l
(
sck
, 
SIOCGIFCONF
, &
ifc
) < 0){

501 
	`QNAP_LOG_ERR_NL
("io˘l(SIOCGIFCONF): %d", 
î∫o
);

505 
i‰
 = 
ifc
.
ifc_ªq
;

506 
num_nics
 = 
ifc
.
ifc_Àn
 / (
i‰eq
);

507 
i
 = 0; i < 
num_nics
; i++){

510 
i‰eq
 *
ôem
 = &
i‰
[
i
];

511 
sockaddr
 *
addr
 = &(
ôem
->
i‰_addr
);

514 *
ù
 = 
	`gë_ù_°r
(
addr
, 
ù_addr_buf
, 
INET6_ADDRSTRLEN
);

517 if(
	`°rcmp
(
ôem
->
i‰_«me
, 
öãrÁ˚_buf
) == 0){

518 if–
addr
->
ß_Ámûy
 =
AF_INET
){

519 
	`°∫˝y
(
œn_öfo
->
œn_ù
[0], 
ù
, 
INET6_ADDRSTRLEN
);

520 
	`¢¥ötf
(
œn_öfo
->
œn_ù_vîsi⁄
[0], 
IP_VERSION_LEN
,
IP_VERSION4
);

521 
	`¢¥ötf
(
œn_öfo
->
öãrÁ˚
[0], 
IP_VERSION_LEN
,"%s",
ôem
->
i‰_«me
);

522 }if(
addr
->
ß_Ámûy
 =
AF_INET6
){

523 
	`°∫˝y
(
œn_öfo
->
œn_ù
[0], 
ù
, 
INET6_ADDRSTRLEN
);

524 
	`¢¥ötf
(
œn_öfo
->
œn_ù_vîsi⁄
[0], 
IP_VERSION_LEN
,
IP_VERSION6
);

525 
	`¢¥ötf
(
œn_öfo
->
öãrÁ˚
[0], 
IP_VERSION_LEN
,"%s",
ôem
->
i‰_«me
);

532 
	`°∫˝y
(
œn_öfo
->
œn_ù_li°
, 
ù
, 
LAN_IP_LIST_LEN
);

533 
œn_öfo
->
œn_ù_li°
[
LAN_IP_LIST_LEN
] = '\0';

534 
	`°∫˝y
(
œn_öfo
->
œn_gw
, 
ù
, 
IP_STR_LEN
);

535 
œn_öfo
->
œn_gw
[
IP_STR_LEN
] = '\0';

538 
œn_öfo
->
œn_ù_cou¡
++;

544 if(
sck
 > 0){

545 
	`˛o£
(
sck
);

548  
ªt
;

549 
	}
}

551 
	$qid_sys_gë_hw_£rül_numbî
(*
£rül_num
, 
size_t
 
buff_Àn
)

554  
	`utû_sy°em_cmd
(
LOAD_NVRAM_HWSN_CMD
, 
£rül_num
, 
buff_Àn
);

556  
	`utû_sy°em_cmd
(
GET_HW_SERIAL_NUM
, 
£rül_num
, 
buff_Àn
);

558 
	}
}

560 
	$qid_sys_gë_suid
(*
suid
, 
size_t
 
buff_Àn
)

562 
ªt
 = 
NO_ERROR
;

564 
ªt
 = 
	`utû_sy°em_cmd
(
LOAD_NVRAM_SUID_CMD
, 
suid
, 
buff_Àn
);

565 if–
	`°æí
(
suid
Ë=0 ) 
	`•rötf
(suid, "N/A");

571 
cmd_buff
[
MAX_SYSTEM_CMD
+1];

572 
d©a_buff
[
TMP_BUFF_LEN
+1];

573 
	`mem£t
(
d©a_buff
, 0, ()*
TMP_BUFF_LEN
);

574 
	`¢¥ötf
(
cmd_buff
,
MAX_SYSTEM_CMD
, 
CAT
, 
TMP_SUID_PATH
);

575 
	`utû_sy°em_cmd
(
cmd_buff
, 
d©a_buff
, 
TMP_BUFF_LEN
);

576 
	`QNAP_LOG_ERR_NL
("cmd_buff:%†d©a_buff:%s", 
cmd_buff
,
d©a_buff
);

577 if(
	`°æí
(
d©a_buff
) == 0){

578 
	`utû_sy°em_cmd
(
GET_SUID
, 
suid
, 
buff_Àn
);

579 
	`¢¥ötf
(
cmd_buff
,
MAX_SYSTEM_CMD
, 
ECHO_TO_TMP
, 
GET_SUID
, 
TMP_SUID_PATH
);

580 
	`utû_sy°em_cmd
(
cmd_buff
, 
d©a_buff
, 
TMP_BUFF_LEN
);

582 
	`°∫˝y
(
suid
, 
d©a_buff
,
buff_Àn
 );

585  
ªt
;

586 
	}
}

588 
	$qid_sys_gë_li˚n£_övÆid
(* 
li˚n£_övÆid
, 
size_t
 
buff_Àn
)

590 
ªt
 = 
NO_ERROR
;

592 
ªt
 = 
	`utû_sy°em_cmd
(
LOAD_LICENSE_INVALID_CMD
, 
li˚n£_övÆid
, 
buff_Àn
);

594  
ªt
;

595 
	}
}

597 
	$qid_sys_gë_q˛oud_≠i_¥Ÿo
(*
¥Ÿo
, 
size_t
 
buff_Àn
)

601 
	`°∫˝y
(
¥Ÿo
, "hâps", 
buff_Àn
);

602  
NO_ERROR
;

604  
	`utû_sy°em_cmd
(
GET_QID_PROTO
, 
¥Ÿo
, 
buff_Àn
);

606 
	}
}

608 
	$qid_sys_gë_mac
(*
mac_°r
, 
size_t
 
buff_Àn
)

610 
i
;

612 
	`utû_sy°em_cmd
(
LOAD_NVRAM_MAC_ADDR_CMD
, 
mac_°r
, 
buff_Àn
);

614 
	`utû_sy°em_cmd
(
GET_MAC_HAL
, 
mac_°r
, 
buff_Àn
);

617 
i
 = 0; i < 
buff_Àn
 && 
mac_°r
[i] != '\0'; i++){

618 if(
	`ißÕha
(
mac_°r
[
i
])){

619 
mac_°r
[
i
] = 
	`tﬁowî
(mac_str[i]);

624 
	}
}

627 
	$qid_sys_gë_«ssid
–*
«ssid
, 
size_t
 
buff_Àn
)

629 
ªt
 = 0;

632 
ªt
 = 
	`qid_sys_gë_hw_£rül_numbî
(
«ssid
, 
buff_Àn
);

633 if(
ªt
 !
NO_ERROR
){

634  
ªt
;

637 
ªt
 = 
	`°æí
(
«ssid
);

638 if(
ªt
 < 6){

640 
ªt
 = 0;

642 
«ssid
[
ªt
] = '-';

643 
ªt
 ++;

647 
ªt
 = 
	`qid_sys_gë_mac
(
«ssid
+ªt, 
buff_Àn
-ret);

649  
ªt
;

650 
	}
}

658 
	$qid_sys_£nd_evít_log
(
evít_ty≥
, *
evít_msg
)

661 if(!
evít_msg
){

662  
ERR_NULL_POINTER
;

665 
msg
[
TMP_BUFF_LEN
+1];

666  
	`utû_sy°em_cmd
(
evít_msg
, 
msg
, 
TMP_BUFF_LEN
);

668 
	}
}

670 
	#TOUCH_QID_FILE
 "/bö/touch /ëc/c⁄fig/qid.c⁄f"

	)

671 
	#TOUCH_QNQPDDNS_FILE
 "/bö/touch /ëc/c⁄fig/q«pddns.c⁄f"

	)

672 
	$qid_sys_¸óã_qid_c⁄f
()

676  
NO_ERROR
;

678 
msg
[
TMP_BUFF_LEN
+1];

679 
	`utû_sy°em_cmd
(
TOUCH_QID_FILE
, 
msg
, 
TMP_BUFF_LEN
);

680  
	`utû_sy°em_cmd
(
TOUCH_QNQPDDNS_FILE
, 
msg
, 
TMP_BUFF_LEN
);

682 
	}
}

684 
	$qid_sys_£t_qid
(*
qid
)

687 
ªt
 = 
NO_ERROR
;

690 
ªt
 = 
	`lﬂd_nvøm_q˛oud_c⁄fig
(0);

691 if–
ªt
 !
NO_ERROR
 ) Ñet;

694 
	`°∫˝y
(
p_qid_c⁄fig
->
qid
, qid, 
MAX_QID_LEN
);

697  
	`ßve_nvøm_q˛oud_c⁄fig
();

699 
cmd
[
MAX_SYSTEM_CMD
+1];

700 
d©a
[
MAX_SYSTEM_CMD
+1];

702 if(!
qid
){

703  
ERR_NULL_POINTER
;

706 
	`¢¥ötf
(
cmd
, 
MAX_SYSTEM_CMD
, 
SET_QID_ID
, 
qid
);

707  
	`utû_sy°em_cmd
(
cmd
, 
d©a
, 
MAX_SYSTEM_CMD
);

709 
	}
}

711 
	$qid_sys_£t_auth_tokí
(*
qid_auth_tokí
)

714 
ªt
 = 
NO_ERROR
;

717 
ªt
 = 
	`lﬂd_nvøm_q˛oud_c⁄fig
(0);

718 if–
ªt
 !
NO_ERROR
 ) Ñet;

721 
	`°∫˝y
(
p_qid_c⁄fig
->
auth_tokí
, 
qid_auth_tokí
, 
MAX_APPKEY_LEN
);

724  
	`ßve_nvøm_q˛oud_c⁄fig
();

726 
cmd
[
MAX_SYSTEM_CMD
+1];

727 
d©a
[
MAX_SYSTEM_CMD
+1];

729 if(!
qid_auth_tokí
){

730  
ERR_NULL_POINTER
;

733 
	`¢¥ötf
(
cmd
, 
MAX_SYSTEM_CMD
, 
SET_QID_AUTH_TOKEN
, 
qid_auth_tokí
);

734  
	`utû_sy°em_cmd
(
cmd
, 
d©a
, 
MAX_SYSTEM_CMD
);

736 
	}
}

738 
	$qid_sys_gë_auth_tokí
(*
tokí
, 
size_t
 
buff_Àn
)

741 
ªt
 = 
NO_ERROR
;

744 
ªt
 = 
	`lﬂd_nvøm_q˛oud_c⁄fig
(0);

745 if–
ªt
 !
NO_ERROR
 ) Ñet;

748 
	`°∫˝y
(
tokí
, 
p_qid_c⁄fig
->
auth_tokí
, 
buff_Àn
);

750  
ªt
;

752  
	`utû_sy°em_cmd
(
GET_QID_AUTH_TOKEN
, 
tokí
, 
buff_Àn
);

754 
	}
}

756 
	$qid_sys_gë_ª‰esh_tokí
(*
ª‰esh_tokí
, 
size_t
 
buff_Àn
)

759 
ªt
 = 
NO_ERROR
;

762 
ªt
 = 
	`lﬂd_nvøm_q˛oud_c⁄fig
(0);

763 if–
ªt
 !
NO_ERROR
 ) Ñet;

766 
	`°∫˝y
(
ª‰esh_tokí
, 
p_qid_c⁄fig
->ª‰esh_tokí, 
buff_Àn
);

768  
ªt
;

770  
	`utû_sy°em_cmd
(
GET_QID_REFRESH_TOKEN
, 
ª‰esh_tokí
, 
buff_Àn
);

772 
	}
}

774 
	$qid_sys_£t_ª‰esh_tokí
(*
ª‰esh_tokí
)

777 
ªt
 = 
NO_ERROR
;

780 
ªt
 = 
	`lﬂd_nvøm_q˛oud_c⁄fig
(0);

781 if–
ªt
 !
NO_ERROR
 ) Ñet;

784 
	`°∫˝y
(
p_qid_c⁄fig
->
ª‰esh_tokí
,Ñe‰esh_tokí, 
MAX_APPKEY_LEN
);

787  
	`ßve_nvøm_q˛oud_c⁄fig
();

789 
cmd
[
MAX_SYSTEM_CMD
+1];

790 
d©a
[
MAX_SYSTEM_CMD
+1];

792 if(!
ª‰esh_tokí
){

793  
ERR_NULL_POINTER
;

796 
	`¢¥ötf
(
cmd
, 
MAX_SYSTEM_CMD
, 
SET_QID_REFRESH_TOKEN
, 
ª‰esh_tokí
);

797  
	`utû_sy°em_cmd
(
cmd
, 
d©a
, 
MAX_SYSTEM_CMD
);

799 
	}
}

801 
	$qid_sys_gë_œ°_upd©e_tokí_time
(*
©
, 
size_t
 
buff_Àn
)

804 
ªt
 = 
NO_ERROR
;

807 
ªt
 = 
	`lﬂd_nvøm_q˛oud_c⁄fig
(0);

808 if–
ªt
 !
NO_ERROR
 ) Ñet;

811 
	`°∫˝y
(
©
, 
p_qid_c⁄fig
->
œ°_tokí_upd©e
, 
buff_Àn
);

813  
ªt
;

815  
	`utû_sy°em_cmd
(
GET_TOKEN_UPDATE_TIME
, 
©
, 
buff_Àn
);

817 
	}
}

819 
	$qid_sys_£t_œ°_upd©e_tokí_time
(*
©
)

822 
ªt
 = 
NO_ERROR
;

825 
ªt
 = 
	`lﬂd_nvøm_q˛oud_c⁄fig
(0);

826 if–
ªt
 !
NO_ERROR
 ) Ñet;

829 
	`°∫˝y
(
p_qid_c⁄fig
->
œ°_tokí_upd©e
, 
©
, 
MAX_APPKEY_LEN
);

832  
	`ßve_nvøm_q˛oud_c⁄fig
();

834 
cmd
[
MAX_SYSTEM_CMD
+1];

835 
d©a
[
MAX_SYSTEM_CMD
+1];

837 if(!
©
){

838  
ERR_NULL_POINTER
;

841 
	`¢¥ötf
(
cmd
, 
MAX_SYSTEM_CMD
, 
SET_TOKEN_UPDATE_TIME
,
©
);

842  
	`utû_sy°em_cmd
(
cmd
, 
d©a
, 
MAX_SYSTEM_CMD
);

844 
	}
}

846 
	$qid_sys_gë_tokí_vÆid_≥riod
(*
vÆid_≥riod
, 
size_t
 
buff_Àn
)

848  
	`utû_sy°em_cmd
(
GET_QID_VALID_PERIOD
, 
vÆid_≥riod
, 
buff_Àn
);

849 
	}
}

851 
	$qid_sys_£t_tokí_vÆid_≥riod
(*
vÆid_≥riod
)

854 
ªt
 = 
NO_ERROR
;

857 
ªt
 = 
	`lﬂd_nvøm_q˛oud_c⁄fig
(0);

858 if–
ªt
 !
NO_ERROR
 ) Ñet;

861 
	`°∫˝y
(
p_qid_c⁄fig
->
tokí_vÆid_≥riod
, 
vÆid_≥riod
, 
NAME_LEN
);

864  
	`ßve_nvøm_q˛oud_c⁄fig
();

866 
cmd
[
MAX_SYSTEM_CMD
+1];

867 
d©a
[
MAX_SYSTEM_CMD
+1];

869 if(!
vÆid_≥riod
){

870  
ERR_NULL_POINTER
;

873 
	`¢¥ötf
(
cmd
, 
MAX_SYSTEM_CMD
, 
SET_QID_VALID_PERIOD
, 
vÆid_≥riod
);

874  
	`utû_sy°em_cmd
(
cmd
, 
d©a
, 
MAX_SYSTEM_CMD
);

876 
	}
}

878 
	$qid_sys_gë_qid
(*
qid
, 
size_t
 
buff_Àn
)

881 
ªt
 = 
NO_ERROR
;

884 
ªt
 = 
	`lﬂd_nvøm_q˛oud_c⁄fig
(0);

885 if–
ªt
 !
NO_ERROR
 ) Ñet;

888 
	`°∫˝y
(
qid
, 
p_qid_c⁄fig
->qid, 
buff_Àn
);

890  
ªt
;

892  
	`utû_sy°em_cmd
(
GET_QID_ID
, 
qid
, 
buff_Àn
);

894 
	}
}

896 
	$qid_sys_gë_modñ
(*
modñ
, 
size_t
 
buff_Àn
)

898 
ªt
 = 
NO_ERROR
;

901 
	`°∫˝y
(
modñ
, "QGíõ", 
buff_Àn
);

903 
ªt
 = 
	`utû_sy°em_cmd
(
GET_MODEL_CMD
, 
modñ
, 
buff_Àn
);

906 i‡(
modñ
 && model[0] == '\0'){

907 
	`°∫˝y
(
modñ
, "Unknow¿Modñ", 
buff_Àn
);

909  
ªt
;

910 
	}
}

912 
	$qid_sys_gë_fw_vî
(*
fw_vî
, 
size_t
 
buff_Àn
)

915  
	`utû_sy°em_cmd
(
LOAD_NVRAM_FW_VER_CMD
, 
fw_vî
, 
buff_Àn
);

917  
	`utû_sy°em_cmd
(
GET_FW_VER_CMD
, 
fw_vî
, 
buff_Àn
);

919 
	}
}

921 
	$qid_sys_gë_time_z⁄e
(*
tz
, 
size_t
 
buff_Àn
)

923  
	`utû_sy°em_cmd
(
GET_TIME_ZONE
, 
tz
, 
buff_Àn
);

924 
	}
}

926 
	$qid_sys_gë_£rvî_ho°
(*
ho°
, 
size_t
 
buff_Àn
)

928  
	`q˛oud_utû_gë_ho°
(
QCLOUD_SERVC_API_QCLOUD_STR
, 
ho°
);

929 
	}
}

931 
	$qid_sys_gë_m˙_£rvî_ho°
(*
ho°
, 
size_t
 
buff_Àn
)

933  
	`q˛oud_utû_gë_ho°
(
QCLOUD_SERVC_API_QCLOUD_STR
, 
ho°
);

934 
	}
}

936 
	$qid_sys_gë_ushî_£rvî_ho°
(*
ho°
, 
size_t
 
buff_Àn
)

938  
	`q˛oud_utû_gë_ho°
(
QCLOUD_SERVC_API_USHER_STR
, 
ho°
);

939 
	}
}

941 
	$qid_sys_gë_dóÀr_ù
(*
ù
, 
size_t
 
buff_Àn
)

944 
ªt
 = 
NO_ERROR
;

947 
ªt
 = 
	`lﬂd_nvøm_q˛oud_c⁄fig
(0);

948 if–
ªt
 !
NO_ERROR
 ) Ñet;

951 
	`°∫˝y
(
ù
, 
p_qid_c⁄fig
->
dóÀr_ù
, 
buff_Àn
);

953  
ªt
;

955  
	`utû_sy°em_cmd
(
GET_DEALER_IP
, 
ù
, 
buff_Àn
);

957 
	}
}

959 
	$qid_sys_£t_dóÀr_ù
(*
ù
)

961  
	`£t_v¨übÀ_ß„ty
(
ù
, 
SET_DEALER_IP
, 
GET_DEALER_IP
);

962 
	}
}

964 
	$qid_sys_gë_dóÀr_¥oxy_p‹t
(*
p‹t
, 
size_t
 
buff_Àn
)

967 
ªt
 = 
NO_ERROR
;

970 
ªt
 = 
	`lﬂd_nvøm_q˛oud_c⁄fig
(0);

971 if–
ªt
 !
NO_ERROR
 ) Ñet;

974 
	`°∫˝y
(
p‹t
, 
p_qid_c⁄fig
->
dóÀr_¥oxy_p‹t
, 
buff_Àn
);

976  
ªt
;

978  
	`utû_sy°em_cmd
(
GET_DEALER_PROXY_PORT
, 
p‹t
, 
buff_Àn
);

980 
	}
}

982 
	$qid_sys_£t_dóÀr_¥oxy_p‹t
(
uöt16_t
 
p‹t
)

984 
p‹t_°r
[
PORT_STR_LEN
+1];

985 
	`•rötf
(
p‹t_°r
, "%d", 
p‹t
);

986  
	`£t_v¨übÀ_ß„ty
(
p‹t_°r
, 
SET_DEALER_PROXY_PORT
, 
GET_DEALER_PROXY_PORT
);

987 
	}
}

989 
	$qid_sys_£t_devi˚_«me
(*
«me
)

992 
ªt
 = 
NO_ERROR
;

995 
ªt
 = 
	`lﬂd_nvøm_q˛oud_c⁄fig
(0);

996 if–
ªt
 !
NO_ERROR
 ) Ñet;

999 
	`°∫˝y
(
p_qid_c⁄fig
->
devi˚_«me
, 
«me
, 
NAME_LEN
);

1002  
	`ßve_nvøm_q˛oud_c⁄fig
();

1004 
qid_£rvî
[
URL_STR_LEN
+1];

1005 
	`q˛oud_utû_gë_ho°
(
QCLOUD_SERVC_API_DDNS_STR
, 
qid_£rvî
);

1009 
	`£t_v¨übÀ_ß„ty
(
qid_£rvî
, 
SET_DDNS_SERVER_HOST
, 
GET_DDNS_SERVER_HOST
);

1010 
	`£t_v¨übÀ_ß„ty
(
«me
, 
SET_DDNS_HOST_NAME
, 
GET_DDNS_HOST_NAME
);

1015  
	`£t_v¨übÀ_ß„ty
(
«me
, 
SET_DEVICE_NAME
, 
GET_DEVICE_NAME
);

1017 
	}
}

1019 
	$qid_sys_gë_devi˚_«me
 (*
«me
, 
size_t
 
buff_Àn
)

1022 
ªt
 = 
NO_ERROR
;

1025 
ªt
 = 
	`lﬂd_nvøm_q˛oud_c⁄fig
(0);

1026 if–
ªt
 !
NO_ERROR
 ) Ñet;

1029 
	`°∫˝y
(
«me
, 
p_qid_c⁄fig
->
devi˚_«me
, 
buff_Àn
);

1031  
ªt
;

1033  
	`utû_sy°em_cmd
(
GET_DEVICE_NAME
, 
«me
, 
buff_Àn
);

1035 
	}
}

1037 
	$qid_sys_gë_devi˚_ty≥
(*
ty≥
, 
size_t
 
buff_Àn
)

1040 
	`°∫˝y
(
ty≥
, "MobûeNas", 
buff_Àn
);

1042 if(
ty≥
){

1043 #ifde‡
_VIOSTOR_


1044 
	`°∫˝y
(
ty≥
, "NVR", 
buff_Àn
);

1046 
	`°∫˝y
(
ty≥
, "NAS", 
buff_Àn
);

1048  
NO_ERROR
;

1050  
ERR_INVALID_VALUE
;

1052 
	}
}

1054 
	$qid_sys_£t_qid_°©us
(*
°©us
)

1057 
ªt
 = 
NO_ERROR
;

1060 
ªt
 = 
	`lﬂd_nvøm_q˛oud_c⁄fig
(0);

1061 if–
ªt
 !
NO_ERROR
 ) Ñet;

1064 
	`°∫˝y
(
p_qid_c⁄fig
->
°©us
, sètus, 
STATUS_FLAG_LEN
);

1067  
	`ßve_nvøm_q˛oud_c⁄fig
();

1069  
	`£t_v¨übÀ_ß„ty
(
°©us
, 
SET_QID_STATUS
, 
GET_QID_STATUS
);

1071 
	}
}

1073 
	$qid_sys_gë_qid_°©us
(*
°©us
, 
size_t
 
buff_Àn
)

1076 
ªt
 = 
NO_ERROR
;

1079 
ªt
 = 
	`lﬂd_nvøm_q˛oud_c⁄fig
(0);

1080 if–
ªt
 !
NO_ERROR
 ) Ñet;

1083 
	`°∫˝y
(
°©us
, 
p_qid_c⁄fig
->°©us, 
buff_Àn
);

1085  
ªt
;

1087  
	`utû_sy°em_cmd
(
GET_QID_STATUS
, 
°©us
, 
buff_Àn
);

1089 
	}
}

1091 
	$qid_sys_£t_devi˚_tokí
(*
devi˚_tokí
)

1094 
ªt
 = 
NO_ERROR
;

1097 
ªt
 = 
	`lﬂd_nvøm_q˛oud_c⁄fig
(0);

1098 if–
ªt
 !
NO_ERROR
 ) Ñet;

1101 
	`°∫˝y
(
p_qid_c⁄fig
->
devi˚_tokí
, devi˚_tokí, 
MAX_APPKEY_LEN
);

1104  
	`ßve_nvøm_q˛oud_c⁄fig
();

1106  
	`£t_v¨übÀ_ß„ty
(
devi˚_tokí
, 
SET_DEVICE_TOKEN
,
GET_DEVICE_TOKEN
);

1108 
	}
}

1110 
	$qid_sys_gë_devi˚_tokí
(*
devi˚_tokí
, 
size_t
 
buff_Àn
)

1113 
ªt
 = 
NO_ERROR
;

1116 
ªt
 = 
	`lﬂd_nvøm_q˛oud_c⁄fig
(0);

1117 if–
ªt
 !
NO_ERROR
 ) Ñet;

1120 
	`°∫˝y
(
devi˚_tokí
, 
p_qid_c⁄fig
->devi˚_tokí, 
buff_Àn
);

1122  
ªt
;

1124  
	`utû_sy°em_cmd
(
GET_DEVICE_TOKEN
, 
devi˚_tokí
, 
buff_Àn
);

1126 
	}
}

1128 
	$qid_sys_£t_qid_devi˚_id
(*
did
)

1131 
ªt
 = 
NO_ERROR
;

1134 
ªt
 = 
	`lﬂd_nvøm_q˛oud_c⁄fig
(0);

1135 if–
ªt
 !
NO_ERROR
 ) Ñet;

1138 
	`°∫˝y
(
p_qid_c⁄fig
->
devi˚_id
, 
did
, 
NAME_LEN
);

1141  
	`ßve_nvøm_q˛oud_c⁄fig
();

1143  
	`£t_v¨übÀ_ß„ty
(
did
, 
SET_QID_DEVICE_ID
, 
GET_QID_DEVICE_ID
);

1145 
	}
}

1147 
	$qid_sys_gë_qid_devi˚_id
(*
did
, 
size_t
 
buff_Àn
)

1150 
ªt
 = 
NO_ERROR
;

1153 
ªt
 = 
	`lﬂd_nvøm_q˛oud_c⁄fig
(0);

1154 if–
ªt
 !
NO_ERROR
 ) Ñet;

1157 
	`°∫˝y
(
did
, 
p_qid_c⁄fig
->
devi˚_id
, 
buff_Àn
);

1159  
ªt
;

1161  
	`utû_sy°em_cmd
(
GET_QID_DEVICE_ID
, 
did
, 
buff_Àn
);

1163 
	}
}

1165 
	$qid_sys_gë_geo_ù_js⁄
(*
js⁄_doc
, 
size_t
 
buff_Àn
)

1167 
ªt
 = 
NO_ERROR
;

1168 * 
buf
 = 
NULL
;

1169 
size_t
 
Àn
;

1171 
ªt
 |
	`utû_sy°em_cmd
(
GET_GEO_IP_DOC
, 
js⁄_doc
, 
buff_Àn
);

1173 
ªt
 = 
	`utû_ªad_fûe_to_°rög
(
GEO_IP_JSON_DOC
, &
buf
, &
Àn
);

1174 if–
NO_ERROR
 =
ªt
 ){

1175 
	`°∫˝y
–
js⁄_doc
, 
buf
, 
buff_Àn
);

1177 if(
buf
Ë
	`‰ì
( buf );

1178 
	`QNAP_LOG_CRIT_NL
("ªt: %d", 
ªt
);

1179  
ªt
;

1180 
	}
}

1182 
	$qid_sys_£t_ddns_°©us
(*
°©us
)

1184 
ªt
 = 
NO_ERROR
;

1187 
ªt
 = 
	`lﬂd_nvøm_q˛oud_c⁄fig
(0);

1188 if–
ªt
 !
NO_ERROR
 ) Ñet;

1191 i‡(0 =
	`°∫cmp
(
°©us
, 
QID_SYS_ENABLE_STR
, 
	`°æí
(QID_SYS_ENABLE_STR))) {

1192 
	`°∫˝y
(
p_qid_c⁄fig
->
ddns_°©us
, 
QID_SYS_TRUE_STR
, 
STATUS_FLAG_LEN
);

1195 
	`°∫˝y
(
p_qid_c⁄fig
->
ddns_°©us
, 
QID_SYS_FALSE_STR
, 
STATUS_FLAG_LEN
);

1199 
ªt
 = 
	`ßve_nvøm_q˛oud_c⁄fig
();

1204 i‡(0 =
	`°∫cmp
(
°©us
, 
QID_SYS_ENABLE_STR
, 
	`°æí
(QID_SYS_ENABLE_STR))) {

1205 
	`£t_v¨übÀ_ß„ty
(
QID_SYS_TRUE_STR
, 
SET_DDNS_STATUS
, 
GET_DDNS_ENABLE
);

1206 
	`£t_v¨übÀ_ß„ty
(
QID_SYS_TRUE_STR
, 
SET_DDNS_STATUS_VAR
,

1207 
GET_DDNS_ENABLE_VAR
);

1209 
	`£t_v¨übÀ_ß„ty
(
QID_SYS_FALSE_STR
, 
SET_DDNS_STATUS
, 
GET_DDNS_ENABLE
);

1210 
	`£t_v¨übÀ_ß„ty
(
QID_SYS_FALSE_STR
, 
SET_DDNS_STATUS_VAR
,

1211 
GET_DDNS_ENABLE_VAR
);

1214 
ªt
 = 
	`£t_v¨übÀ_ß„ty
(
°©us
, 
SET_QID_DDNS_STATUS
, 
GET_QID_DDNS_STATUS
);

1218 if(
	`°∫cmp
(
QID_SYS_DISABLE_STR
, 
°©us
, 
	`°æí
(QID_SYS_DISABLE_STR)) == 0){

1219 
	`qid_sys_£t_hash_°rög
("ddns", "\0");

1223 
	`QNAP_LOG_INFO_NL
("Së ddn†to: %s", 
°©us
);

1225  
ªt
;

1226 
	}
}

1228 
	$qid_sys_gë_ddns_°©us
(*
°©us
, 
size_t
 
buff_Àn
)

1231 
ªt
 = 
NO_ERROR
;

1234 
ªt
 = 
	`lﬂd_nvøm_q˛oud_c⁄fig
(0);

1235 if–
ªt
 !
NO_ERROR
 ) Ñet;

1238 
	`°∫˝y
(
°©us
, 
p_qid_c⁄fig
->
ddns_°©us
, 
buff_Àn
);

1240  
ªt
;

1242  
	`utû_sy°em_cmd
(
GET_QID_DDNS_STATUS
, 
°©us
, 
buff_Àn
);

1244 
	}
}

1246 
	$qid_£nd_sys_evít_log
(
Àvñ
, *
¥ev_msg
, * 
msg
)

1249 if(
	`°rcmp
(
¥ev_msg
 , 
msg
) == 0){

1254 
	`°∫˝y
(
¥ev_msg
, 
msg
, 
MAX_SYSTEM_CMD
);

1257 if–
Àvñ
 =
QNAP_EVENT_TYPE_INFO
 )

1259 
	`QNAP_LOG_INFO_NL
(
msg
);

1261 if–
Àvñ
 =
QNAP_EVENT_TYPE_WARN
 )

1263 
	`QNAP_LOG_WARN_NL
(
msg
);

1267 
	`QNAP_LOG_ERR_NL
(
msg
);

1270 
cmd
[
MAX_SYSTEM_CMD
+1];

1271 
d©a
[
TMP_BUFF_LEN
+1];

1274 
	`¢¥ötf
(
cmd
, 1024*(), "/sbö/log_toﬁ -à%d -®\"%s%s\"", 
Àvñ
, 
ERROR_MYQNAPCLOUD
, 
msg
);

1277  
	`utû_sy°em_cmd
(
buff
, 
ãmp
, 
TMP_BUFF_LEN
);

1280 
	}
}

1282 
	$qid_sys_gë_c⁄f_suid
(*
suid
, 
size_t
 
buff_Àn
)

1284  
	`utû_sy°em_cmd
(
GET_CONF_SUID_NUM
, 
suid
, 
buff_Àn
);

1285 
	}
}

1287 
	$qid_sys_¸ót_fûe_if_nŸ_exi°
(* 
∑th
)

1289 
£t_cmd
[
MAX_SYSTEM_CMD
+1];

1290 
d©a
[
MAX_SYSTEM_CMD
+1];

1291 
	`¢¥ötf
(
£t_cmd
, 
MAX_SYSTEM_CMD
, 
ISFILE_EXIST
, 
∑th
);

1292 
	`utû_sy°em_cmd
(
£t_cmd
, 
d©a
, 
MAX_SYSTEM_CMD
);

1293 if–0 !
	`°∫cmp
–
d©a
, "exist", 5) ){

1294 
	`•rötf
(
£t_cmd
,"/bö/touch %s", 
∑th
);

1295 
	`utû_sy°em_cmd
(
£t_cmd
 , 
d©a
, 
MAX_SYSTEM_CMD
);

1297 
	}
}

1299 
	$qid_sys_gë_hash_°rög
(* 
ªque°_ty≥
, * 
ouçut
, 
size_t
 
buff_Àn
)

1301 
cmd
[
MAX_SYSTEM_CMD
+1];

1302 
	`¢¥ötf
(
cmd
, 
MAX_SYSTEM_CMD
, 
GET_QID_REQ_HASH
, 
HASH_PATH
, 
ªque°_ty≥
);

1303  
	`utû_sy°em_cmd
(
cmd
, 
ouçut
, 
buff_Àn
);

1304 
	}
}

1306 
	$qid_sys_£t_hash_°rög
(* 
hash_ty≥
, * 
öput
)

1308 
£t_cmd
[
MAX_SYSTEM_CMD
+1];

1309 
d©a
[
MAX_SYSTEM_CMD
+1];

1310 
	`qid_sys_¸ót_fûe_if_nŸ_exi°
(
HASH_PATH
);

1311 
	`¢¥ötf
(
£t_cmd
, 
MAX_SYSTEM_CMD
, 
SET_QID_REQ_HASH
, 
öput
, 
HASH_PATH
, 
hash_ty≥
);

1313  
	`utû_sy°em_cmd
(
£t_cmd
, 
d©a
, 
MAX_SYSTEM_CMD
);

1314 
	}
}

1316 
	$qid_sys_£t_hash_°rög_âl
(* 
hash_ty≥
, 
≥riod
)

1318 
£t_cmd
[
MAX_SYSTEM_CMD
+1];

1319 
d©a
[
MAX_SYSTEM_CMD
+1];

1320 
	`¢¥ötf
(
£t_cmd
, 
MAX_SYSTEM_CMD
, 
SET_QID_REQ_HASH_TTL
, 
≥riod
,

1321 
HASH_PATH
, 
hash_ty≥
);

1323  
	`utû_sy°em_cmd
(
£t_cmd
, 
d©a
, 
MAX_SYSTEM_CMD
);

1324 
	}
}

1326 
	$qid_sys_gë_hash_°rög_âl
(* 
ªque°_ty≥
, * 
ouçut
, 
size_t
 
buff_Àn
)

1328 
£t_cmd
[
MAX_SYSTEM_CMD
+1];

1329 
	`¢¥ötf
(
£t_cmd
, 
MAX_SYSTEM_CMD
, 
GET_QID_REQ_HASH_TTL
, 
HASH_PATH
,

1330 
ªque°_ty≥
);

1331  
	`utû_sy°em_cmd
(
£t_cmd
, 
ouçut
, 
buff_Àn
);

1332 
	}
}

1334 
	$qid_sys_gë_cuæ_log_Êag
(* 
cuæ_Êag
, 
size_t
 
buff_Àn
)

1338 
	`°∫˝y
(
cuæ_Êag
, "80682695", 
buff_Àn
);

1339  
NO_ERROR
;

1341 
£t_cmd
[
MAX_SYSTEM_CMD
+1];

1342 
	`¢¥ötf
(
£t_cmd
, 
MAX_SYSTEM_CMD
, 
GET_CURL_LOG_FLAG
);

1343  
	`utû_sy°em_cmd
(
£t_cmd
, 
cuæ_Êag
, 
buff_Àn
);

1345 
	}
}

1347 
	$qid_sys_£t_q˛oud_vî
(*
vîsi⁄
)

1350 
ªt
 = 
NO_ERROR
;

1353 
ªt
 = 
	`lﬂd_nvøm_q˛oud_c⁄fig
(0);

1354 if–
ªt
 !
NO_ERROR
 ) Ñet;

1357 
	`°∫˝y
(
p_qid_c⁄fig
->
vîsi⁄
, vîsi⁄, 
VERSION_LEN
);

1360  
	`ßve_nvøm_q˛oud_c⁄fig
();

1362 
key_∑ú_°
 
vîsi⁄_∑ú
 = {"VERSION", "\0"};

1364 if(
vîsi⁄
){

1365 
	`°∫˝y
(
vîsi⁄_∑ú
.
vÆue
, 
vîsi⁄
, 
PAIR_VALUE_LEN
);

1367  
	`dao_ö£π_°rög_vÆue
(
dao_ty≥_c⁄fig
, 
SYS_QID_CONF_PATH
, 
SYS_QID_SECTION
,

1368 &
vîsi⁄_∑ú
, 1);

1370 
	}
}

1372 
	$qid_sys_gë_q˛oud_vî
(*
vîsi⁄
, 
size_t
 
buff_Àn
)

1374 
ªt
 = 
ERR_NULL_POINTER
;

1377 if(!
vîsi⁄
){

1378  
ªt
;

1383 
ªt
 = 
	`lﬂd_nvøm_q˛oud_c⁄fig
(0);

1384 if–
ªt
 !
NO_ERROR
 ) Ñet;

1387 
	`°∫˝y
(
vîsi⁄
, 
p_qid_c⁄fig
->vîsi⁄, 
buff_Àn
);

1389  
ªt
;

1391 
key_∑ú_°
 
vîsi⁄_∑ú
 = {"VERSION", "\0"};

1392 
ªt
 = 
	`dao_£¨ch_°rög
(
dao_ty≥_c⁄fig
, 
SYS_QID_CONF_PATH
, 
SYS_QID_SECTION
, 
NULL
,

1393 &
vîsi⁄_∑ú
, 1);

1394 if(
ªt
 =
NO_ERROR
){

1395 
	`°∫˝y
(
vîsi⁄
, 
vîsi⁄_∑ú
.
vÆue
, 
buff_Àn
);

1397 
vîsi⁄
[0] = '\0';

1401  
ªt
;

1402 
	}
}

1404 
	$qid_sys_£t_∑ckage_li°_°rög
(* 
∑ckage_li°
)

1406 
ªt
 = 
ERR_NULL_POINTER
, 
˙t
 = 0;

1407 * 
tmp
 = 
∑ckage_li°
;

1408 
˙t
 = 0; 
∑ckage_li°
[cnt]; cnt++){

1409 
∑ckage_li°
[
˙t
] = 
	`tﬁowî
(package_list[cnt]);

1411 
tmp
 = 
	`utû_åim
–
∑ckage_li°
, 
FALSE
 );

1412 
	`°r˝y
–
∑ckage_li°
, 
tmp
);

1413 if–
NULL
 !
∑ckage_li°
 )

1414 
ªt
 = 
NO_ERROR
;

1416 
˙t
 = 0;

1417 
FILE
 * 
f
;

1418 
f
 = 
	`utû_›í_fûe
(
QPKG_INFO_PATH
, "w+");

1419  
˙t
 < 
	`°æí
(
∑ckage_li°
)){

1420 
˙t
 +
	`fwrôe
(
∑ckage_li°
, (), 
	`°æí
’ackage_li°), 
f
);

1422 
	`utû_˛o£_fûe
(
f
);

1423  
ªt
;

1424 
	}
}

1426 
	$qid_sys_£t_≠p_tokí
(*
vÆue
)

1429 
ªt
 = 
NO_ERROR
;

1432 
ªt
 = 
	`lﬂd_nvøm_q˛oud_c⁄fig
(0);

1433 if–
ªt
 !
NO_ERROR
 ) Ñet;

1436 
	`°∫˝y
(
p_qid_c⁄fig
->
≠p_tokí
, 
vÆue
, 
MAX_APPKEY_LEN
);

1439  
	`ßve_nvøm_q˛oud_c⁄fig
();

1441 
tmp
[
TMP_BUFF_LEN
];

1442 
buff
[
TMP_BUFF_LEN
];

1443 
key_∑ú_°
 
∑ú
 = {
SYS_APP_TOKEN_ITEM
, "\0"};

1444 if(
vÆue
){

1445 
	`°∫˝y
(
∑ú
.
vÆue
, vÆue, 
PAIR_VALUE_LEN
);

1447 
	`¢¥ötf
(
tmp
, 
TMP_BUFF_LEN
, "touch %s", 
TMP_APP_TOKEN_PATH
);

1448 
	`utû_sy°em_cmd
(
tmp
, 
buff
, 
TMP_BUFF_LEN
);

1449  
	`dao_ö£π_°rög_vÆue
(
dao_ty≥_c⁄fig
, 
TMP_APP_TOKEN_PATH
, 
SYS_QID_SECTION
,

1450 &
∑ú
, 1);

1452 
	}
}

1454 
	$qid_sys_gë_≠p_tokí
(*
vÆue
, 
size_t
 
buff_Àn
)

1456 
ªt
 = 
ERR_NULL_POINTER
;

1460 
ªt
 = 
	`lﬂd_nvøm_q˛oud_c⁄fig
(0);

1461 if–
ªt
 !
NO_ERROR
 ) Ñet;

1464 
	`°∫˝y
(
vÆue
, 
p_qid_c⁄fig
->
≠p_tokí
, 
buff_Àn
);

1467 
key_∑ú_°
 
∑ú
 = {
SYS_APP_TOKEN_ITEM
, "\0"};

1468 if(!
vÆue
){

1469  
ªt
;

1471 
ªt
 = 
	`dao_£¨ch_°rög
(
dao_ty≥_c⁄fig
, 
TMP_APP_TOKEN_PATH
, 
SYS_QID_SECTION
, 
NULL
,

1472 &
∑ú
, 1);

1473 if(
ªt
 =
NO_ERROR
){

1474 
	`°∫˝y
(
vÆue
, 
∑ú
.vÆue, 
buff_Àn
);

1476 
vÆue
[0] = '\0';

1480  
ªt
;

1481 
	}
}

1483 
	$qid_sys_ª°¨t_p‹ãr
()

1485 
ªt
 = 
	`sy°em
(
RESTART_PORTER
);

1486  
ªt
;

1487 
	}
}

	@libs/utils/MD5.c

77 
	~"MD5.h
"

103 c⁄° 
uöt8_t
 
	gK
[3][16] =

111 c⁄° 
uöt8_t
 
	gS
[4][4] =

120 c⁄° 
uöt32_t
 
	gT
[4][16] =

156 
	#md5F
–
X
, 
Y
, 
Z
 ) ( ((XË& (Y)Ë| ((~(X)Ë& (Z)Ë)

	)

157 
	#md5G
–
X
, 
Y
, 
Z
 ) ( ((XË& (Z)Ë| ((YË& (~(Z))Ë)

	)

158 
	#md5H
–
X
, 
Y
, 
Z
 ) ( (XË^ (YË^ (ZË)

	)

159 
	#md5I
–
X
, 
Y
, 
Z
 ) ( (YË^ ((XË| (~(Z))Ë)

	)

161 
	#GëL⁄gByã
–
L
, 
idx
 ) ((
uch¨
)(–L >> (((idxË& 0x03Ë<< 3ËË& 0xFF))

	)

168 
	$Pîmuã
–
uöt32_t
 
ABCD
[4], c⁄° 
uch¨
 
block
[64] )

202 
round
;

203 
i
, 
j
;

204 
uöt8_t
 
s
;

205 
uöt32_t
 
a
, 
b
, 
c
, 
d
;

206 
uöt32_t
 
KìpABCD
[4];

207 
uöt32_t
 
X
[16];

211  
i
 = 0; i < 4; i++ )

212 
KìpABCD
[
i
] = 
ABCD
[i];

218  
i
 = 0, 
j
 = 0; i < 16; i++ )

220 
X
[
i
] = (
uöt32_t
)
block
[
j
++];

221 
X
[
i
] |((
uöt32_t
)
block
[
j
++] << 8);

222 
X
[
i
] |((
uöt32_t
)
block
[
j
++] << 16);

223 
X
[
i
] |((
uöt32_t
)
block
[
j
++] << 24);

240  
round
 = 0;Ñound < 4;Ñound++ )

242  
i
 = 0; i < 16; i++ )

244 
j
 = (4 - (
i
 % 4)) & 0x3;

245 
s
 = 
S
[
round
][
i
%4];

247 
b
 = 
ABCD
[(
j
+1) & 0x3];

248 
c
 = 
ABCD
[(
j
+2) & 0x3];

249 
d
 = 
ABCD
[(
j
+3) & 0x3];

254  
round
 )

258 
a
 = 
	`md5F
–
b
, 
c
, 
d
 ) + 
X
[
i
];

262 
a
 = 
	`md5G
–
b
, 
c
, 
d
 ) + 
X
[ 
K
[0][
i
] ];

266 
a
 = 
	`md5H
–
b
, 
c
, 
d
 ) + 
X
[ 
K
[1][
i
] ];

270 
a
 = 
	`md5I
–
b
, 
c
, 
d
 ) + 
X
[ 
K
[2][
i
] ];

273 
a
 = 0xFFFFFFFF & ( 
ABCD
[
j
] +á + 
T
[
round
][
i
] );

274 
ABCD
[
j
] = 
b
 + (0xFFFFFFFF & (–
a
 << 
s
 ) | (á >> (32 - s) )));

281  
i
 = 0; i < 4; i++ )

282 
ABCD
[
i
] = 0xFFFFFFFF & ( ABCD[i] + 
KìpABCD
[i] );

284 
	}
}

291 
auth_md5Ctx
 *
	$auth_md5InôCtx
–
auth_md5Ctx
 *
˘x
 )

320 
˘x
->
Àn
 = 0;

321 
˘x
->
b_u£d
 = 0;

323 
˘x
->
ABCD
[0] = 0x67452301;

324 
˘x
->
ABCD
[1] = 0xefcdab89;

325 
˘x
->
ABCD
[2] = 0x98badcfe;

326 
˘x
->
ABCD
[3] = 0x10325476;

335 –
˘x
 );

336 
	}
}

339 
auth_md5Ctx
 *
	$auth_md5SumCtx
–
auth_md5Ctx
 *
˘x
,

340 c⁄° 
uch¨
 *
§c
,

341 c⁄° 
Àn
 )

358 
i
;

362 
˘x
->
Àn
 +(
uöt32_t
)len;

367  
i
 = 0; i < 
Àn
; i++ )

369 
˘x
->
block
[ ctx->
b_u£d
 ] = 
§c
[
i
];

370 (
˘x
->
b_u£d
)++;

371 if–64 =
˘x
->
b_u£d
 )

373 
	`Pîmuã
–
˘x
->
ABCD
, ctx->
block
 );

374 
˘x
->
b_u£d
 = 0;

380 –
˘x
 );

381 
	}
}

384 
auth_md5Ctx
 *
	$auth_md5Clo£Ctx
–
auth_md5Ctx
 *
˘x
, 
uch¨
 *
d°
 )

404 
i
;

405 
uöt32_t
 
l
;

412 
˘x
->
block
[˘x->
b_u£d
] = 0x80;

413 (
˘x
->
b_u£d
)++;

417  
i
 = 
˘x
->
b_u£d
; i < 64; i++ )

418 
˘x
->
block
[
i
] = 0;

423 if–56 < 
˘x
->
b_u£d
 )

425 
	`Pîmuã
–
˘x
->
ABCD
, ctx->
block
 );

426  
i
 = 0; i < 64; i++ )

427 
˘x
->
block
[
i
] = 0;

435 
l
 = 
˘x
->
Àn
 << 3;

436  
i
 = 0; i < 4; i++ )

437 
˘x
->
block
[56+
i
] |
	`GëL⁄gByã
–
l
, i );

438 
˘x
->
block
[60] = ((
	`GëL⁄gByã
–˘x->
Àn
, 3 ) & 0xE0) >> 5);

439 
	`Pîmuã
–
˘x
->
ABCD
, ctx->
block
 );

443  
i
 = 0; i < 4; i++ )

445 
d°
[ 0+
i
] = 
	`GëL⁄gByã
–
˘x
->
ABCD
[0], i );

446 
d°
[ 4+
i
] = 
	`GëL⁄gByã
–
˘x
->
ABCD
[1], i );

447 
d°
[ 8+
i
] = 
	`GëL⁄gByã
–
˘x
->
ABCD
[2], i );

448 
d°
[12+
i
] = 
	`GëL⁄gByã
–
˘x
->
ABCD
[3], i );

454 –
˘x
 );

455 
	}
}

458 
uch¨
 *
	$auth_md5Sum
–
uch¨
 *
d°
, c⁄° uch¨ *
§c
, c⁄° 
Àn
 )

492 
auth_md5Ctx
 
˘x
[1];

494 ()
	`auth_md5InôCtx
–
˘x
 );

495 ()
	`auth_md5SumCtx
–
˘x
, 
§c
, 
Àn
 );

496 ()
	`auth_md5Clo£Ctx
–
˘x
, 
d°
 );

498 –
d°
 );

499 
	}
}

	@libs/utils/buff.c

6 
	~<°dlib.h
>

7 
	~<°rög.h
>

8 
	~"buff.h
"

10 
buf_t
 * 
	$buf_size
(
buf_t
 *
buf
, 
size_t
 
Àn
)

12 
uöt8_t
 *
buff
;

14 i‡(
buf
 =
NULL
) {

15 
buf
 = 
	`ˇŒoc
(1, (
buf_t
));

16 if(!
buf
){

17  
buf
;

19 
buf
->
d©a
 = 
NULL
;

20 
buf
->
Àn
 = 0;

27 
buff
 = 
	`ªÆloc
(
buf
->
d©a
, 
Àn
);

28 if(
buff
 =
NULL
){

32  
buf
;

34 
buf
->
d©a
 = 
buff
;

35 i‡(
buf
->
Àn
 >Üen) buf->len =Üen;

36 
buf
->
limô
 = 
Àn
;

38  
buf
;

39 
	}
}

41 
	$buf_c⁄ˇt
(
buf_t
 *
d°
, 
uöt8_t
 *
§c
, 
size_t
 
Àn
)

43 
size_t
 
i
 = 0;

45 if(
d°
){

47 
i
 = 
d°
->
limô
 - d°->
Àn
;

48 i‡(
i
 < 
Àn
) {

50 
d°
 = 
	`buf_size
(d°, d°->
limô
 + 
Àn
);

51 i‡(
d°
->
limô
 - d°->
Àn
 <Üen) {

57 
Àn
 = ((
d°
->
limô
 - dst->len) <Üen) ? (dst->limit - dst->len) :Üen;

58 
i
 = 0; i < 
Àn
; i++)

59 
d°
->
d©a
[d°->
Àn
++] = 
§c
[
i
];

63 
	}
}

65 * 
	$buf_to°r
(
buf_t
 *
buf
)

67 *
°r
 = 
	`mÆloc
(
buf
->
Àn
 + 1);

68 
	`mem˝y
(
°r
, 
buf
->
d©a
, buf->
Àn
);

69 
°r
[
buf
->
Àn
] = '\0';

70  
°r
;

71 
	}
}

73 
	$buf_de°‹y
(
buf_t
 *
buf
)

75 if(
buf
){

76 if(
buf
->
d©a
)

77 
	`‰ì
(
buf
->
d©a
);

78 
	`‰ì
(
buf
);

80 
	}
}

	@libs/utils/conf.c

5 
	~"°d_hdr.h
"

7 
	~"comm_hdr.h
"

8 
	~"c⁄f.h
"

30 
	$c⁄f_gë_vÆue
 (*
buf
, *
keyw‹d
, **
key_µå
,

31 **
vÆ_µå
)

33 *
°¨t
;

34 *
íd
;

35 *
vÆue
 = 
NULL
;

40 
°¨t
 = 
	`°rchr
(
buf
, 
CONF_KW_LEFT_DELIMITER
);

41 
íd
 = 
°¨t
 ? 
	`°rchr
(°¨à+ 1, 
CONF_KW_RIGHT_DELIMITER
Ë: 
NULL
;

42 i‡(!
°¨t
 || !
íd
)

43 (
ERR_INVALID_FORMAT
);

49 
°¨t
++;

50 
°¨t
 = 
	`utû_åim
(°¨t, 
TRUE
);

55 i‡(
°¨t
) {

56 
vÆue
 = 
	`°rchr
(
°¨t
, 
CONF_KW_VAL_SEPERATOR
);

61 i‡(
vÆue
) {

62 *
vÆue
++ = '\0';

69 *
íd
 = '\0';

74 i‡(
vÆue
) {

75 
vÆue
 = 
	`utû_åim
(vÆue, 
FALSE
);

81 i‡(
°¨t
) {

82 
°¨t
 = 
	`utû_åim
(°¨t, 
FALSE
);

88 *
key_µå
 = 
°¨t
;

89 *
vÆ_µå
 = 
vÆue
;

94 i‡(
°¨t
 && (!
keyw‹d
 || (
	`°rcmp
(start, keyword) == 0)))

95 (
NO_ERROR
);

97 (
ERR_NOT_FOUND
);

98 
	}
}

114 
	$c⁄f_£t_∑øm
(*
keyw‹d
, *
vÆue
, *
c⁄f_ba£
,

115 
CONF_PARAM_T
 *
∑øms
)

117 
CONF_PARAM_T
 *
∑øm
 = 
∑øms
;

118 
mac_°r
[
	`DWORD_ALIGN
(
MAC_STR_LEN
 + 1)];

119 
uöt8_t
 *
ba£
 = 
c⁄f_ba£
;

120 
found
;

121 
îr
;

122 
Àn
;

123 
max_Àn
;

124 *
tmp_±r
;

125 
tmp_vÆue
;

127 
found
 = 
FALSE
;

128 
îr
 = 
FALSE
;

133 
∑øm
->
keyw‹d
 && !
found
) {

137 i‡(
	`°rcmp
(
keyw‹d
, 
∑øm
->keyword) != 0) {

138 
∑øm
++;

142 
found
 = 
TRUE
;

143 
vÆue
 = 
	`utû_åim_quŸes
(value);

144 i‡(!
vÆue
) {

145 
îr
 = 
TRUE
;

149 
∑øm
->
ty≥
) {

150 
CONF_TYPE_MAC
:

151 
	`utû_°rù_mac
(
vÆue
, 
mac_°r
);

152 i‡(
	`°æí
(
mac_°r
)) {

153 
	`°r˝y
((*)(
ba£
 + 
∑øm
->
off£t
), 
mac_°r
);

155 
îr
 = 
TRUE
;

159 
CONF_TYPE_URL
:

160 
max_Àn
 = 
URL_STR_LEN
;

161 
ßve_°r
;

163 
CONF_TYPE_ADDR_LIST
:

164 
max_Àn
 = 
ADDR_STR_LEN
;

165 
ßve_°r
;

167 
CONF_TYPE_IP
:

168 
max_Àn
 = 
IP_HOST_LEN
;

169 
ßve_°r
;

171 
CONF_TYPE_STRING
:

172 
max_Àn
 = 
∑øm
->max_len;

174 
ßve_°r
:

175 
Àn
 = 
	`°æí
(
vÆue
);

176 i‡(
Àn
 > 
max_Àn
) {

177 
Àn
 = 
max_Àn
;

178 
	`QNAP_LOG_WARN_NL
("Keyw‹d[%s] vÆuêi†åunˇãd", 
keyw‹d
);

180 
	`mem˝y
((
ba£
 + 
∑øm
->
off£t
), 
vÆue
, 
Àn
);

181 *(
ba£
 + 
∑øm
->
off£t
 + 
Àn
) = '\0';

184 
CONF_TYPE_INT
:

185 
tmp_vÆue
 = 
	`°πﬁ
(
vÆue
, &
tmp_±r
, 10);

186 i‡(*
vÆue
 && 
tmp_±r
 && (*tmp_ptr == '\0')) {

187 *((*)(
ba£
 + 
∑øm
->
off£t
)Ë
	`©oi
(
vÆue
);

189 
îr
 = 
TRUE
;

193 
CONF_TYPE_BOOL
:

194 i‡(
	`°rˇ£cmp
(
vÆue
, 
CONF_KW_VAL_TRUE
) == 0) {

195 
tmp_vÆue
 = 1;

196 } i‡(
	`°rˇ£cmp
(
vÆue
, 
CONF_KW_VAL_FALSE
) == 0) {

197 
tmp_vÆue
 = 0;

199 
tmp_vÆue
 = 
	`°πﬁ
(
vÆue
, &
tmp_±r
, 10);

200 i‡(!(*
vÆue
 && 
tmp_±r
 && (*tmp_ptr == '\0'))) {

201 
tmp_vÆue
 = -1;

205 i‡((
tmp_vÆue
 == 0) || (tmp_value == 1)) {

206 *(
ba£
 + 
∑øm
->
off£t
Ë
tmp_vÆue
;

208 
îr
 = 
TRUE
;

213 
îr
 = 
TRUE
;

220 
∑øm
++;

223 i‡(!
found
) {

224 
	`QNAP_LOG_INFO_NL
("Unknow¿keyw‹d[%s]", 
keyw‹d
);

225 } i‡(
îr
) {

226 
	`QNAP_LOG_WARN_NL
("Keyw‹d[%s] vÆuêi†övÆid", 
keyw‹d
);

228 
	`QNAP_LOG_DEBUG_NL
("Gë c⁄figuøti⁄ [%†%s]", 
keyw‹d
, 
vÆue
);

230 
	}
}

246 
	$c⁄f_öô
 (*
c⁄f_fûe
, *
c⁄f_ba£
, 
CONF_PARAM_T
 *
∑øms
)

248 
FILE
 *
Â
;

249 
löe
[
	`DWORD_ALIGN
(
CONF_BUFF_LEN
)];

250 *
key
;

251 *
vÆue
;

252 *
±r
;

257 i‡((
Â
 = 
	`utû_›í_fûe
(
c⁄f_fûe
, 
FILE_MODE_READ
)Ë=
NULL
)

258 (
ERR_NO_FILE
);

263 
	`fgës
(
löe
, 
CONF_BUFF_LEN
, 
Â
)) {

267 
±r
 = 
	`utû_åim
(
löe
, 
TRUE
);

268 i‡(!
±r
 || (*±∏=
COMMENT_CHAR
))

274 i‡(
	`c⁄f_gë_vÆue
(
löe
, 
NULL
, &
key
, &
vÆue
Ë!
NO_ERROR
)

280 i‡(
key
 && 
vÆue
) {

281 
	`c⁄f_£t_∑øm
(
key
, 
vÆue
, 
c⁄f_ba£
, 
∑øms
);

288 
	`utû_˛o£_fûe
(
Â
);

290 (
NO_ERROR
);

291 
	}
}

307 
	$c⁄f_ßve_run_time_öfo
 (*
c⁄f_fûe
, *
c⁄f_ba£
,

308 
CONF_PARAM_T
 *
∑øms
)

310 
FILE
 *
Â
;

311 
löe
[
	`DWORD_ALIGN
(
CONF_BUFF_LEN
)];

312 
CONF_PARAM_T
 *
∑øm
 = 
∑øms
;

313 *
ba£
 = 
c⁄f_ba£
;

318 i‡((
Â
 = 
	`utû_›í_fûe
(
c⁄f_fûe
, 
FILE_MODE_WRITE
)Ë=
NULL
)

319 (
ERR_NO_FILE
);

324 
∑øm
->
keyw‹d
) {

325 
∑øm
->
ty≥
) {

326 
CONF_TYPE_INT
:

327 
	`QNAP_LOG_DEBUG_NL
("SetÑun-time configuration [%s%c%d]",

328 
∑øm
->
keyw‹d
, 
CONF_KW_VAL_SEPERATOR
,

329 *((*)(
ba£
 + 
∑øm
->
off£t
)));

330 
	`•rötf
(
löe
, "%s%c%d",

331 
∑øm
->
keyw‹d
, 
CONF_KW_VAL_SEPERATOR
,

332 *((*)(
ba£
 + 
∑øm
->
off£t
)));

335 
CONF_TYPE_STRING
:

336 
CONF_TYPE_URL
:

338 
	`QNAP_LOG_DEBUG_NL
("SetÑun-time configuration [%s%c%s]",

339 
∑øm
->
keyw‹d
, 
CONF_KW_VAL_SEPERATOR
,

340 (
ba£
 + 
∑øm
->
off£t
));

341 
	`•rötf
(
löe
, "%s%c%s",

342 
∑øm
->
keyw‹d
, 
CONF_KW_VAL_SEPERATOR
, (
ba£
 +Ö¨am->
off£t
));

346 
	`Âuts
(
löe
, 
Â
);

347 
	`Âutc
('\n', 
Â
);

352 
∑øm
++;

358 
	`utû_˛o£_fûe
(
Â
);

360 (
NO_ERROR
);

361 
	}
}

	@libs/utils/error_code.c

9 
	~"îr‹_code.h
"

10 
	~<°dio.h
>

11 
	~<°rög.h
>

13 #ifde‡
DEBUG


14 
	#E
(
code
, 
s
Ë{ code, (†"[" #codê"]"Ë}

	)

16 
	#E
(
code
, 
s
Ë{ code, ("[" #codê"]"Ë}

	)

19 
	#ARRAY_SIZE
(
a
Ë(◊Ë/ (◊)[0]))

	)

21 
	#UNKNOWN_ERROR_RESP
(
e
Ë"unknow¿îr‹\0"

	)

22 
	gunknown_îr‹
[128] = "\0";

24 
	sîr‹_£t
{

25 
	mcode
;

26 c⁄° *
	mmsg
;

27 }
	tîr‹_£t
;

29 
îr‹_£t
 
	ggíîic_îr‹°r
[] = {

30 
E
(
ERR_GENERIC
, "genericÉrror"),

31 
E
(
ERR_NULL_POINTER
, "pointer isÇull"),

32 
E
(
ERR_NO_MEMORY
, "data isÇot found"),

33 
E
(
ERR_RANGE
, "data is out ofÑange"),

34 
E
(
ERR_NO_CONNECTION
, "connectionÅo server failed"),

35 
E
(
ERR_MMC_TAG
, "invalidÅag"),

36 
E
(
ERR_MMC_KEY
, "invalid key"),

37 
E
(
ERR_OVERFLOW
, "buffer isÇot bigÉnough"),

38 
E
(
ERR_SYSTEM
, "systemÉrror"),

39 
E
(
ERR_INVALID_FORMAT
, "invalid data format"),

40 
E
(
ERR_NO_FILE
, "file doesn'tÉxist"),

41 
E
(
ERR_INVALID_PORT
, "invalidÅcp/udpÖort"),

42 
E
(
ERR_AUTH_FAIL
, "authentication failed"),

43 
E
(
ERR_NO_SITE
, "doesÇot belongÅoány site"),

44 
E
(
ERR_MAC_MISMATCH
, "mac isÇotÅheÑight one"),

45 
E
(
ERR_INPUT_LEN
, "invalidÖacketÜength"),

46 
E
(
ERR_INVALID_CMD
, "invalidÑequest command"),

47 
E
(
ERR_ATTRIBUTE
, "missingÑequiredáttributes"),

48 
E
(
ERR_EXIST
, "ÉntryÉxistsálready"),

49 
E
(
ERR_RANDOM_STRING
, "ERR_RANDOM_STRING"),

50 
E
(
ERR_MISMATCH
, "encoded string mismatches"),

51 
E
(
ERR_TO_CLOSE
, "errorÅo close connection"),

52 
E
(
ERR_CONNECT_SERVER
, ""),

53 
E
(
ERR_NO_INTERNET
, ""),

54 
E
(
ERR_INVALID_CREDENTIAL
, ""),

55 
E
(
ERR_BUFFER_LEN
, ""),

56 
E
(
ERR_GET_DEVICE_INFO
, "errorÅo collect device information"),

59 
îr‹_£t
 
	gbuff_îr‹°r
[] = {

60 
E
(
ERR_BUFF_INVALID
, "invalidÖarameter"),

61 
E
(
ERR_BUFF_OUTOFMEM
, "notÉnough memory"),

62 
E
(
ERR_BUFF_SHUFFLE_FAILED
, "memory moving failed"),

63 
E
(
ERR_BUFF_ALLOC_FAILED
, "allocating memory failed")

66 #ifde‡
DEBUG


67 
îr‹_£t
 
	gsock_îr‹°r
[] = {

68 
E
(
ERR_SOCK_BADTYPE
, "invalid socketÅype"),

69 
E
(
ERR_SOCK_BADSOCK
, "invalid socket"),

70 
E
(
ERR_SOCK_TIMEOUT
, "requestÅimeout"),

71 
E
(
ERR_SOCK_REFUSED
, "request isÑefused"),

72 
E
(
ERR_SOCK_NOCONN
, "connection isÇotávailable"),

73 
E
(
ERR_SOCK_NOBIND
, "binding operation failed"),

74 
E
(
ERR_SOCK_BADADDR
, "invalid socketáddr"),

75 
E
(
ERR_SOCK_NOLISTEN
, "listening operation failed"),

76 
E
(
ERR_SOCK_NOACCEPT
, "accepting operation failed"),

77 
E
(
ERR_SOCK_WOULDBLOCK
, "current operation would be blocked forá while"),

78 
E
(
ERR_SOCK_BADOPT
, "invalid socket operation"),

79 
E
(
ERR_SOCK_BADFD
, "invalid file description"),

80 
E
(
ERR_SOCK_INVAL
, "invalidÖarameter"),

81 
E
(
ERR_SOCK_UNCONN
, "connectionÇotávailable"),

82 
E
(
ERR_SOCK_INPROGRESS
, "operation is working"),

83 
E
(
ERR_SOCK_RECV
, "receiving operation failed"),

84 
E
(
ERR_SOCK_SEND
, "sending operation failed"),

85 
E
(
ERR_SOCK_OUTBOUND
, ""),

86 
E
(
ERR_SOCK_STOP
, "socketÅhread stopped"),

89 
îr‹_£t
 
	gsock_îr‹°r
[] = {};

92 c⁄° * 
	$_°ªº‹
(
îr‹_£t
 *
£t
, 
£t_size
, 
e
){

93 
i
 = 0;

94 ; 
i
 < 
£t_size
; i++){

95 if(
e
 =
£t
[
i
].
code
)

96  
£t
[
i
].
msg
;

98 
	`•rötf
(
unknown_îr‹
, "%s: %d", (*)
	`°ªº‹
 (
e
),É);

99  
unknown_îr‹
;

100 
	}
}

102 c⁄° * 
	$gë_°ªº‹
(
e
){

103 
îr‹_£t
 *
£t
 = 0;

104 
£t_size
 = 0;

110 if(
e
 =
S_OK
){

112 }if(
e
 > 
ERR_GENERIC_END
){

113 
£t_size
 = 
	`ARRAY_SIZE
(
gíîic_îr‹°r
);

114 
£t
 = 
gíîic_îr‹°r
;

115 }if(
e
 > 
ERR_BUFF_END
){

116 
£t_size
 = 
	`ARRAY_SIZE
(
buff_îr‹°r
);

117 
£t
 = 
buff_îr‹°r
;

118 }if(
e
 > 
ERR_SOCK_END
){

119 
£t_size
 = 
	`ARRAY_SIZE
(
sock_îr‹°r
);

120 
£t
 = 
sock_îr‹°r
;

122 
	`•rötf
(
unknown_îr‹
, "%s: %d", (*)
	`°ªº‹
 (
e
),É);

123  
unknown_îr‹
;

126  
	`_°ªº‹
(
£t
, 
£t_size
, 
e
);

127 
	}
}

	@libs/utils/include/MD5.h

1 #i‚de‡
AUTH_MD5_H


2 
	#AUTH_MD5_H


	)

83 
	tuöt32_t
;

84 
	tuch¨
;

85 
	tuöt8_t
;

89 
uöt32_t
 
	mÀn
;

90 
uöt32_t
 
	mABCD
[4];

91 
	mb_u£d
;

92 
uch¨
 
	mblock
[64];

93 } 
	tauth_md5Ctx
;

100 
auth_md5Ctx
 *
auth_md5InôCtx
–auth_md5Ctx *
˘x
 );

130 
auth_md5Ctx
 *
auth_md5SumCtx
–auth_md5Ctx *
˘x
,

131 c⁄° 
uch¨
 *
§c
,

132 c⁄° 
Àn
 );

150 
auth_md5Ctx
 *
auth_md5Clo£Ctx
–auth_md5Ctx *
˘x
, 
uch¨
 *
d°
 );

171 
uch¨
 *
auth_md5Sum
–uch¨ *
d°
, c⁄° uch¨ *
§c
, c⁄° 
Àn
 );

	@libs/utils/include/buff.h

8 #i‚de‡
BUFF_H_


9 
	#BUFF_H_


	)

11 
	~<°döt.h
>

15 
size_t
 
	mÀn
;

16 
size_t
 
	mlimô
;

17 
uöt8_t
 *
	md©a
;

18 } 
	tbuf_t
;

21 
buf_t
 * 
buf_size
(buf_à*
buf
, 
size_t
 
Àn
);

22 
buf_push
(
buf_t
 *
buf
, 
uöt8_t
 
c
);

23 
buf_c⁄ˇt
(
buf_t
 *
buf
, 
uöt8_t
 *
d©a
, 
size_t
 
Àn
);

24 * 
buf_to°r
(
buf_t
 *
buf
);

25 
buf_de°‹y
(
buf_t
 *
buf
);

	@libs/utils/include/comm_hdr.h

8 #i‚de‡
COMM_HDR_H_


9 
	#COMM_HDR_H_


	)

11 
	~"c⁄°.h
"

12 
	~"îr‹_code.h
"

13 
	~"log.h
"

14 
	~"utû.h
"

	@libs/utils/include/conf.h

8 #i‚de‡
CONF_H_


9 
	#CONF_H_


	)

11 
	~"c⁄°.h
"

17 
	#PATH
 "/ëc/"

	)

19 
	#CONF_PATH
 
PATH
 "c⁄fig/"

	)

21 
	#CONF_RUN_TIME_PATH
 "/tmp/"

	)

23 
	#CONF_FILE_QID
 
CONF_PATH
 "qid.c⁄f"

	)

24 
	#CONF_FILE_MCN
 
CONF_PATH
 "m˙.c⁄f"

	)

29 
	#FILE_MODE_READ
 "r"

	)

30 
	#FILE_MODE_WRITE
 "w"

	)

35 
	#CONF_KW_LEFT_DELIMITER
 '<'

	)

36 
	#CONF_KW_RIGHT_DELIMITER
 '>'

	)

37 
	#CONF_KW_VAL_SEPERATOR
 '='

	)

39 
	#CONF_KW_VAL_TRUE
 "TRUE"

	)

40 
	#CONF_KW_VAL_FALSE
 "FALSE"

	)

45 
	#CONF_KW_DEBUG_LEVEL
 "DebugLevñ"

	)

46 
	#CONF_KW_DEBUG_DETAIL
 "DebugDëaû"

	)

47 
	#CONF_KW_DEBUG_SYSLOG
 "DebugOnSy¶oggî"

	)

49 
	#CONF_KW_QID_SVR
 "QIDSîvî"

	)

50 
	#CONF_KW_MCN_SVR
 "MCNSîvî"

	)

52 
	#CONF_KW_MAC_ADDRESS
 "MacAddªss"

	)

53 
	#CONF_KW_SESSION_ID
 "Sessi⁄Id"

	)

60 
	mCONF_TYPE_STRING
,

61 
	mCONF_TYPE_INT
,

62 
	mCONF_TYPE_BOOL
,

63 
	mCONF_TYPE_IP
,

64 
	mCONF_TYPE_URL
,

65 
	mCONF_TYPE_ADDR_LIST
,

66 
	mCONF_TYPE_MAC
,

72 
	s_c⁄f_∑øm_°
 {

73 *
	mkeyw‹d
;

74 
	mty≥
;

75 
	mmax_Àn
;

76 
size_t
 
	moff£t
;

77 } 
	tCONF_PARAM_T
;

83 
c⁄f_öô
–*
c⁄f_fûe
, *
c⁄f_ba£
,

84 
CONF_PARAM_T
 *
∑øms
);

85 
c⁄f_ßve_run_time_öfo
–*
c⁄f_fûe
, *
c⁄f_ba£
,

86 
CONF_PARAM_T
 *
∑øms
);

	@libs/utils/include/const.h

6 #i‚de‡
CONST_H_


7 
	#CONST_H_


	)

13 #ifde‡
TRUE


14 #unde‡
TRUE


17 #ifde‡
FALSE


18 #unde‡
FALSE


21 
	#TRUE
 1

	)

22 
	#FALSE
 0

	)

24 #i‚de‡
__PACKED__


25 
	#__PACKED__
 
	`__©åibuã__
((
__∑cked__
))

	)

28 
	#VLINK_ID_LEN
 32

	)

29 
	#NAS_ID_LEN
 64

	)

30 
	#DOMAIN_NAME_LEN
 256

	)

31 
	#USER_NAME_LEN
 256

	)

35 
	#SYSTEM_NAME_LEN
 64

36 
	#SYSTEM_TIME_LEN
 64

37 
	#UUID_LEN
 36

38 

	)

39 
	#ACCESS_KEY_LEN
 (
UUID_LEN
 + 
MAC_STR_LEN
)

	)

40 
	#VENDOR_ID_LEN
 32

41 
	#MODEL_LEN
 32

42 
	#MODULE_LEN
 15

43 
	#VERSION_LEN
 32

44 
	#CLIENT_ID_LEN
 128

45 
	#DEVICE_ID_LEN
 256

46 
	#SESSION_ID_LEN
 64

48 
	#NAME_LEN
 32

49 
	#HEADER_LEN
 1024

	)

50 
	#PROFILE_LEN
 512

	)

51 
	#DEALER_LIST_LEN
 (10)

	)

52 
	#MAX_UNIX_DOMAIN_PATH
 108

	)

53 
	#VENDOR_ID_DEF
 "QNAP"

	)

55 
	#IPv4_ALEN
 4

56 
	#IP_STR_LEN
 30

57 
	#MAC_STR_LEN
 12

58 
	#MAC_STR_LONG_LEN
 18

59 
	#IP_HOST_LEN
 128

60 
	#URL_STR_LEN
 256

61 
	#ADDR_STR_LEN
 512

62 
	#META_STR_LEN
 512

63 
	#PROTO_STR_LEN
 12

64 

	)

69 
	#PKT_HDR_LEN_MAX
 12

70 
	#PAYLOAD_LEN_MAX
 4096

71 
	#PAYLOAD_LEN_1K
 1024

72 
	#PKT_BUFF_LEN
 (
PKT_HDR_LEN_MAX
 + 
PAYLOAD_LEN_MAX
)

	)

73 
	#PKT_BUFF_LEN_1K
 (
PKT_HDR_LEN_MAX
 + 
PAYLOAD_LEN_1K
)

	)

74 
	#CMD_BUFF_LEN
 256

75 
	#CONF_BUFF_LEN
 512

76 
	#TMP_BUFF_LEN
 1024

77 
	#QID_CONF_BUFF_LEN
 32768

	)

78 
	#DISP_BUFF_LEN
 80

	)

82 
	#PKT_QUEUED_LEN_MAX
 (32 * 
PKT_BUFF_LEN_1K
)

	)

83 
	#HALF_PKT_QUEUED_LEN_MAX
 (
PKT_QUEUED_LEN_MAX
/2)

	)

85 
	#HTTP_BUFF_LEN_MAX
 40960

86 

	)

87 
	#PORT_MIN
 1

88 
	#PORT_MAX
 65535

89 
	#IPC_PORT_MIN
 1025

90 
	#IPC_PORT_MAX
 
PORT_MAX


91 
	#PORT_STR_LEN
 5

	)

92 
	#CONNECTION_BACKLOG
 128

93 

	)

97 
	#STATUS_UP
 
TRUE


	)

98 
	#STATUS_DOWN
 
FALSE


	)

103 
	#DIR_SPLITTER_CHAR
 '/'

	)

104 
	#COMMENT_CHAR
 '#'

	)

105 
	#DOUBLE_QUOTE_CHAR
 '\"'

	)

106 
	#SINGLE_QUOTE_CHAR
 '\''

	)

108 
	#GET_DEALER_REQ_FMT
 "GET /v1/dealers HTTP/1.0\r\n"\

109 "Ho°: %s:%d\r\n\r\n"

	)

110 
	#GET_DEALER_REQ_FMT_V11
 "GET /v1.1/usher/dealer?service_type=tcp HTTP/1.0\r\n"\

111 "Ho°: %s:%d\r\n\r\n"

	)

116 
	#INADDR_ANY_STR
 "0.0.0.0"

	)

117 
	#MMC_SVR_ADDR_DEF
 
INADDR_ANY_STR
 ":11211"

	)

123 
	#QID_SVR_PORT_DEF
 443

	)

124 
	#MCN_SVR_PORT_DEF
 443

	)

125 
	#USHER_SVR_PORT_DEF
 80

	)

126 
	#DEALER_SVR_CTRL_PORT_DEF
 443

	)

127 
	#DEALER_SVR_PROXY_PORT_DEF
 3128

	)

128 
	#MMC_SVR_PORT_DEF
 11121

	)

129 
	#PORTER_NOTIF_PORT_DEF
 22336

	)

130 
	#IP_PORT_LIST_SEP_CHAR
 ','

	)

131 
	#IP_PORT_SEP_CHAR
 ':'

	)

132 
	#URL_NAME_PORT_CHAR
 ':'

	)

133 
	#URL_NAME_PREFIX_STR
 "://"

	)

134 
	#URL_NAME_PATH_CHAR
 '/'

	)

136 
	#QNAP_EAGENT_LOG_PATH
 "/tmp/.ógít.log"

	)

137 
	#QNAP_PORTER_LOG_PATH
 "/tmp/.p‹ãr.log"

	)

138 
	#QNAP_QID_LOG_PATH
 "/tmp/.qid.log"

	)

139 
	#QNAP_PLAYER_LOG_PATH
 "/tmp/.∂ayî.log"

	)

140 #ifde‡
ENABLE_TUTK_LOG


141 
	#TUTK_IOTC_LOG_PATH
 "/tmp/.tutk_iŸc"

	)

142 
	#TUTK_RDT_LOG_PATH
 "/tmp/.tutk_rdt"

	)

143 
	#TUTK_P2P_LOG_PATH
 "/tmp/.tutk_é"

	)

145 
	#TUTK_IOTC_LOG_PATH
 "/tmp/.tutk_iŸc"

	)

146 
	#TUTK_RDT_LOG_PATH
 
NULL


	)

147 
	#TUTK_P2P_LOG_PATH
 
NULL


	)

150 
	#ERROR_MYQNAPCLOUD
 "[myQNAP˛oud] "

	)

152 
	#PORTER_DOMAIN_SOCKET_PATH
 "/tmp/p‹ãr.sock"

	)

156 
	#ERROR_HANDLING_ACTION_CHECK_DNS
 "PÀa£ check you∏DNS sëtög o¿NAS"

	)

158 
	#ERROR_HANDLING_RESTART_CLOUDLINK
 "PÀa£Ñe°¨àyou∏CloudLök by dißblög ià™dÉ«blög iàagaö"

	)

160 
	#ERROR_HANDLING_CHECK_BLOCKING
 "PÀa£ makêsuª you∏devi˚ i†c⁄√˘edÅÿthêI¡î√à™dÅhêUDPÅøffi¯i†nŸ blocked"

	)

162 
	#ERROR_HANDLING_UPGRADE
 "PÀa£ upgødêthêfúmw¨êtÿœã° vîsi⁄"

	)

164 
	#ERROR_HANDLING_CHECK_INTERNET
 "PÀa£ makêsuª you∏devi˚ i†c⁄√˘edÅÿthêI¡î√t"

	)

166 
	#ERROR_HANDLING_QCLOUD_SERVER
 "PÀa£ÅryágaöÜ©î"

	)

168 
	#ERROR_HANDLING_SIGNIN_AGAIN
 "PÀa£ sig¿öágaö"

	)

170 
	#QID_ERR_CAUSE_DEVICE_INFO
 "ÁûögÅÿgë devi˚ inf‹m©i⁄ %s"

	)

171 
	#QID_ERR_CAUSE_QID_MIGRATE
 "h¨d disk migøti⁄"

	)

172 
	#QID_ERR_CAUSE_DEVICE_NOT_FOUND
 "devi˚ÇŸ foundáà˛oud sîvî"

	)

173 
	#QID_ERR_CAUSE_INVALID_AUTH_TOKEN
 "övÆid o∏expúedáuthítiˇti⁄Åokí"

	)

174 
	#QID_ERR_CAUSE_UNABLE_TO_BIND
 "beög u«bÀÅÿbödÅhêdevi˚Åÿthê˛oud"

	)

175 
	#QID_ERR_CAUSE_EMPTY_WAN_IP
 "WAN IP o‡thêdevi˚ i†unknown"

	)

176 
	#QID_ERR_CAUSE_CONNECTION
 "I¡î√àc⁄√˘i⁄Éº‹"

	)

177 
	#QID_ERR_CAUSE_PARSE_RESPONSE
 "ÁûögÅÿ∑r£ sîvîÑe•⁄£ "

	)

178 
	#QID_ERR_CAUSE_SERVER_INTERNAL
 "£rvî i¡î«»îr‹"

	)

180 
	#CLOUD_LINK_SUCCESS
 "CloudLök së u∞suc˚ssfuŒy"

	)

181 
	#CLOUD_LINK_INIT_ERR
 "CloudLök c™nŸ bêöôülized, %s.Éº‹ code: [%d]"

	)

182 
	#CLOUD_LINK_START_ERR
 "CloudLök c™nŸ sèπ, %s.Éº‹ code: [%d]"

	)

183 
	#CLOUD_LINK_LOGIN_ERR
 "CloudLök c™nŸ së up, %s.Éº‹ code: [%ld]"

	)

185 
	#QID_SYS_LOG_CHECKED_IN
 "U£∏[%s] ha†bì¿sig√d in,ánd devi˚Çamêi†[%s]"

	)

186 
	#QID_SYS_LOG_CHECKED_OUT
 "U£∏[%s] ha†bì¿sig√d ouàm™uÆly,ándÅhêdevi˚Çamêi†[%s]"

	)

187 
	#QID_SYS_LOG_ERR_CHECKED_OUT
 "U£∏[%s] ha†bì¿sig√d ouà(devi˚Çame: [%s]Ëduêtÿ%†”º‹ code: [%d]). %s."

	)

188 
	#QID_SYS_LOG_UPDATE_DEVICE_NAME
 "Devi˚Çamêi†ch™gedÅÿ[%s] "

	)

189 
	#QID_SYS_LOG_CONFIG_FILE_WRITE_ERROR
 "U«bÀÅÿwrôê˛oudágíàc⁄figuøti⁄ fûe"

	)

190 
	#QID_SYS_LOG_CONFIG_FILE_READ_ERROR
 "U«bÀÅÿªad cloudágíàc⁄figuøti⁄ fûe"

	)

192 
	#MCN_SYS_LOG_DDNS_TURN_ON
 "DDNS ha†bì¿tu∫ed on"

	)

193 
	#MCN_SYS_LOG_DDNS_TURN_OFF
 "DDNS ha†bì¿tu∫ed off"

	)

194 
	#MCN_SYS_LOG_TUTK_TURN_ON
 "CloudLök ha†bì¿tu∫ed on"

	)

195 
	#MCN_SYS_LOG_TUTK_TURN_OFF
 "CloudLök ha†bì¿tu∫ed off"

	)

197 
	#MCN_SYS_LOG_DDNS_UPDATE_FAILED
 "U«bÀÅÿupd©êDDNS sëtög duêtÿ%†”º‹ code: [%d]). %s."

	)

198 
	#MCN_SYS_LOG_UPDATE_STATUS_FAILED
 "U«bÀÅÿupd©êdevi˚ sètu†duêtÿ%†”º‹ code: [%d]). %s."

	)

199 
	#MCN_SYS_LOG_PUBLISHED_FAILED
 "U«bÀÅÿupd©êpublishedÜi° duêtÿ%†”º‹ code: [%d]). %s."

	)

200 
	#MCN_SYS_LOG_PORT_MAPPING_FAILED
 "U«bÀÅÿupd©êp‹àm≠pög duêtÿ%†”º‹ code: [%d]). %s."

	)

201 
	#MCN_SYS_LOG_ACCESS_CODE_FAILED
 "U«bÀÅÿupd©êu£∏ac˚s†codêduêtÿ%†”º‹ code: [%d]). %s."

	)

202 
	#MCN_SYS_LOG_UPDATE_USER_LIST_FAILED
 "U«bÀÅÿupd©êu£∏li° duêtÿ%†”º‹ code: [%d]). %s."

	)

204 
	#MCN_SYS_LOG_SEND_SHARE_LINK_NOTIFY_FAILED
 "Cloudágíàˇ¬Ÿ síd sh¨êlökÇŸifiˇti⁄,Éº‹ code: [%d]"

	)

206 
	#QID_PUSH_NOTIFICATION_PAIRED
 "Paúed %s"

	)

207 
	#QID_PUSH_NOTIFICATION_UNPAIRED
 "U≈aúed %s"

	)

	@libs/utils/include/error_code.h

8 #i‚de‡
ERROR_CODE_H_


9 
	#ERROR_CODE_H_


	)

11 
	#ERR_NONE
 (0)

	)

13 #i‚de‡
S_OK


14 
	#S_OK
 
ERR_NONE


	)

17 
	#EA_ERR_NONE
 
ERR_NONE


	)

18 
	#TUNNEL_ERR_NONE
 
ERR_NONE


	)

19 
	#EA_TLS_DONE
 
ERR_NONE


	)

20 
	#QNAP_NO_ERROR
 
ERR_NONE


	)

21 
	#NO_ERROR
 
ERR_NONE


	)

23 
	e_î∫o


27 
	mERR_MCN_END
 = -3999,

28 
	mERR_MCN_NO_SERVER
 = -3002,

29 
	mERR_MCN_NOT_ENABLED
 = -3001,

30 
	mERR_MCN_START
 = -3000,

33 
	mTSA_TLS_END
 = -5999,

34 
	mTSA_TLS_ERROR_MISC
 = -5998,

35 
	mTSA_TLS_SYSCALL
,

36 
	mTSA_TLS_ZERORETURN
,

37 
	mTSA_TLS_ERROR_IO
,

38 
	mTSA_TLS_CONNREFUSED
,

39 
	mTSA_TLS_CONNRESET
,

40 
	mTSA_TLS_NO_ROUTE
,

41 
	mTSA_TLS_TIMEOUT
,

42 
	mTSA_TLS_CLOSE
,

43 
	mTSA_TLS_WANTREAD
,

44 
	mTSA_TLS_WANTWRITE
,

47 
	mERR_SOCK_END
 = -2999,

48 
	mERR_SOCK_BADTYPE
,

49 
	mERR_SOCK_IMPL
,

50 
	mERR_SOCK_BADSOCK
,

51 
	mERR_SOCK_TIMEOUT
,

52 
	mERR_SOCK_REFUSED
,

53 
	mERR_SOCK_NOCONN
,

54 
	mERR_SOCK_NOBIND
,

55 
	mERR_SOCK_BADADDR
,

56 
	mERR_SOCK_NOLISTEN
,

57 
	mERR_SOCK_NOACCEPT
,

58 
	mERR_SOCK_WOULDBLOCK
,

59 
	mERR_SOCK_BADOPT
,

60 
	mERR_SOCK_BADFD
,

61 
	mERR_SOCK_INVAL
,

62 
	mERR_SOCK_UNCONN
,

63 
	mERR_SOCK_INPROGRESS
,

64 
	mERR_SOCK_RECV
,

65 
	mERR_SOCK_SEND
,

66 
	mERR_SOCK_OUTBOUND
,

67 
	mERR_SOCK_STOP
,

71 
	mERR_BUFF_END
 = -1999,

72 
	mERR_BUFF_INVALID
,

74 
	mERR_BUFF_OUTOFMEM
,

75 
	mERR_BUFF_ALLOC_FAILED
,

76 
	mERR_BUFF_SHUFFLE_FAILED
,

82 
	mERR_GENERIC_END
 = -999,

83 
	mERR_EVENT_VERSION
,

84 
	mERR_EVENT_LOOP
,

85 
	mERR_STR_TOO_LONG
,

86 
	mERR_INVALID_VALUE
,

87 
	mERR_SIGNAL
,

88 
	mERR_TO_DROP
,

89 
	mERR_TO_CLOSE
,

90 
	mERR_MISMATCH
,

91 
	mERR_RANDOM_STRING
,

92 
	mERR_EXIST
,

93 
	mERR_ATTRIBUTE
,

94 
	mERR_INVALID_CMD
,

95 
	mERR_INPUT_LEN
,

96 
	mERR_MAC_MISMATCH
,

97 
	mERR_XML_DOC
,

98 
	mERR_MMC_TAG_EMPTY
,

99 
	mERR_NO_SITE
,

100 
	mERR_AUTH_FAIL
,

101 
	mERR_INVALID_PORT
,

102 
	mERR_NO_FILE
,

103 
	mERR_INVALID_FORMAT
,

104 
	mERR_SYSTEM
,

105 
	mERR_OVERFLOW
,

106 
	mERR_MMC_SET
,

107 
	mERR_MMC_KEY
,

108 
	mERR_MMC_TAG
,

109 
	mERR_DB_QUERY
,

110 
	mERR_NO_CONNECTION
,

111 
	mERR_RANGE
,

112 
	mERR_NOT_FOUND
,

113 
	mERR_NO_MEMORY
,

114 
	mERR_NULL_POINTER
,

115 
	mERR_GET_DEVICE_INFO
,

116 
	mERR_API_SERVER
,

117 
	mERR_CONNECT_SERVER
 = -11,

118 
	mERR_NO_INTERNET
,

119 
	mERR_INVALID_CREDENTIAL
 = -3,

120 
	mERR_BUFFER_LEN
,

121 
	mERR_GENERIC
 = -1,

124 
	mOAUTH_ERR_INVALID_REQ
 = 1012001,

125 
	mOAUTH_ERR_INVALID_CLI
 = 1010002,

126 
	mOAUTH_ERR_INVALID_USER
 = 1012005,

127 
	mOAUTH_ERR_INVALID_PASS
,

128 
	mOAUTH_ERR_INVALID_GRANT
,

129 
	mOAUTH_ERR_QID_NOT_VERIFIED
,

130 
	mOAUTH_ERR_SERVER
 = 1019999,

133 }
	tó_î∫o
;

135 #ifde‡
__˝lu•lus


139 c⁄° * 
gë_°ªº‹
(
e
);

141 #ifde‡
__˝lu•lus


	@libs/utils/include/log.h

8 #i‚de‡
LOG_H_


9 
	#LOG_H_


	)

12 
	~<°dio.h
>

13 
	~<°döt.h
>

14 
	~<sy¶og.h
>

15 
	~<time.h
>

16 
	~"c⁄°.h
"

22 
	#SYSLOG_BUFF_LEN
 128

23 

	)

27 
	#SYSLOG_OPTION
 (
LOG_CONS
 | 
LOG_PID
)

	)

28 
	#SYSLOG_FACILITY
 
LOG_USER


	)

33 
	#COLOR_ESCAPE
 0x1B

	)

34 
	#COLOR_RESET
 0

	)

36 
	#BLACK
 "0;30"

	)

37 
	#RED
 "0;31"

	)

38 
	#GREEN
 "0;32"

	)

39 
	#YELLOW
 "0;33"

	)

40 
	#BLUE
 "0;34"

	)

41 
	#MAGENTA
 "0;35"

	)

42 
	#CYAN
 "0;36"

	)

43 
	#GRAY
 "0;37"

	)

44 
	#WHITE
 "0;38"

	)

45 
	#BGRED
 "0;41"

	)

47 
	#B_BLACK
 "1;30"

48 
	#B_RED
 "1;31"

	)

49 
	#B_GREEN
 "1;32"

	)

50 
	#B_YELLOW
 "1;33"

	)

51 
	#B_BLUE
 "1;34"

	)

52 
	#B_MAGENTA
 "1;35"

	)

53 
	#B_CYAN
 "1;36"

	)

54 
	#B_WHITE
 "1:37"

	)

55 
	#B_GRAY
 "1;38"

	)

56 
	#B_BGRED
 "1;41"

	)

62 
	s_q«p_log_°
 {

63 
	mÀvñ
;

64 
uöt8_t
 
	mu§log
;

65 
uöt8_t
 
	msy¶og
;

66 
uöt8_t
 
	mdëaû
;

67 
uöt8_t
 
	mfûÀr
;

68 *
	msvr_cb
;

69 *
	mlog_fûe_«me
;

70 
FILE
 *
	mlog_Â
;

71 (*
	mlog_func
)(
	mÀvñ
, c⁄° *
	mfûe
, 
	mlöe
,

72 c⁄° *
	mfunc
, *
	mfmt
, ...);

73 } 
	tQNAP_LOG_T
;

79 #ifde‡
ENABLE_QNAP_LOG


88 #ifde‡
BACKEND_SERVICE


89 
	#QNAP_LOG
(
Lvl
, 
Cﬁ‹
, 
Fmt
, 
Arg
...) \

90 i‡(
	`QNAP_LOG_LEVEL_IS_ALLOWED
((
Lvl
))) { \

91 i‡(
	`QNAP_LOG_USRLOG_IS_ON
()) { \

92 
pq«p_log
->
	`log_func
(
Lvl
, 
__FILE__
, 
__LINE__
, 
__func__
, 
Fmt
, ##
Arg
); \

93 } i‡(
	`QNAP_LOG_SYSLOG_IS_ON
()) { \

94 
	`sy¶og
((
SYSLOG_FACILITY
| (
Lvl
)), "%c[%sm%s: %d: %s():" 
Fmt
 "%c[%dm", \

95 
COLOR_ESCAPE
, (
Cﬁ‹
), 
__FILE__
, 
__LINE__
, 
__func__
, ##
Arg
, \

96 
COLOR_ESCAPE
, 
COLOR_RESET
); \

98 
	`Ârötf
(
pq«p_log
->
log_Â
, "%c[%sm%s: %d: %s(): " 
Fmt
 "%c[%dm", \

99 
COLOR_ESCAPE
, (
Cﬁ‹
), 
__FILE__
, 
__LINE__
, 
__func__
, ##
Arg
, \

100 
COLOR_ESCAPE
, 
COLOR_RESET
); \

101 
	`fÊush
(
pq«p_log
->
log_Â
); \

103 }

	)

105 
	#QNAP_LOG_NL
(
Lvl
, 
Cﬁ‹
, 
Fmt
, 
Arg
...) \

106 i‡(
	`QNAP_LOG_LEVEL_IS_ALLOWED
((
Lvl
))) { \

107 i‡(
	`QNAP_LOG_USRLOG_IS_ON
()) { \

108 
pq«p_log
->
	`log_func
(
Lvl
, 
__FILE__
, 
__LINE__
, 
__func__
, 
Fmt
, ##
Arg
); \

109 } i‡(
	`QNAP_LOG_SYSLOG_IS_ON
()) { \

110 
	`sy¶og
((
SYSLOG_FACILITY
| (
Lvl
)), "%c[%sm%s: %d: %s():" 
Fmt
 "%c[%dm\n",\

111 
COLOR_ESCAPE
, (
Cﬁ‹
), 
__FILE__
, 
__LINE__
, 
__func__
, ##
Arg
, \

112 
COLOR_ESCAPE
, 
COLOR_RESET
); \

114 
	`Ârötf
(
pq«p_log
->
log_Â
, "%c[%sm%s: %s: %d: %s(): " 
Fmt
 "%c[%dm\n", \

115 
COLOR_ESCAPE
, (
Cﬁ‹
), 
	`q«p_log_now_to_°r
(), 
__FILE__
, 
__LINE__
, 
__func__
, ##
Arg
, \

116 
COLOR_ESCAPE
, 
COLOR_RESET
); \

117 
	`fÊush
(
pq«p_log
->
log_Â
); \

119 }

	)

121 
	#QNAP_LOG_RAW
(
Lvl
, 
Cﬁ‹
, 
Fmt
, 
Arg
...) \

122 i‡(
	`QNAP_LOG_LEVEL_IS_ALLOWED
((
Lvl
))) { \

123 i‡(
	`QNAP_LOG_USRLOG_IS_ON
()) { \

124 
pq«p_log
->
	`log_func
(
Lvl
, 
__FILE__
, 
__LINE__
, 
__func__
, 
Fmt
, ##
Arg
); \

125 } i‡(
	`QNAP_LOG_SYSLOG_IS_ON
()) { \

126 
	`sy¶og
((
SYSLOG_FACILITY
| (
Lvl
)), "%c[%sm" 
Fmt
 "%c[%dm", \

127 
COLOR_ESCAPE
, (
Cﬁ‹
), ##
Arg
, COLOR_ESCAPE, 
COLOR_RESET
); \

129 
	`Ârötf
(
pq«p_log
->
log_Â
, "%c[%sm" 
Fmt
 "%c[%dm", \

130 
COLOR_ESCAPE
, (
Cﬁ‹
), ##
Arg
, COLOR_ESCAPE, 
COLOR_RESET
); \

131 
	`fÊush
(
pq«p_log
->
log_Â
); \

133 }

	)

135 
	#QNAP_LOG
(
Lvl
, 
Cﬁ‹
, 
Fmt
, 
Arg
...) \

136 i‡(
	`QNAP_LOG_LEVEL_IS_ALLOWED
((
Lvl
))) { \

137 
	`q«p_log_chk_fûe_size
(); \

138 
	`Ârötf
(
pq«p_log
->
log_Â
, "%c[%sm%s: %s: %d: %s(): " 
Fmt
 "%c[%dm", \

139 
COLOR_ESCAPE
, (
Cﬁ‹
), 
	`q«p_log_now_to_°r
(), 
__FILE__
, 
__LINE__
, 
__func__
, ##
Arg
, \

140 
COLOR_ESCAPE
, 
COLOR_RESET
); \

141 
	`fÊush
(
pq«p_log
->
log_Â
); \

142 }

	)

144 
	#QNAP_LOG_NL
(
Lvl
, 
Cﬁ‹
, 
Fmt
, ...) \

145 
	`q«p_log
(
Lvl
, 
Cﬁ‹
, 
__FILE__
, 
__LINE__
, 
__func__
, 
Fmt
, ##
__VA_ARGS__
);

	)

147 
	#QNAP_LOG_RAW
(
Lvl
, 
Cﬁ‹
, 
Fmt
, 
Arg
...) \

148 i‡(
	`QNAP_LOG_LEVEL_IS_ALLOWED
((
Lvl
))) { \

149 
	`Ârötf
(
pq«p_log
->
log_Â
, "%c[%sm" 
Fmt
 "%c[%dm", \

150 
COLOR_ESCAPE
, (
Cﬁ‹
), ##
Arg
, COLOR_ESCAPE, 
COLOR_RESET
); \

151 
	`fÊush
(
pq«p_log
->
log_Â
); \

152 }

	)

155 
	#QNAP_LOG_DATA
(
Lvl
, 
Cﬁ‹
, 
D©a
, 
Lí
) \

156 i‡(
	`QNAP_LOG_DETAIL_IS_ON
(Ë&& 
	`QNAP_LOG_LEVEL_IS_ALLOWED
((
Lvl
))) { \

157 
	`q«p_log_dump_d©a
((
Lvl
), (
Cﬁ‹
), (
D©a
), (
Lí
)); \

158 }

	)

160 
	#QNAP_LOG_NSTRING
(
Lvl
, 
Cﬁ‹
, 
D©a
, 
Lí
) \

161 i‡(
	`QNAP_LOG_DETAIL_IS_ON
(Ë&& 
	`QNAP_LOG_LEVEL_IS_ALLOWED
((
Lvl
))) { \

162 
	`q«p_log_dump_n°rög
((
Lvl
), (
Cﬁ‹
), (
D©a
), (
Lí
)); \

163 }

	)

165 
	#QNAP_LOG_EMERG
(
Fmt
, 
Arg
...) \

166 
	`QNAP_LOG
(
LOG_EMERG
, 
B_BGRED
, 
Fmt
, ##
Arg
)

	)

167 
	#QNAP_LOG_ALERT
(
Fmt
, 
Arg
...) \

168 
	`QNAP_LOG
(
LOG_ALERT
, 
B_RED
, 
Fmt
, ##
Arg
)

	)

169 
	#QNAP_LOG_CRIT
(
Fmt
, 
Arg
...) \

170 
	`QNAP_LOG
(
LOG_CRIT
, 
RED
, 
Fmt
, ##
Arg
)

	)

171 
	#QNAP_LOG_ERR
(
Fmt
, 
Arg
...) \

172 
	`QNAP_LOG
(
LOG_ERR
, 
B_MAGENTA
, 
Fmt
, ##
Arg
)

	)

173 
	#QNAP_LOG_WARN
(
Fmt
, 
Arg
...) \

174 
	`QNAP_LOG
(
LOG_WARNING
, 
B_YELLOW
, 
Fmt
, ##
Arg
)

	)

175 
	#QNAP_LOG_INFO
(
Fmt
, 
Arg
...) \

176 
	`QNAP_LOG
(
LOG_INFO
, 
B_GREEN
, 
Fmt
, ##
Arg
)

	)

177 
	#QNAP_LOG_DEBUG
(
Fmt
, 
Arg
...) \

178 
	`QNAP_LOG
(
LOG_DEBUG
, 
B_BLACK
, 
Fmt
, ##
Arg
)

	)

180 
	#QNAP_LOG_EMERG_NL
(
Fmt
, 
Arg
...) \

181 
	`QNAP_LOG_NL
(
LOG_EMERG
, 
B_BGRED
, 
Fmt
, ##
Arg
)

	)

182 
	#QNAP_LOG_ALERT_NL
(
Fmt
, 
Arg
...) \

183 
	`QNAP_LOG_NL
(
LOG_ALERT
, 
B_RED
, 
Fmt
, ##
Arg
)

	)

184 
	#QNAP_LOG_CRIT_NL
(
Fmt
, 
Arg
...) \

185 
	`QNAP_LOG_NL
(
LOG_CRIT
, 
RED
, 
Fmt
, ##
Arg
)

	)

186 
	#QNAP_LOG_ERR_NL
(
Fmt
, 
Arg
...) \

187 
	`QNAP_LOG_NL
(
LOG_ERR
, 
B_MAGENTA
, 
Fmt
, ##
Arg
)

	)

188 
	#QNAP_LOG_WARN_NL
(
Fmt
, 
Arg
...) \

189 
	`QNAP_LOG_NL
(
LOG_WARNING
, 
B_YELLOW
, 
Fmt
, ##
Arg
)

	)

190 
	#QNAP_LOG_INFO_NL
(
Fmt
, 
Arg
...) \

191 
	`QNAP_LOG_NL
(
LOG_INFO
, 
B_GREEN
, 
Fmt
, ##
Arg
)

	)

192 
	#QNAP_LOG_DEBUG_NL
(
Fmt
, 
Arg
...) \

193 
	`QNAP_LOG_NL
(
LOG_DEBUG
, 
B_BLACK
, 
Fmt
, ##
Arg
)

	)

198 
	#QNAP_LOG_DETAIL_IS_ON
(Ë(
pq«p_log
->
dëaû
 =
TRUE
)

	)

199 
	#QNAP_LOG_DETAIL_IS_OFF
(Ë(
pq«p_log
->
dëaû
 =
FALSE
)

	)

200 
	#QNAP_LOG_LEVEL_IS_ALLOWED
(
L
Ë((LË<
pq«p_log
->
Àvñ
)

	)

201 
	#QNAP_LOG_LEVEL_IS_NOT_ALLOWED
(
L
Ë((LË> 
pq«p_log
->
Àvñ
)

	)

202 
	#QNAP_LOG_SYSLOG_IS_ON
(Ë(
pq«p_log
->
sy¶og
 =
TRUE
)

	)

203 
	#QNAP_LOG_SYSLOG_IS_OFF
(Ë(
pq«p_log
->
sy¶og
 =
FALSE
)

	)

204 
	#QNAP_LOG_USRLOG_IS_ON
(Ë((
pq«p_log
->
u§log
 =
TRUE
) && \

205 (
pq«p_log
->
log_func
))

	)

206 
	#QNAP_LOG_USRLOG_IS_OFF
(Ë! 
	`QNAP_LOG_USRLOG_IS_ON
()

	)

209 
	#QNAP_LOG
(
Lvl
, 
Cﬁ‹
, 
Fmt
, 
Arg
...)

	)

210 
	#QNAP_LOG_NL
(
Lvl
, 
Cﬁ‹
, 
Fmt
, 
Arg
...)

	)

211 
	#QNAP_LOG_RAW
(
Lvl
, 
Cﬁ‹
, 
Fmt
, 
Arg
...)

	)

212 
	#QNAP_LOG_DATA
(
Lvl
, 
Cﬁ‹
, 
D©a
, 
Lí
)

	)

213 
	#QNAP_LOG_NSTRING
(
Lvl
, 
Cﬁ‹
, 
D©a
, 
Lí
)

	)

215 
	#QNAP_LOG_EMERG
(
Fmt
, 
Arg
...)

	)

216 
	#QNAP_LOG_ALERT
(
Fmt
, 
Arg
...)

	)

217 
	#QNAP_LOG_CRIT
(
Fmt
, 
Arg
...)

	)

218 
	#QNAP_LOG_ERR
(
Fmt
, 
Arg
...)

	)

219 
	#QNAP_LOG_WARN
(
Fmt
, 
Arg
...)

	)

220 
	#QNAP_LOG_INFO
(
Fmt
, 
Arg
...)

	)

221 
	#QNAP_LOG_DEBUG
(
Fmt
, 
Arg
...)

	)

223 
	#QNAP_LOG_EMERG_NL
(
Fmt
, 
Arg
...)

	)

224 
	#QNAP_LOG_ALERT_NL
(
Fmt
, 
Arg
...)

	)

225 
	#QNAP_LOG_CRIT_NL
(
Fmt
, 
Arg
...)

	)

226 
	#QNAP_LOG_ERR_NL
(
Fmt
, 
Arg
...)

	)

227 
	#QNAP_LOG_WARN_NL
(
Fmt
, 
Arg
...)

	)

228 
	#QNAP_LOG_INFO_NL
(
Fmt
, 
Arg
...)

	)

229 
	#QNAP_LOG_DEBUG_NL
(
Fmt
, 
Arg
...)

	)

231 
	#QNAP_LOG_DETAIL_IS_ON
(Ë
FALSE


	)

232 
	#QNAP_LOG_DETAIL_IS_OFF
(Ë
TRUE


	)

233 
	#QNAP_LOG_LEVEL_IS_ALLOWED
(
L
Ë
FALSE


	)

234 
	#QNAP_LOG_LEVEL_IS_NOT_ALLOWED
(
L
Ë
TRUE


	)

235 
	#QNAP_LOG_SYSLOG_IS_ON
(Ë
FALSE


	)

236 
	#QNAP_LOG_SYSLOG_IS_OFF
(Ë
TRUE


	)

237 
	#QNAP_LOG_USRLOG_IS_ON
(Ë
FALSE


	)

238 
	#QNAP_LOG_USRLOG_IS_OFF
(Ë
TRUE


	)

244 
	#QNAP_LOG_SET_LEVEL
(
L
Ë(
pq«p_log
->
Àvñ
 = (L))

	)

246 
	#QNAP_LOG_SET_USRLOG
(Ë(
pq«p_log
->
u§log
 = 
TRUE
)

	)

247 
	#QNAP_LOG_CLR_USRLOG
(Ë(
pq«p_log
->
u§log
 = 
FALSE
)

	)

249 
	#QNAP_LOG_SET_SYSLOG
(Ë(
pq«p_log
->
sy¶og
 = 
TRUE
)

	)

250 
	#QNAP_LOG_CLR_SYSLOG
(Ë(
pq«p_log
->
sy¶og
 = 
FALSE
)

	)

252 
	#QNAP_LOG_SET_DETAIL
(Ë(
pq«p_log
->
dëaû
 = 
TRUE
)

	)

253 
	#QNAP_LOG_CLR_DETAIL
(Ë(
pq«p_log
->
dëaû
 = 
FALSE
)

	)

255 
	#QNAP_LOG_SET_LOG_FUNC
(
F
Ë(
pq«p_log
->
log_func
 = (F))

	)

256 
	#QNAP_LOG_CLR_LOG_FUNC
(Ë(
pq«p_log
->
log_func
 = 
NULL
)

	)

258 
	#QNAP_LOG_SET_SVR_CB
(
C
Ë(
pq«p_log
->
svr_cb
 = (C))

	)

259 
	#QNAP_LOG_GET_SVR_CB
(Ë(
pq«p_log
->
svr_cb
)

	)

261 
	#QNAP_LOG_LEVEL_IS_VALID
(
L
Ë((LË>
LOG_EMERG
 && \

262 (
L
Ë<
LOG_DEBUG
)

	)

263 
	#QNAP_LOG_LEVEL_IS_INVALID
(
L
Ë! 
	`QNAP_LOG_LEVEL_IS_VALID
(L)

	)

268 
QNAP_LOG_T
 *
pq«p_log
;

270 #ifde‡
__˝lu•lus


277 
q«p_log_öô_£âög
(
QNAP_LOG_T
 *
log_cb
);

278 
q«p_log_öô
(*
idít
, *
svr_cb
,

279 (*
log_func
)(
Àvñ
, c⁄° *
fûe
,

280 
löe
, c⁄° *
func
,

281 *
fmt
, ...));

282 
q«p_log_to_fûe
(c⁄° * 
fûe_«me
);

283 
q«p_log_chk_fûe_size
();

284 
q«p_log_˛ónup
();

285 
q«p_log_dump_d©a
(
Àvñ
, *
cﬁ‹
, *
d©a
,

286 
ssize_t
 
Àn
);

287 
q«p_log_dump_n°rög
(
Àvñ
, *
cﬁ‹
, *
d©a
,

288 
ssize_t
 
Àn
);

289 * 
q«p_log_now_to_°r
();

291 
q«p_log
(
Àvñ
, *
cﬁ‹
, *
fûe
, 
löe
, c⁄° *
fun˘i⁄
, c⁄° *
fmt
,...);

293 #ifde‡
__˝lu•lus


	@libs/utils/include/qcloud_util.h

8 #i‚de‡
QCLOUD_UTIL_H_


9 
	#QCLOUD_UTIL_H_


	)

11 #ifde‡
__˝lu•lus


15 
	#QCLOUD_HOST_LEN
 (256)

	)

16 
	#SERVICE_NAME_LEN
 (32)

	)

21 
	#QCLOUD_SERVC_WWW_QCLOUD_STR
 "www.q˛oud"

	)

23 
	#QCLOUD_SERVC_WWW_QID_STR
 "www"

	)

25 
	#QCLODU_SERVC_WWW_START_STR
 "°¨t"

	)

27 
	#QCLOUD_SERVC_API_QID_STR
 "qid"

	)

29 
	#QCLOUD_SERVC_API_MCN_STR
 "m˙"

	)

31 
	#QCLOUD_SERVC_API_QCLOUD_STR
 "c‹e"

	)

33 
	#QCLOUD_SERVC_API_QPKG_STR
 "qpkg"

	)

35 
	#QCLOUD_SERVC_API_USHER_STR
 "ushî"

	)

37 
	#QCLOUD_SERVC_API_DDNS_STR
 "ddns"

	)

39 
	#QCLOUD_SERVC_API_QSTART_STR
 "qßpi"

	)

41 
	#QCLOUD_SERVC_API_QSOCIAL_STR
 "qsocül"

	)

43 
	#QCLOUD_SERVC_API_DEVICE_STR
 "devi˚"

	)

46 
	e_q˛oud_£rvc_e
{

47 
QCLOUD_SERVC_START
 = 0,

48 
QCLOUD_SERVC_WWW_QCLOUD
 = 
QCLOUD_SERVC_START
,

49 
QCLODU_SERVC_WWW_QID
,

50 
QCLODU_SERVC_WWW_START
,

51 
QCLODU_SERVC_API_QID
,

52 
QCLODU_SERVC_API_MCN
,

53 
QCLODU_SERVC_CORE
,

54 
QCLODU_SERVC_QPKG
,

55 
QCLODU_SERVC_USHER
,

56 
QCLOUD_SERVC_DDNS
,

57 
QCLOUD_SERVC_QSTART
,

58 
QCLOUD_SERVC_QSOCIAL
,

59 
QCLOUD_SERVC_DEVICE
,

60 
QCLOUD_SERVC_END


61 }
	tQCLOUD_SERVC_E
;

78 
q˛oud_utû_gë_ho°
(* 
£rvi˚_«me
, *
£rvî_ho°
);

84 
q˛oud_utû_show_buûd_ty≥
();

85 #ifde‡
__˝lu•lus


	@libs/utils/include/sha1.h

28 #i‚de‡
_SHA1_H


29 
	#_SHA1_H


	)

31 #ifde‡
__˝lu•lus


35 
	#SHA1_SUM_POS
 -0x20

	)

36 
	#SHA1_SUM_LEN
 20

	)

43 
tŸÆ
[2];

44 
°©e
[5];

45 
buf„r
[64];

47 
	tsha1_c⁄ãxt
;

54 
sha1_°¨ts
–
sha1_c⁄ãxt
 *
˘x
 );

63 
sha1_upd©e
–
sha1_c⁄ãxt
 *
˘x
, *
öput
, 
ûí
 );

71 
sha1_föish
–
sha1_c⁄ãxt
 *
˘x
, 
ouçut
[20] );

80 
sha1_csum
–*
öput
, 
ûí
,

81 
ouçut
[20] );

91 
sha1_csum_wd
 (*
öput
, 
ûí
,

92 
ouçut
[20], 
chunk_sz
);

101 
sha1_fûe
–*
∑th
, 
ouçut
[20] );

112 
sha1_hmac
–*
key
, 
keyÀn
,

113 *
öput
, 
ûí
,

114 
ouçut
[20] );

121 
sha1_£lf_ã°
( );

123 #ifde‡
__˝lu•lus


	@libs/utils/include/std_hdr.h

8 #i‚de‡
STD_HDR_H_


9 
	#STD_HDR_H_


	)

11 
	~<°dio.h
>

12 
	~<°rög.h
>

13 
	~<°dlib.h
>

14 
	~<uni°d.h
>

15 
	~<°döt.h
>

16 
	~<î∫o.h
>

	@libs/utils/include/util.h

5 #i‚de‡
__UTIL_H__


6 
	#__UTIL_H__


	)

9 
	~<°döt.h
>

10 
	~<√töë/ö.h
>

12 
	~"c⁄°.h
"

18 
	#OFFSET
(
T
, 
F
Ë(
size_t
)(&(((T *)0)->F))

	)

19 
	#OFFSET_URL_ADDR
(Ë
	`OFFSET
(
URL_T
, 
addr_°r
)

	)

24 
	#DWORD_ALIGN
(
L
Ë((((LË+ 3Ë>> 2Ë<< 2)

	)

29 
	#BIT
(
B
Ë(1 << (B))

	)

34 
	#IP_ADDR_DISP
(
Addr
Ë
	`utû_öë_¡ﬂ
((Addr))

	)

39 
	#MAC_DISP_STR_FMT
 "[%c%c:%c%c:%c%c:%c%c:%c%c:%c%c]"

	)

40 
	#MAC_DISP_STR_DATA
(
M
) M[0], M[1], M[2], M[3], M[4], M[5], \

41 
M
[6], M[7], M[8], M[9], M[10], M[11]

	)

45 
	#MAC_DISP_HEX_FMT
 "[%02X:%02X:%02X:%02X:%02X:%02X]"

	)

46 
	#MAC_DISP_HEX_DATA
(
M
ËM[0], M[1], M[2], M[3], M[4], M[5]

	)

48 
	#MAC_DISP_COLON_FMT
 "%02X:%02X:%02X:%02X:%02X:%02X"

	)

49 
	#MAC_DISP_COLON_DATA
(
M
ËM[0], M[1], M[2], M[3], M[4], M[5]

	)

51 
	#MAC_ADDR_HEX_FMT
 "%02X%02X%02X%02X%02X%02X"

	)

52 
	#MAC_ADDR_HEX_DATA
(
M
ËM[0], M[1], M[2], M[3], M[4], M[5]

	)

59 
	#HEX_CHAR_VAL
(
C
) (((C) >= 'a') ? ((C)-'a'+10) : \

60 (((
C
)>'A'Ë? ((C)-'A'+10Ë: ((C)-'0')))

	)

61 
	#HEX_VAL_CHAR
(
V
Ë(((VË>10Ë? ((V)-10+'A'Ë: ((V)+'0'))

	)

63 
	#MAC_ADDR_CONV2STR
(
S
, 
A
) \

65 
_i
, 
_j
; \

67 
_i
 = 
_j
 = 0; _ò< 
ETHER_ADDR_LEN
; _i++) { \

68 
S
[
_j
++] = 
	`HEX_VAL_CHAR
(
A
[
_i
] >> 4); \

69 
S
[
_j
++] = 
	`HEX_VAL_CHAR
(
A
[
_i
] & 0x0F); \

71 
S
[
_j
] = '\0'; \

72 } 0)

	)

74 
	#MAC_ADDR_CONV2HEX
(
A
, 
S
) \

76 
_i
, 
_j
; \

78 
_i
 = 
_j
 = 0; _ò< 
ETHER_ADDR_LEN
; _i++, _j += 2) { \

79 
A
[
_i
] = 
	`HEX_CHAR_VAL
(
S
[
_j
]) << 4 | HEX_CHAR_VAL(S[_j+1]); \

81 } 0)

	)

86 
	#MAC_ADDR_COPY
(
D
, 
S
Ë(
	`mem˝y
((D), (S), 
ETHER_ADDR_LEN
))

	)

87 
	#MAC_ADDR_COPY_WITH_NULL
(
D
, 
S
) \

89 
	`mem˝y
((
D
), (
S
), 
ETHER_ADDR_LEN
); \

90 (
D
)[
ETHER_ADDR_LEN
] = '\0'; \

91 } 0)

	)

92 
	#SAME_MAC_ADDR
(
A
, 
B
Ë(
	`memcmp
((A), (B), 
ETHER_ADDR_LEN
Ë=0)

	)

94 
	#MYID_COPY
(
D
, 
S
Ë(
	`mem˝y
((D), (S), 
MYID_LEN
))

	)

95 
	#SAME_MYID
(
A
, 
B
Ë(
	`memcmp
((A), (B), 
MYID_LEN
Ë=0)

	)

100 
	#NEXT_INDEX
(
I
, 
T
Ë((((IË+ 1Ë=(T)Ë? 0 : ((IË+ 1))

	)

105 
	#PAIR_KEY_LEN
 (64)

	)

106 
	#PAIR_VALUE_LEN
 (1024)

	)

107 
	#PAIR_GET_KEY
(
NF
, 
ID
ËNF[ID].
key


	)

108 
	#PAIR_GET_VALUE
(
NF
, 
ID
ËNF[ID].
vÆue


	)

113 
	#UTIL_DEF_NONE
 0

114 
	#UTIL_DEF_BOOL
 1

115 
	#UTIL_DEF_INT
 2

116 
	#UTIL_DEF_STR
 3

117 
	#UTIL_DATA_RANGE
 4

118 

	)

119 
	s_key_∑ú
{

120 
	mkey
[
PAIR_KEY_LEN
+1];

121 
	mvÆue
[
PAIR_VALUE_LEN
+1];

122 }
	tkey_∑ú_°
;

124 
	#NUM_KEY_PAIR
(
li°
Ë(÷i°)/(
key_∑ú_°
))

	)

126 
	#DELIM_AND
 "&"

	)

127 
	#DELIM_EQU
 "="

	)

129 
	#PRINT_CGI_RESP
(
Fmt
, 
Arg
...Ë
	`Ârötf
(
°dout
, Fmt, ##Arg)

	)

130 
	#INSERT_HEADER_TERM
(Ë
	`PRINT_CGI_RESP
("\r\n");

	)

132 
	s_utû_ußge_°
 {

133 *
	mcmd_›t
;

134 *
	mhñp_°r
;

135 
	mty≥
;

136 
	mfûÀr
;

139 
	mdef_vÆue
;

140 *
	mdef_°rög
;

142 
	mmö_vÆue
;

143 
	mmax_vÆue
;

144 
	mdef_vÆue
;

145 } 
	mønge
;

146 } 
	m∑øm
;

147 } 
	tUTIL_USAGE_T
;

152 
	s_uæ_°
 {

153 
	mho°_«me
[
DWORD_ALIGN
(
URL_STR_LEN
 + 1)];

154 
	mp‹t
;

155 *
	m∑th
;

156 
	maddr_°r
[
DWORD_ALIGN
(
URL_STR_LEN
 + 1)];

157 
ö_addr_t
 
	mù_addr
;

158 } 
	tURL_T
;

166 #ifde‡
__˝lu•lus


173 
utû_ª¶ove_ho°
(
sockaddr_ö
 *
addr
, 
URL_T
 *
£rv_uæ
);

174 
utû_£tup_sig«l
(
signo
, (*
sig«l_func
)());

175 *
utû_gë_d´m⁄_«me
(*
¥og_«me
);

176 
utû_show_vîsi⁄
(*
ªÀa£_vî
, *
sour˚_vî
,

177 *
buûd_time
);

178 
utû_show_ußge
(*
d´m⁄_«me
,

179 
UTIL_USAGE_T
 *
›t_hñp_tbl
,

180 
size_t
 
›t_hñp_tbl_size
);

181 
utû_vîify_mac
(*
mac_°r
, 
uöt8_t
 *
mac_addr
);

182 
utû_°r_to_uµî
(*
d°_°r
, *
§c_°r
, 
Àn
);

183 
utû_ªad_°rög
(*
°r
, *
°r_ßve
, *
∑øm_«me
,

184 
size_t
 
max_Àn
);

185 
utû_°rù_mac
(*
§c_mac
, *
d°_mac
);

186 
utû_ªad_öãgî
(*
öt_°r
, *
öt_vÆ
, 
mö_vÆ
,

187 
max_vÆ
);

188 
utû_ªad_mac_°r
(*
mac_°r
, *
mac_°r_ßve
,

189 
uöt8_t
 *
mac_addr
);

190 
utû_ªad_ùv4_°r
(*
ù_°r
, *
ù_°r_ßve
,

191 
ö_addr_t
 *
ù_addr
, 
¥öt_îr
);

192 
utû_ªad_ùv4_p‹t_li°
(*
ù_p‹t_°r
,

193 
URL_T
 *
ù_li°
, 
max_num
,

194 
def_p‹t
, *
cou¡
,

195 
ù_dŸãd_⁄ly
);

196 
utû_ªad_domaö_p‹t_°r
(* 
domaö_p‹t_°r
, *
domaö_°r_ßve
,

197 
uöt16_t
 *
p‹t
, 
def_p‹t
, 
¥öt_îr
);

198 *
utû_åim
(*
°r
, 
Àadög_⁄ly
);

199 *
utû_åim_quŸes
(*
°r
);

200 
FILE
 *
utû_›í_fûe
(*
fûe_«me
, *
mode
);

201 
utû_˛o£_fûe
(
FILE
 *
Â
);

202 *
utû_öë_¡ﬂ
(
uöt32_t
 
ù_addr
);

203 
utû_°rù
(*
s
);

204 
utû_sy°em_cmd
(*
cmd_buff
, *
d©a_buff
, 
size_t
 
d©a_buff_Àn
);

205 
utû_c⁄vît_hex_to_ch¨
–
uöt8_t
 *
hex
, 
size_t
 
hex_Àn
,

206 *
°r_buff
, 
size_t
 
buff_Àn
);

207 
utû_c⁄vît_ch¨_to_hex
(*
°r
, 
size_t
 
°r_Àn
,

208 
uöt8_t
 *
hex_buff
 );

209 
utû_d´m⁄ize
();

210 
utû_∑r£_quîy_°rög
(*
öput_°rög
, 
key_∑ú_°
 *
fõlds
);

211 *
utû_uæ_ícode
(*
°r
);

212 *
utû_uæ_decode
(*
°r
);

213 * 
utû_cgi_gë_öput
();

214 
utû_cgi_∑r£_öput
(
key_∑ú_°
 *
öput_fõlds
);

215 
utû_key_∑ú_li°_ôems
(
key_∑ú_°
 *
öput_fõlds
);

216 
utû_cgi_¥öt_ªsu…
(
key_∑ú_°
 *
ouçut_fõlds
);

217 
utû_is_vÆid_ùv4
(*
ù_°r
);

218 
utû_is_public_ù
(* 
öput_ù
);

219 
utû_ªad_fûe_to_°rög
(* 
fûíame
,** 
ouçut
, 
size_t
* 
°rög_size
);

220 
utû_auth_tokí_vÆid©‹
(* 
°r
, 
size_t
 
Àn
);

221 
utû_c⁄vît_to_utc_iso8601
(
time_t
 
timî
, * 
ouçut_°r
);

222 
utû_gë_vÆue_by_key
(* 
öput
,* 
key
, *
vÆue
, 
size_t
 
vÆue_size
);

223 
utû_c⁄vît_iso8601
(c⁄° *
time_°rög
, 
ts_Àn
, 
tm
 *
tm_d©a
);

225 
	#QNAP_SYSTEM_EVENT_INFO
 0

	)

226 
	#QNAP_SYSTEM_EVENT_WARN
 1

	)

227 
	#QNAP_SYSTEM_EVENT_ERROR
 2

	)

229 
	#UTIL_QNAP_SEND_SYSTEM_EVENT
(
Lv
, 
Fmt
, 
Arg
...)do{ \

230 
msg
[256]; \

231 
ª•
[
TMP_BUFF_LEN
+1]; \

232 
	`¢¥ötf
(
msg
, (msg), \

233 "LD_LIBRARY_PATH=/u§:/u§/lib /sbö/log_toﬁ -à%d -®\"" 
Fmt
 "\"", 
Lv
, ##
Arg
);\

234 
	`utû_sy°em_cmd
(
msg
, 
ª•
, 
TMP_BUFF_LEN
); \

235 }0)

	)

237 #ifde‡
__˝lu•lus


	@libs/utils/include/util_aes.h

8 #i‚de‡
UTIL_AES_H_


9 
	#UTIL_AES_H_


	)

11 
	~<›ís¶/evp.h
>

13 #ifde‡
__˝lu•lus


21 
utû_´s_öô
–*
key_d©a
, 
key_d©a_Àn
, *
ß…
,

22 
EVP_CIPHER_CTX
 *
e_˘x
, EVP_CIPHER_CTX *
d_˘x
);

27 
utû_´s_˛ón_up
(
EVP_CIPHER_CTX
 *
e
);

33 *
utû_´s_í¸y±
(
EVP_CIPHER_CTX
 *
e
, *
∂aöãxt
, *
Àn
);

38 *
utû_´s_de¸y±
(
EVP_CIPHER_CTX
 *
e
, *
cùhîãxt
, *
Àn
);

40 
utû_´s_de¸y±_°r
(
EVP_CIPHER_CTX
 *
´s_dec_˘x
, *
°r_buff
,

41 
size_t
 
buff_size
);

43 * 
utû_´s_í¸y±_°r
(
EVP_CIPHER_CTX
 *
´s_íc_˘x
, *
§c
);

45 #ifde‡
__˝lu•lus


	@libs/utils/log.c

6 
	~"°d_hdr.h
"

7 
	~<sy¶og.h
>

8 
	~<˘y≥.h
>

9 
	~<sys/°©.h
>

10 
	~<°d¨g.h
>

12 
	~"comm_hdr.h
"

14 
	#IS_LOG_TO_FILE
(
Â
Ë((
	`fûío
((Â)))>
STDERR_FILENO
)

	)

20 
QNAP_LOG_T
 *
	gpq«p_log
 = 
NULL
;

33 
	$q«p_log_öô_£âög
 (
QNAP_LOG_T
 *
log_cb
)

38 if(!
pq«p_log
){

42 
	`mem£t
(
log_cb
, 0, (
QNAP_LOG_T
));

43 if(
log_cb
->
Àvñ
 == 0){

44 
log_cb
->
Àvñ
 = 
LOG_ERR
;

47 
log_cb
->
log_Â
 = 
°dîr
;

48 
pq«p_log
 = 
log_cb
;

51 
	}
}

66 
q«p_log_öô
 (*
idít
, *
svr_cb
,

67 (*
log_func
)(
Àvñ
, c⁄° *
fûe
, 
löe
,

68 c⁄° *
func
, *
fmt
, ...))

70 
	`QNAP_LOG_SET_LOG_FUNC
(
log_func
);

71 
	`QNAP_LOG_SET_SVR_CB
(
svr_cb
);

73 i‡(
	`QNAP_LOG_SYSLOG_IS_ON
()) {

74 
	`›ílog
(
idít
, 
SYSLOG_OPTION
, 
SYSLOG_FACILITY
);

77 (
QNAP_NO_ERROR
);

78 
	}
}

88 
	$q«p_log_to_fûe
(c⁄° * 
fûe_«me
)

90 i‡(!
fûe_«me
 || !
	`°æí
(file_name))

93 if((
pq«p_log
->
log_Â
Ë&& 
	`IS_LOG_TO_FILE
(pqnap_log->log_fp)){

94 
	`f˛o£
(
pq«p_log
->
log_Â
);

95 
pq«p_log
->
log_Â
 = 
NULL
;

98 if(
pq«p_log
->
log_fûe_«me
){

99 
	`‰ì
(
pq«p_log
->
log_fûe_«me
);

102 
pq«p_log
->
log_Â
 = 
	`f›í
(
fûe_«me
, "a");

104 if(
pq«p_log
->
log_Â
){

108 
	`chmod
(
fûe_«me
, 0600);

109 
pq«p_log
->
log_fûe_«me
 = 
	`ˇŒoc
(1, 
	`°æí
(
fûe_«me
)+1);

110 
	`°r˝y
(
pq«p_log
->
log_fûe_«me
, 
fûe_«me
);

112 
pq«p_log
->
log_Â
 = 
°dîr
;

115 
	}
}

125 
	$q«p_log_chk_fûe_size
()

127 if(
pq«p_log
->
log_Â
 && 
	`IS_LOG_TO_FILE
(pqnap_log->log_fp) &&

128 
pq«p_log
->
log_fûe_«me
){

129 
°©
 
°©buf
;

130 
ªs
 = -1;

131 
ªs
 = 
	`l°©
(
pq«p_log
->
log_fûe_«me
, &
°©buf
);

132 if(
ªs
 =0 && (
°©buf
.
°_size
 > 
MAXLOGFILESIZE
)){

133 
	`f˛o£
(
pq«p_log
->
log_Â
);

136 
pq«p_log
->
log_Â
 = 
	`f›í
’q«p_log->
log_fûe_«me
, "w");

138 
	`Ârötf
(
pq«p_log
->
log_Â
, "%c[%sm%s: %s: %d: %s():ÜogÑestart %c[%dm\n",

139 
COLOR_ESCAPE
, 
B_GREEN
, 
	`q«p_log_now_to_°r
(), 
__FILE__
, 
__LINE__
,

140 
__func__
, 
COLOR_ESCAPE
, 
COLOR_RESET
);

141 
	`fÊush
(
pq«p_log
->
log_Â
);

144 
	}
}

155 
	$q«p_log_˛ónup
 ()

158 if(!
pq«p_log
){

162 i‡(
	`QNAP_LOG_SYSLOG_IS_ON
()) {

163 
	`˛o£log
();

166 if((
pq«p_log
->
log_Â
Ë&& 
	`IS_LOG_TO_FILE
(pqnap_log->log_fp)){

167 
	`f˛o£
(
pq«p_log
->
log_Â
);

168 
pq«p_log
->
log_Â
 = 
NULL
;

171 if(
pq«p_log
->
log_fûe_«me
){

172 
	`‰ì
(
pq«p_log
->
log_fûe_«me
);

175 
pq«p_log
 = 
NULL
;

176 
	}
}

193 
	$q«p_log_dump_d©a
 (
Àvñ
, *
cﬁ‹
, *
d©a
, 
ssize_t
 
Àn
)

195 
uöt8_t
 *
ud
 = (uöt8_à*)
d©a
;

196 
ouçut
[
	`DWORD_ALIGN
(
SYSLOG_BUFF_LEN
)], *
out
;

197 
ssize_t
 
i
;

199 
Àn
 > 0) {

203 
	`mem£t
(
ouçut
, ' ', (output));

204 
out
 = &
ouçut
[2];

209 
i
 = 0; (ò< 
Àn
) && (i < 16); i++) {

210 
out
 +
	`•rötf
(out, "%02X ", 
ud
[
i
]);

211 i‡(
i
 == 7) {

216 *
out
++ = ' ';

219 *
out
 = ' ';

225 
out
 = &
ouçut
[51];

226 
i
 = 0; i < 3; i++) {

227 *
out
++ = ' ';

230 
out
++;

235 
i
 = 0; (ò< 
Àn
) && (i < 16); i++) {

236 *
out
++ = 
	`i•röt
(
ud
[
i
]) ? ud[i] : '.';

237 i‡(
i
 == 7) {

238 
out
++;

241 *
out
++ = '\0';

246 
	`QNAP_LOG_RAW
(
Àvñ
, 
cﬁ‹
, "%s\n", 
ouçut
);

251 
ud
 += 16;

252 
Àn
 -= 16;

254 
	}
}

271 
	$q«p_log_dump_n°rög
 (
Àvñ
, *
cﬁ‹
, *
d©a
, 
ssize_t
 
Àn
)

273 
ouçut
[
	`DWORD_ALIGN
(
SYSLOG_BUFF_LEN
 + 1)];

274 *
d©a_±r
 = (*)
d©a
;

280 i‡(*(
d©a_±r
 + 
Àn
) == '\0') {

281 
	`QNAP_LOG_RAW
(
Àvñ
, 
cﬁ‹
, "%s", 
d©a_±r
);

288 
ouçut
[
SYSLOG_BUFF_LEN
] = '\0';

293 
Àn
 >
SYSLOG_BUFF_LEN
) {

294 
	`°∫˝y
(
ouçut
, 
d©a_±r
, 
SYSLOG_BUFF_LEN
);

295 
	`QNAP_LOG_RAW
(
Àvñ
, 
cﬁ‹
, "%s", 
ouçut
);

296 
Àn
 -
SYSLOG_BUFF_LEN
;

297 
d©a_±r
 +
SYSLOG_BUFF_LEN
;

303 i‡(
Àn
 > 0) {

304 
	`°∫˝y
(
ouçut
, 
d©a_±r
, 
Àn
);

305 
ouçut
[
Àn
] = '\0';

306 
	`QNAP_LOG_RAW
(
Àvñ
, 
cﬁ‹
, "%s", 
ouçut
);

308 
	}
}

318 * 
	$q«p_log_now_to_°r
()

320 
time_t
 
now
;

321 
tm
* 
loˇ ow
;

322 
hdr_d©e
[25] = "";

324 
	`time
(&
now
);

325 
loˇ ow
 = 
	`loˇ…ime
(&
now
);

327 
	`°r·ime
(
hdr_d©e
, 24, "%D %T", 
loˇ ow
);

329  
hdr_d©e
;

330 
	}
}

332 
	$q«p_log
(
Àvñ
, *
cﬁ‹
, *
fûe
, 
löe
, c⁄° *
fun˘i⁄
, c⁄° *
fmt
,...)

334 i‡(
	`QNAP_LOG_LEVEL_IS_ALLOWED
((
Àvñ
))) {

335 
va_li°
 
¨gs
;

336 
	`va_°¨t
(
¨gs
, 
fmt
);

337 
	`q«p_log_chk_fûe_size
();

338 
	`Ârötf
(
pq«p_log
->
log_Â
, "%c[%sm%s: %s: %d: %s():" ,

339 
COLOR_ESCAPE
, 
cﬁ‹
, 
	`q«p_log_now_to_°r
(), 
fûe
, 
löe
, 
fun˘i⁄
);

340 
	`vÂrötf
(
pq«p_log
->
log_Â
, 
fmt
, 
¨gs
);

341 
	`Ârötf
(
pq«p_log
->
log_Â
, "%c[%dm\n", 
COLOR_ESCAPE
, 
COLOR_RESET
);

342 
	`va_íd
(
¨gs
);

343 
	`fÊush
(
pq«p_log
->
log_Â
);

345 
	}
}

	@libs/utils/qcloud_util.c

7 
	~<sys/°©.h
>

8 
	~"°d_hdr.h
"

9 
	~"comm_hdr.h
"

10 
	~"q˛oud_utû.h
"

12 
	#HOST_FMT
 "%s.%smyq«p˛oud.com"

	)

13 
	#QNAP_HOST_FMT
 "%s.%sq«p.com"

	)

14 
	#QCLOUD_API_HOST_FMT
 "%s.≠i.%smyq«p˛oud.com"

	)

15 
	#QCLOUD_HOST_FMT
 "%smyq«p˛oud.com"

	)

17 
	#QCLOUD_SERVER_PREFIX
(
i
Ë
£rvî_öfo
[i].
ho°_¥efix


	)

18 
	#QCLOUD_SERVER_TAG
(
i
Ë
£rvî_öfo
[i].
èg


	)

19 
	#QCLOUD_IS_PROD_SITE
(
S
Ë(S[0] ='\0')

	)

20 
	#QCLOUD_SEVC_NAME
(
I
Ë
£rvi˚_«me_li°
[I]

	)

22 *
	g£rvi˚_«me_li°
[] =

24 
QCLOUD_SERVC_WWW_QCLOUD_STR
,

25 
QCLOUD_SERVC_WWW_QID_STR
,

26 
QCLODU_SERVC_WWW_START_STR
,

27 
QCLOUD_SERVC_API_QID_STR
,

28 
QCLOUD_SERVC_API_MCN_STR
,

29 
QCLOUD_SERVC_API_QCLOUD_STR
,

30 
QCLOUD_SERVC_API_QPKG_STR
,

31 
QCLOUD_SERVC_API_USHER_STR
,

32 
QCLOUD_SERVC_API_DDNS_STR
,

33 
QCLOUD_SERVC_API_QSTART_STR
,

34 
QCLOUD_SERVC_API_QSOCIAL_STR
,

35 
QCLOUD_SERVC_API_DEVICE_STR
,

39 
	s_q˛oudd_£rvî_öfo_°
{

40 
	mèg
[45];

41 
	mho°_¥efix
[32];

42 }
	tq˛oudd_£rvî_öfo_°
;

44 
q˛oudd_£rvî_öfo_°
 
	g£rvî_öfo
[] = {

45 #ifde‡
PRODUCTION


55 
	$check_£rvi˚_«me
(*
£rvi˚_«me
){

56 
i
 = 0;

57 ; 
£rvi˚_«me_li°
[
i
] != '\0'; i++){

58 if–0 =
	`°∫ˇ£cmp
(
£rvi˚_«me
, 
£rvi˚_«me_li°
[
i
], 
SERVICE_NAME_LEN
)){

59  
i
;

63 
	}
}

65 * 
	$check_£rvî_ho°
(){

66 *
pch_sôe
;

67 
°©
 
°s
;

68 
i
 = 0;

69 
check_∑th
[
QCLOUD_HOST_LEN
+1];

71 ; 
	`QCLOUD_SERVER_TAG
(
i
) != '\0'; i++){

72 
	`¢¥ötf
(
check_∑th
, 
QCLOUD_HOST_LEN
, "/v¨/%s", 
	`QCLOUD_SERVER_TAG
(
i
));

73 i‡((
	`°©
 (
check_∑th
, &
°s
)) == 0){

77 
pch_sôe
 = 
	`QCLOUD_SERVER_PREFIX
(
i
);

78  
pch_sôe
;

79 
	}
}

81 
	ggë_qid_comm⁄
[] = {"/bin/cat /tmp/qcloud_%s"};

82 
	#GET_QID_SERVER_HOST
 "HOST"

	)

83 
	#GET_QID_SERVER_HOST_PORT
 "QID_HOST_PORT"

	)

84 
	#GET_USHR_SERVER_HOST_PORT
 "USHER_HOST_PORT"

	)

85 
	#GET_QID_DEVICE_NAME
 "DEVICE NAME"

	)

87 
	$q˛oud_utû_gë_c⁄fig_sôe
(* 
uæ
, 
£rvc_id
)

89 
cmd
[
QCLOUD_HOST_LEN
+1];

90 
loˇl_uæ
[
QCLOUD_HOST_LEN
+1];

91 
p‹t
[
QCLOUD_HOST_LEN
+1];

93 
	`¢¥ötf
(
cmd
, 
QCLOUD_HOST_LEN
, 
gë_qid_comm⁄
, 
GET_QID_SERVER_HOST
);

94 
	`utû_sy°em_cmd
(
cmd
, 
loˇl_uæ
, 
QCLOUD_HOST_LEN
);

97 
p‹t_deÁu…
[
QCLOUD_HOST_LEN
+1];

99 
£rvc_id
)

102 
QCLODU_SERVC_API_QID
:

103 
	`¢¥ötf
(
cmd
, 
QCLOUD_HOST_LEN
, 
gë_qid_comm⁄
, 
GET_QID_SERVER_HOST_PORT
);

104 
	`°r˝y
(
p‹t_deÁu…
, "443");

106 
QCLODU_SERVC_USHER
:

107 
	`¢¥ötf
(
cmd
, 
QCLOUD_HOST_LEN
, 
gë_qid_comm⁄
, 
GET_USHR_SERVER_HOST_PORT
);

108 
	`°r˝y
(
p‹t_deÁu…
, "80");

113 
	`utû_sy°em_cmd
(
cmd
, 
p‹t
, 
QCLOUD_HOST_LEN
);

116 if–
	`°æí
(
p‹t
Ë=0 ) 
	`°r˝y
’‹t, 
p‹t_deÁu…
);

118 if(
	`°æí
(
loˇl_uæ
Ë=0 || såÀn(
p‹t
) == 0){

122 
	`¢¥ötf
(
uæ
, 
QCLOUD_HOST_LEN
,"%s:%s", 
loˇl_uæ
, 
p‹t
);

126 
	}
}

128 
	$q˛oud_utû_show_buûd_ty≥
()

130 #ifde‡
PRODUCTION


131 
	`Ârötf
(
°dout
, "production\n");

133 
	`Ârötf
(
°dout
, "alpha\n");

135 
	}
}

137 
	$q˛oud_utû_gë_ho°
(*
£rvi˚_«me
, *
£rvî_ho°
)

139 *
pch_sôe
;

140 
£rvc_id
;

141 
devi˚_«me
[
NAME_LEN
+1];

142 
cmd
[
QCLOUD_HOST_LEN
+1];

143 if(!
£rvi˚_«me
 || !
£rvî_ho°
){

144 
	`Ârötf
(
°dîr
, "null inputÖarameter\n");

148 
£rvî_ho°
[0] = '\0';

153 if(-1 =(
£rvc_id
 = 
	`check_£rvi˚_«me
(
£rvi˚_«me
))){

154 
	`Ârötf
(
°dîr
, "invalidÖarameter\n");

158 
pch_sôe
 = 
	`check_£rvî_ho°
();

159 
£rvc_id
)

161 
QCLODU_SERVC_WWW_START
:

162 
QCLOUD_SERVC_QSTART
:

163 #i‚de‡
PRODUCTION


164 if(
	`QCLOUD_IS_PROD_SITE
(
pch_sôe
)){

165 
	`¢¥ötf
(
£rvî_ho°
, 
QCLOUD_HOST_LEN
, "%s.qnap.com",

166 
	`QCLOUD_SEVC_NAME
(
£rvc_id
));

168 
	`¢¥ötf
(
£rvî_ho°
, 
QCLOUD_HOST_LEN
, "alpha-%s.qnap.com",

169 
	`QCLOUD_SEVC_NAME
(
£rvc_id
));

172 
	`¢¥ötf
(
£rvî_ho°
, 
QCLOUD_HOST_LEN
, "%s.qnap.com",

173 
	`QCLOUD_SEVC_NAME
(
£rvc_id
));

176 
QCLOUD_SERVC_WWW_QCLOUD
:

177 
	`¢¥ötf
(
£rvî_ho°
, 
QCLOUD_HOST_LEN
, "www."
QCLOUD_HOST_FMT
, 
pch_sôe
);

179 
QCLODU_SERVC_WWW_QID
:

180 
	`¢¥ötf
(
£rvî_ho°
, 
QCLOUD_HOST_LEN
, 
HOST_FMT
, 
£rvi˚_«me
, 
pch_sôe
);

182 
QCLODU_SERVC_API_QID
:

183 
QCLODU_SERVC_API_MCN
:

184 
QCLODU_SERVC_CORE
:

185 
QCLODU_SERVC_QPKG
:

186 
QCLODU_SERVC_USHER
:

187 
QCLOUD_SERVC_QSOCIAL
:

188 if–
	`°rcmp
(
pch_sôe
, "dev-") == 0){

189 if–
	`q˛oud_utû_gë_c⁄fig_sôe
(
£rvî_ho°
, 
£rvc_id
) == 0){

193 
	`¢¥ötf
(
£rvî_ho°
, 
QCLOUD_HOST_LEN
, 
QCLOUD_API_HOST_FMT
, 
£rvi˚_«me
, 
pch_sôe
);

197 
	`¢¥ötf
(
£rvî_ho°
, 
QCLOUD_HOST_LEN
, 
QCLOUD_API_HOST_FMT
, 
£rvi˚_«me
, 
pch_sôe
);

200 
QCLOUD_SERVC_DEVICE
:

201 
	`mem£t
(
cmd
, 0, 
QCLOUD_HOST_LEN
);

202 
	`¢¥ötf
(
cmd
, 
QCLOUD_HOST_LEN
, 
gë_qid_comm⁄
, "\"DEVICE NAME\"");

203 
	`utû_sy°em_cmd
(
cmd
, 
devi˚_«me
, 
NAME_LEN
);

204 
	`¢¥ötf
(
£rvî_ho°
, 
QCLOUD_HOST_LEN
, 
HOST_FMT
, 
devi˚_«me
, 
pch_sôe
);

206 
QCLOUD_SERVC_DDNS
:

208 
	`¢¥ötf
(
£rvî_ho°
, 
QCLOUD_HOST_LEN
, 
QCLOUD_HOST_FMT
, 
pch_sôe
);

214 
	}
}

	@libs/utils/sha1.c

28 #i‚de‡
_CRT_SECURE_NO_DEPRECATE


29 
	#_CRT_SECURE_NO_DEPRECATE
 1

	)

32 #i‚de‡
USE_HOSTCC


34 
	~<löux/°rög.h
>

36 
	~<°rög.h
>

39 
	~"sha1.h
"

44 #i‚de‡
GET_UINT32_BE


45 
	#GET_UINT32_BE
(
n
,
b
,
i
) { \

46 (
n
Ë–(Ë(
b
)[(
i
) ] << 24 ) \

47 | ( (Ë(
b
)[(
i
) + 1] << 16 ) \

48 | ( (Ë(
b
)[(
i
) + 2] << 8 ) \

49 | ( (Ë(
b
)[(
i
) + 3] ); \

50 }

	)

52 #i‚de‡
PUT_UINT32_BE


53 
	#PUT_UINT32_BE
(
n
,
b
,
i
) { \

54 (
b
)[(
i
Ë] = (Ë–(
n
) >> 24 ); \

55 (
b
)[(
i
Ë+ 1] = (Ë–(
n
) >> 16 ); \

56 (
b
)[(
i
Ë+ 2] = (Ë–(
n
) >> 8 ); \

57 (
b
)[(
i
Ë+ 3] = (Ë–(
n
) ); \

58 }

	)

64 
	$sha1_°¨ts
 (
sha1_c⁄ãxt
 * 
˘x
)

66 
˘x
->
tŸÆ
[0] = 0;

67 
˘x
->
tŸÆ
[1] = 0;

69 
˘x
->
°©e
[0] = 0x67452301;

70 
˘x
->
°©e
[1] = 0xEFCDAB89;

71 
˘x
->
°©e
[2] = 0x98BADCFE;

72 
˘x
->
°©e
[3] = 0x10325476;

73 
˘x
->
°©e
[4] = 0xC3D2E1F0;

74 
	}
}

76 
	$sha1_¥o˚ss
 (
sha1_c⁄ãxt
 * 
˘x
, 
d©a
[64])

78 
ãmp
, 
W
[16], 
A
, 
B
, 
C
, 
D
, 
E
;

80 
	`GET_UINT32_BE
 (
W
[0], 
d©a
, 0);

81 
	`GET_UINT32_BE
 (
W
[1], 
d©a
, 4);

82 
	`GET_UINT32_BE
 (
W
[2], 
d©a
, 8);

83 
	`GET_UINT32_BE
 (
W
[3], 
d©a
, 12);

84 
	`GET_UINT32_BE
 (
W
[4], 
d©a
, 16);

85 
	`GET_UINT32_BE
 (
W
[5], 
d©a
, 20);

86 
	`GET_UINT32_BE
 (
W
[6], 
d©a
, 24);

87 
	`GET_UINT32_BE
 (
W
[7], 
d©a
, 28);

88 
	`GET_UINT32_BE
 (
W
[8], 
d©a
, 32);

89 
	`GET_UINT32_BE
 (
W
[9], 
d©a
, 36);

90 
	`GET_UINT32_BE
 (
W
[10], 
d©a
, 40);

91 
	`GET_UINT32_BE
 (
W
[11], 
d©a
, 44);

92 
	`GET_UINT32_BE
 (
W
[12], 
d©a
, 48);

93 
	`GET_UINT32_BE
 (
W
[13], 
d©a
, 52);

94 
	`GET_UINT32_BE
 (
W
[14], 
d©a
, 56);

95 
	`GET_UINT32_BE
 (
W
[15], 
d©a
, 60);

97 
	#S
(
x
,
n
Ë((x <<ÇË| ((x & 0xFFFFFFFFË>> (32 -Ç)))

	)

99 
	#R
(
t
) ( \

100 
ãmp
 = 
W
[(
t
 - 3) & 0x0F] ^ W[(t - 8) & 0x0F] ^ \

101 
W
[(
t
 - 14) & 0x0F] ^ W[Å & 0x0F], \

102 –
W
[
t
 & 0x0F] = 
	`S
(
ãmp
,1) ) \

103 )

	)

105 
	#P
(
a
,
b
,
c
,
d
,
e
,
x
) { \

106 
e
 +
	`S
(
a
,5Ë+ 
	`F
(
b
,
c
,
d
Ë+ 
K
 + 
x
; b = S(b,30); \

107 }

	)

109 
A
 = 
˘x
->
°©e
[0];

110 
B
 = 
˘x
->
°©e
[1];

111 
C
 = 
˘x
->
°©e
[2];

112 
D
 = 
˘x
->
°©e
[3];

113 
E
 = 
˘x
->
°©e
[4];

115 
	#F
(
x
,
y
,
z
Ë(z ^ (x & (y ^ z)))

	)

116 
	#K
 0x5A827999

	)

118 
	`P
 (
A
, 
B
, 
C
, 
D
, 
E
, 
W
[0]);

119 
	`P
 (
E
, 
A
, 
B
, 
C
, 
D
, 
W
[1]);

120 
	`P
 (
D
, 
E
, 
A
, 
B
, 
C
, 
W
[2]);

121 
	`P
 (
C
, 
D
, 
E
, 
A
, 
B
, 
W
[3]);

122 
	`P
 (
B
, 
C
, 
D
, 
E
, 
A
, 
W
[4]);

123 
	`P
 (
A
, 
B
, 
C
, 
D
, 
E
, 
W
[5]);

124 
	`P
 (
E
, 
A
, 
B
, 
C
, 
D
, 
W
[6]);

125 
	`P
 (
D
, 
E
, 
A
, 
B
, 
C
, 
W
[7]);

126 
	`P
 (
C
, 
D
, 
E
, 
A
, 
B
, 
W
[8]);

127 
	`P
 (
B
, 
C
, 
D
, 
E
, 
A
, 
W
[9]);

128 
	`P
 (
A
, 
B
, 
C
, 
D
, 
E
, 
W
[10]);

129 
	`P
 (
E
, 
A
, 
B
, 
C
, 
D
, 
W
[11]);

130 
	`P
 (
D
, 
E
, 
A
, 
B
, 
C
, 
W
[12]);

131 
	`P
 (
C
, 
D
, 
E
, 
A
, 
B
, 
W
[13]);

132 
	`P
 (
B
, 
C
, 
D
, 
E
, 
A
, 
W
[14]);

133 
	`P
 (
A
, 
B
, 
C
, 
D
, 
E
, 
W
[15]);

134 
	`P
 (
E
, 
A
, 
B
, 
C
, 
D
, 
	`R
 (16));

135 
	`P
 (
D
, 
E
, 
A
, 
B
, 
C
, 
	`R
 (17));

136 
	`P
 (
C
, 
D
, 
E
, 
A
, 
B
, 
	`R
 (18));

137 
	`P
 (
B
, 
C
, 
D
, 
E
, 
A
, 
	`R
 (19));

139 #unde‡
K


140 #unde‡
F


142 
	#F
(
x
,
y
,
z
Ë(x ^ y ^ z)

	)

143 
	#K
 0x6ED9EBA1

	)

145 
	`P
 (
A
, 
B
, 
C
, 
D
, 
E
, 
	`R
 (20));

146 
	`P
 (
E
, 
A
, 
B
, 
C
, 
D
, 
	`R
 (21));

147 
	`P
 (
D
, 
E
, 
A
, 
B
, 
C
, 
	`R
 (22));

148 
	`P
 (
C
, 
D
, 
E
, 
A
, 
B
, 
	`R
 (23));

149 
	`P
 (
B
, 
C
, 
D
, 
E
, 
A
, 
	`R
 (24));

150 
	`P
 (
A
, 
B
, 
C
, 
D
, 
E
, 
	`R
 (25));

151 
	`P
 (
E
, 
A
, 
B
, 
C
, 
D
, 
	`R
 (26));

152 
	`P
 (
D
, 
E
, 
A
, 
B
, 
C
, 
	`R
 (27));

153 
	`P
 (
C
, 
D
, 
E
, 
A
, 
B
, 
	`R
 (28));

154 
	`P
 (
B
, 
C
, 
D
, 
E
, 
A
, 
	`R
 (29));

155 
	`P
 (
A
, 
B
, 
C
, 
D
, 
E
, 
	`R
 (30));

156 
	`P
 (
E
, 
A
, 
B
, 
C
, 
D
, 
	`R
 (31));

157 
	`P
 (
D
, 
E
, 
A
, 
B
, 
C
, 
	`R
 (32));

158 
	`P
 (
C
, 
D
, 
E
, 
A
, 
B
, 
	`R
 (33));

159 
	`P
 (
B
, 
C
, 
D
, 
E
, 
A
, 
	`R
 (34));

160 
	`P
 (
A
, 
B
, 
C
, 
D
, 
E
, 
	`R
 (35));

161 
	`P
 (
E
, 
A
, 
B
, 
C
, 
D
, 
	`R
 (36));

162 
	`P
 (
D
, 
E
, 
A
, 
B
, 
C
, 
	`R
 (37));

163 
	`P
 (
C
, 
D
, 
E
, 
A
, 
B
, 
	`R
 (38));

164 
	`P
 (
B
, 
C
, 
D
, 
E
, 
A
, 
	`R
 (39));

166 #unde‡
K


167 #unde‡
F


169 
	#F
(
x
,
y
,
z
Ë((x & yË| (z & (x | y)))

	)

170 
	#K
 0x8F1BBCDC

	)

172 
	`P
 (
A
, 
B
, 
C
, 
D
, 
E
, 
	`R
 (40));

173 
	`P
 (
E
, 
A
, 
B
, 
C
, 
D
, 
	`R
 (41));

174 
	`P
 (
D
, 
E
, 
A
, 
B
, 
C
, 
	`R
 (42));

175 
	`P
 (
C
, 
D
, 
E
, 
A
, 
B
, 
	`R
 (43));

176 
	`P
 (
B
, 
C
, 
D
, 
E
, 
A
, 
	`R
 (44));

177 
	`P
 (
A
, 
B
, 
C
, 
D
, 
E
, 
	`R
 (45));

178 
	`P
 (
E
, 
A
, 
B
, 
C
, 
D
, 
	`R
 (46));

179 
	`P
 (
D
, 
E
, 
A
, 
B
, 
C
, 
	`R
 (47));

180 
	`P
 (
C
, 
D
, 
E
, 
A
, 
B
, 
	`R
 (48));

181 
	`P
 (
B
, 
C
, 
D
, 
E
, 
A
, 
	`R
 (49));

182 
	`P
 (
A
, 
B
, 
C
, 
D
, 
E
, 
	`R
 (50));

183 
	`P
 (
E
, 
A
, 
B
, 
C
, 
D
, 
	`R
 (51));

184 
	`P
 (
D
, 
E
, 
A
, 
B
, 
C
, 
	`R
 (52));

185 
	`P
 (
C
, 
D
, 
E
, 
A
, 
B
, 
	`R
 (53));

186 
	`P
 (
B
, 
C
, 
D
, 
E
, 
A
, 
	`R
 (54));

187 
	`P
 (
A
, 
B
, 
C
, 
D
, 
E
, 
	`R
 (55));

188 
	`P
 (
E
, 
A
, 
B
, 
C
, 
D
, 
	`R
 (56));

189 
	`P
 (
D
, 
E
, 
A
, 
B
, 
C
, 
	`R
 (57));

190 
	`P
 (
C
, 
D
, 
E
, 
A
, 
B
, 
	`R
 (58));

191 
	`P
 (
B
, 
C
, 
D
, 
E
, 
A
, 
	`R
 (59));

193 #unde‡
K


194 #unde‡
F


196 
	#F
(
x
,
y
,
z
Ë(x ^ y ^ z)

	)

197 
	#K
 0xCA62C1D6

	)

199 
	`P
 (
A
, 
B
, 
C
, 
D
, 
E
, 
	`R
 (60));

200 
	`P
 (
E
, 
A
, 
B
, 
C
, 
D
, 
	`R
 (61));

201 
	`P
 (
D
, 
E
, 
A
, 
B
, 
C
, 
	`R
 (62));

202 
	`P
 (
C
, 
D
, 
E
, 
A
, 
B
, 
	`R
 (63));

203 
	`P
 (
B
, 
C
, 
D
, 
E
, 
A
, 
	`R
 (64));

204 
	`P
 (
A
, 
B
, 
C
, 
D
, 
E
, 
	`R
 (65));

205 
	`P
 (
E
, 
A
, 
B
, 
C
, 
D
, 
	`R
 (66));

206 
	`P
 (
D
, 
E
, 
A
, 
B
, 
C
, 
	`R
 (67));

207 
	`P
 (
C
, 
D
, 
E
, 
A
, 
B
, 
	`R
 (68));

208 
	`P
 (
B
, 
C
, 
D
, 
E
, 
A
, 
	`R
 (69));

209 
	`P
 (
A
, 
B
, 
C
, 
D
, 
E
, 
	`R
 (70));

210 
	`P
 (
E
, 
A
, 
B
, 
C
, 
D
, 
	`R
 (71));

211 
	`P
 (
D
, 
E
, 
A
, 
B
, 
C
, 
	`R
 (72));

212 
	`P
 (
C
, 
D
, 
E
, 
A
, 
B
, 
	`R
 (73));

213 
	`P
 (
B
, 
C
, 
D
, 
E
, 
A
, 
	`R
 (74));

214 
	`P
 (
A
, 
B
, 
C
, 
D
, 
E
, 
	`R
 (75));

215 
	`P
 (
E
, 
A
, 
B
, 
C
, 
D
, 
	`R
 (76));

216 
	`P
 (
D
, 
E
, 
A
, 
B
, 
C
, 
	`R
 (77));

217 
	`P
 (
C
, 
D
, 
E
, 
A
, 
B
, 
	`R
 (78));

218 
	`P
 (
B
, 
C
, 
D
, 
E
, 
A
, 
	`R
 (79));

220 #unde‡
K


221 #unde‡
F


223 
˘x
->
°©e
[0] +
A
;

224 
˘x
->
°©e
[1] +
B
;

225 
˘x
->
°©e
[2] +
C
;

226 
˘x
->
°©e
[3] +
D
;

227 
˘x
->
°©e
[4] +
E
;

228 
	}
}

233 
	$sha1_upd©e
 (
sha1_c⁄ãxt
 * 
˘x
, *
öput
, 
ûí
)

235 
fûl
;

236 
À·
;

238 i‡(
ûí
 <= 0)

241 
À·
 = 
˘x
->
tŸÆ
[0] & 0x3F;

242 
fûl
 = 64 - 
À·
;

244 
˘x
->
tŸÆ
[0] +
ûí
;

245 
˘x
->
tŸÆ
[0] &= 0xFFFFFFFF;

247 i‡(
˘x
->
tŸÆ
[0] < (Ë
ûí
)

248 
˘x
->
tŸÆ
[1]++;

250 i‡(
À·
 && 
ûí
 >
fûl
) {

251 
	`mem˝y
 ((*Ë(
˘x
->
buf„r
 + 
À·
), (*Ë
öput
, 
fûl
);

252 
	`sha1_¥o˚ss
 (
˘x
, ctx->
buf„r
);

253 
öput
 +
fûl
;

254 
ûí
 -
fûl
;

255 
À·
 = 0;

258 
ûí
 >= 64) {

259 
	`sha1_¥o˚ss
 (
˘x
, 
öput
);

260 
öput
 += 64;

261 
ûí
 -= 64;

264 i‡(
ûí
 > 0) {

265 
	`mem˝y
 ((*Ë(
˘x
->
buf„r
 + 
À·
), (*Ë
öput
, 
ûí
);

267 
	}
}

269 c⁄° 
	gsha1_∑ddög
[64] = {

279 
	$sha1_föish
 (
sha1_c⁄ãxt
 * 
˘x
, 
ouçut
[20])

281 
œ°
, 
∑dn
;

282 
high
, 
low
;

283 
msgÀn
[8];

285 
high
 = (
˘x
->
tŸÆ
[0] >> 29)

286 | (
˘x
->
tŸÆ
[1] << 3);

287 
low
 = (
˘x
->
tŸÆ
[0] << 3);

289 
	`PUT_UINT32_BE
 (
high
, 
msgÀn
, 0);

290 
	`PUT_UINT32_BE
 (
low
, 
msgÀn
, 4);

292 
œ°
 = 
˘x
->
tŸÆ
[0] & 0x3F;

293 
∑dn
 = (
œ°
 < 56) ? (56 -Üast) : (120 -Üast);

295 
	`sha1_upd©e
 (
˘x
, (*Ë
sha1_∑ddög
, 
∑dn
);

296 
	`sha1_upd©e
 (
˘x
, 
msgÀn
, 8);

298 
	`PUT_UINT32_BE
 (
˘x
->
°©e
[0], 
ouçut
, 0);

299 
	`PUT_UINT32_BE
 (
˘x
->
°©e
[1], 
ouçut
, 4);

300 
	`PUT_UINT32_BE
 (
˘x
->
°©e
[2], 
ouçut
, 8);

301 
	`PUT_UINT32_BE
 (
˘x
->
°©e
[3], 
ouçut
, 12);

302 
	`PUT_UINT32_BE
 (
˘x
->
°©e
[4], 
ouçut
, 16);

303 
	}
}

308 
	$sha1_csum
 (*
öput
, 
ûí
, 
ouçut
[20])

310 
sha1_c⁄ãxt
 
˘x
;

312 
	`sha1_°¨ts
 (&
˘x
);

313 
	`sha1_upd©e
 (&
˘x
, 
öput
, 
ûí
);

314 
	`sha1_föish
 (&
˘x
, 
ouçut
);

315 
	}
}

321 
	$sha1_csum_wd
 (*
öput
, 
ûí
, 
ouçut
[20],

322 
chunk_sz
)

324 
sha1_c⁄ãxt
 
˘x
;

325 #i‡
	`deföed
(
CONFIG_HW_WATCHDOG
Ë|| deföed(
CONFIG_WATCHDOG
)

326 *
íd
, *
cuº
;

327 
chunk
;

330 
	`sha1_°¨ts
 (&
˘x
);

332 #i‡
	`deföed
(
CONFIG_HW_WATCHDOG
Ë|| deföed(
CONFIG_WATCHDOG
)

333 
cuº
 = 
öput
;

334 
íd
 = 
öput
 + 
ûí
;

335 
cuº
 < 
íd
) {

336 
chunk
 = 
íd
 - 
cuº
;

337 i‡(
chunk
 > 
chunk_sz
)

338 
chunk
 = 
chunk_sz
;

339 
	`sha1_upd©e
 (&
˘x
, 
cuº
, 
chunk
);

340 
cuº
 +
chunk
;

341 
	`WATCHDOG_RESET
 ();

344 
	`sha1_upd©e
 (&
˘x
, 
öput
, 
ûí
);

347 
	`sha1_föish
 (&
˘x
, 
ouçut
);

348 
	}
}

353 
	$sha1_hmac
 (*
key
, 
keyÀn
,

354 *
öput
, 
ûí
, 
ouçut
[20])

356 
i
;

357 
sha1_c⁄ãxt
 
˘x
;

358 
k_ùad
[64];

359 
k_›ad
[64];

360 
tmpbuf
[20];

362 
	`mem£t
 (
k_ùad
, 0x36, 64);

363 
	`mem£t
 (
k_›ad
, 0x5C, 64);

365 
i
 = 0; i < 
keyÀn
; i++) {

366 i‡(
i
 >= 64)

369 
k_ùad
[
i
] ^
key
[i];

370 
k_›ad
[
i
] ^
key
[i];

373 
	`sha1_°¨ts
 (&
˘x
);

374 
	`sha1_upd©e
 (&
˘x
, 
k_ùad
, 64);

375 
	`sha1_upd©e
 (&
˘x
, 
öput
, 
ûí
);

376 
	`sha1_föish
 (&
˘x
, 
tmpbuf
);

378 
	`sha1_°¨ts
 (&
˘x
);

379 
	`sha1_upd©e
 (&
˘x
, 
k_›ad
, 64);

380 
	`sha1_upd©e
 (&
˘x
, 
tmpbuf
, 20);

381 
	`sha1_föish
 (&
˘x
, 
ouçut
);

383 
	`mem£t
 (
k_ùad
, 0, 64);

384 
	`mem£t
 (
k_›ad
, 0, 64);

385 
	`mem£t
 (
tmpbuf
, 0, 20);

386 
	`mem£t
 (&
˘x
, 0,  (
sha1_c⁄ãxt
));

387 
	}
}

389 c⁄° 
	g_sha1_§c
[] = "_sha1_src";

391 #ifde‡
SELF_TEST


395 c⁄° 
	gsha1_ã°_°r
[3][57] = {

401 c⁄° 
	gsha1_ã°_sum
[3][20] = {

413 
	$sha1_£lf_ã°
 ()

415 
i
, 
j
;

416 
buf
[1000];

417 
sha1sum
[20];

418 
sha1_c⁄ãxt
 
˘x
;

420 
i
 = 0; i < 3; i++) {

421 
	`¥ötf
 (" SHA-1Åe° #%d: ", 
i
 + 1);

423 
	`sha1_°¨ts
 (&
˘x
);

425 i‡(
i
 < 2)

426 
	`sha1_upd©e
 (&
˘x
, (*Ë
sha1_ã°_°r
[
i
],

427 
	`°æí
 (
sha1_ã°_°r
[
i
]));

429 
	`mem£t
 (
buf
, 'a', 1000);

430 
j
 = 0; j < 1000; j++)

431 
	`sha1_upd©e
 (&
˘x
, 
buf
, 1000);

434 
	`sha1_föish
 (&
˘x
, 
sha1sum
);

436 i‡(
	`memcmp
 (
sha1sum
, 
sha1_ã°_sum
[
i
], 20) != 0) {

437 
	`¥ötf
 ("failed\n");

441 
	`¥ötf
 ("passed\n");

444 
	`¥ötf
 ("\n");

446 
	}
}

448 
	$sha1_£lf_ã°
 ()

451 
	}
}

	@libs/utils/util.c

5 
	~"°d_hdr.h
"

6 
	~<˘y≥.h
>

7 
	~<√töë/if_ëhî.h
>

8 
	~<√töë/ö.h
>

9 
	~<sig«l.h
>

10 
	~<î∫o.h
>

12 
	~<sys/sockë.h
>

13 
	~<¨∑/öë.h
>

15 
	~<uni°d.h
>

16 
	~<sys/ty≥s.h
>

17 
	~<ªgex.h
>

18 
	~<sys/°©.h
>

19 
	~<sys/time.h
>

21 
	~"comm_hdr.h
"

22 
	~"îr‹_code.h
"

24 
	#EXIT_SUCCESS
 0

	)

25 
	#EXIT_FAILURE
 1

	)

27 
	#REG127
 "^127\\.0\\.0\\.."

	)

28 
	#REG192
 "^192\\.168\\.."

	)

29 
	#REG10
 "^10\\.0\\.."

	)

30 
	#REG172
 "^172\\.1[6-9]\\.."

	)

31 
	#REG0
 "^0\\.."

	)

32 
	#REG169
 "^169\\.254\\.."

	)

33 
	#REG_MULTICAST1
 "^22[4-9]\\.."

	)

34 
	#REG_MULTICAST2
 "^23[0-9]\\.."

	)

35 
	#REG_IPV4
 "^[0-9]\\{1,3\\}\\.[0-9]\\{1,3\\}\\.[0-9]\\{1,3\\}\\.[0-9]\\{1,3\\}"

	)

38 * 
	gªg_ruÀs
[] =

40 
REG127
, 
REG192
, 
REG10
, 
REG172
,

41 
REG0
, 
REG169
, 
REG_MULTICAST1
, 
REG_MULTICAST2


46 
	mªg127
,

47 
	mªg192
,

48 
	mªg10
,

49 
	mªg172
,

50 
	mªg0
,

51 
	mªg169
,

52 
	mªg_mu…iˇ°1
,

53 
	mªg_mu…iˇ°2
,

54 
	mnum_ªg_ruÀs


57 
	~<ªsﬁv.h
>

58 
	~<√tdb.h
>

59 
	#SET_SERV_ADDR
(
S
, 
HOST
, 
PORT
) do{ \

60 
ho°ít
 *
hp
; \

61 
hp
 = 
	`gëho°by«me
(
HOST
); \

62 
	`mem£t
(&(
S
), 0x0, (S)); \

63 if(
hp
){ \

64 
	`mem˝y
(&(
S
).
sö_addr
.
s_addr
, 
hp
->
h_addr
, hp->
h_Àngth
); \

65 (
S
).
sö_Ámûy
 = 
AF_INET
; \

66 (
S
).
sö_p‹t
 = 
	`ht⁄s
(
PORT
); \

68 if(-1 =
	`ªs_öô
()){ \

69 
	`exô
(-1); \

72 }0)

	)

75 
	$utû_ª¶ove_ho°
(
sockaddr_ö
 *
addr
, 
URL_T
 *
£rv_uæ
)

77 
	`SET_SERV_ADDR
(*
addr
, 
£rv_uæ
->
ho°_«me
, sîv_uæ->
p‹t
);

78 
	}
}

93 
utû_£tup_sig«l
 (
signo
, (*
sig«l_func
)())

95 i‡(
	`sig«l
(
signo
, 
sig«l_func
Ë=
SIG_ERR
) {

96 
	`QNAP_LOG_ERR_NL
("C™nŸ sëu∞sig«»h™dÀ∏f‹ %d", 
signo
);

97 (
ERR_SIGNAL
);

99 (
NO_ERROR
);

100 
	}
}

113 *
	$utû_gë_d´m⁄_«me
 (*
¥og_«me
)

115 *
d´m⁄_«me
;

117 
d´m⁄_«me
 = 
	`°ºchr
(
¥og_«me
, 
DIR_SPLITTER_CHAR
);

118 (
d´m⁄_«me
 ? (d´m⁄_«mê+ 1Ë: 
¥og_«me
);

119 
	}
}

134 
	$utû_show_vîsi⁄
 (*
ªÀa£_vî
, *
sour˚_vî
,

135 *
buûd_time
)

137 
	`Ârötf
(
°dout
, "Release Version: %s, Source Version: %s, BulidÅime: %s\n",

138 
ªÀa£_vî
, 
sour˚_vî
, 
buûd_time
);

142 (
ERR_GENERIC
);

143 
	}
}

158 
	$utû_show_ußge
 (*
d´m⁄_«me
, 
UTIL_USAGE_T
 *
›t_hñp_tbl
,

159 
size_t
 
›t_hñp_tbl_size
)

161 
UTIL_USAGE_T
 *
›t
;

162 
cmd
[
	`DWORD_ALIGN
(
DISP_BUFF_LEN
)];

163 *
¥efix
 = " ";

164 
em±y_d´m⁄
[
	`DWORD_ALIGN
(
DISP_BUFF_LEN
)];

165 
›t_cou¡
;

166 
i
;

168 
	`mem£t
(
em±y_d´m⁄
, ' ', 
	`°æí
(
d´m⁄_«me
));

169 
em±y_d´m⁄
[
	`°æí
(
d´m⁄_«me
)] = '\0';

171 
	`Ârötf
(
°dout
, "\nUsage:\n");

172 
	`•rötf
(
cmd
, "%s%s", 
¥efix
, 
d´m⁄_«me
);

174 
›t_cou¡
 = ()(
›t_hñp_tbl_size
 / (
UTIL_USAGE_T
));

175 
i
 = 0, 
›t
 = 
›t_hñp_tbl
; i < 
›t_cou¡
; i++, opt++) {

176 i‡((
	`°æí
(
cmd
Ë+ såÀn(
›t
->
cmd_›t
)Ë>
DISP_BUFF_LEN
) {

177 
	`Ârötf
(
°dout
, "%s\n", 
cmd
);

178 
	`•rötf
(
cmd
, "%s%s", 
¥efix
, 
em±y_d´m⁄
);

180 
	`•rötf
(&
cmd
[
	`°æí
(cmd)], " %s", 
›t
->
cmd_›t
);

182 
	`Ârötf
(
°dout
, "%s\n\n", 
cmd
);

184 
i
 = 0, 
›t
 = 
›t_hñp_tbl
; i < 
›t_cou¡
; i++, opt++) {

185 
	`Ârötf
(
°dout
, "%s%s", 
¥efix
, 
›t
->
hñp_°r
);

186 
›t
->
ty≥
) {

187 
UTIL_DEF_BOOL
:

188 
	`Ârötf
(
°dout
, ", default: %s\n",

189 
›t
->
∑øm
.
def_vÆue
 ? "True" : "False");

192 
UTIL_DEF_INT
:

193 
	`Ârötf
(
°dout
, ", deÁu…: %d\n", 
›t
->
∑øm
.
def_vÆue
);

196 
UTIL_DEF_STR
:

197 
	`Ârötf
(
°dout
, ", deÁu…: \"%s\"\n", 
›t
->
∑øm
.
def_°rög
);

200 
UTIL_DATA_RANGE
:

201 
	`Ârötf
(
°dout
, ", dataÑange [%d-%d], default: %d\n",

202 
›t
->
∑øm
.
ønge
.
mö_vÆue
, o±->∑øm.ønge.
max_vÆue
,

203 
›t
->
∑øm
.
ønge
.
def_vÆue
);

206 
UTIL_DEF_NONE
:

208 
	`Ârötf
(
°dout
, "\n");

212 
	`Ârötf
(
°dout
, "\n");

217 (
ERR_GENERIC
);

218 
	}
}

234 
	$utû_°rù_mac
 (*
§c_mac
, *
d°_mac
)

236 *
§c
;

237 *
d°
 = 
d°_mac
;

238 
c
;

239 
Àn
 = 0;

240 
cﬁ⁄
 = 0;

245 i‡(!
d°_mac
) {

246 
	`QNAP_LOG_ERR_NL
("Parameter dst_mac is NULL");

253 *
d°
 = '\0';

258 
§c
 = 
	`utû_åim
(
§c_mac
, 
FALSE
);

259 i‡(!
§c
)

262 (
c
 = *
§c
++) != '\0') {

263 i‡(
c
 == ':') {

264 
cﬁ⁄
++;

268 *
d°
++ = 
c
;

269 i‡((++
Àn
Ë=
MAC_STR_LEN
) {

273 *
d°
 = '\0';

274 i‡(*
§c
 != '\0') {

275 
cﬁ⁄
 = 1;

285 i‡((
cﬁ⁄
 && cﬁ⁄ !5Ë|| (
Àn
 !
MAC_STR_LEN
)) {

286 *
d°_mac
 = '\0';

288 
	}
}

306 
	$utû_vîify_mac
 (*
mac_°r
, 
uöt8_t
 *
mac_addr
)

308 *
mac
;

309 
i
;

314 
i
 = 0, 
mac
 = 
mac_°r
; i < 
MAC_STR_LEN
; i++, mac++) {

315 i‡(!
	`isxdigô
(*
mac
))

316 (
FALSE
);

322 
	`MAC_ADDR_CONV2HEX
(
mac_addr
, 
mac_°r
);

323 
mac_addr
[
ETHER_ADDR_LEN
] = '\0';

325 (
TRUE
);

326 
	}
}

341 
	$utû_°r_to_uµî
 (*
d°_°r
, *
§c_°r
, 
Àn
)

343 
c
;

344 
i
;

346 
i
 = 0; i < 
Àn
; i++) {

347 
c
 = *
§c_°r
++;

348 *
d°_°r
++ = 
	`touµî
(
c
);

350 
	}
}

369 
	$utû_ªad_°rög
 (*
°r
, *
°r_ßve
, *
∑øm_«me
,

370 
size_t
 
max_Àn
)

372 i‡(
	`°æí
(
°r
Ë<
max_Àn
) {

373 
	`°r˝y
(
°r_ßve
, 
°r
);

374 (
NO_ERROR
);

376 
	`Ârötf
(
°dout
, "Lígth o‡[%s] c™nŸÉx˚ed %zd\n", 
∑øm_«me
, 
max_Àn
);

377 (
ERR_STR_TOO_LONG
);

379 
	}
}

399 
	$utû_ªad_öãgî
 (*
öt_°r
, *
öt_vÆ
, 
mö_vÆ
,

400 
max_vÆ
)

402 
tmp
;

403 
c
;

404 
n
;

409 i‡((
öt_°r
 = 
	`utû_åim
(öt_°r, 
FALSE
)Ë=
NULL
) {

410 
	`Ârötf
(
°dout
, "Empty interger value string");

411 (
ERR_INVALID_FORMAT
);

414 
n
 = 
	`ssˇnf
(
öt_°r
, "%d%c", &
tmp
, &
c
);

415 i‡((
n
 =1Ë&& (
tmp
 >
mö_vÆ
Ë&& (tm∞<
max_vÆ
)) {

416 *
öt_vÆ
 = 
tmp
;

417 (
NO_ERROR
);

419 
	`Ârötf
(
°dout
, "Data value must be inÅheÑange [%d - %d]\n",

420 
mö_vÆ
, 
max_vÆ
);

421 (
ERR_INVALID_VALUE
);

423 
	}
}

442 
	$utû_ªad_mac_°r
 (*
mac_°r
, *
mac_°r_ßve
,

443 
uöt8_t
 *
mac_addr
)

445 
tmp_mac
[
	`DWORD_ALIGN
(
MAC_STR_LEN
 + 1)];

446 
uöt32_t
 
tmp
[
	`DWORD_ALIGN
(
ETHER_ADDR_LEN
)];

447 
c
;

448 
n
;

453 
	`utû_°rù_mac
(
mac_°r
, 
tmp_mac
);

454 
	`utû_°r_to_uµî
(
tmp_mac
,Åmp_mac, 
	`°æí
(tmp_mac));

455 
n
 = 
	`ssˇnf
(
tmp_mac
, "%02X%02X%02X%02X%02X%02X%c",

456 &
tmp
[0], &tmp[1], &tmp[2], &tmp[3], &tmp[4], &tmp[5], &
c
);

457 i‡(
n
 =
ETHER_ADDR_LEN
) {

458 i‡(
mac_°r_ßve
) {

459 
	`°r˝y
(
mac_°r_ßve
, 
tmp_mac
);

461 
n
 = 0;Ç < 
ETHER_ADDR_LEN
;Ç++) {

462 
mac_addr
[
n
] = 
tmp
[n] & 0x0FF;

464 (
NO_ERROR
);

466 
	`Ârötf
(
°dout
, "Invalid MACáddress\n");

467 (
ERR_INVALID_VALUE
);

469 
	}
}

489 
	$utû_ªad_ùv4_°r
 (*
ù_°r
, *
ù_°r_ßve
, 
ö_addr_t
 *
ù_addr
,

490 
¥öt_îr
)

492 
uöt32_t
 
tmp
[
	`DWORD_ALIGN
(
IPv4_ALEN
)];

493 
n
;

494 
c
;

499 i‡((
ù_°r
 = 
	`utû_åim
(ù_°r, 
FALSE
)Ë=
NULL
) {

500 
	`Ârötf
(
°dout
, "Empty IPáddress string");

501 (
ERR_INVALID_FORMAT
);

504 
n
 = 
	`ssˇnf
(
ù_°r
, "%3d.%3d.%3d.%3d%c",

505 &
tmp
[0], &tmp[1], &tmp[2], &tmp[3], &
c
);

506 i‡(
n
 =
IPv4_ALEN
) {

507 i‡(
ù_°r_ßve
) {

508 
	`°r˝y
(
ù_°r_ßve
, 
ù_°r
);

510 
	`öë_©⁄
(
ù_°r
, (
ö_addr
 *)
ù_addr
);

511 (
NO_ERROR
);

513 i‡(
¥öt_îr
) {

514 
	`Ârötf
(
°dout
, "Invalid IPáddress\n");

516 (
ERR_INVALID_VALUE
);

518 
	}
}

520 
	$utû_ªad_domaö_p‹t_°r
(* 
domaö_p‹t_°r
, *
domaö_°r_ßve
,

521 
uöt16_t
 *
p‹t
, 
def_p‹t
, 
¥öt_îr
)

523 
domaö
[
URL_STR_LEN
+1];

524 
n
;

525 
tmp_p‹t
;

530 i‡((
domaö_p‹t_°r
 = 
	`utû_åim
(domaö_p‹t_°r, 
FALSE
)Ë=
NULL
) {

531 
	`Ârötf
(
°dout
, "Empty IPáddress string");

532 (
ERR_INVALID_FORMAT
);

534 
tmp_p‹t
 = 
def_p‹t
;

535 
n
 = 
	`ssˇnf
(
domaö_p‹t_°r
, "%99[^:]:%5d[^\n]", 
domaö
, &
tmp_p‹t
);

536 i‡–
n
 > 0 ) {

537 i‡(
domaö_°r_ßve
) {

538 
	`°∫˝y
(
domaö_°r_ßve
, 
domaö
, 
URL_STR_LEN
);

540 if(
p‹t
){

541 *
p‹t
 = (
uöt16_t
)
tmp_p‹t
;

543 (
NO_ERROR
);

545 i‡(
¥öt_îr
) {

546 
	`Ârötf
(
°dout
, "InvÆid IPáddªss: %s\n", 
domaö_p‹t_°r
);

548 (
ERR_INVALID_VALUE
);

550 
	}
}

574 
	$utû_ªad_ùv4_p‹t_li°
 (*
ù_p‹t_°r
, 
URL_T
 *
ù_li°
,

575 
max_num
, 
def_p‹t
, *
cou¡
,

576 
ù_dŸãd_⁄ly
)

578 
tmp_buff
[
	`DWORD_ALIGN
(
ADDR_STR_LEN
 + 1)];

579 
∑ú_num
 = 0;

580 *
°¨t
, *
íd
, *
±r
;

581 *
li°_£p
, *
p‹t_£p
;

582 *
∑th_£p
;

583 
¥Ÿocﬁ
[
	`DWORD_ALIGN
(
URL_STR_LEN
 + 1)];

584 
ö_addr_t
 
ù_addr
;

585 
p‹t
;

586 
Àn
;

587 
rc
;

593 i‡((
Àn
 = 
	`°æí
(
ù_p‹t_°r
)Ë> 
ADDR_STR_LEN
)

594 (
ERR_STR_TOO_LONG
);

596 
	`°r˝y
(
tmp_buff
, 
ù_p‹t_°r
);

597 
°¨t
 = 
tmp_buff
;

598 
íd
 = 
°¨t
 + 
Àn
;

599 (
°¨t
 < 
íd
Ë&& (
∑ú_num
 < 
max_num
)) {

603 
Àn
 = 0;

604 i‡((
±r
 = 
	`°r°r
(
°¨t
, 
URL_NAME_PREFIX_STR
)Ë!
NULL
) {

605 
±r
 +
	`°æí
(
URL_NAME_PREFIX_STR
);

606 
Àn
 = (
±r
 - 
°¨t
);

607 
	`mem˝y
(
¥Ÿocﬁ
, 
°¨t
, 
Àn
);

608 
°¨t
 = 
±r
;

610 
¥Ÿocﬁ
[
Àn
] = '\0';

615 i‡((
li°_£p
 = 
	`°rchr
(
°¨t
, 
IP_PORT_LIST_SEP_CHAR
)Ë!
NULL
) {

616 *
li°_£p
 = '\0';

622 i‡((
∑th_£p
 = 
	`°rchr
(
°¨t
, 
URL_NAME_PATH_CHAR
)Ë!
NULL
) {

623 *
∑th_£p
 = '\0';

629 i‡((
°¨t
 = 
	`utû_åim
(°¨t, 
FALSE
)Ë=
NULL
)

635 
p‹t
 = 
def_p‹t
;

636 i‡((
p‹t_£p
 = 
	`°rchr
(
°¨t
, 
IP_PORT_SEP_CHAR
)Ë!
NULL
) {

637 *
p‹t_£p
 = '\0';

638 i‡(
	`utû_ªad_öãgî
((
p‹t_£p
 + 1), &
p‹t
, 
PORT_MIN
, 
PORT_MAX
)

639 !
NO_ERROR
)

640 
îr_ªt
;

647 
rc
 = 
	`utû_ªad_ùv4_°r
(
°¨t
, 
NULL
, &
ù_addr
, 
ù_dŸãd_⁄ly
);

648 i‡(
ù_dŸãd_⁄ly
 && (
rc
 !
NO_ERROR
))

649 
îr_ªt
;

654 i‡(
p‹t_£p
) {

655 *
p‹t_£p
 = 
IP_PORT_SEP_CHAR
;

658 i‡(
∑th_£p
) {

659 *
∑th_£p
 = 
URL_NAME_PATH_CHAR
;

665 i‡((
±r
 = 
	`°r°r
(
ù_p‹t_°r
, 
URL_NAME_PREFIX_STR
)Ë!
NULL
)

667 
±r
 +
	`°æí
(
URL_NAME_PREFIX_STR
);

670 
±r
 = 
ù_p‹t_°r
;

671 i‡((
±r
 = 
	`°rchr
’å, 
URL_NAME_PATH_CHAR
)Ë!
NULL
) {

672 
ù_li°
->
∑th
 = 
±r
+1;

675 
ù_li°
->
∑th
 = 
NULL
;

678 
	`°r˝y
(
ù_li°
->
addr_°r
, 
¥Ÿocﬁ
);

679 
	`°rˇt
(
ù_li°
->
addr_°r
, 
°¨t
);

680 
ù_li°
->
ù_addr
 = (
rc
 =
NO_ERROR
) ? ip_addr : 0;

681 
ù_li°
->
p‹t
 =Öort;

682 
ù_li°
++;

683 
∑ú_num
++;

688 i‡(
li°_£p
) {

689 *
li°_£p
 = 
IP_PORT_LIST_SEP_CHAR
;

690 
°¨t
 = 
li°_£p
 + 1;

692 
°¨t
 = 
íd
;

696 i‡(
cou¡
) {

697 *
cou¡
 = 
∑ú_num
;

699 (
NO_ERROR
);

701 
îr_ªt
:

702 (
ERR_INVALID_FORMAT
);

703 
	}
}

719 *
	$utû_åim
 (*
°r
, 
Àadög_⁄ly
)

721 *
°¨t
 = 
°r
, *
íd
, 
c
;

726 i‡(!
°r
) {

727 
	`QNAP_LOG_ERR_NL
("Parameter str is NULL");

728 (
NULL
);

734 (
c
 = *
°¨t
) != '\0') {

735 i‡(!
	`is•a˚
(
c
))

737 
°¨t
++;

743 i‡(*
°¨t
 == '\0')

744 (
NULL
);

749 i‡(
Àadög_⁄ly
)

750 (
°¨t
);

756 
íd
 = 
°¨t
 + 
	`°æí
(start) - 1;

758 
íd
 > 
°¨t
) {

759 i‡(
	`is•a˚
(*
íd
)) {

760 
íd
--;

765 *(
íd
 + 1) = '\0';

770 (
°¨t
);

771 
	}
}

785 *
	$utû_åim_quŸes
 (*
°r
)

787 
c
;

788 *
íd
;

793 i‡(!
°r
) {

794 
	`QNAP_LOG_ERR_NL
("Parameter str is NULL");

795 (
NULL
);

798 
c
 = *
°r
;

799 i‡((
c
 =
DOUBLE_QUOTE_CHAR
Ë|| (¯=
SINGLE_QUOTE_CHAR
)) {

800 i‡((
íd
 = 
	`°rchr
((
°r
 + 1), 
c
)Ë!
NULL
) {

801 
°r
++;

802 *
íd
 = '\0';

806 (
°r
);

807 
	}
}

823 
FILE
 *
	$utû_›í_fûe
 (*
fûe_«me
, *
mode
)

825 
FILE
 *
Â
;

827 i‡((
Â
 = 
	`f›í
(
fûe_«me
, 
mode
)Ë=
NULL
) {

828 
	`QNAP_LOG_WARN_NL
("C™nŸ o≥¿fûe[%s]", 
fûe_«me
);

830 (
Â
);

831 
	}
}

844 
	$utû_˛o£_fûe
 (
FILE
 *
Â
)

846 i‡(
Â
) {

847 
	`f˛o£
(
Â
);

849 
	}
}

863 *
	$utû_öë_¡ﬂ
 (
uöt32_t
 
ù_addr
)

865 
ö_addr
 
ö
;

867 
ö
.
s_addr
 = 
ù_addr
;

868 (
	`öë_¡ﬂ
(
ö
));

869 
	}
}

871 
	$utû_°rù
(*
s
)

874 *
p2
 = 
s
;

875 
s
 && *s != '\0') {

876 if(*
s
 != '\t' && *s != '\n' && *s != '\r') {

877 *
p2
++ = *
s
++;

879 ++
s
;

883 if(
p2
){

884 *
p2
 = '\0';

888 if(
s
){

890 
Àn
 = 
	`°æí
(
s
);

891 
i
 = 
Àn
 -1;

893 ; 
i
 >= 0; i--){

894 
s
[
i
]){

898 
s
[
i
] = '\0';;

908 
	}
}

910 
	$utû_sy°em_cmd
(*
cmd_buff
, *
d©a_buff
, 
size_t
 
d©a_buff_Àn
)

914 
FILE
 *
Â
;

916 if(!
cmd_buff
 || !
d©a_buff
 || 
d©a_buff_Àn
 <= 0){

917 
	`QNAP_LOG_ERR_NL
("invalidÖarameters");

918  
ERR_NULL_POINTER
;

921 
	`mem£t
(
d©a_buff
, 0x0, 
d©a_buff_Àn
);

922 i‡((
Â
 = 
	`p›í
(
cmd_buff
, "r")Ë!
NULL
) {

923 if–
	`fgës
(
d©a_buff
, 
d©a_buff_Àn
, 
Â
Ë!
NULL
){

926 
	`p˛o£
(
Â
);

927 
	`utû_°rù
(
d©a_buff
);

929 
	`QNAP_LOG_ERR_NL
("p›í faûed: cmd: %s:Éº: %s", 
cmd_buff
, 
	`°ªº‹
(
î∫o
));

932  
NO_ERROR
;

934 
	}
}

936 
	$utû_d´m⁄ize
()

938 
pid_t
 
pid
, 
sid
;

941 i‡–
	`gëµid
() == 1 ) ;

944 
pid
 = 
	`f‹k
();

945 i‡(
pid
 < 0) {

946 
	`exô
(
EXIT_FAILURE
);

949 i‡(
pid
 > 0) {

950 
	`exô
(
EXIT_SUCCESS
);

956 
	`umask
(0);

959 
sid
 = 
	`£tsid
();

960 i‡(
sid
 < 0) {

961 
	`exô
(
EXIT_FAILURE
);

966 i‡((
	`chdú
("/")) < 0) {

967 
	`exô
(
EXIT_FAILURE
);

974 
	}
}

977 
	$‰om_hex
(
ch
)

979  
	`isdigô
(
ch
Ë? ch - '0' : 
	`tﬁowî
(ch) - 'a' + 10;

980 
	}
}

983 
	$to_hex
(
code
)

985 
hex
[] = "0123456789abcdef";

986  
hex
[
code
 & 15];

987 
	}
}

990 
	$utû_c⁄vît_hex_to_ch¨
–
uöt8_t
 *
hex
, 
size_t
 
hex_Àn
,

991 *
°r_buff
, 
size_t
 
buff_Àn
)

993 c⁄° 
ghex_°rög
[] = "0123456789abcdef";

994 *
p
;

995 
i
;

1002 
p
 = 
°r_buff
, 
i
=0; i < 
hex_Àn
; i++){

1003 *
p
++ = 
ghex_°rög
[(
hex
[
i
] >> 4) & 0xf];

1004 *
p
++ = 
ghex_°rög
[
hex
[
i
] & 0xf];

1007 *
p
 = '\0';

1009  
NO_ERROR
;

1010 
	}
}

1012 
	#A2I
(
c
Ë((c>='a'&&c<='z')?(c-'a'+10):((c>='A'&&c<='Z')?(c-'A'+10):(c-'0')))

	)

1013 
	$utû_c⁄vît_ch¨_to_hex
–*
°r
, 
size_t
 
°r_Àn
, 
uöt8_t
 *
hex_buff
 )

1015 
i
 ;

1016 
uöt8_t
 *
phex
 = 
hex_buff
;

1018 
i
 = 0; i < 
°r_Àn
 && 
phex
; i+=2,Öhex++){

1019 *
phex
 = 
	`A2I
(
°r
[
i
]);

1020 *
phex
 = (*phex)<<4;

1021 *
phex
 |
	`A2I
(
°r
[
i
+1]);

1023  
NO_ERROR
;

1024 
	}
}

1029 *
	$utû_uæ_ícode
(*
°r
)

1031 *
p°r
 = 
°r
, *
buf
 = 
	`mÆloc
(
	`°æí
(°rË* 3 + 1), *
pbuf
 = buf;

1032 *
p°r
) {

1033 i‡(
	`iß um
(*
p°r
) || *pstr == '-' || *pstr == '_' || *pstr == '.' ||

1034 *
p°r
 == '~')

1035 *
pbuf
++ = *
p°r
;

1036 i‡(*
p°r
 == ' ')

1037 *
pbuf
++ = '+';

1039 *
pbuf
++ = '%', *pbuf++ = 
	`to_hex
(*
p°r
 >> 4), *pbuf++ =Åo_hex(*pstr & 15);

1040 
p°r
++;

1042 *
pbuf
 = '\0';

1043  
buf
;

1044 
	}
}

1048 *
	$utû_uæ_decode
(*
°r
)

1050 *
p°r
 = 
°r
, *
buf
 = 
	`mÆloc
(
	`°æí
(°rË+ 1), *
pbuf
 = buf;

1051 *
p°r
) {

1052 i‡(*
p°r
 == '%') {

1053 i‡(
p°r
[1] &&Östr[2]) {

1054 *
pbuf
++ = 
	`‰om_hex
(
p°r
[1]) << 4 | from_hex(pstr[2]);

1055 
p°r
 += 2;

1057 } i‡(*
p°r
 == '+') {

1058 *
pbuf
++ = ' ';

1060 *
pbuf
++ = *
p°r
;

1062 
p°r
++;

1064 *
pbuf
 = '\0';

1065  
buf
;

1066 
	}
}

1068 #ifde‡
CGI_INPUT


1069 
	$utû_∑r£_quîy_°rög
(*
öput_°rög
, 
key_∑ú_°
 *
fõlds
)

1072 
i
 = 0;

1074 *
öput
;

1075 *
key
;

1076 *
vÆue
;

1077 *
ßve_quîy
;

1079 i‡(!
öput_°rög
 || 
	`°æí
(input_string) == 0){

1080 
	`QNAP_LOG_ERR_NL
("invalid input string");

1081  
ERR_INPUT_LEN
;

1084 if(!
fõlds
){

1085 
	`QNAP_LOG_ERR_NL
("invalid fields");

1086  
ERR_INPUT_LEN
;

1089 
öput
 = 
	`°πok_r
(
öput_°rög
, 
DELIM_AND
, &
ßve_quîy
);

1090 
öput
 && *input){

1092 
vÆue
 = 
	`°rchr
(
öput
, '=');

1093 if(
vÆue
){

1094 
key
 = 
öput
;

1095 *
vÆue
 = '\0';

1096 
vÆue
++;

1097  
i
 = 0; 
fõlds
[i].
key
[0] != '\0'; i++){

1098 if(0 =
	`°∫ˇ£cmp
(
fõlds
[
i
].
key
, key, 
PAIR_KEY_LEN
)){

1099 
	`°∫˝y
(
fõlds
[
i
].
vÆue
, vÆue, 
PAIR_VALUE_LEN
);

1105 
öput
 = 
	`°πok_r
(
NULL
, 
DELIM_AND
, &
ßve_quîy
);

1108  
i
 = 0; 
fõlds
[i].
key
[0] != '\0'; i++){

1109 
	`QNAP_LOG_DEBUG_NL
("%†[%s]", 
fõlds
[
i
].
key
, fõlds[i].
vÆue
);

1112 
	}
}

1114 * 
	$utû_cgi_gë_öput
()

1116  
	`gëív
("QUERY_STRING");

1117 
	}
}

1119 
	$utû_cgi_∑r£_öput
(
key_∑ú_°
 *
öput_fõlds
)

1122 *
cgi_öput
;

1123 *
öput_°rög
;

1125 if(!
öput_fõlds
){

1126  
ERR_INVALID_VALUE
;

1129 
cgi_öput
 = 
	`utû_cgi_gë_öput
();

1131 
öput_°rög
 = 
	`utû_uæ_decode
(
cgi_öput
);

1133 if(
öput_°rög
){

1135 
	`QNAP_LOG_DEBUG_NL
("QUERY_STRING: %s", 
öput_°rög
);

1137 
	`utû_∑r£_quîy_°rög
(
öput_°rög
, 
öput_fõlds
);

1139 
	`‰ì
(
öput_°rög
);

1143  
NO_ERROR
;

1145 
	}
}

1147 
	$utû_key_∑ú_li°_ôems
(
key_∑ú_°
 *
öput_fõlds
)

1149 
key_∑ú_°
 *
ôem
 = 
öput_fõlds
;

1150 ;
ôem
 && iãm->
key
[0] != '\0'; item++){

1151 
	`QNAP_LOG_DEBUG_NL
("%†%s", 
ôem
->
key
, iãm->
vÆue
);

1153 
	}
}

1155 
	$utû_cgi_¥öt_ªsu…
(
key_∑ú_°
 *
ouçut_fõlds
)

1158 
key_∑ú_°
 *
ôem
;

1160 if(!
ouçut_fõlds
){

1164 
	`utû_key_∑ú_li°_ôems
(
ouçut_fõlds
);

1166 
	`INSERT_HEADER_TERM
();

1168 
	`PRINT_CGI_RESP
("{");

1170  
ôem
 = 
ouçut_fõlds
; iãm !
NULL
 ; ){

1171 
	`PRINT_CGI_RESP
("\"%s\": \"%s\"", 
ôem
->
key
, iãm->
vÆue
);

1172 
ôem
++;

1173 if(
ôem
->
key
[0] == '\0'){

1176 
	`PRINT_CGI_RESP
(", ");

1179 
	`PRINT_CGI_RESP
("}");

1181 
	}
}

1184 
	$utû_is_vÆid_ùv4
(* 
ù_°r
){

1186 i‡(
ù_°r
 =
NULL
 || 
	`°æí
(ù_°rË< 7 || såÀn(ù_°rË> 
INET_ADDRSTRLEN
){

1187  
FALSE
;

1189 
sockaddr_ö
 
ß
;

1190 
ªsu…
 = 
	`öë_±⁄
(
AF_INET
, 
ù_°r
, &(
ß
.
sö_addr
));

1193  
ªsu…
 == 1;

1194 
	}
}

1197 
	$utû_is_vÆid_ùv6
(* 
ù_°r
){

1199 i‡(
ù_°r
 =
NULL
 || 
	`°æí
(ù_°rË=0 || såÀn(ù_°rË> 
INET6_ADDRSTRLEN
){

1200  
FALSE
;

1202 
sockaddr_ö
 
ß
;

1203 
ªsu…
 = 
	`öë_±⁄
(
AF_INET6
, 
ù_°r
, &(
ß
.
sö_addr
));

1204  
ªsu…
 == 1;

1205 
	}
}

1208 
	$utû_is_public_ù
(* 
öput_ù
)

1210 if(
öput_ù
 =
NULL
)

1211  
ERR_NULL_POINTER
;

1212 
ªgex_t
 
ªgex_°ru˘
;

1213 
ªt
 = 0, 
i
 = 0;

1214  
i
 = 0; i < 
num_ªg_ruÀs
; i++){

1215 
ªt
 = 
	`ªgcomp
–&
ªgex_°ru˘
, 
ªg_ruÀs
[
i
], 0);

1216 
ªt
 = 
	`ªgexec
(&
ªgex_°ru˘
, 
öput_ù
, 0, 
NULL
, 0);

1217 
	`ªg‰ì
(&
ªgex_°ru˘
);

1218 if–
ªt
 =
REG_NOMATCH
 ){

1219 
ªt
 = 
TRUE
;

1220 }if–
ªt
 == 0){

1221 
ªt
 = 
FALSE
;

1222 
exô
;

1227 
ªt
 = -1;

1228 
exô
;

1232 
exô
:

1233  
ªt
;

1234 
	}
}

1239 
	$utû_ªad_fûe_to_°rög
(* 
fûíame
,** 
ouçut
, 
size_t
* 
°rög_size
)

1241 
ªt
 = 
ERR_SYSTEM
;

1242 
FILE
* 
f
 = 
NULL
;

1243 
f
 = 
	`utû_›í_fûe
(
fûíame
, "r");

1244 if(!
f
)

1245 
exô
;

1246 *
ouçut
 = (*Ë
	`ˇŒoc
((), 
TMP_BUFF_LEN
);

1247 *
°rög_size
 = 0;

1248 
buf
[
TMP_BUFF_LEN
+1];

1249 0 !(
ªt
 = 
	`‰ód
(
buf
, 1, 
TMP_BUFF_LEN
, 
f
)) ){

1250 *
ouçut
 = 
	`ªÆloc
–*ouçut, *
°rög_size
 + 
ªt
 +1);

1251 
	`°∫ˇt
–*
ouçut
, 
buf
, 
ªt
);

1252 *
°rög_size
 +
ªt
;

1254 if–
	`„of
(
f
) ){

1255 
ªt
 = 
NO_ERROR
;

1257 
ªt
 = 
	`„º‹
(
f
);

1260 
	`utû_˛o£_fûe
(
f
);

1261 
exô
:

1262  
ªt
;

1263 
	}
}

1265 
	$utû_c⁄vît_iso8601
(c⁄° *
time_°rög
, 
ts_Àn
, 
tm
 *
tm_d©a
)

1267 
	`tz£t
();

1269 
ãmp
[64];

1270 
	`mem£t
(
ãmp
, 0, (temp));

1271 
	`°∫˝y
(
ãmp
, 
time_°rög
, 
ts_Àn
);

1273 
tm
 
˘ime
;

1274 
	`mem£t
(&
˘ime
, 0, (
tm
));

1275 
	`°Ωtime
(
ãmp
, "%FT%T%z", &
˘ime
);

1277 
ts
 = 
	`mktime
(&
˘ime
Ë- 
timez⁄e
;

1278 
	`loˇ…ime_r
(&
ts
, 
tm_d©a
);

1279 
	}
}

1281 
	$utû_auth_tokí_vÆid©‹
(* 
°r
, 
size_t
 
Àn
)

1283 
ªt
 = 
ERR_INVALID_FORMAT
,
˙t
 = 0;

1284 
˙t
 = 0; c¡ < 
Àn
; cnt++){

1285 if–(
°r
[
˙t
] >= 48 && str[cnt] <= 57) ||

1286 (
°r
[
˙t
] >= 65 && str[cnt] <= 90) ||

1287 (
°r
[
˙t
] >= 97 && str[cnt] <= 122)){

1288 
ªt
 = 
NO_ERROR
;

1290 
ªt
 = 
ERR_INVALID_FORMAT
;

1294  
ªt
;

1295 
	}
}

1297 
	#ISO8601_FORMAT
 "%Y-%m-%dT%T"

	)

1298 
	$utû_c⁄vît_to_utc_iso8601
(
time_t
 
timî
, * 
ouçut_°r
)

1300 
tm
* 
tm_öfo
;

1301 
timevÆ
 
tv
;

1302 
buf„r
[
CMD_BUFF_LEN
];

1303 
ãmp
[
CMD_BUFF_LEN
];

1305 
tm_öfo
 = 
	`gmtime
(&
timî
);

1306 
	`gëtimeofday
(&
tv
,
NULL
);

1307 
	`°r·ime
(
buf„r
, 
CMD_BUFF_LEN
, 
ISO8601_FORMAT
, 
tm_öfo
);

1308 
	`¢¥ötf
(
ãmp
,
CMD_BUFF_LEN
,".%03d000", ()
tv
.
tv_u£c
/1000);

1309 
	`°rˇt
(
buf„r
,
ãmp
);

1310 
	`°r˝y
(
ouçut_°r
, 
buf„r
);

1311 
	}
}

1313 
	$utû_gë_vÆue_by_key
(* 
öput
,* 
key
, *
vÆue
, 
size_t
 
vÆue_size
)

1315 
√l
 = 0, 
Àn
 = 
	`°æí
(
öput
)+1;

1316 *
q
, *
«me
, *
qvÆue
, *
qry_°r
 = (*)
	`mÆloc
(
Àn
*());

1317 
	`°∫˝y
–
qry_°r
, 
öput
, 
Àn
*());

1318 
q
 = 
qry_°r
;

1319 
	`°r£p
(&
q
, "&")){

1320 
√l
++;

1322 
q
 = 
qry_°r
; q < (qry_°∏+ 
Àn
);) {

1323 
qvÆue
 = 
«me
 = 
q
;

1324 
q
 +
	`°æí
(q); q < (
qry_°r
 + 
Àn
) && !*q; q++);

1325 
«me
 = 
	`°r£p
(&
qvÆue
, "=");

1326 if(
	`°rcmp
(
key
,
«me
) == 0){

1327 
	`°∫˝y
(
vÆue
, 
qvÆue
, 
vÆue_size
);

1330 
	`‰ì
(
qry_°r
);

1332 
	}
}

	@libs/utils/util_aes.c

8 
	~<›ís¶/´s.h
>

10 
	~"°d_hdr.h
"

11 
	~"comm_hdr.h
"

12 
	~"utû_´s.h
"

15 
	$utû_´s_öô
–*
key_d©a
, 
key_d©a_Àn
,

16 *
ß…
,

17 
EVP_CIPHER_CTX
 *
e_˘x
, EVP_CIPHER_CTX *
d_˘x
)

19 
i
, 
ƒounds
 = 5;

20 
key
[32], 
iv
[32];

27 
i
 = 
	`EVP_ByãsToKey
(
	`EVP_´s_256_cbc
(), 
	`EVP_sha1
(), 
ß…
,

28 
key_d©a
, 
key_d©a_Àn
, 
ƒounds
, 
key
, 
iv
);

29 i‡(
i
 != 32) {

30 
	`QNAP_LOG_ERR_NL
("Key sizêi†%d bô†- should bê256 bôs\n", 
i
);

34 if(
e_˘x
){

35 
	`EVP_CIPHER_CTX_öô
(
e_˘x
);

36 
	`EVP_En¸y±Inô_ex
(
e_˘x
, 
	`EVP_´s_256_cbc
(), 
NULL
, 
key
, 
iv
);

39 if(
d_˘x
){

40 
	`EVP_CIPHER_CTX_öô
(
d_˘x
);

41 
	`EVP_De¸y±Inô_ex
(
d_˘x
, 
	`EVP_´s_256_cbc
(), 
NULL
, 
key
, 
iv
);

45 
	}
}

47 
	$utû_´s_˛ón_up
(
EVP_CIPHER_CTX
 *
e
)

49 if(
e
)

50 
	`EVP_CIPHER_CTX_˛ónup
(
e
);

51 
	}
}

53 *
	$utû_´s_í¸y±
(
EVP_CIPHER_CTX
 *
e
, *
∂aöãxt
, *
Àn
)

56 if(!
e
 || !
∂aöãxt
 || !
Àn
){

57 
	`QNAP_LOG_ERR_NL
("invalidÖarameter");

58  
NULL
;

62 
c_Àn
 = *
Àn
 + 
AES_BLOCK_SIZE
, 
f_Àn
 = 0;

63 *
cùhîãxt
 = 
	`mÆloc
(
c_Àn
);

66 
	`EVP_En¸y±Inô_ex
(
e
, 
NULL
, NULL, NULL, NULL);

70 
	`EVP_En¸y±Upd©e
(
e
, 
cùhîãxt
, &
c_Àn
, 
∂aöãxt
, *
Àn
);

73 
	`EVP_En¸y±FöÆ_ex
(
e
, 
cùhîãxt
+
c_Àn
, &
f_Àn
);

75 *
Àn
 = 
c_Àn
 + 
f_Àn
;

79  
cùhîãxt
;

80 
	}
}

82 *
	$utû_´s_de¸y±
(
EVP_CIPHER_CTX
 *
e
, *
cùhîãxt
, *
Àn
)

85 if(!
e
 || !
cùhîãxt
 || !
Àn
){

86 
	`QNAP_LOG_ERR_NL
("invalidÖarameter");

87  
NULL
;

91 
p_Àn
 = *
Àn
, 
f_Àn
 = 0;

92 *
∂aöãxt
 = 
	`mÆloc
(
p_Àn
 + 
AES_BLOCK_SIZE
);

94 
	`EVP_De¸y±Inô_ex
(
e
, 
NULL
, NULL, NULL, NULL);

95 
	`EVP_De¸y±Upd©e
(
e
, 
∂aöãxt
, &
p_Àn
, 
cùhîãxt
, *
Àn
);

96 
	`EVP_De¸y±FöÆ_ex
(
e
, 
∂aöãxt
+
p_Àn
, &
f_Àn
);

98 *
Àn
 = 
p_Àn
 + 
f_Àn
;

102  
∂aöãxt
;

103 
	}
}

105 
	$utû_´s_de¸y±_°r
(
EVP_CIPHER_CTX
 *
´s_dec_˘x
, *
°r_buff
,

106 
size_t
 
buff_size
)

109 if(
°r_buff
 && 
´s_dec_˘x
){

110 
Àn
 = 
	`°æí
(
°r_buff
);

111 
uöt8_t
 *
cùhî_ãxt
 = 
NULL
;

112 
uöt8_t
 *
∂aö_ãxt
 = 
NULL
;

114 if(
Àn
 =0 || 
buff_size
 == 0){

115 
°r_buff
[0] = '\0';

118 
cùhî_ãxt
 = 
	`mÆloc
(
Àn
);

119 if(
cùhî_ãxt
){

123 
	`utû_c⁄vît_ch¨_to_hex
(
°r_buff
, 
Àn
, 
cùhî_ãxt
);

124 
Àn
 =Üen >> 1;

128 
	`mem£t
(
°r_buff
, 0x0, 
buff_size
);

129 
∂aö_ãxt
 = 
	`utû_´s_de¸y±
(
´s_dec_˘x
, 
cùhî_ãxt
, &
Àn
);

130 if(
∂aö_ãxt
 && 
Àn
 > 0){

131 if(
buff_size
 > 
Àn
){

132 
	`°∫˝y
(
°r_buff
, (*)
∂aö_ãxt
, 
Àn
);

133 
°r_buff
[
Àn
] = '\0';

135 
	`QNAP_LOG_ERR_NL
("buf„∏i†toÿsmÆl; buff: %zd <Üí: %d", 
buff_size
, 
Àn
);

137 
	`‰ì
(
∂aö_ãxt
);

139 
	`QNAP_LOG_ERR_NL
("ÁûedÅÿde¸y±: %p;Üí: %d", 
∂aö_ãxt
, 
Àn
);

141 
	`‰ì
(
cùhî_ãxt
);

145 
	}
}

147 * 
	$utû_´s_í¸y±_°r
(
EVP_CIPHER_CTX
 *
´s_íc_˘x
, *
§c
)

150 if(!
´s_íc_˘x
 || !
§c
){

151 
	`QNAP_LOG_ERR_NL
("ÁûedÅÿí¸y±:áes_íc_˘x:%s", 
´s_íc_˘x
);

152 
	`QNAP_LOG_ERR_NL
("ÁûedÅÿí¸y±: src:%s", 
§c
);

153  
NULL
;

156 
uöt8_t
 *
∂aö_ãxt
 = (uöt8_à*)
§c
;

157 
uöt8_t
 *
cùhî_ãxt
 ;

158 
Àn
 = 
	`°æí
(
§c
);

160 if(
Àn
 == 0) {

161  
NULL
;

167 
cùhî_ãxt
 = 
	`utû_´s_í¸y±
(
´s_íc_˘x
, 
∂aö_ãxt
, &
Àn
);

168 if(
cùhî_ãxt
){

172 
Àn_°r
 = 
Àn
*2+1;

173 *
cùhî_ãxt_°r
 = 
	`mÆloc
(
Àn_°r
);

174 if(
cùhî_ãxt_°r
){

175 
	`utû_c⁄vît_hex_to_ch¨
(
cùhî_ãxt
, 
Àn
, 
cùhî_ãxt_°r
,Üen);

176  
cùhî_ãxt_°r
;

178 
	`‰ì
(
cùhî_ãxt
);

181 
	`QNAP_LOG_ERR_NL
("ÁûedÅÿí¸y±: %s", 
§c
);

182  
NULL
;

184 
	}
}

	@porter/include/porter_ev.h

8 #i‚de‡
PORTER_EV_H_


9 
	#PORTER_EV_H_


	)

14 
	s_p‹ãr_ev_cb_°
 {

16 
time_t
 
	mcheck_time
;

19 
time_t
 
	mupd©e_time
;

22 
œn_ù_öfo_°
 
	mœn_öfo
;

23 
	mexã∫Æ_ù
[
IP_STR_LEN
+1];

26 
œn_ù_öfo_°
 
	m√w_œn_öfo
;

27 
	m√w_exã∫Æ_ù
[
IP_STR_LEN
+1];

30 
	mdevi˚_°©us
[2];

33 
	mexô_Êag
;

34 } 
	tPORTER_EV_CB_T
;

39 
p‹ãr_ev_öô
();

40 
p‹ãr_ev_˛ónup
();

41 
p‹ãr_ev_run
();

	@porter/porter.c

7 
	~<sig«l.h
>

9 
	~"°d_hdr.h
"

10 
	~"comm_hdr.h
"

12 
	~"qid_sy°em.h
"

13 
	~"p‹ãr_ev.h
"

15 
	$p‹ãr_˛ónup
(
sig_num
)

20 
	`p‹ãr_ev_˛ónup
();

23 
	`q«p_log_˛ónup
();

24 
	}
}

38 
	$p‹ãr_sig«l_öô
 ()

40 
rc
 = 
NO_ERROR
;

43 
rc
 |
	`utû_£tup_sig«l
(
SIGPIPE
, 
SIG_IGN
);

46 
rc
 |
	`utû_£tup_sig«l
(
SIGQUIT
, 
p‹ãr_˛ónup
);

47 
rc
 |
	`utû_£tup_sig«l
(
SIGTERM
, 
p‹ãr_˛ónup
);

48 
rc
 |
	`utû_£tup_sig«l
(
SIGABRT
, 
p‹ãr_˛ónup
);

50 (
rc
);

51 
	}
}

65 
	$p‹ãr_öô
 (*
d´m⁄_«me
)

67 
rc
 = 
NO_ERROR
;

72 
rc
 |
	`p‹ãr_sig«l_öô
();

77 
rc
 |
	`p‹ãr_ev_öô
();

79  
rc
;

80 
	}
}

87 
	$maö
 (
¨gc
, **
¨gv
)

90 *
d´m⁄_«me
;

91 
rc
;

96 
d´m⁄_«me
 = 
	`utû_gë_d´m⁄_«me
(
¨gv
[0]);

101 
	`utû_d´m⁄ize
();

106 i‡((
rc
 = 
	`p‹ãr_öô
(
d´m⁄_«me
)Ë!
NO_ERROR
)

107 
out
;

113 
	`p‹ãr_ev_run
();

115 
out
:

119 
	`p‹ãr_˛ónup
(0);

122 
	}
}

	@porter/porter_ev.c

5 
	~<î∫o.h
>

6 
	~<f˙é.h
>

7 
	~<sys/sockë.h
>

8 
	~<√töë/ö.h
>

9 
	~<¨∑/öë.h
>

10 
	~<sys/un.h
>

12 
	~"°d_hdr.h
"

13 
	~"comm_hdr.h
"

15 
	~"qid_≠i.h
"

16 
	~"qid_°ru˘.h
"

17 
	~"qid_sy°em.h
"

18 
	~"m˙_≠i.h
"

19 
	~"q˛oud.h
"

20 
	~"p‹ãr_ev.h
"

23 #ifde‡
DEBUG


24 
	#PORTER_CHECK_EXT_IP_TIMER
 (15)

25 #ñ£

	)

26 
	#PORTER_CHECK_EXT_IP_TIMER
 (15*60)

28 

	)

32 
q˛oud_°
 *
	gqid_˘x
;

33 
PORTER_EV_CB_T
 
	gp‹ãr_ev_cb
;

35 
	$p‹ãr_is_œnù_ch™ged
()

38 
	`qid_sys_gë_loˇl_ù_li°
(&
p‹ãr_ev_cb
.
√w_œn_öfo
);

41 if(0 !
	`°∫cmp
(
p‹ãr_ev_cb
.
œn_öfo
.
œn_ù_li°
,Ö‹ãr_ev_cb.
√w_œn_öfo
.œn_ù_li°, 
LAN_IP_LIST_LEN
) ||

42 0 !
	`°∫cmp
(
p‹ãr_ev_cb
.
œn_öfo
.
œn_gw
,Ö‹ãr_ev_cb.
√w_œn_öfo
.œn_gw, 
IP_STR_LEN
))

45 
	`QNAP_LOG_DEBUG_NL
("needÅo update device information:Üan_ip & gw changed from \"%s %s\"Åo \"%s %s\"",

46 
p‹ãr_ev_cb
.
œn_öfo
.
œn_ù_li°
,Ö‹ãr_ev_cb.œn_öfo.
œn_gw
,

47 
p‹ãr_ev_cb
.
√w_œn_öfo
.
œn_ù_li°
,Ö‹ãr_ev_cb.√w_œn_öfo.
œn_gw
);

50  
TRUE
;

54  
FALSE
;

55 
	}
}

57 
	$p‹ãr_is_w™ù_ch™ged
()

62 
p‹ãr_ev_cb
.
√w_exã∫Æ_ù
[0] = 0;

63 
	`q˛oud_gë_exã∫Æ_ù
(
qid_˘x
, 
p‹ãr_ev_cb
.
√w_exã∫Æ_ù
, (porter_ev_cb.new_external_ip));

64 if(
	`°æí
(
p‹ãr_ev_cb
.
√w_exã∫Æ_ù
) == 0){

65 
	`QNAP_LOG_WARN_NL
("get WAN IP failed");

66  
FALSE
;

70 if–
	`°∫cmp
(
p‹ãr_ev_cb
.
exã∫Æ_ù
,Ö‹ãr_ev_cb.
√w_exã∫Æ_ù
, 
IP_STR_LEN
) )

72 
	`QNAP_LOG_DEBUG_NL
("needÅo update device information: WAN IP changed from %sÅo %s",

73 
p‹ãr_ev_cb
.
exã∫Æ_ù
,Ö‹ãr_ev_cb.
√w_exã∫Æ_ù
);

74  
TRUE
;

77  
FALSE
;

78 
	}
}

92 
	$p‹ãr_ev_öô
()

95 
rc
 = 
NO_ERROR
;

98 
cuæ_Êag
[
TMP_BUFF_LEN
+1];

101 
uöt32_t
 
log_Êag
;

104 
q«p_≠p_öfo
 
öfo
;

105 
	`mem£t
(&
öfo
, 0, (
q«p_≠p_öfo
));

110 
qid_˘x
 = 
	`q˛oud_öô_˘x
(&
öfo
);

111 i‡(
qid_˘x
 =
NULL
) {

112 
	`QNAP_LOG_CRIT_NL
("Cannot set up QID context");

113 
rc
 = -1;

114 
ªt
;

118 
	`qid_sys_gë_cuæ_log_Êag
(
cuæ_Êag
, 
TMP_BUFF_LEN
);

119 
log_Êag
 = 
QID_LOG_FILE
;

120 i‡(
MAGIC_LOG_NUMBER
 =
	`©oi
(
cuæ_Êag
)){

121 
log_Êag
 |
QID_LOG_CURL
;

125 
	`q˛oud_£t_log
(
qid_˘x
, 
log_Êag
, 
LOG_DEBUG
);

126 
	`q«p_log_to_fûe
(
QNAP_PORTER_LOG_PATH
);

131 
	`mem£t
 (&
p‹ãr_ev_cb
, 0x0, (porter_ev_cb));

133 
ªt
:

134  (
rc
);

136 
	}
}

141 
	$p‹ãr_ev_˛ónup
()

144 
p‹ãr_ev_cb
.
exô_Êag
 = 
TRUE
;

147 
	`q˛oud_˛ónup_˘x
(
qid_˘x
);

148 
qid_˘x
 = 
NULL
;

149 
	}
}

151 
	$p‹ãr_≥riod_check
() {

152 
ªt
 = 
QID_ERR_NO_ERROR
;

155 
is_upd©e_devi˚
 = 
FALSE
;

158 
time_t
 
cuºít_time
 = 
	`time
(0);

161 
time_t
 
ªp‹t_≥riod
 = 0;

164 if–(
cuºít_time
 - 
p‹ãr_ev_cb
.
check_time
Ë< 
PORTER_CHECK_EXT_IP_TIMER
 )

165  
ªt
;

168 
p‹ãr_ev_cb
.
check_time
 = 
cuºít_time
;

171 
is_upd©e_devi˚
 = 
	`p‹ãr_is_œnù_ch™ged
();

172 
is_upd©e_devi˚
 |
	`p‹ãr_is_w™ù_ch™ged
();

173 if–!
is_upd©e_devi˚
 )  
ªt
;

176 
ªt
 = 
	`my˛oudNAS_devi˚_upd©e_öfo
(
qid_˘x
, &
ªp‹t_≥riod
);

179 if–
ªt
 =
QID_ERR_NO_ERROR
 )

182 
	`°∫˝y
(
p‹ãr_ev_cb
.
œn_öfo
.
œn_ù_li°
,Ö‹ãr_ev_cb.
√w_œn_öfo
.œn_ù_li°, 
LAN_IP_LIST_LEN
);

183 
	`°∫˝y
(
p‹ãr_ev_cb
.
œn_öfo
.
œn_gw
,Ö‹ãr_ev_cb.
√w_œn_öfo
.œn_gw, 
IP_STR_LEN
);

184 
p‹ãr_ev_cb
.
œn_öfo
.
œn_ù_li°
[
LAN_IP_LIST_LEN
] = '\0';

185 
p‹ãr_ev_cb
.
œn_öfo
.
œn_gw
[
IP_STR_LEN
] = '\0';

188 
	`°∫˝y
(
p‹ãr_ev_cb
.
exã∫Æ_ù
,Ö‹ãr_ev_cb.
√w_exã∫Æ_ù
, 
IP_STR_LEN
);

189 
p‹ãr_ev_cb
.
exã∫Æ_ù
[
IP_STR_LEN
] = 0;

192 
p‹ãr_ev_cb
.
upd©e_time
 = 
cuºít_time
;

195  
ªt
;

196 
	}
}

202 
	$p‹ãr_ev_run
()

204 
ªt
 = 
QID_ERR_NO_ERROR
;

206  
p‹ãr_ev_cb
.
exô_Êag
 =
FALSE
 ) {

208 
	`qid_sys_gë_qid_°©us
(
p‹ãr_ev_cb
.
devi˚_°©us
,

209 (
p‹ãr_ev_cb
.
devi˚_°©us
));

210 if–
p‹ãr_ev_cb
.
devi˚_°©us
[0] !
QID_STAT_E_BIND
 )

212 
	`QNAP_LOG_INFO_NL
("not sign-in (status is %s),ÉxitÖorter",

213 
p‹ãr_ev_cb
.
devi˚_°©us
);

218 
ªt
 = 
	`p‹ãr_≥riod_check
();

221 if–
ªt
 !
QID_ERR_NO_ERROR
 )

224  
ªt
 )

226 
MCN_ERR_DEVICE_ID_NOT_FOUND
:

228 
	`QNAP_LOG_INFO_NL
("device idÇot found, maybe unbind fromÖortal");

229 
	`ª£t_q˛oud_˘x_c⁄f
(
qid_˘x
);

230 
exô
;

239 
	`¶ìp
(1);

242 
exô
:

244 
	`QNAP_LOG_DEBUG_NL
("bye");

246  
ªt
;

247 
	}
}

	@sample/qcloud_sample.c

1 
	~<°dio.h
>

2 
	~<°rög.h
>

3 
	~<time.h
>

5 
	~"q˛oud.h
"

6 
	~"qid_≠i.h
"

7 
	~"m˙_≠i.h
"

9 
	$signö
(* 
id
, * 
pw
)

11 
ªt
 = 
QID_ERR_NO_ERROR
;

14 
q«p_≠p_öfo
 
öfo
;

15 
	`mem£t
(&
öfo
, 0, (
q«p_≠p_öfo
));

18 
q˛oud_°
* 
˘x
 = 
	`q˛oud_öô_˘x
(&
öfo
);

21 
ªt
 = 
	`q«p_id_signö
(
˘x
, 
id
, 
pw
);

22 
	`¥ötf
("signö_ªt:%d\n", 
ªt
);

23 if–
ªt
 =
QID_ERR_NO_ERROR
) {

24 
	`¥ötf
("qid_and_pw: correct\n");

26 
	`¥ötf
("qid_and_pw: incorrect\n");

30 
	`q˛oud_˛ónup_˘x
(
˘x
);

32  
ªt
;

33 
	}
}

35 
	$avaûabÀ
(* 
devi˚_«me
)

37 
ªt
 = 
QID_ERR_NO_ERROR
;

38 
fun˘i⁄_ªt
 = 0;

41 
q«p_≠p_öfo
 
öfo
;

42 
	`mem£t
(&
öfo
, 0, (
q«p_≠p_öfo
));

45 
q˛oud_°
* 
˘x
 = 
	`q˛oud_öô_˘x
(&
öfo
);

48 
fun˘i⁄_ªt
 = 
	`q«p_id_is_devi˚_«me_avaûabÀ
(
˘x
, 
devi˚_«me
);

49 if–
fun˘i⁄_ªt
 =
QCLOUD_NAME_FREE
 )

50 
	`¥ötf
("device_name:ávailable\n");

52 if–
fun˘i⁄_ªt
 =
QCLOUD_NAME_BEEN_USED
 )

53 
	`¥ötf
("device_name:Ço_available\n");

57 
	`¥ötf
("device_name:Ço_available\n");

60 
	`q˛oud_˛ónup_˘x
(
˘x
);

62  
ªt
;

63 
	}
}

65 
	$böd
(* 
devi˚_«me
)

67 
ªt
 = 
QID_ERR_NO_ERROR
;

70 
q«p_≠p_öfo
 
öfo
;

71 
	`mem£t
(&
öfo
, 0, (
q«p_≠p_öfo
));

74 
q˛oud_°
* 
˘x
 = 
	`q˛oud_öô_˘x
(&
öfo
);

77 
ªt
 = 
	`q«p_id_böd_devi˚
(
˘x
, 
devi˚_«me
);

78 
	`¥ötf
("Ñë böd %d \¿",
ªt
);

81 
	`q˛oud_˛ónup_˘x
(
˘x
);

83  
ªt
;

84 
	}
}

86 
	$unböd
()

88 
ªt
 = 
QID_ERR_NO_ERROR
;

91 
q«p_≠p_öfo
 
öfo
;

92 
	`mem£t
(&
öfo
, 0, (
q«p_≠p_öfo
));

95 
q˛oud_°
* 
˘x
 = 
	`q˛oud_öô_˘x
(&
öfo
);

97 
ªt
 = 
	`q«p_id_unböd_devi˚
(
˘x
);

100 
	`q˛oud_˛ónup_˘x
(
˘x
);

102  
ªt
;

103 
	}
}

105 
	$publish_£rvi˚
()

107 
ªt
 = 
QID_ERR_NO_ERROR
;

110 
q«p_≠p_öfo
 
öfo
;

111 
	`mem£t
(&
öfo
, 0, (
q«p_≠p_öfo
));

114 
q˛oud_°
* 
˘x
 = 
	`q˛oud_öô_˘x
(&
öfo
);

117 
m˙_ddns_publish_°
 
ddns_£rvi˚_éb
[2] = {

134 
m˙_£rvi˚_p‹t
 
p‹t_m≠pög_éb
[2] = {

153 
ªt
 = 
	`my˛oudNAS_upd©e_published_£rvi˚
(

154 
˘x
,

155 
ddns_£rvi˚_éb
,

157 if–
ªt
 !
QID_ERR_NO_ERROR
 ) ;

160 
ªt
 = 
	`my˛oudNAS_upd©e_£rvi˚_p‹t
(

161 
˘x
,

162 
p‹t_m≠pög_éb
,

167 
	`q˛oud_˛ónup_˘x
(
˘x
);

169  
ªt
;

170 
	}
}

172 
	$gë_devi˚_öfo
()

174 
ªt
 = 
QID_ERR_NO_ERROR
;

177 
q«p_≠p_öfo
 
öfo
;

178 
	`mem£t
(&
öfo
, 0, (
q«p_≠p_öfo
));

181 
q«p_dev_öfo
 
dev_öfo
;

182 
	`mem£t
(&
dev_öfo
, 0, (
q«p_dev_öfo
));

185 
q˛oud_°
* 
˘x
 = 
	`q˛oud_öô_˘x
(&
öfo
);

188 
ªt
 = 
	`q˛oud_gë_devi˚_öfo
(
˘x
, &
dev_öfo
);

191 if–
ªt
 =
QID_ERR_NO_ERROR
 ) {

193 
	`¥ötf
("qid_accou¡: %s\n", 
dev_öfo
.
qid_accou¡
);

196 if–
dev_öfo
.
qid_°©us
[0] ='3' ) 
	`¥ötf
("qid_status: sign-in\n");

197 
	`¥ötf
("qid_status: sign-out\n");

200 
	`¥ötf
("devi˚_id: %s\n", 
dev_öfo
.
devi˚_id
);

203 
	`¥ötf
("devi˚_«me: %s\n", 
dev_öfo
.
devi˚_«me
);

207 
	`q˛oud_˛ónup_˘x
(
˘x
);

209  
ªt
;

210 
	}
}

212 
	$upd©e_devi˚_öfo
()

214 
ªt
 = 
QID_ERR_NO_ERROR
;

217 
q«p_≠p_öfo
 
öfo
;

218 
	`mem£t
(&
öfo
, 0, (
q«p_≠p_öfo
));

221 
time_t
 
ªp‹t_≥riod
 = 0;

224 
q˛oud_°
* 
˘x
 = 
	`q˛oud_öô_˘x
(&
öfo
);

227 
	`ª£t_q˛oud_ªque°_hash
();

230 
ªt
 = 
	`my˛oudNAS_devi˚_upd©e_öfo
(
˘x
, &
ªp‹t_≥riod
);

231 
	`¥ötf
("upd©e_ªt: %d \n", 
ªt
);

234  
ªt
 )

236 
MCN_ERR_DEVICE_ID_NOT_FOUND
:

239 
	`¥ötf
("p‹èl: %d\n", 
ªt
);

240 
	`ª£t_q˛oud_˘x_c⁄f
(
˘x
);

248 
	`q˛oud_˛ónup_˘x
(
˘x
);

250  
ªt
;

251 
	}
}

253 
	$¥öt_ußge
(* 
¥og
)

255 
	`¥ötf
("ußge: %†comm™dárgumíts:\n", 
¥og
);

256 
	`¥ötf
("commandÜist:\n");

257 
	`¥ötf
("signin qidÖw\n");

258 
	`¥ötf
("available device_name\n");

259 
	`¥ötf
("bind device_name\n");

260 
	`¥ötf
("publish_service\n");

261 
	`¥ötf
("get_device_info\n");

262 
	`¥ötf
("update_device_info\n");

263 
	`¥ötf
("unbind\n");

264 
	`¥ötf
("\n");

265 
	}
}

268 
	$maö
(
¨gc
, * 
¨gv
[])

271 if–
¨gc
 <= 1 )

273 
	`¥öt_ußge
(
¨gv
[0]);

278 if–!
	`°rcmp
(
¨gv
[1], "signö"Ë&& 
¨gc
 == 4 ) {

279  
	`signö
(
¨gv
[2],árgv[3]);

281 if–!
	`°rcmp
(
¨gv
[1], "avaûabÀ"Ë&& 
¨gc
 == 3 ) {

282  
	`avaûabÀ
(
¨gv
[2]);

284 if–!
	`°rcmp
(
¨gv
[1], "böd"Ë&& 
¨gc
 == 3 ) {

285  
	`böd
(
¨gv
[2]);

287 if–!
	`°rcmp
(
¨gv
[1], "publish_£rvi˚"Ë&& 
¨gc
 == 2 ) {

288  
	`publish_£rvi˚
();

290 if–!
	`°rcmp
(
¨gv
[1], "gë_devi˚_öfo"Ë&& 
¨gc
 == 2 ) {

291  
	`gë_devi˚_öfo
();

293 if–!
	`°rcmp
(
¨gv
[1], "upd©e_devi˚_öfo"Ë&& 
¨gc
 == 2 ) {

294  
	`upd©e_devi˚_öfo
();

296 if–!
	`°rcmp
(
¨gv
[1], "unböd"Ë&& 
¨gc
 == 2 ) {

297  
	`unböd
();

300 
	`¥öt_ußge
(
¨gv
[0]);

306 
	}
}

	@/usr/include/arpa/inet.h

18 #i‚de‡
_ARPA_INET_H


19 
	#_ARPA_INET_H
 1

	)

21 
	~<„©uªs.h
>

22 
	~<√töë/ö.h
>

25 #i‚de‡
__sockÀn_t_deföed


26 
__sockÀn_t
 
	tsockÀn_t
;

27 
	#__sockÀn_t_deföed


	)

30 
__BEGIN_DECLS


34 
ö_addr_t
 
	$öë_addr
 (c⁄° *
__˝
Ë
__THROW
;

37 
ö_addr_t
 
	$öë_ aof
 (
ö_addr
 
__ö
Ë
__THROW
;

41 
ö_addr
 
	$öë_makóddr
 (
ö_addr_t
 
__√t
, in_addr_à
__ho°
)

42 
__THROW
;

45 
ö_addr_t
 
	$öë_√tof
 (
ö_addr
 
__ö
Ë
__THROW
;

49 
ö_addr_t
 
	$öë_√tw‹k
 (c⁄° *
__˝
Ë
__THROW
;

53 *
	$öë_¡ﬂ
 (
ö_addr
 
__ö
Ë
__THROW
;

58 
	$öë_±⁄
 (
__af
, c⁄° *
__ª°ri˘
 
__˝
,

59 *
__ª°ri˘
 
__buf
Ë
__THROW
;

64 c⁄° *
	$öë_¡›
 (
__af
, c⁄° *
__ª°ri˘
 
__˝
,

65 *
__ª°ri˘
 
__buf
, 
sockÀn_t
 
__Àn
)

66 
__THROW
;

70 #ifde‡
__USE_MISC


73 
	$öë_©⁄
 (c⁄° *
__˝
, 
ö_addr
 *
__öp
Ë
__THROW
;

77 *
	$öë_√è
 (
ö_addr_t
 
__√t
, *
__buf
, 
size_t
 
__Àn
Ë
__THROW
;

82 *
	$öë_√t_¡›
 (
__af
, c⁄° *
__˝
, 
__bôs
,

83 *
__buf
, 
size_t
 
__Àn
Ë
__THROW
;

88 
	$öë_√t_±⁄
 (
__af
, c⁄° *
__˝
,

89 *
__buf
, 
size_t
 
__Àn
Ë
__THROW
;

94 
	$öë_nßp_addr
 (c⁄° *
__˝
,

95 *
__buf
, 
__Àn
Ë
__THROW
;

99 *
	$öë_nßp_¡ﬂ
 (
__Àn
, c⁄° *
__˝
,

100 *
__buf
Ë
__THROW
;

103 
__END_DECLS


	@/usr/include/ctype.h

23 #i‚def 
_CTYPE_H


24 
	#_CTYPE_H
 1

	)

26 
	~<„©uªs.h
>

27 
	~<bôs/ty≥s.h
>

29 
	g__BEGIN_DECLS


31 #i‚de‡
_ISbô


40 
	~<ídün.h
>

41 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


42 
	#_ISbô
(
bô
Ë(1 << (bô))

	)

44 
	#_ISbô
(
bô
Ë((bôË< 8 ? ((1 << (bô)Ë<< 8Ë: ((1 << (bô)Ë>> 8))

	)

49 
	m_ISuµî
 = 
_ISbô
 (0),

50 
	m_ISlowî
 = 
_ISbô
 (1),

51 
	m_ISÆpha
 = 
_ISbô
 (2),

52 
	m_ISdigô
 = 
_ISbô
 (3),

53 
	m_ISxdigô
 = 
_ISbô
 (4),

54 
	m_IS•a˚
 = 
_ISbô
 (5),

55 
	m_IS¥öt
 = 
_ISbô
 (6),

56 
	m_ISgøph
 = 
_ISbô
 (7),

57 
	m_ISbœnk
 = 
_ISbô
 (8),

58 
	m_IS˙ål
 = 
_ISbô
 (9),

59 
	m_ISpun˘
 = 
_ISbô
 (10),

60 
	m_ISÆnum
 = 
_ISbô
 (11)

80 c⁄° **
	$__˘y≥_b_loc
 ()

81 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

82 c⁄° 
__öt32_t
 **
	$__˘y≥_tﬁowî_loc
 ()

83 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

84 c⁄° 
__öt32_t
 **
	$__˘y≥_touµî_loc
 ()

85 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

88 #i‚de‡
__˝lu•lus


89 
	#__is˘y≥
(
c
, 
ty≥
) \

90 ((*
	`__˘y≥_b_loc
 ())[(Ë(
c
)] & (Ë
ty≥
)

	)

91 #ñi‡
deföed
 
__USE_EXTERN_INLINES


92 
	#__is˘y≥_f
(
ty≥
) \

93 
__exã∫_ölöe
 \

94 
is
##
	`ty≥
 (
__c
Ë
__THROW
 \

96  (*
	`__˘y≥_b_loc
 ())[(Ë(
__c
)] & (Ë
_IS
##
ty≥
; \

97 
	}

	)
}

100 
	#__ißscii
(
c
Ë(((cË& ~0x7fË=0Ë

	)

101 
	#__tﬂscii
(
c
Ë((cË& 0x7fË

	)

103 
	#__ex˘y≥
(
«me
Ë
	`«me
 (Ë
__THROW


	)

105 
__BEGIN_NAMESPACE_STD


111 
__ex˘y≥
 (
iß um
);

112 
__ex˘y≥
 (
ißÕha
);

113 
__ex˘y≥
 (
is˙ål
);

114 
__ex˘y≥
 (
isdigô
);

115 
__ex˘y≥
 (
i¶owî
);

116 
__ex˘y≥
 (
isgøph
);

117 
__ex˘y≥
 (
i•röt
);

118 
__ex˘y≥
 (
i•un˘
);

119 
__ex˘y≥
 (
is•a˚
);

120 
__ex˘y≥
 (
isuµî
);

121 
__ex˘y≥
 (
isxdigô
);

125 
	$tﬁowî
 (
__c
Ë
__THROW
;

128 
	$touµî
 (
__c
Ë
__THROW
;

130 
__END_NAMESPACE_STD


134 #ifdef 
__USE_ISOC99


135 
__BEGIN_NAMESPACE_C99


137 
	`__ex˘y≥
 (
isbœnk
);

139 
__END_NAMESPACE_C99


142 #ifde‡
__USE_GNU


144 
	$is˘y≥
 (
__c
, 
__mask
Ë
__THROW
;

147 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC
 || deföed 
__USE_XOPEN


151 
	$ißscii
 (
__c
Ë
__THROW
;

155 
	$tﬂscii
 (
__c
Ë
__THROW
;

159 
	`__ex˘y≥
 (
_touµî
);

160 
	`__ex˘y≥
 (
_tﬁowî
);

164 
	#__tobody
(
c
, 
f
, 
a
, 
¨gs
) \

165 (
__exãnsi⁄__
 \

166 ({ 
__ªs
; \

167 i‡( (
c
) > 1) \

169 i‡(
	`__buûtö_c⁄°™t_p
 (
c
)) \

171 
__c
 = (
c
); \

172 
__ªs
 = 
__c
 < -128 || __¯> 255 ? __¯: (
a
)[__c]; \

175 
__ªs
 = 
f
 
¨gs
; \

178 
__ªs
 = (
a
)[(Ë(
c
)]; \

179 
__ªs
; 
	}
}))

	)

181 #i‡!
deföed
 
__NO_CTYPE


182 #ifde‡
__is˘y≥_f


183 
	$__is˘y≥_f
 (
Ænum
)

184 
	$__is˘y≥_f
 (
Æpha
)

185 
	$__is˘y≥_f
 (
˙ål
)

186 
	$__is˘y≥_f
 (
digô
)

187 
	$__is˘y≥_f
 (
lowî
)

188 
	$__is˘y≥_f
 (
gøph
)

189 
	$__is˘y≥_f
 (
¥öt
)

190 
	$__is˘y≥_f
 (
pun˘
)

191 
	$__is˘y≥_f
 (
•a˚
)

192 
	$__is˘y≥_f
 (
uµî
)

193 
	$__is˘y≥_f
 (
xdigô
)

194 #ifde‡
__USE_ISOC99


195 
	$__is˘y≥_f
 (
bœnk
)

197 #ñi‡
deföed
 
__is˘y≥


198 
	#iß um
(
c
Ë
	`__is˘y≥
((c), 
_ISÆnum
)

	)

199 
	#ißÕha
(
c
Ë
	`__is˘y≥
((c), 
_ISÆpha
)

	)

200 
	#is˙ål
(
c
Ë
	`__is˘y≥
((c), 
_IS˙ål
)

	)

201 
	#isdigô
(
c
Ë
	`__is˘y≥
((c), 
_ISdigô
)

	)

202 
	#i¶owî
(
c
Ë
	`__is˘y≥
((c), 
_ISlowî
)

	)

203 
	#isgøph
(
c
Ë
	`__is˘y≥
((c), 
_ISgøph
)

	)

204 
	#i•röt
(
c
Ë
	`__is˘y≥
((c), 
_IS¥öt
)

	)

205 
	#i•un˘
(
c
Ë
	`__is˘y≥
((c), 
_ISpun˘
)

	)

206 
	#is•a˚
(
c
Ë
	`__is˘y≥
((c), 
_IS•a˚
)

	)

207 
	#isuµî
(
c
Ë
	`__is˘y≥
((c), 
_ISuµî
)

	)

208 
	#isxdigô
(
c
Ë
	`__is˘y≥
((c), 
_ISxdigô
)

	)

209 #ifde‡
__USE_ISOC99


210 
	#isbœnk
(
c
Ë
	`__is˘y≥
((c), 
_ISbœnk
)

	)

214 #ifde‡
__USE_EXTERN_INLINES


215 
__exã∫_ölöe
 

216 
	`__NTH
 (
	$tﬁowî
 (
__c
))

218  
__c
 >-128 && __¯< 256 ? (*
	`__˘y≥_tﬁowî_loc
 ())[__c] : __c;

219 
	}
}

221 
__exã∫_ölöe
 

222 
__NTH
 (
	$touµî
 (
__c
))

224  
__c
 >-128 && __¯< 256 ? (*
	`__˘y≥_touµî_loc
 ())[__c] : __c;

225 
	}
}

228 #i‡
__GNUC__
 >2 && 
deföed
 
__OPTIMIZE__
 && !deföed 
__˝lu•lus


229 
	#tﬁowî
(
c
Ë
	`__tobody
 (c, 
tﬁowî
, *
	`__˘y≥_tﬁowî_loc
 (), (c))

	)

230 
	#touµî
(
c
Ë
	`__tobody
 (c, 
touµî
, *
	`__˘y≥_touµî_loc
 (), (c))

	)

233 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC
 || deföed 
__USE_XOPEN


234 
	#ißscii
(
c
Ë
	`__ißscii
 (c)

	)

235 
	#tﬂscii
(
c
Ë
	`__tﬂscii
 (c)

	)

237 
	#_tﬁowî
(
c
Ë((Ë(*
	`__˘y≥_tﬁowî_loc
 ())[(Ë(c)])

	)

238 
	#_touµî
(
c
Ë((Ë(*
	`__˘y≥_touµî_loc
 ())[(Ë(c)])

	)

244 #ifde‡
__USE_XOPEN2K8


258 
	~<xloˇÀ.h
>

262 
	#__is˘y≥_l
(
c
, 
ty≥
, 
loˇÀ
) \

263 ((
loˇÀ
)->
__˘y≥_b
[(Ë(
c
)] & (Ë
ty≥
)

	)

265 
	#__ex˘y≥_l
(
«me
) \

266 
	`«me
 (, 
__loˇÀ_t
Ë
__THROW


	)

272 
__ex˘y≥_l
 (
iß um_l
);

273 
__ex˘y≥_l
 (
ißÕha_l
);

274 
__ex˘y≥_l
 (
is˙ål_l
);

275 
__ex˘y≥_l
 (
isdigô_l
);

276 
__ex˘y≥_l
 (
i¶owî_l
);

277 
__ex˘y≥_l
 (
isgøph_l
);

278 
__ex˘y≥_l
 (
i•röt_l
);

279 
__ex˘y≥_l
 (
i•un˘_l
);

280 
__ex˘y≥_l
 (
is•a˚_l
);

281 
__ex˘y≥_l
 (
isuµî_l
);

282 
__ex˘y≥_l
 (
isxdigô_l
);

284 
__ex˘y≥_l
 (
isbœnk_l
);

288 
	$__tﬁowî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

289 
	$tﬁowî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

292 
	$__touµî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

293 
	$touµî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

295 #i‡
__GNUC__
 >2 && 
deföed
 
__OPTIMIZE__
 && !deföed 
__˝lu•lus


296 
	#__tﬁowî_l
(
c
, 
loˇÀ
) \

297 
	`__tobody
 (
c
, 
__tﬁowî_l
, (
loˇÀ
)->
__˘y≥_tﬁowî
, (c,ÜoˇÀ))

	)

298 
	#__touµî_l
(
c
, 
loˇÀ
) \

299 
	`__tobody
 (
c
, 
__touµî_l
, (
loˇÀ
)->
__˘y≥_touµî
, (c,ÜoˇÀ))

	)

300 
	#tﬁowî_l
(
c
, 
loˇÀ
Ë
	`__tﬁowî_l
 ((c), (loˇÀ))

	)

301 
	#touµî_l
(
c
, 
loˇÀ
Ë
	`__touµî_l
 ((c), (loˇÀ))

	)

305 #i‚de‡
__NO_CTYPE


306 
	#__iß um_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISÆnum
, (l))

	)

307 
	#__ißÕha_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISÆpha
, (l))

	)

308 
	#__is˙ål_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_IS˙ål
, (l))

	)

309 
	#__isdigô_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISdigô
, (l))

	)

310 
	#__i¶owî_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISlowî
, (l))

	)

311 
	#__isgøph_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISgøph
, (l))

	)

312 
	#__i•röt_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_IS¥öt
, (l))

	)

313 
	#__i•un˘_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISpun˘
, (l))

	)

314 
	#__is•a˚_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_IS•a˚
, (l))

	)

315 
	#__isuµî_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISuµî
, (l))

	)

316 
	#__isxdigô_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISxdigô
, (l))

	)

318 
	#__isbœnk_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISbœnk
, (l))

	)

320 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC


321 
	#__ißscii_l
(
c
,
l
Ë(÷), 
	`__ißscii
 (c))

	)

322 
	#__tﬂscii_l
(
c
,
l
Ë(÷), 
	`__tﬂscii
 (c))

	)

325 
	#iß um_l
(
c
,
l
Ë
	`__iß um_l
 ((c), (l))

	)

326 
	#ißÕha_l
(
c
,
l
Ë
	`__ißÕha_l
 ((c), (l))

	)

327 
	#is˙ål_l
(
c
,
l
Ë
	`__is˙ål_l
 ((c), (l))

	)

328 
	#isdigô_l
(
c
,
l
Ë
	`__isdigô_l
 ((c), (l))

	)

329 
	#i¶owî_l
(
c
,
l
Ë
	`__i¶owî_l
 ((c), (l))

	)

330 
	#isgøph_l
(
c
,
l
Ë
	`__isgøph_l
 ((c), (l))

	)

331 
	#i•röt_l
(
c
,
l
Ë
	`__i•röt_l
 ((c), (l))

	)

332 
	#i•un˘_l
(
c
,
l
Ë
	`__i•un˘_l
 ((c), (l))

	)

333 
	#is•a˚_l
(
c
,
l
Ë
	`__is•a˚_l
 ((c), (l))

	)

334 
	#isuµî_l
(
c
,
l
Ë
	`__isuµî_l
 ((c), (l))

	)

335 
	#isxdigô_l
(
c
,
l
Ë
	`__isxdigô_l
 ((c), (l))

	)

337 
	#isbœnk_l
(
c
,
l
Ë
	`__isbœnk_l
 ((c), (l))

	)

339 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC


340 
	#ißscii_l
(
c
,
l
Ë
	`__ißscii_l
 ((c), (l))

	)

341 
	#tﬂscii_l
(
c
,
l
Ë
	`__tﬂscii_l
 ((c), (l))

	)

348 
__END_DECLS


	@/usr/include/errno.h

22 #i‚def 
_ERRNO_H


26 #i‚def 
__√ed_Em©h


27 
	#_ERRNO_H
 1

	)

28 
	~<„©uªs.h
>

31 
	g__BEGIN_DECLS


35 
	~<bôs/î∫o.h
>

36 #unde‡
__√ed_Em©h


38 #ifdef 
_ERRNO_H


45 #i‚def 
î∫o


46 
î∫o
;

49 #ifde‡
__USE_GNU


54 *
¥ogøm_övoˇti⁄_«me
, *
¥ogøm_övoˇti⁄_sh‹t_«me
;

58 
	g__END_DECLS


66 #i‡
deföed
 
__USE_GNU
 || deföed 
__√ed_îr‹_t


67 #i‚de‡
__îr‹_t_deföed


68 
	tîr‹_t
;

69 
	#__îr‹_t_deföed
 1

	)

71 #unde‡
__√ed_îr‹_t


	@/usr/include/fcntl.h

22 #i‚def 
_FCNTL_H


23 
	#_FCNTL_H
 1

	)

25 
	~<„©uªs.h
>

28 
	g__BEGIN_DECLS


31 
	~<bôs/ty≥s.h
>

35 
	~<bôs/f˙é.h
>

40 #i‚de‡
__mode_t_deföed


41 
__mode_t
 
	tmode_t
;

42 
	#__mode_t_deföed


	)

45 #i‚de‡
__off_t_deföed


46 #i‚de‡
__USE_FILE_OFFSET64


47 
__off_t
 
	toff_t
;

49 
__off64_t
 
	toff_t
;

51 
	#__off_t_deföed


	)

54 #i‡
deföed
 
__USE_LARGEFILE64
 && !deföed 
__off64_t_deföed


55 
__off64_t
 
	toff64_t
;

56 
	#__off64_t_deföed


	)

59 #i‚de‡
__pid_t_deföed


60 
__pid_t
 
	tpid_t
;

61 
	#__pid_t_deföed


	)

65 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8


66 
	#__√ed_time•ec


	)

67 
	~<time.h
>

68 
	~<bôs/°©.h
>

70 
	#S_IFMT
 
__S_IFMT


	)

71 
	#S_IFDIR
 
__S_IFDIR


	)

72 
	#S_IFCHR
 
__S_IFCHR


	)

73 
	#S_IFBLK
 
__S_IFBLK


	)

74 
	#S_IFREG
 
__S_IFREG


	)

75 #ifde‡
__S_IFIFO


76 
	#S_IFIFO
 
__S_IFIFO


	)

78 #ifde‡
__S_IFLNK


79 
	#S_IFLNK
 
__S_IFLNK


	)

81 #i‡(
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K8
Ë&& deföed 
__S_IFSOCK


82 
	#S_IFSOCK
 
__S_IFSOCK


	)

87 
	#S_ISUID
 
__S_ISUID


	)

88 
	#S_ISGID
 
__S_ISGID


	)

90 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_MISC
 || deföed 
__USE_XOPEN


92 
	#S_ISVTX
 
__S_ISVTX


	)

95 
	#S_IRUSR
 
__S_IREAD


	)

96 
	#S_IWUSR
 
__S_IWRITE


	)

97 
	#S_IXUSR
 
__S_IEXEC


	)

99 
	#S_IRWXU
 (
__S_IREAD
|
__S_IWRITE
|
__S_IEXEC
)

	)

101 
	#S_IRGRP
 (
S_IRUSR
 >> 3Ë

	)

102 
	#S_IWGRP
 (
S_IWUSR
 >> 3Ë

	)

103 
	#S_IXGRP
 (
S_IXUSR
 >> 3Ë

	)

105 
	#S_IRWXG
 (
S_IRWXU
 >> 3)

	)

107 
	#S_IROTH
 (
S_IRGRP
 >> 3Ë

	)

108 
	#S_IWOTH
 (
S_IWGRP
 >> 3Ë

	)

109 
	#S_IXOTH
 (
S_IXGRP
 >> 3Ë

	)

111 
	#S_IRWXO
 (
S_IRWXG
 >> 3)

	)

114 #ifdef 
__USE_MISC


115 #i‚de‡
R_OK


118 
	#R_OK
 4

	)

119 
	#W_OK
 2

	)

120 
	#X_OK
 1

	)

121 
	#F_OK
 0

	)

126 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8


127 
	#SEEK_SET
 0

	)

128 
	#SEEK_CUR
 1

	)

129 
	#SEEK_END
 2

	)

137 
f˙é
 (
__fd
, 
__cmd
, ...);

145 #i‚de‡
__USE_FILE_OFFSET64


146 
	$›í
 (c⁄° *
__fûe
, 
__oÊag
, ...Ë
	`__n⁄nuŒ
 ((1));

148 #ifde‡
__REDIRECT


149 
	`__REDIRECT
 (
›í
, (c⁄° *
__fûe
, 
__oÊag
, ...), 
›í64
)

150 
	`__n⁄nuŒ
 ((1));

152 
	#›í
 
›í64


	)

155 #ifde‡
__USE_LARGEFILE64


156 
	$›í64
 (c⁄° *
__fûe
, 
__oÊag
, ...Ë
	`__n⁄nuŒ
 ((1));

159 #ifde‡
__USE_ATFILE


169 #i‚de‡
__USE_FILE_OFFSET64


170 
	$›í©
 (
__fd
, c⁄° *
__fûe
, 
__oÊag
, ...)

171 
	`__n⁄nuŒ
 ((2));

173 #ifde‡
__REDIRECT


174 
	`__REDIRECT
 (
›í©
, (
__fd
, c⁄° *
__fûe
, 
__oÊag
,

175 ...), 
›í©64
Ë
	`__n⁄nuŒ
 ((2));

177 
	#›í©
 
›í©64


	)

180 #ifde‡
__USE_LARGEFILE64


181 
	$›í©64
 (
__fd
, c⁄° *
__fûe
, 
__oÊag
, ...)

182 
	`__n⁄nuŒ
 ((2));

191 #i‚de‡
__USE_FILE_OFFSET64


192 
	$¸ót
 (c⁄° *
__fûe
, 
mode_t
 
__mode
Ë
	`__n⁄nuŒ
 ((1));

194 #ifde‡
__REDIRECT


195 
	`__REDIRECT
 (
¸ót
, (c⁄° *
__fûe
, 
mode_t
 
__mode
),

196 
¸ót64
Ë
	`__n⁄nuŒ
 ((1));

198 
	#¸ót
 
¸ót64


	)

201 #ifde‡
__USE_LARGEFILE64


202 
	$¸ót64
 (c⁄° *
__fûe
, 
mode_t
 
__mode
Ë
	`__n⁄nuŒ
 ((1));

205 #i‡!
deföed
 
F_LOCK
 && (deföed 
__USE_MISC
 || (deföed 
__USE_XOPEN_EXTENDED
 \

206 && !
deföed
 
__USE_POSIX
))

215 
	#F_ULOCK
 0

	)

216 
	#F_LOCK
 1

	)

217 
	#F_TLOCK
 2

	)

218 
	#F_TEST
 3

	)

220 #i‚de‡
__USE_FILE_OFFSET64


221 
	`lockf
 (
__fd
, 
__cmd
, 
off_t
 
__Àn
);

223 #ifde‡
__REDIRECT


224 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Àn
), 
lockf64
);

226 
	#lockf
 
lockf64


	)

229 #ifde‡
__USE_LARGEFILE64


230 
	`lockf64
 (
__fd
, 
__cmd
, 
off64_t
 
__Àn
);

234 #ifde‡
__USE_XOPEN2K


237 #i‚de‡
__USE_FILE_OFFSET64


238 
	$posix_Ádvi£
 (
__fd
, 
off_t
 
__off£t
, off_à
__Àn
,

239 
__advi£
Ë
__THROW
;

241 #ifde‡
__REDIRECT_NTH


242 
	`__REDIRECT_NTH
 (
posix_Ádvi£
, (
__fd
, 
__off64_t
 
__off£t
,

243 
__off64_t
 
__Àn
, 
__advi£
),

244 
posix_Ádvi£64
);

246 
	#posix_Ádvi£
 
posix_Ádvi£64


	)

249 #ifde‡
__USE_LARGEFILE64


250 
	$posix_Ádvi£64
 (
__fd
, 
off64_t
 
__off£t
, off64_à
__Àn
,

251 
__advi£
Ë
__THROW
;

259 #i‚de‡
__USE_FILE_OFFSET64


260 
	`posix_ÁŒoˇã
 (
__fd
, 
off_t
 
__off£t
, off_à
__Àn
);

262 #ifde‡
__REDIRECT


263 
	`__REDIRECT
 (
posix_ÁŒoˇã
, (
__fd
, 
__off64_t
 
__off£t
,

264 
__off64_t
 
__Àn
),

265 
posix_ÁŒoˇã64
);

267 
	#posix_ÁŒoˇã
 
posix_ÁŒoˇã64


	)

270 #ifde‡
__USE_LARGEFILE64


271 
	`posix_ÁŒoˇã64
 (
__fd
, 
off64_t
 
__off£t
, off64_à
__Àn
);

277 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄
 \

278 && 
deföed
 
__va_¨g_∑ck_Àn


279 
	~<bôs/f˙é2.h
>

282 
__END_DECLS


	@/usr/include/linux/string.h

1 #i‚de‡
_LINUX_STRING_H_


2 
	#_LINUX_STRING_H_


	)

6 
	~<°rög.h
>

	@/usr/include/math.h

24 #i‚def 
_MATH_H


25 
	#_MATH_H
 1

	)

27 
	~<„©uªs.h
>

29 
	g__BEGIN_DECLS


33 
	~<bôs/huge_vÆ.h
>

34 #ifde‡
__USE_ISOC99


35 
	~<bôs/huge_vÆf.h
>

36 
	~<bôs/huge_vÆl.h
>

39 
	~<bôs/öf.h
>

42 
	~<bôs/«n.h
>

46 
	~<bôs/m©hdef.h
>

53 
	#__MATHCALL
(
fun˘i⁄
,
suffix
, 
¨gs
) \

54 
	`__MATHDECL
 (
_MdoubÀ_
,
fun˘i⁄
,
suffix
, 
¨gs
)

	)

55 
	#__MATHDECL
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
) \

56 
	`__MATHDECL_1
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
); \

57 
	`__MATHDECL_1
(
ty≥
, 
	`__CONCAT
(
__
,
fun˘i⁄
),
suffix
, 
¨gs
)

	)

58 
	#__MATHCALLX
(
fun˘i⁄
,
suffix
, 
¨gs
, 
©åib
) \

59 
	`__MATHDECLX
 (
_MdoubÀ_
,
fun˘i⁄
,
suffix
, 
¨gs
, 
©åib
)

	)

60 
	#__MATHDECLX
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
, 
©åib
) \

61 
	`__MATHDECL_1
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
Ë
	`__©åibuã__
 (
©åib
); \

62 
	`__MATHDECL_1
(
ty≥
, 
	`__CONCAT
(
__
,
fun˘i⁄
),
suffix
, 
¨gs
Ë
	`__©åibuã__
 (
©åib
)

	)

63 
	#__MATHDECL_1
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
) \

64 
ty≥
 
	`__MATH_PRECNAME
(
fun˘i⁄
,
suffix
Ë
¨gs
 
__THROW


	)

66 
	#_MdoubÀ_
 

	)

67 
	#__MATH_PRECNAME
(
«me
,
r
Ë
	`__CONCAT
“ame,r)

	)

68 
	#_MdoubÀ_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_STD


	)

69 
	#_MdoubÀ_END_NAMESPACE
 
__END_NAMESPACE_STD


	)

70 
	~<bôs/m©hˇŒs.h
>

71 #unde‡
_MdoubÀ_


72 #unde‡
_MdoubÀ_BEGIN_NAMESPACE


73 #unde‡
_MdoubÀ_END_NAMESPACE


74 #unde‡
__MATH_PRECNAME


76 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_ISOC99


82 #i‚de‡
_MÊﬂt_


83 
	#_MÊﬂt_
 

	)

85 
	#_MdoubÀ_
 
_MÊﬂt_


	)

86 
	#__MATH_PRECNAME
(
«me
,
r
Ë«me##
f
##
	)
r

87 
	#_MdoubÀ_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

88 
	#_MdoubÀ_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

89 
	~<bôs/m©hˇŒs.h
>

90 #unde‡
_MdoubÀ_


91 #unde‡
_MdoubÀ_BEGIN_NAMESPACE


92 #unde‡
_MdoubÀ_END_NAMESPACE


93 #unde‡
__MATH_PRECNAME


95 #i‡!(
deföed
 
__NO_LONG_DOUBLE_MATH
 && deföed 
_LIBC
) \

96 || 
deföed
 
__LDBL_COMPAT


97 #ifde‡
__LDBL_COMPAT


99 #ifde‡
__USE_ISOC99


100 
	$__∆dbl_√xâow¨df
 (
__x
, 
__y
)

101 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

102 #ifde‡
__REDIRECT_NTH


103 
	`__REDIRECT_NTH
 (
√xâow¨df
, (
__x
, 
__y
),

104 
__∆dbl_√xâow¨df
)

105 
	`__©åibuã__
 ((
__c⁄°__
));

106 
	`__REDIRECT_NTH
 (
√xâow¨d
, (
__x
, 
__y
),

107 
√xè·î
Ë
	`__©åibuã__
 ((
__c⁄°__
));

108 
	`__REDIRECT_NTH
 (
√xâow¨dl
,

109 (
__x
, 
__y
),

110 
√xè·î
Ë
	`__©åibuã__
 ((
__c⁄°__
));

115 #i‡
deföed
 
__LDBL_COMPAT
 || deföed 
__NO_LONG_DOUBLE_MATH


117 #unde‡
__MATHDECL_1


118 
	#__MATHDECL_2
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
, 
Æüs
) \

119 
ty≥
 
	`__REDIRECT_NTH
(
	`__MATH_PRECNAME
(
fun˘i⁄
,
suffix
), \

120 
¨gs
, 
Æüs
)

	)

121 
	#__MATHDECL_1
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
) \

122 
	`__MATHDECL_2
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
, 
	`__CONCAT
(fun˘i⁄,suffix))

	)

128 #i‚de‡
_Ml⁄g_doubÀ_


129 
	#_Ml⁄g_doubÀ_
 

	)

131 
	#_MdoubÀ_
 
_Ml⁄g_doubÀ_


	)

132 
	#__MATH_PRECNAME
(
«me
,
r
Ë«me##
l
##
	)
r

133 
	#_MdoubÀ_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

134 
	#_MdoubÀ_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

135 
	#__MATH_DECLARE_LDOUBLE
 1

	)

136 
	~<bôs/m©hˇŒs.h
>

137 #unde‡
_MdoubÀ_


138 #unde‡
_MdoubÀ_BEGIN_NAMESPACE


139 #unde‡
_MdoubÀ_END_NAMESPACE


140 #unde‡
__MATH_PRECNAME


145 #unde‡
__MATHDECL_1


146 #unde‡
__MATHDECL


147 #unde‡
__MATHCALL


150 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


152 
signgam
;

157 #ifde‡
__USE_ISOC99


195 
FP_NAN
 =

196 
	#FP_NAN
 0

	)

197 
FP_NAN
,

198 
FP_INFINITE
 =

199 
	#FP_INFINITE
 1

	)

200 
FP_INFINITE
,

201 
FP_ZERO
 =

202 
	#FP_ZERO
 2

	)

203 
FP_ZERO
,

204 
FP_SUBNORMAL
 =

205 
	#FP_SUBNORMAL
 3

	)

206 
FP_SUBNORMAL
,

207 
FP_NORMAL
 =

208 
	#FP_NORMAL
 4

	)

209 
FP_NORMAL


213 #ifde‡
__NO_LONG_DOUBLE_MATH


214 
	#Â˛assify
(
x
) \

215 ( (
x
Ë= (Ë? 
	`__Â˛assifyf
 (xË: 
	`__Â˛assify
 (x))

	)

217 
	#Â˛assify
(
x
) \

218 ( (
x
) ==  () \

219 ? 
	`__Â˛assifyf
 (
x
) \

220 :  (
x
) ==  () \

221 ? 
	`__Â˛assify
 (
x
Ë: 
	`__Â˛assifyl
 (x))

	)

225 #ifde‡
__NO_LONG_DOUBLE_MATH


226 
	#signbô
(
x
) \

227 ( (
x
Ë= (Ë? 
	`__signbôf
 (xË: 
	`__signbô
 (x))

	)

229 
	#signbô
(
x
) \

230 ( (
x
) ==  () \

231 ? 
	`__signbôf
 (
x
) \

232 :  (
x
) ==  () \

233 ? 
	`__signbô
 (
x
Ë: 
	`__signbôl
 (x))

	)

237 #ifde‡
__NO_LONG_DOUBLE_MATH


238 
	#isföôe
(
x
) \

239 ( (
x
Ë= (Ë? 
	`__föôef
 (xË: 
	`__föôe
 (x))

	)

241 
	#isföôe
(
x
) \

242 ( (
x
) ==  () \

243 ? 
	`__föôef
 (
x
) \

244 :  (
x
) ==  () \

245 ? 
	`__föôe
 (
x
Ë: 
	`__föôñ
 (x))

	)

249 
	#i¢‹mÆ
(
x
Ë(
	`Â˛assify
 (xË=
FP_NORMAL
)

	)

253 #ifde‡
__NO_LONG_DOUBLE_MATH


254 
	#i¢™
(
x
) \

255 ( (
x
Ë= (Ë? 
	`__i¢™f
 (xË: 
	`__i¢™
 (x))

	)

257 
	#i¢™
(
x
) \

258 ( (
x
) ==  () \

259 ? 
	`__i¢™f
 (
x
) \

260 :  (
x
) ==  () \

261 ? 
	`__i¢™
 (
x
Ë: 
	`__i¢™l
 (x))

	)

265 #ifde‡
__NO_LONG_DOUBLE_MATH


266 
	#isöf
(
x
) \

267 ( (
x
Ë= (Ë? 
	`__isöff
 (xË: 
	`__isöf
 (x))

	)

269 
	#isöf
(
x
) \

270 ( (
x
) ==  () \

271 ? 
	`__isöff
 (
x
) \

272 :  (
x
) ==  () \

273 ? 
	`__isöf
 (
x
Ë: 
	`__isöÊ
 (x))

	)

277 
	#MATH_ERRNO
 1

	)

278 
	#MATH_ERREXCEPT
 2

	)

283 #i‚de‡
__FAST_MATH__


284 
	#m©h_îrh™dlög
 (
MATH_ERRNO
 | 
MATH_ERREXCEPT
)

	)

289 #ifdef 
__USE_MISC


293 
_IEEE_
 = -1,

294 
_SVID_
,

295 
_XOPEN_
,

296 
_POSIX_
,

297 
_ISOC_


298 } 
	t_LIB_VERSION_TYPE
;

303 
_LIB_VERSION_TYPE
 
_LIB_VERSION
;

307 #ifde‡
__USE_SVID


313 #ifde‡
__˝lu•lus


314 
__ex˚±i⁄


316 
ex˚±i⁄


319 
ty≥
;

320 *
«me
;

321 
¨g1
;

322 
¨g2
;

323 
ªtvÆ
;

324 
	}
};

326 #ifde‡
__˝lu•lus


327 
	$m©hîr
 (
__ex˚±i⁄
 *
__exc
Ë
	`throw
 ();

329 
	`m©hîr
 (
ex˚±i⁄
 *
__exc
);

332 
	#X_TLOSS
 1.41484755040568800000e+16

	)

335 
	#DOMAIN
 1

	)

336 
	#SING
 2

	)

337 
	#OVERFLOW
 3

	)

338 
	#UNDERFLOW
 4

	)

339 
	#TLOSS
 5

	)

340 
	#PLOSS
 6

	)

343 
	#HUGE
 3.40282347e+38F

	)

347 #ifde‡
__USE_XOPEN


349 
	#MAXFLOAT
 3.40282347e+38F

	)

356 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN


357 
	#M_E
 2.7182818284590452354

	)

358 
	#M_LOG2E
 1.4426950408889634074

	)

359 
	#M_LOG10E
 0.43429448190325182765

	)

360 
	#M_LN2
 0.69314718055994530942

	)

361 
	#M_LN10
 2.30258509299404568402

	)

362 
	#M_PI
 3.14159265358979323846

	)

363 
	#M_PI_2
 1.57079632679489661923

	)

364 
	#M_PI_4
 0.78539816339744830962

	)

365 
	#M_1_PI
 0.31830988618379067154

	)

366 
	#M_2_PI
 0.63661977236758134308

	)

367 
	#M_2_SQRTPI
 1.12837916709551257390

	)

368 
	#M_SQRT2
 1.41421356237309504880

	)

369 
	#M_SQRT1_2
 0.70710678118654752440

	)

375 #ifde‡
__USE_GNU


376 
	#M_El
 2.718281828459045235360287471352662498L

	)

377 
	#M_LOG2El
 1.442695040888963407359924681001892137L

	)

378 
	#M_LOG10El
 0.434294481903251827651128918916605082L

	)

379 
	#M_LN2l
 0.693147180559945309417232121458176568L

	)

380 
	#M_LN10l
 2.302585092994045684017991454684364208L

	)

381 
	#M_PIl
 3.141592653589793238462643383279502884L

	)

382 
	#M_PI_2l
 1.570796326794896619231321691639751442L

	)

383 
	#M_PI_4l
 0.785398163397448309615660845819875721L

	)

384 
	#M_1_PIl
 0.318309886183790671537767526745028724L

	)

385 
	#M_2_PIl
 0.636619772367581343075535053490057448L

	)

386 
	#M_2_SQRTPIl
 1.128379167095512573896158903121545172L

	)

387 
	#M_SQRT2l
 1.414213562373095048801688724209698079L

	)

388 
	#M_SQRT1_2l
 0.707106781186547524400844362104849039L

	)

395 #i‡
deföed
 
__STRICT_ANSI__
 && !deföed 
__NO_MATH_INLINES


396 
	#__NO_MATH_INLINES
 1

	)

399 #i‡
deföed
 
__USE_ISOC99
 && 
	`__GNUC_PREREQ
(2,97)

406 
	#isgª©î
(
x
, 
y
Ë
	`__buûtö_isgª©î
(x, y)

	)

407 
	#isgª©îequÆ
(
x
, 
y
Ë
	`__buûtö_isgª©îequÆ
(x, y)

	)

408 
	#i¶ess
(
x
, 
y
Ë
	`__buûtö_i¶ess
(x, y)

	)

409 
	#i¶es£quÆ
(
x
, 
y
Ë
	`__buûtö_i¶es£quÆ
(x, y)

	)

410 
	#i¶essgª©î
(
x
, 
y
Ë
	`__buûtö_i¶essgª©î
(x, y)

	)

411 
	#isun‹dîed
(
u
, 
v
Ë
	`__buûtö_isun‹dîed
(u, v)

	)

415 #ifde‡
__USE_EXTERN_INLINES


416 
	~<bôs/m©hölöe.h
>

421 #i‡
deföed
 
__FINITE_MATH_ONLY__
 && __FINITE_MATH_ONLY__ > 0

422 
	~<bôs/m©h-föôe.h
>

425 #ifde‡
__USE_ISOC99


429 #i‚de‡
isgª©î


430 
	#isgª©î
(
x
, 
y
) \

431 (
__exãnsi⁄__
 \

432 ({ 
	`__ty≥of__
(
x
Ë
__x
 = (x); __ty≥of__(
y
Ë
__y
 = (y); \

433 !
	`isun‹dîed
 (
__x
, 
__y
Ë&& __x > __y; 
	}
}))

	)

437 #i‚de‡
isgª©îequÆ


438 
	#isgª©îequÆ
(
x
, 
y
) \

439 (
__exãnsi⁄__
 \

440 ({ 
	`__ty≥of__
(
x
Ë
__x
 = (x); __ty≥of__(
y
Ë
__y
 = (y); \

441 !
	`isun‹dîed
 (
__x
, 
__y
Ë&& __x >__y; }))

	)

445 #i‚de‡
i¶ess


446 
	#i¶ess
(
x
, 
y
) \

447 (
__exãnsi⁄__
 \

448 ({ 
	`__ty≥of__
(
x
Ë
__x
 = (x); __ty≥of__(
y
Ë
__y
 = (y); \

449 !
	`isun‹dîed
 (
__x
, 
__y
Ë&& __x < __y; }))

	)

453 #i‚de‡
i¶es£quÆ


454 
	#i¶es£quÆ
(
x
, 
y
) \

455 (
__exãnsi⁄__
 \

456 ({ 
	`__ty≥of__
(
x
Ë
__x
 = (x); __ty≥of__(
y
Ë
__y
 = (y); \

457 !
	`isun‹dîed
 (
__x
, 
__y
Ë&& __x <__y; }))

	)

461 #i‚de‡
i¶essgª©î


462 
	#i¶essgª©î
(
x
, 
y
) \

463 (
__exãnsi⁄__
 \

464 ({ 
	`__ty≥of__
(
x
Ë
__x
 = (x); __ty≥of__(
y
Ë
__y
 = (y); \

465 !
	`isun‹dîed
 (
__x
, 
__y
Ë&& (__x < __y || __y < __x); }))

	)

469 #i‚de‡
isun‹dîed


470 
	#isun‹dîed
(
u
, 
v
) \

471 (
__exãnsi⁄__
 \

472 ({ 
	`__ty≥of__
(
u
Ë
__u
 = (u); __ty≥of__(
v
Ë
__v
 = (v); \

473 
	`Â˛assify
 (
__u
Ë=
FP_NAN
 || fp˛assify (
__v
Ë=FP_NAN; }))

	)

478 
	g__END_DECLS


	@/usr/include/net/if.h

19 #i‚de‡
_NET_IF_H


20 
	#_NET_IF_H
 1

	)

22 
	~<„©uªs.h
>

24 #ifde‡
__USE_MISC


25 
	~<sys/ty≥s.h
>

26 
	~<sys/sockë.h
>

31 
	#IF_NAMESIZE
 16

	)

33 
	sif_«meödex


35 
	mif_ödex
;

36 *
	mif_«me
;

40 #ifde‡
__USE_MISC


44 
	mIFF_UP
 = 0x1,

45 
	#IFF_UP
 
IFF_UP


	)

46 
	mIFF_BROADCAST
 = 0x2,

47 
	#IFF_BROADCAST
 
IFF_BROADCAST


	)

48 
	mIFF_DEBUG
 = 0x4,

49 
	#IFF_DEBUG
 
IFF_DEBUG


	)

50 
	mIFF_LOOPBACK
 = 0x8,

51 
	#IFF_LOOPBACK
 
IFF_LOOPBACK


	)

52 
	mIFF_POINTOPOINT
 = 0x10,

53 
	#IFF_POINTOPOINT
 
IFF_POINTOPOINT


	)

54 
	mIFF_NOTRAILERS
 = 0x20,

55 
	#IFF_NOTRAILERS
 
IFF_NOTRAILERS


	)

56 
	mIFF_RUNNING
 = 0x40,

57 
	#IFF_RUNNING
 
IFF_RUNNING


	)

58 
	mIFF_NOARP
 = 0x80,

59 
	#IFF_NOARP
 
IFF_NOARP


	)

60 
	mIFF_PROMISC
 = 0x100,

61 
	#IFF_PROMISC
 
IFF_PROMISC


	)

64 
	mIFF_ALLMULTI
 = 0x200,

65 
	#IFF_ALLMULTI
 
IFF_ALLMULTI


	)

67 
	mIFF_MASTER
 = 0x400,

68 
	#IFF_MASTER
 
IFF_MASTER


	)

69 
	mIFF_SLAVE
 = 0x800,

70 
	#IFF_SLAVE
 
IFF_SLAVE


	)

72 
	mIFF_MULTICAST
 = 0x1000,

73 
	#IFF_MULTICAST
 
IFF_MULTICAST


	)

75 
	mIFF_PORTSEL
 = 0x2000,

76 
	#IFF_PORTSEL
 
IFF_PORTSEL


	)

77 
	mIFF_AUTOMEDIA
 = 0x4000,

78 
	#IFF_AUTOMEDIA
 
IFF_AUTOMEDIA


	)

79 
	mIFF_DYNAMIC
 = 0x8000

80 
	#IFF_DYNAMIC
 
IFF_DYNAMIC


	)

88 
	siÁddr


90 
sockaddr
 
	miÁ_addr
;

93 
sockaddr
 
	mifu_brﬂdaddr
;

94 
sockaddr
 
	mifu_d°addr
;

95 } 
	miÁ_ifu
;

96 
iÁ˚
 *
	miÁ_iÂ
;

97 
iÁddr
 *
	miÁ_√xt
;

100 
	#iÁ_brﬂdaddr
 
iÁ_ifu
.
ifu_brﬂdaddr


	)

101 
	#iÁ_d°addr
 
iÁ_ifu
.
ifu_d°addr


	)

111 
	sifm≠


113 
	mmem_°¨t
;

114 
	mmem_íd
;

115 
	mba£_addr
;

116 
	múq
;

117 
	mdma
;

118 
	mp‹t
;

126 
	si‰eq


128 
	#IFHWADDRLEN
 6

	)

129 
	#IFNAMSIZ
 
IF_NAMESIZE


	)

132 
	mi‰n_«me
[
IFNAMSIZ
];

133 } 
	mi‰_i‰n
;

137 
sockaddr
 
	mi‰u_addr
;

138 
sockaddr
 
	mi‰u_d°addr
;

139 
sockaddr
 
	mi‰u_brﬂdaddr
;

140 
sockaddr
 
	mi‰u_√tmask
;

141 
sockaddr
 
	mi‰u_hwaddr
;

142 
	mi‰u_Êags
;

143 
	mi‰u_ivÆue
;

144 
	mi‰u_mtu
;

145 
ifm≠
 
	mi‰u_m≠
;

146 
	mi‰u_¶ave
[
IFNAMSIZ
];

147 
	mi‰u_√w«me
[
IFNAMSIZ
];

148 
__ˇddr_t
 
	mi‰u_d©a
;

149 } 
	mi‰_i‰u
;

151 
	#i‰_«me
 
i‰_i‰n
.
i‰n_«me


	)

152 
	#i‰_hwaddr
 
i‰_i‰u
.
i‰u_hwaddr


	)

153 
	#i‰_addr
 
i‰_i‰u
.
i‰u_addr


	)

154 
	#i‰_d°addr
 
i‰_i‰u
.
i‰u_d°addr


	)

155 
	#i‰_brﬂdaddr
 
i‰_i‰u
.
i‰u_brﬂdaddr


	)

156 
	#i‰_√tmask
 
i‰_i‰u
.
i‰u_√tmask


	)

157 
	#i‰_Êags
 
i‰_i‰u
.
i‰u_Êags


	)

158 
	#i‰_mëric
 
i‰_i‰u
.
i‰u_ivÆue


	)

159 
	#i‰_mtu
 
i‰_i‰u
.
i‰u_mtu


	)

160 
	#i‰_m≠
 
i‰_i‰u
.
i‰u_m≠


	)

161 
	#i‰_¶ave
 
i‰_i‰u
.
i‰u_¶ave


	)

162 
	#i‰_d©a
 
i‰_i‰u
.
i‰u_d©a


	)

163 
	#i‰_ifödex
 
i‰_i‰u
.
i‰u_ivÆue


	)

164 
	#i‰_b™dwidth
 
i‰_i‰u
.
i‰u_ivÆue


	)

165 
	#i‰_qÀn
 
i‰_i‰u
.
i‰u_ivÆue


	)

166 
	#i‰_√w«me
 
i‰_i‰u
.
i‰u_√w«me


	)

167 
	#_IOT_i‰eq
 
	`_IOT
(
	`_IOTS
(),
IFNAMSIZ
,_IOTS(),16,0,0)

	)

168 
	#_IOT_i‰eq_sh‹t
 
	`_IOT
(
	`_IOTS
(),
IFNAMSIZ
,_IOTS(),1,0,0)

	)

169 
	#_IOT_i‰eq_öt
 
	`_IOT
(
	`_IOTS
(),
IFNAMSIZ
,_IOTS(),1,0,0)

	)

176 
	sifc⁄f


178 
	mifc_Àn
;

181 
__ˇddr_t
 
	mifcu_buf
;

182 
i‰eq
 *
	mifcu_ªq
;

183 } 
	mifc_ifcu
;

185 
	#ifc_buf
 
ifc_ifcu
.
ifcu_buf


	)

186 
	#ifc_ªq
 
ifc_ifcu
.
ifcu_ªq


	)

187 
	#_IOT_ifc⁄f
 
	`_IOT
(
	`_IOTS
(
ifc⁄f
),1,0,0,0,0Ë

	)

190 
__BEGIN_DECLS


193 
	$if_«mëoödex
 (c⁄° *
__i‚ame
Ë
__THROW
;

194 *
	$if_ödext⁄ame
 (
__ifödex
, *
__i‚ame
Ë
__THROW
;

197 
if_«meödex
 *
	$if_«meödex
 (Ë
__THROW
;

200 
	$if_‰ì«meödex
 (
if_«meödex
 *
__±r
Ë
__THROW
;

202 
__END_DECLS


	@/usr/include/netdb.h

22 #i‚def 
_NETDB_H


23 
	#_NETDB_H
 1

	)

25 
	~<„©uªs.h
>

27 
	~<√töë/ö.h
>

28 
	~<°döt.h
>

29 #ifde‡
__USE_MISC


32 
	~<Ωc/√tdb.h
>

35 #ifde‡
__USE_GNU


36 
	#__√ed_sigevít_t


	)

37 
	~<bôs/sigöfo.h
>

38 
	#__√ed_time•ec


	)

39 
	~<time.h
>

42 
	~<bôs/√tdb.h
>

45 
	#_PATH_HEQUIV
 "/ëc/ho°s.equiv"

	)

46 
	#_PATH_HOSTS
 "/ëc/ho°s"

	)

47 
	#_PATH_NETWORKS
 "/ëc/√tw‹ks"

	)

48 
	#_PATH_NSSWITCH_CONF
 "/ëc/nsswôch.c⁄f"

	)

49 
	#_PATH_PROTOCOLS
 "/ëc/¥Ÿocﬁs"

	)

50 
	#_PATH_SERVICES
 "/ëc/£rvi˚s"

	)

53 
	g__BEGIN_DECLS


55 #i‡
deföed
 
__USE_MISC
 || !deföed 
__USE_XOPEN2K8


58 
	#h_î∫o
 (*
	`__h_î∫o_loˇti⁄
 ())

	)

61 *
	$__h_î∫o_loˇti⁄
 (Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

65 
	#HOST_NOT_FOUND
 1

	)

66 
	#TRY_AGAIN
 2

	)

68 
	#NO_RECOVERY
 3

	)

70 
	#NO_DATA
 4

	)

73 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_GNU


74 
	#NETDB_INTERNAL
 -1

	)

75 
	#NETDB_SUCCESS
 0

	)

76 
	#NO_ADDRESS
 
NO_DATA


	)

79 #i‡
deföed
 
__USE_XOPEN2K
 || deföed 
__USE_XOPEN_EXTENDED


81 
	#IPPORT_RESERVED
 1024

	)

84 #ifde‡
__USE_GNU


86 
	#SCOPE_DELIMITER
 '%'

	)

89 #ifde‡
__USE_MISC


92 
	$hîr‹
 (c⁄° *
__°r
Ë
__THROW
;

95 c⁄° *
	$h°ªº‹
 (
__îr_num
Ë
__THROW
;

100 
	sho°ít


102 *
h_«me
;

103 **
h_Æü£s
;

104 
h_addπy≥
;

105 
h_Àngth
;

106 **
h_addr_li°
;

107 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_GNU


108 
	#h_addr
 
h_addr_li°
[0]

	)

117 
	`£tho°ít
 (
__°ay_›í
);

123 
	`ídho°ít
 ();

130 
ho°ít
 *
	`gëho°ít
 ();

137 
ho°ít
 *
	`gëho°byaddr
 (c⁄° *
__addr
, 
__sockÀn_t
 
__Àn
,

138 
__ty≥
);

144 
ho°ít
 *
	`gëho°by«me
 (c⁄° *
__«me
);

146 #ifde‡
__USE_MISC


155 
ho°ít
 *
	`gëho°by«me2
 (c⁄° *
__«me
, 
__af
);

167 
	`gëho°ít_r
 (
ho°ít
 *
__ª°ri˘
 
__ªsu…_buf
,

168 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

169 
ho°ít
 **
__ª°ri˘
 
__ªsu…
,

170 *
__ª°ri˘
 
__h_î∫›
);

172 
	`gëho°byaddr_r
 (c⁄° *
__ª°ri˘
 
__addr
, 
__sockÀn_t
 
__Àn
,

173 
__ty≥
,

174 
ho°ít
 *
__ª°ri˘
 
__ªsu…_buf
,

175 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

176 
ho°ít
 **
__ª°ri˘
 
__ªsu…
,

177 *
__ª°ri˘
 
__h_î∫›
);

179 
	`gëho°by«me_r
 (c⁄° *
__ª°ri˘
 
__«me
,

180 
ho°ít
 *
__ª°ri˘
 
__ªsu…_buf
,

181 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

182 
ho°ít
 **
__ª°ri˘
 
__ªsu…
,

183 *
__ª°ri˘
 
__h_î∫›
);

185 
	`gëho°by«me2_r
 (c⁄° *
__ª°ri˘
 
__«me
, 
__af
,

186 
ho°ít
 *
__ª°ri˘
 
__ªsu…_buf
,

187 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

188 
ho°ít
 **
__ª°ri˘
 
__ªsu…
,

189 *
__ª°ri˘
 
__h_î∫›
);

198 
	`£äëít
 (
__°ay_›í
);

204 
	`íd√ã¡
 ();

211 
√ã¡
 *
	`gë√ã¡
 ();

218 
√ã¡
 *
	`gë√tbyaddr
 (
uöt32_t
 
__√t
, 
__ty≥
);

224 
√ã¡
 *
	`gë√tby«me
 (c⁄° *
__«me
);

226 #ifdef 
__USE_MISC


237 
	`gë√ã¡_r
 (
√ã¡
 *
__ª°ri˘
 
__ªsu…_buf
,

238 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

239 
√ã¡
 **
__ª°ri˘
 
__ªsu…
,

240 *
__ª°ri˘
 
__h_î∫›
);

242 
	`gë√tbyaddr_r
 (
uöt32_t
 
__√t
, 
__ty≥
,

243 
√ã¡
 *
__ª°ri˘
 
__ªsu…_buf
,

244 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

245 
√ã¡
 **
__ª°ri˘
 
__ªsu…
,

246 *
__ª°ri˘
 
__h_î∫›
);

248 
	`gë√tby«me_r
 (c⁄° *
__ª°ri˘
 
__«me
,

249 
√ã¡
 *
__ª°ri˘
 
__ªsu…_buf
,

250 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

251 
√ã¡
 **
__ª°ri˘
 
__ªsu…
,

252 *
__ª°ri˘
 
__h_î∫›
);

257 
	s£rvít


259 *
s_«me
;

260 **
s_Æü£s
;

261 
s_p‹t
;

262 *
s_¥Ÿo
;

270 
	`£t£rvít
 (
__°ay_›í
);

276 
	`íd£rvít
 ();

283 
£rvít
 *
	`gë£rvít
 ();

290 
£rvít
 *
	`gë£rvby«me
 (c⁄° *
__«me
, c⁄° *
__¥Ÿo
);

297 
£rvít
 *
	`gë£rvbyp‹t
 (
__p‹t
, c⁄° *
__¥Ÿo
);

300 #ifdef 
__USE_MISC


308 
	`gë£rvít_r
 (
£rvít
 *
__ª°ri˘
 
__ªsu…_buf
,

309 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

310 
£rvít
 **
__ª°ri˘
 
__ªsu…
);

312 
	`gë£rvby«me_r
 (c⁄° *
__ª°ri˘
 
__«me
,

313 c⁄° *
__ª°ri˘
 
__¥Ÿo
,

314 
£rvít
 *
__ª°ri˘
 
__ªsu…_buf
,

315 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

316 
£rvít
 **
__ª°ri˘
 
__ªsu…
);

318 
	`gë£rvbyp‹t_r
 (
__p‹t
, c⁄° *
__ª°ri˘
 
__¥Ÿo
,

319 
£rvít
 *
__ª°ri˘
 
__ªsu…_buf
,

320 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

321 
£rvít
 **
__ª°ri˘
 
__ªsu…
);

326 
	s¥Ÿ€¡


328 *
p_«me
;

329 **
p_Æü£s
;

330 
p_¥Ÿo
;

338 
	`£çrŸ€¡
 (
__°ay_›í
);

344 
	`íd¥Ÿ€¡
 ();

351 
¥Ÿ€¡
 *
	`gë¥Ÿ€¡
 ();

357 
¥Ÿ€¡
 *
	`gë¥Ÿoby«me
 (c⁄° *
__«me
);

363 
¥Ÿ€¡
 *
	`gë¥Ÿobynumbî
 (
__¥Ÿo
);

366 #ifdef 
__USE_MISC


374 
	`gë¥Ÿ€¡_r
 (
¥Ÿ€¡
 *
__ª°ri˘
 
__ªsu…_buf
,

375 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

376 
¥Ÿ€¡
 **
__ª°ri˘
 
__ªsu…
);

378 
	`gë¥Ÿoby«me_r
 (c⁄° *
__ª°ri˘
 
__«me
,

379 
¥Ÿ€¡
 *
__ª°ri˘
 
__ªsu…_buf
,

380 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

381 
¥Ÿ€¡
 **
__ª°ri˘
 
__ªsu…
);

383 
	`gë¥Ÿobynumbî_r
 (
__¥Ÿo
,

384 
¥Ÿ€¡
 *
__ª°ri˘
 
__ªsu…_buf
,

385 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

386 
¥Ÿ€¡
 **
__ª°ri˘
 
__ªsu…
);

395 
	`£äëgª¡
 (c⁄° *
__√tgroup
);

403 
	`íd√tgª¡
 ();

412 
	`gë√tgª¡
 (**
__ª°ri˘
 
__ho°p
,

413 **
__ª°ri˘
 
__u£Ω
,

414 **
__ª°ri˘
 
__domaöp
);

423 
	`ö√tgr
 (c⁄° *
__√tgroup
, c⁄° *
__ho°
,

424 c⁄° *
__u£r
, c⁄° *
__domaö
);

432 
	`gë√tgª¡_r
 (**
__ª°ri˘
 
__ho°p
,

433 **
__ª°ri˘
 
__u£Ω
,

434 **
__ª°ri˘
 
__domaöp
,

435 *
__ª°ri˘
 
__buf„r
, 
size_t
 
__buÊí
);

439 #ifde‡
__USE_BSD


451 
	`rcmd
 (**
__ª°ri˘
 
__aho°
, 
__Ω‹t
,

452 c⁄° *
__ª°ri˘
 
__locu£r
,

453 c⁄° *
__ª°ri˘
 
__ªmu£r
,

454 c⁄° *
__ª°ri˘
 
__cmd
, *__ª°ri˘ 
__fd2p
);

463 
	`rcmd_af
 (**
__ª°ri˘
 
__aho°
, 
__Ω‹t
,

464 c⁄° *
__ª°ri˘
 
__locu£r
,

465 c⁄° *
__ª°ri˘
 
__ªmu£r
,

466 c⁄° *
__ª°ri˘
 
__cmd
, *__ª°ri˘ 
__fd2p
,

467 
ß_Ámûy_t
 
__af
);

479 
	`ªxec
 (**
__ª°ri˘
 
__aho°
, 
__Ω‹t
,

480 c⁄° *
__ª°ri˘
 
__«me
,

481 c⁄° *
__ª°ri˘
 
__∑ss
,

482 c⁄° *
__ª°ri˘
 
__cmd
, *__ª°ri˘ 
__fd2p
);

491 
	`ªxec_af
 (**
__ª°ri˘
 
__aho°
, 
__Ω‹t
,

492 c⁄° *
__ª°ri˘
 
__«me
,

493 c⁄° *
__ª°ri˘
 
__∑ss
,

494 c⁄° *
__ª°ri˘
 
__cmd
, *__ª°ri˘ 
__fd2p
,

495 
ß_Ámûy_t
 
__af
);

505 
	`ru£rok
 (c⁄° *
__rho°
, 
__su£r
,

506 c⁄° *
__ªmu£r
, c⁄° *
__locu£r
);

515 
	`ru£rok_af
 (c⁄° *
__rho°
, 
__su£r
,

516 c⁄° *
__ªmu£r
, c⁄° *
__locu£r
,

517 
ß_Ámûy_t
 
__af
);

528 
	`úu£rok
 (
uöt32_t
 
__øddr
, 
__su£r
,

529 c⁄° *
__ªmu£r
, c⁄° *
__locu£r
);

539 
	`úu£rok_af
 (c⁄° *
__øddr
, 
__su£r
,

540 c⁄° *
__ªmu£r
, c⁄° *
__locu£r
,

541 
ß_Ámûy_t
 
__af
);

551 
	`ºesvp‹t
 (*
__Æp‹t
);

560 
	`ºesvp‹t_af
 (*
__Æp‹t
, 
ß_Ámûy_t
 
__af
);

565 #ifdef 
__USE_POSIX


567 
	saddröfo


569 
ai_Êags
;

570 
ai_Ámûy
;

571 
ai_sockty≥
;

572 
ai_¥Ÿocﬁ
;

573 
sockÀn_t
 
ai_addæí
;

574 
sockaddr
 *
ai_addr
;

575 *
ai_ˇn⁄«me
;

576 
addröfo
 *
ai_√xt
;

579 #ifde‡
__USE_GNU


581 
	sgaicb


583 c⁄° *
¨_«me
;

584 c⁄° *
¨_£rvi˚
;

585 c⁄° 
addröfo
 *
¨_ªque°
;

586 
addröfo
 *
¨_ªsu…
;

588 
__ªtu∫
;

589 
__unu£d
[5];

593 
	#GAI_WAIT
 0

	)

594 
	#GAI_NOWAIT
 1

	)

598 
	#AI_PASSIVE
 0x0001

	)

599 
	#AI_CANONNAME
 0x0002

	)

600 
	#AI_NUMERICHOST
 0x0004

	)

601 
	#AI_V4MAPPED
 0x0008

	)

602 
	#AI_ALL
 0x0010

	)

603 
	#AI_ADDRCONFIG
 0x0020

	)

605 #ifde‡
__USE_GNU


606 
	#AI_IDN
 0x0040

	)

609 
	#AI_CANONIDN
 0x0080

	)

610 
	#AI_IDN_ALLOW_UNASSIGNED
 0x0100

	)

612 
	#AI_IDN_USE_STD3_ASCII_RULES
 0x0200

	)

615 
	#AI_NUMERICSERV
 0x0400

	)

618 
	#EAI_BADFLAGS
 -1

	)

619 
	#EAI_NONAME
 -2

	)

620 
	#EAI_AGAIN
 -3

	)

621 
	#EAI_FAIL
 -4

	)

622 
	#EAI_FAMILY
 -6

	)

623 
	#EAI_SOCKTYPE
 -7

	)

624 
	#EAI_SERVICE
 -8

	)

625 
	#EAI_MEMORY
 -10

	)

626 
	#EAI_SYSTEM
 -11

	)

627 
	#EAI_OVERFLOW
 -12

	)

628 #ifde‡
__USE_GNU


629 
	#EAI_NODATA
 -5

	)

630 
	#EAI_ADDRFAMILY
 -9

	)

631 
	#EAI_INPROGRESS
 -100

	)

632 
	#EAI_CANCELED
 -101

	)

633 
	#EAI_NOTCANCELED
 -102

	)

634 
	#EAI_ALLDONE
 -103

	)

635 
	#EAI_INTR
 -104

	)

636 
	#EAI_IDN_ENCODE
 -105

	)

639 #ifde‡
__USE_MISC


640 
	#NI_MAXHOST
 1025

	)

641 
	#NI_MAXSERV
 32

	)

644 
	#NI_NUMERICHOST
 1

	)

645 
	#NI_NUMERICSERV
 2

	)

646 
	#NI_NOFQDN
 4

	)

647 
	#NI_NAMEREQD
 8

	)

648 
	#NI_DGRAM
 16

	)

649 #ifde‡
__USE_GNU


650 
	#NI_IDN
 32

	)

651 
	#NI_IDN_ALLOW_UNASSIGNED
 64

	)

653 
	#NI_IDN_USE_STD3_ASCII_RULES
 128

	)

662 
	`gëaddröfo
 (c⁄° *
__ª°ri˘
 
__«me
,

663 c⁄° *
__ª°ri˘
 
__£rvi˚
,

664 c⁄° 
addröfo
 *
__ª°ri˘
 
__ªq
,

665 
addröfo
 **
__ª°ri˘
 
__∑i
);

668 
	$‰ìaddröfo
 (
addröfo
 *
__ai
Ë
__THROW
;

671 c⁄° *
	$gai_°ªº‹
 (
__ecode
Ë
__THROW
;

677 
	`gë«meöfo
 (c⁄° 
sockaddr
 *
__ª°ri˘
 
__ß
,

678 
sockÀn_t
 
__ßÀn
, *
__ª°ri˘
 
__ho°
,

679 
sockÀn_t
 
__ho°Àn
, *
__ª°ri˘
 
__£rv
,

680 
sockÀn_t
 
__£rvÀn
, 
__Êags
);

683 #ifde‡
__USE_GNU


692 
	`gëaddröfo_a
 (
__mode
, 
gaicb
 *
__li°
[
__ª°ri˘_¨r
],

693 
__ít
, 
sigevít
 *
__ª°ri˘
 
__sig
);

703 
	`gai_su•íd
 (c⁄° 
gaicb
 *c⁄° 
__li°
[], 
__ít
,

704 c⁄° 
time•ec
 *
__timeout
);

707 
	$gai_îr‹
 (
gaicb
 *
__ªq
Ë
__THROW
;

710 
	$gai_ˇn˚l
 (
gaicb
 *
__gaicbp
Ë
__THROW
;

713 
__END_DECLS


	@/usr/include/netinet/if_ether.h

18 #i‚de‡
__NETINET_IF_ETHER_H


20 
	#__NETINET_IF_ETHER_H
 1

	)

21 
	~<„©uªs.h
>

22 
	~<sys/ty≥s.h
>

25 
	~<löux/if_ëhî.h
>

27 #ifde‡
__USE_BSD


60 
	~<√t/ëhî√t.h
>

61 
	~<√t/if_¨p.h
>

63 
__BEGIN_DECLS


71 
	sëhî_¨p
 {

72 
¨phdr
 
	mó_hdr
;

73 
u_öt8_t
 
	m¨p_sha
[
ETH_ALEN
];

74 
u_öt8_t
 
	m¨p_•a
[4];

75 
u_öt8_t
 
	m¨p_tha
[
ETH_ALEN
];

76 
u_öt8_t
 
	m¨p_ça
[4];

78 
	#¨p_hrd
 
ó_hdr
.
¨_hrd


	)

79 
	#¨p_¥o
 
ó_hdr
.
¨_¥o


	)

80 
	#¨p_h 
 
ó_hdr
.
¨_h 


	)

81 
	#¨p_∂n
 
ó_hdr
.
¨_∂n


	)

82 
	#¨p_›
 
ó_hdr
.
¨_›


	)

89 
	#ETHER_MAP_IP_MULTICAST
(
ùaddr
, 
íaddr
) \

93 (
íaddr
)[0] = 0x01; \

94 (
íaddr
)[1] = 0x00; \

95 (
íaddr
)[2] = 0x5e; \

96 (
íaddr
)[3] = ((
u_öt8_t
 *)
ùaddr
)[1] & 0x7f; \

97 (
íaddr
)[4] = ((
u_öt8_t
 *)
ùaddr
)[2]; \

98 (
íaddr
)[5] = ((
u_öt8_t
 *)
ùaddr
)[3]; \

99 }

	)

101 
	g__END_DECLS


	@/usr/include/netinet/in.h

19 #i‚def 
_NETINET_IN_H


20 
	#_NETINET_IN_H
 1

	)

22 
	~<„©uªs.h
>

23 
	~<°döt.h
>

24 
	~<sys/sockë.h
>

25 
	~<bôs/ty≥s.h
>

28 
__BEGIN_DECLS


33 
	mIPPROTO_IP
 = 0,

34 
	#IPPROTO_IP
 
IPPROTO_IP


	)

35 
	mIPPROTO_HOPOPTS
 = 0,

36 
	#IPPROTO_HOPOPTS
 
IPPROTO_HOPOPTS


	)

37 
	mIPPROTO_ICMP
 = 1,

38 
	#IPPROTO_ICMP
 
IPPROTO_ICMP


	)

39 
	mIPPROTO_IGMP
 = 2,

40 
	#IPPROTO_IGMP
 
IPPROTO_IGMP


	)

41 
	mIPPROTO_IPIP
 = 4,

42 
	#IPPROTO_IPIP
 
IPPROTO_IPIP


	)

43 
	mIPPROTO_TCP
 = 6,

44 
	#IPPROTO_TCP
 
IPPROTO_TCP


	)

45 
	mIPPROTO_EGP
 = 8,

46 
	#IPPROTO_EGP
 
IPPROTO_EGP


	)

47 
	mIPPROTO_PUP
 = 12,

48 
	#IPPROTO_PUP
 
IPPROTO_PUP


	)

49 
	mIPPROTO_UDP
 = 17,

50 
	#IPPROTO_UDP
 
IPPROTO_UDP


	)

51 
	mIPPROTO_IDP
 = 22,

52 
	#IPPROTO_IDP
 
IPPROTO_IDP


	)

53 
	mIPPROTO_TP
 = 29,

54 
	#IPPROTO_TP
 
IPPROTO_TP


	)

55 
	mIPPROTO_DCCP
 = 33,

56 
	#IPPROTO_DCCP
 
IPPROTO_DCCP


	)

57 
	mIPPROTO_IPV6
 = 41,

58 
	#IPPROTO_IPV6
 
IPPROTO_IPV6


	)

59 
	mIPPROTO_ROUTING
 = 43,

60 
	#IPPROTO_ROUTING
 
IPPROTO_ROUTING


	)

61 
	mIPPROTO_FRAGMENT
 = 44,

62 
	#IPPROTO_FRAGMENT
 
IPPROTO_FRAGMENT


	)

63 
	mIPPROTO_RSVP
 = 46,

64 
	#IPPROTO_RSVP
 
IPPROTO_RSVP


	)

65 
	mIPPROTO_GRE
 = 47,

66 
	#IPPROTO_GRE
 
IPPROTO_GRE


	)

67 
	mIPPROTO_ESP
 = 50,

68 
	#IPPROTO_ESP
 
IPPROTO_ESP


	)

69 
	mIPPROTO_AH
 = 51,

70 
	#IPPROTO_AH
 
IPPROTO_AH


	)

71 
	mIPPROTO_ICMPV6
 = 58,

72 
	#IPPROTO_ICMPV6
 
IPPROTO_ICMPV6


	)

73 
	mIPPROTO_NONE
 = 59,

74 
	#IPPROTO_NONE
 
IPPROTO_NONE


	)

75 
	mIPPROTO_DSTOPTS
 = 60,

76 
	#IPPROTO_DSTOPTS
 
IPPROTO_DSTOPTS


	)

77 
	mIPPROTO_MTP
 = 92,

78 
	#IPPROTO_MTP
 
IPPROTO_MTP


	)

79 
	mIPPROTO_ENCAP
 = 98,

80 
	#IPPROTO_ENCAP
 
IPPROTO_ENCAP


	)

81 
	mIPPROTO_PIM
 = 103,

82 
	#IPPROTO_PIM
 
IPPROTO_PIM


	)

83 
	mIPPROTO_COMP
 = 108,

84 
	#IPPROTO_COMP
 
IPPROTO_COMP


	)

85 
	mIPPROTO_SCTP
 = 132,

86 
	#IPPROTO_SCTP
 
IPPROTO_SCTP


	)

87 
	mIPPROTO_UDPLITE
 = 136,

88 
	#IPPROTO_UDPLITE
 
IPPROTO_UDPLITE


	)

89 
	mIPPROTO_RAW
 = 255,

90 
	#IPPROTO_RAW
 
IPPROTO_RAW


	)

91 
	mIPPROTO_MAX


96 
uöt16_t
 
	tö_p‹t_t
;

101 
	mIPPORT_ECHO
 = 7,

102 
	mIPPORT_DISCARD
 = 9,

103 
	mIPPORT_SYSTAT
 = 11,

104 
	mIPPORT_DAYTIME
 = 13,

105 
	mIPPORT_NETSTAT
 = 15,

106 
	mIPPORT_FTP
 = 21,

107 
	mIPPORT_TELNET
 = 23,

108 
	mIPPORT_SMTP
 = 25,

109 
	mIPPORT_TIMESERVER
 = 37,

110 
	mIPPORT_NAMESERVER
 = 42,

111 
	mIPPORT_WHOIS
 = 43,

112 
	mIPPORT_MTP
 = 57,

114 
	mIPPORT_TFTP
 = 69,

115 
	mIPPORT_RJE
 = 77,

116 
	mIPPORT_FINGER
 = 79,

117 
	mIPPORT_TTYLINK
 = 87,

118 
	mIPPORT_SUPDUP
 = 95,

121 
	mIPPORT_EXECSERVER
 = 512,

122 
	mIPPORT_LOGINSERVER
 = 513,

123 
	mIPPORT_CMDSERVER
 = 514,

124 
	mIPPORT_EFSSERVER
 = 520,

127 
	mIPPORT_BIFFUDP
 = 512,

128 
	mIPPORT_WHOSERVER
 = 513,

129 
	mIPPORT_ROUTESERVER
 = 520,

132 
	mIPPORT_RESERVED
 = 1024,

135 
	mIPPORT_USERRESERVED
 = 5000

140 
uöt32_t
 
	tö_addr_t
;

141 
	sö_addr


143 
ö_addr_t
 
	ms_addr
;

152 
	#IN_CLASSA
(
a
Ë((((
ö_addr_t
)◊)Ë& 0x80000000Ë=0)

	)

153 
	#IN_CLASSA_NET
 0xff000000

	)

154 
	#IN_CLASSA_NSHIFT
 24

	)

155 
	#IN_CLASSA_HOST
 (0xfffffff‡& ~
IN_CLASSA_NET
)

	)

156 
	#IN_CLASSA_MAX
 128

	)

158 
	#IN_CLASSB
(
a
Ë((((
ö_addr_t
)◊)Ë& 0xc0000000Ë=0x80000000)

	)

159 
	#IN_CLASSB_NET
 0xffff0000

	)

160 
	#IN_CLASSB_NSHIFT
 16

	)

161 
	#IN_CLASSB_HOST
 (0xfffffff‡& ~
IN_CLASSB_NET
)

	)

162 
	#IN_CLASSB_MAX
 65536

	)

164 
	#IN_CLASSC
(
a
Ë((((
ö_addr_t
)◊)Ë& 0xe0000000Ë=0xc0000000)

	)

165 
	#IN_CLASSC_NET
 0xffffff00

	)

166 
	#IN_CLASSC_NSHIFT
 8

	)

167 
	#IN_CLASSC_HOST
 (0xfffffff‡& ~
IN_CLASSC_NET
)

	)

169 
	#IN_CLASSD
(
a
Ë((((
ö_addr_t
)◊)Ë& 0xf0000000Ë=0xe0000000)

	)

170 
	#IN_MULTICAST
(
a
Ë
	`IN_CLASSD
◊)

	)

172 
	#IN_EXPERIMENTAL
(
a
Ë((((
ö_addr_t
)◊)Ë& 0xe0000000Ë=0xe0000000)

	)

173 
	#IN_BADCLASS
(
a
Ë((((
ö_addr_t
)◊)Ë& 0xf0000000Ë=0xf0000000)

	)

176 
	#INADDR_ANY
 ((
ö_addr_t
Ë0x00000000)

	)

178 
	#INADDR_BROADCAST
 ((
ö_addr_t
Ë0xffffffff)

	)

180 
	#INADDR_NONE
 ((
ö_addr_t
Ë0xffffffff)

	)

183 
	#IN_LOOPBACKNET
 127

	)

185 #i‚de‡
INADDR_LOOPBACK


186 
	#INADDR_LOOPBACK
 ((
ö_addr_t
Ë0x7f000001Ë

	)

190 
	#INADDR_UNSPEC_GROUP
 ((
ö_addr_t
Ë0xe0000000Ë

	)

191 
	#INADDR_ALLHOSTS_GROUP
 ((
ö_addr_t
Ë0xe0000001Ë

	)

192 
	#INADDR_ALLRTRS_GROUP
 ((
ö_addr_t
Ë0xe0000002Ë

	)

193 
	#INADDR_MAX_LOCAL_GROUP
 ((
ö_addr_t
Ë0xe00000ffË

	)

197 
	sö6_addr


201 
uöt8_t
 
	m__u6_addr8
[16];

202 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_GNU


203 
uöt16_t
 
	m__u6_addr16
[8];

204 
uöt32_t
 
	m__u6_addr32
[4];

206 } 
	m__ö6_u
;

207 
	#s6_addr
 
__ö6_u
.
__u6_addr8


	)

208 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_GNU


209 
	#s6_addr16
 
__ö6_u
.
__u6_addr16


	)

210 
	#s6_addr32
 
__ö6_u
.
__u6_addr32


	)

214 c⁄° 
ö6_addr
 
ö6addr_™y
;

215 c⁄° 
ö6_addr
 
ö6addr_lo›back
;

216 
	#IN6ADDR_ANY_INIT
 { { { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 } } }

	)

217 
	#IN6ADDR_LOOPBACK_INIT
 { { { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1 } } }

	)

219 
	#INET_ADDRSTRLEN
 16

	)

220 
	#INET6_ADDRSTRLEN
 46

	)

224 
	ssockaddr_ö


226 
__SOCKADDR_COMMON
 (
sö_
);

227 
ö_p‹t_t
 
	msö_p‹t
;

228 
ö_addr
 
	msö_addr
;

231 
	msö_zîo
[ (
sockaddr
) -

232 
__SOCKADDR_COMMON_SIZE
 -

233  (
ö_p‹t_t
) -

234  (
ö_addr
)];

238 
	ssockaddr_ö6


240 
__SOCKADDR_COMMON
 (
sö6_
);

241 
ö_p‹t_t
 
	msö6_p‹t
;

242 
uöt32_t
 
	msö6_Êowöfo
;

243 
ö6_addr
 
	msö6_addr
;

244 
uöt32_t
 
	msö6_sc›e_id
;

248 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_GNU


250 
	sù_mªq


253 
ö_addr
 
	mimr_mu…üddr
;

256 
ö_addr
 
	mimr_öãrÁ˚
;

259 
	sù_mªq_sour˚


262 
ö_addr
 
	mimr_mu…üddr
;

265 
ö_addr
 
	mimr_öãrÁ˚
;

268 
ö_addr
 
	mimr_sour˚addr
;

274 
	sùv6_mªq


277 
ö6_addr
 
	mùv6mr_mu…üddr
;

280 
	mùv6mr_öãrÁ˚
;

284 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_GNU


286 
	sgroup_ªq


289 
uöt32_t
 
	mgr_öãrÁ˚
;

292 
sockaddr_°‹age
 
	mgr_group
;

295 
	sgroup_sour˚_ªq


298 
uöt32_t
 
	mg§_öãrÁ˚
;

301 
sockaddr_°‹age
 
	mg§_group
;

304 
sockaddr_°‹age
 
	mg§_sour˚
;

309 
	sù_msfûãr


312 
ö_addr
 
	mimsf_mu…üddr
;

315 
ö_addr
 
	mimsf_öãrÁ˚
;

318 
uöt32_t
 
	mimsf_fmode
;

321 
uöt32_t
 
	mimsf_num§c
;

323 
ö_addr
 
	mimsf_¶i°
[1];

326 
	#IP_MSFILTER_SIZE
(
num§c
Ë( (
ù_msfûãr
) \

327 -  (
ö_addr
) \

328 + (
num§c
Ë*  (
ö_addr
))

	)

330 
	sgroup_fûãr


333 
uöt32_t
 
	mgf_öãrÁ˚
;

336 
sockaddr_°‹age
 
	mgf_group
;

339 
uöt32_t
 
	mgf_fmode
;

342 
uöt32_t
 
	mgf_num§c
;

344 
sockaddr_°‹age
 
	mgf_¶i°
[1];

347 
	#GROUP_FILTER_SIZE
(
num§c
Ë( (
group_fûãr
) \

348 -  (
sockaddr_°‹age
) \

349 + ((
num§c
) \

350 *  (
sockaddr_°‹age
)))

	)

355 
	~<bôs/ö.h
>

364 
uöt32_t
 
	$¡ohl
 (
uöt32_t
 
__√é⁄g
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

365 
uöt16_t
 
	$¡ohs
 (
uöt16_t
 
__√tsh‹t
)

366 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

367 
uöt32_t
 
	$ht⁄l
 (
uöt32_t
 
__ho°l⁄g
)

368 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

369 
uöt16_t
 
	$ht⁄s
 (
uöt16_t
 
__ho°sh‹t
)

370 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

372 
	~<ídün.h
>

375 
	~<bôs/byãsw≠.h
>

377 #ifde‡
__OPTIMIZE__


381 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


384 
	#¡ohl
(
x
Ë(x)

	)

385 
	#¡ohs
(
x
Ë(x)

	)

386 
	#ht⁄l
(
x
Ë(x)

	)

387 
	#ht⁄s
(
x
Ë(x)

	)

389 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


390 
	#¡ohl
(
x
Ë
	`__bsw≠_32
 (x)

	)

391 
	#¡ohs
(
x
Ë
	`__bsw≠_16
 (x)

	)

392 
	#ht⁄l
(
x
Ë
	`__bsw≠_32
 (x)

	)

393 
	#ht⁄s
(
x
Ë
	`__bsw≠_16
 (x)

	)

398 #ifde‡
__GNUC__


399 
	#IN6_IS_ADDR_UNSPECIFIED
(
a
) \

400 (
__exãnsi⁄__
 \

401 ({ c⁄° 
ö6_addr
 *
__a
 = (c⁄° ö6_add∏*Ë(
a
); \

402 
__a
->
s6_addr32
[0] == 0 \

403 && 
__a
->
s6_addr32
[1] == 0 \

404 && 
__a
->
s6_addr32
[2] == 0 \

405 && 
__a
->
s6_addr32
[3] =0; 
	}
}))

	)

407 
	#IN6_IS_ADDR_LOOPBACK
(
a
) \

408 (
__exãnsi⁄__
 \

409 ({ c⁄° 
ö6_addr
 *
__a
 = (c⁄° ö6_add∏*Ë(
a
); \

410 
__a
->
s6_addr32
[0] == 0 \

411 && 
__a
->
s6_addr32
[1] == 0 \

412 && 
__a
->
s6_addr32
[2] == 0 \

413 && 
__a
->
s6_addr32
[3] =
	`ht⁄l
 (1); }))

	)

415 
	#IN6_IS_ADDR_LINKLOCAL
(
a
) \

416 (
__exãnsi⁄__
 \

417 ({ c⁄° 
ö6_addr
 *
__a
 = (c⁄° ö6_add∏*Ë(
a
); \

418 (
__a
->
s6_addr32
[0] & 
	`ht⁄l
 (0xffc00000)Ë=ht⁄»(0x„800000); }))

	)

420 
	#IN6_IS_ADDR_SITELOCAL
(
a
) \

421 (
__exãnsi⁄__
 \

422 ({ c⁄° 
ö6_addr
 *
__a
 = (c⁄° ö6_add∏*Ë(
a
); \

423 (
__a
->
s6_addr32
[0] & 
	`ht⁄l
 (0xffc00000)Ë=ht⁄»(0x„c00000); }))

	)

425 
	#IN6_IS_ADDR_V4MAPPED
(
a
) \

426 (
__exãnsi⁄__
 \

427 ({ c⁄° 
ö6_addr
 *
__a
 = (c⁄° ö6_add∏*Ë(
a
); \

428 
__a
->
s6_addr32
[0] == 0 \

429 && 
__a
->
s6_addr32
[1] == 0 \

430 && 
__a
->
s6_addr32
[2] =
	`ht⁄l
 (0xffff); }))

	)

432 
	#IN6_IS_ADDR_V4COMPAT
(
a
) \

433 (
__exãnsi⁄__
 \

434 ({ c⁄° 
ö6_addr
 *
__a
 = (c⁄° ö6_add∏*Ë(
a
); \

435 
__a
->
s6_addr32
[0] == 0 \

436 && 
__a
->
s6_addr32
[1] == 0 \

437 && 
__a
->
s6_addr32
[2] == 0 \

438 && 
	`¡ohl
 (
__a
->
s6_addr32
[3]Ë> 1; }))

	)

440 
	#IN6_ARE_ADDR_EQUAL
(
a
,
b
) \

441 (
__exãnsi⁄__
 \

442 ({ c⁄° 
ö6_addr
 *
__a
 = (c⁄° ö6_add∏*Ë(
a
); \

443 c⁄° 
ö6_addr
 *
__b
 = (c⁄° ö6_add∏*Ë(
b
); \

444 
__a
->
s6_addr32
[0] =
__b
->s6_addr32[0] \

445 && 
__a
->
s6_addr32
[1] =
__b
->s6_addr32[1] \

446 && 
__a
->
s6_addr32
[2] =
__b
->s6_addr32[2] \

447 && 
__a
->
s6_addr32
[3] =
__b
->s6_addr32[3]; }))

	)

449 
	#IN6_IS_ADDR_UNSPECIFIED
(
a
) \

450 (((c⁄° 
uöt32_t
 *Ë(
a
))[0] == 0 \

451 && ((c⁄° 
uöt32_t
 *Ë(
a
))[1] == 0 \

452 && ((c⁄° 
uöt32_t
 *Ë(
a
))[2] == 0 \

453 && ((c⁄° 
uöt32_t
 *Ë(
a
))[3] =0)

	)

455 
	#IN6_IS_ADDR_LOOPBACK
(
a
) \

456 (((c⁄° 
uöt32_t
 *Ë(
a
))[0] == 0 \

457 && ((c⁄° 
uöt32_t
 *Ë(
a
))[1] == 0 \

458 && ((c⁄° 
uöt32_t
 *Ë(
a
))[2] == 0 \

459 && ((c⁄° 
uöt32_t
 *Ë(
a
))[3] =
	`ht⁄l
 (1))

	)

461 
	#IN6_IS_ADDR_LINKLOCAL
(
a
) \

462 ((((c⁄° 
uöt32_t
 *Ë(
a
))[0] & 
	`ht⁄l
 (0xffc00000)) \

463 =
	`ht⁄l
 (0x„800000))

	)

465 
	#IN6_IS_ADDR_SITELOCAL
(
a
) \

466 ((((c⁄° 
uöt32_t
 *Ë(
a
))[0] & 
	`ht⁄l
 (0xffc00000)) \

467 =
	`ht⁄l
 (0x„c00000))

	)

469 
	#IN6_IS_ADDR_V4MAPPED
(
a
) \

470 ((((c⁄° 
uöt32_t
 *Ë(
a
))[0] == 0) \

471 && (((c⁄° 
uöt32_t
 *Ë(
a
))[1] == 0) \

472 && (((c⁄° 
uöt32_t
 *Ë(
a
))[2] =
	`ht⁄l
 (0xffff)))

	)

474 
	#IN6_IS_ADDR_V4COMPAT
(
a
) \

475 ((((c⁄° 
uöt32_t
 *Ë(
a
))[0] == 0) \

476 && (((c⁄° 
uöt32_t
 *Ë(
a
))[1] == 0) \

477 && (((c⁄° 
uöt32_t
 *Ë(
a
))[2] == 0) \

478 && (
	`¡ohl
 (((c⁄° 
uöt32_t
 *Ë(
a
))[3]Ë> 1))

	)

480 
	#IN6_ARE_ADDR_EQUAL
(
a
,
b
) \

481 ((((c⁄° 
uöt32_t
 *Ë(
a
))[0] =((c⁄° uöt32_à*Ë(
b
))[0]) \

482 && (((c⁄° 
uöt32_t
 *Ë(
a
))[1] =((c⁄° uöt32_à*Ë(
b
))[1]) \

483 && (((c⁄° 
uöt32_t
 *Ë(
a
))[2] =((c⁄° uöt32_à*Ë(
b
))[2]) \

484 && (((c⁄° 
uöt32_t
 *Ë(
a
))[3] =((c⁄° uöt32_à*Ë(
b
))[3]))

	)

487 
	#IN6_IS_ADDR_MULTICAST
(
a
Ë(((c⁄° 
uöt8_t
 *Ë◊))[0] =0xff)

	)

489 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_GNU


491 
	$bödªsvp‹t
 (
__sockfd
, 
sockaddr_ö
 *
__sock_ö
Ë
__THROW
;

494 
	$bödªsvp‹t6
 (
__sockfd
, 
sockaddr_ö6
 *
__sock_ö
)

495 
__THROW
;

499 
	#IN6_IS_ADDR_MC_NODELOCAL
(
a
) \

500 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

501 && ((((c⁄° 
uöt8_t
 *Ë(
a
))[1] & 0xfË=0x1))

	)

503 
	#IN6_IS_ADDR_MC_LINKLOCAL
(
a
) \

504 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

505 && ((((c⁄° 
uöt8_t
 *Ë(
a
))[1] & 0xfË=0x2))

	)

507 
	#IN6_IS_ADDR_MC_SITELOCAL
(
a
) \

508 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

509 && ((((c⁄° 
uöt8_t
 *Ë(
a
))[1] & 0xfË=0x5))

	)

511 
	#IN6_IS_ADDR_MC_ORGLOCAL
(
a
) \

512 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

513 && ((((c⁄° 
uöt8_t
 *Ë(
a
))[1] & 0xfË=0x8))

	)

515 
	#IN6_IS_ADDR_MC_GLOBAL
(
a
) \

516 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

517 && ((((c⁄° 
uöt8_t
 *Ë(
a
))[1] & 0xfË=0xe))

	)

520 #ifde‡
__USE_GNU


521 
cmsghdr
;

524 
	sö6_pktöfo


526 
ö6_addr
 
ùi6_addr
;

527 
ùi6_ifödex
;

531 
	sù6_mtuöfo


533 
sockaddr_ö6
 
ù6m_addr
;

534 
uöt32_t
 
ù6m_mtu
;

539 
	$öë6_›ti⁄_•a˚
 (
__nbyãs
)

540 
__THROW
 
__©åibuã_dïªˇãd__
;

541 
	$öë6_›ti⁄_öô
 (*
__bp
, 
cmsghdr
 **
__cmsgp
,

542 
__ty≥
Ë
__THROW
 
__©åibuã_dïªˇãd__
;

543 
	$öë6_›ti⁄_≠≥nd
 (
cmsghdr
 *
__cmsg
,

544 c⁄° 
uöt8_t
 *
__ty≥p
, 
__mu…x
,

545 
__∂usy
Ë
__THROW
 
__©åibuã_dïªˇãd__
;

546 
uöt8_t
 *
	$öë6_›ti⁄_Æloc
 (
cmsghdr
 *
__cmsg
, 
__d©Æí
,

547 
__mu…x
, 
__∂usy
)

548 
__THROW
 
__©åibuã_dïªˇãd__
;

549 
	$öë6_›ti⁄_√xt
 (c⁄° 
cmsghdr
 *
__cmsg
,

550 
uöt8_t
 **
__çåp
)

551 
__THROW
 
__©åibuã_dïªˇãd__
;

552 
	$öë6_›ti⁄_föd
 (c⁄° 
cmsghdr
 *
__cmsg
,

553 
uöt8_t
 **
__çåp
, 
__ty≥
)

554 
__THROW
 
__©åibuã_dïªˇãd__
;

558 
	$öë6_›t_öô
 (*
__extbuf
, 
sockÀn_t
 
__exéí
Ë
__THROW
;

559 
	$öë6_›t_≠≥nd
 (*
__extbuf
, 
sockÀn_t
 
__exéí
, 
__off£t
,

560 
uöt8_t
 
__ty≥
, 
sockÀn_t
 
__Àn
, uöt8_à
__Æign
,

561 **
__d©abuÂ
Ë
__THROW
;

562 
	$öë6_›t_föish
 (*
__extbuf
, 
sockÀn_t
 
__exéí
, 
__off£t
)

563 
__THROW
;

564 
	$öë6_›t_£t_vÆ
 (*
__d©abuf
, 
__off£t
, *
__vÆ
,

565 
sockÀn_t
 
__vÆÀn
Ë
__THROW
;

566 
	$öë6_›t_√xt
 (*
__extbuf
, 
sockÀn_t
 
__exéí
, 
__off£t
,

567 
uöt8_t
 *
__ty≥p
, 
sockÀn_t
 *
__À≈
,

568 **
__d©abuÂ
Ë
__THROW
;

569 
	$öë6_›t_föd
 (*
__extbuf
, 
sockÀn_t
 
__exéí
, 
__off£t
,

570 
uöt8_t
 
__ty≥
, 
sockÀn_t
 *
__À≈
,

571 **
__d©abuÂ
Ë
__THROW
;

572 
	$öë6_›t_gë_vÆ
 (*
__d©abuf
, 
__off£t
, *
__vÆ
,

573 
sockÀn_t
 
__vÆÀn
Ë
__THROW
;

577 
sockÀn_t
 
	$öë6_πh_•a˚
 (
__ty≥
, 
__£gmíts
Ë
__THROW
;

578 *
	$öë6_πh_öô
 (*
__bp
, 
sockÀn_t
 
__bp_Àn
, 
__ty≥
,

579 
__£gmíts
Ë
__THROW
;

580 
	$öë6_πh_add
 (*
__bp
, c⁄° 
ö6_addr
 *
__addr
Ë
__THROW
;

581 
	$öë6_πh_ªvî£
 (c⁄° *
__ö
, *
__out
Ë
__THROW
;

582 
	$öë6_πh_£gmíts
 (c⁄° *
__bp
Ë
__THROW
;

583 
ö6_addr
 *
	$öë6_πh_gëaddr
 (c⁄° *
__bp
, 
__ödex
)

584 
__THROW
;

590 
	$gëùv4sour˚fûãr
 (
__s
, 
ö_addr
 
__öãrÁ˚_addr
,

591 
ö_addr
 
__group
, 
uöt32_t
 *
__fmode
,

592 
uöt32_t
 *
__num§c
, 
ö_addr
 *
__¶i°
)

593 
__THROW
;

596 
	$£tùv4sour˚fûãr
 (
__s
, 
ö_addr
 
__öãrÁ˚_addr
,

597 
ö_addr
 
__group
, 
uöt32_t
 
__fmode
,

598 
uöt32_t
 
__num§c
,

599 c⁄° 
ö_addr
 *
__¶i°
)

600 
__THROW
;

604 
	$gësour˚fûãr
 (
__s
, 
uöt32_t
 
__öãrÁ˚_addr
,

605 c⁄° 
sockaddr
 *
__group
,

606 
sockÀn_t
 
__grou∂í
, 
uöt32_t
 *
__fmode
,

607 
uöt32_t
 *
__num§c
,

608 
sockaddr_°‹age
 *
__¶i°
Ë
__THROW
;

611 
	$£tsour˚fûãr
 (
__s
, 
uöt32_t
 
__öãrÁ˚_addr
,

612 c⁄° 
sockaddr
 *
__group
,

613 
sockÀn_t
 
__grou∂í
, 
uöt32_t
 
__fmode
,

614 
uöt32_t
 
__num§c
,

615 c⁄° 
sockaddr_°‹age
 *
__¶i°
Ë
__THROW
;

618 
__END_DECLS


	@/usr/include/regex.h

21 #i‚de‡
_REGEX_H


22 
	#_REGEX_H
 1

	)

24 
	~<sys/ty≥s.h
>

25 
	~<gnu/›ti⁄-groups.h
>

28 #ifde‡
__˝lu•lus


36 
	ts_ªg_t
;

37 
	ta˘ive_ªg_t
;

44 
	tªg_sy¡ax_t
;

46 #ifde‡
__USE_GNU


49 
	#RE_BACKSLASH_ESCAPE_IN_LISTS
 ((Ë1)

	)

54 
	#RE_BK_PLUS_QM
 (
RE_BACKSLASH_ESCAPE_IN_LISTS
 << 1)

	)

60 
	#RE_CHAR_CLASSES
 (
RE_BK_PLUS_QM
 << 1)

	)

74 
	#RE_CONTEXT_INDEP_ANCHORS
 (
RE_CHAR_CLASSES
 << 1)

	)

82 
	#RE_CONTEXT_INDEP_OPS
 (
RE_CONTEXT_INDEP_ANCHORS
 << 1)

	)

86 
	#RE_CONTEXT_INVALID_OPS
 (
RE_CONTEXT_INDEP_OPS
 << 1)

	)

90 
	#RE_DOT_NEWLINE
 (
RE_CONTEXT_INVALID_OPS
 << 1)

	)

94 
	#RE_DOT_NOT_NULL
 (
RE_DOT_NEWLINE
 << 1)

	)

98 
	#RE_HAT_LISTS_NOT_NEWLINE
 (
RE_DOT_NOT_NULL
 << 1)

	)

103 
	#RE_INTERVALS
 (
RE_HAT_LISTS_NOT_NEWLINE
 << 1)

	)

107 
	#RE_LIMITED_OPS
 (
RE_INTERVALS
 << 1)

	)

111 
	#RE_NEWLINE_ALT
 (
RE_LIMITED_OPS
 << 1)

	)

116 
	#RE_NO_BK_BRACES
 (
RE_NEWLINE_ALT
 << 1)

	)

120 
	#RE_NO_BK_PARENS
 (
RE_NO_BK_BRACES
 << 1)

	)

124 
	#RE_NO_BK_REFS
 (
RE_NO_BK_PARENS
 << 1)

	)

128 
	#RE_NO_BK_VBAR
 (
RE_NO_BK_REFS
 << 1)

	)

134 
	#RE_NO_EMPTY_RANGES
 (
RE_NO_BK_VBAR
 << 1)

	)

138 
	#RE_UNMATCHED_RIGHT_PAREN_ORD
 (
RE_NO_EMPTY_RANGES
 << 1)

	)

142 
	#RE_NO_POSIX_BACKTRACKING
 (
RE_UNMATCHED_RIGHT_PAREN_ORD
 << 1)

	)

146 
	#RE_NO_GNU_OPS
 (
RE_NO_POSIX_BACKTRACKING
 << 1)

	)

154 
	#RE_DEBUG
 (
RE_NO_GNU_OPS
 << 1)

	)

159 
	#RE_INVALID_INTERVAL_ORD
 (
RE_DEBUG
 << 1)

	)

162 #ifde‡
__OPTION_POSIX_REGEXP_GLIBC


165 
	#RE_ICASE
 (
RE_INVALID_INTERVAL_ORD
 << 1)

	)

170 
	#RE_CARET_ANCHORS_HERE
 (
RE_ICASE
 << 1)

	)

174 
	#RE_CONTEXT_INVALID_DUP
 (
RE_CARET_ANCHORS_HERE
 << 1)

	)

178 
	#RE_NO_SUB
 (
RE_CONTEXT_INVALID_DUP
 << 1)

	)

186 
ªg_sy¡ax_t
 
ª_sy¡ax_›ti⁄s
;

188 #ifde‡
__USE_GNU


193 
	#RE_SYNTAX_EMACS
 0

	)

195 
	#RE_SYNTAX_AWK
 \

196 (
RE_BACKSLASH_ESCAPE_IN_LISTS
 | 
RE_DOT_NOT_NULL
 \

197 | 
RE_NO_BK_PARENS
 | 
RE_NO_BK_REFS
 \

198 | 
RE_NO_BK_VBAR
 | 
RE_NO_EMPTY_RANGES
 \

199 | 
RE_DOT_NEWLINE
 | 
RE_CONTEXT_INDEP_ANCHORS
 \

200 | 
RE_CHAR_CLASSES
 \

201 | 
RE_UNMATCHED_RIGHT_PAREN_ORD
 | 
RE_NO_GNU_OPS
)

	)

203 
	#RE_SYNTAX_GNU_AWK
 \

204 ((
RE_SYNTAX_POSIX_EXTENDED
 | 
RE_BACKSLASH_ESCAPE_IN_LISTS
 \

205 | 
RE_INVALID_INTERVAL_ORD
) \

206 & ~(
RE_DOT_NOT_NULL
 | 
RE_CONTEXT_INDEP_OPS
 \

207 | 
RE_CONTEXT_INVALID_OPS
 ))

	)

209 
	#RE_SYNTAX_POSIX_AWK
 \

210 (
RE_SYNTAX_POSIX_EXTENDED
 | 
RE_BACKSLASH_ESCAPE_IN_LISTS
 \

211 | 
RE_INTERVALS
 | 
RE_NO_GNU_OPS
 \

212 | 
RE_INVALID_INTERVAL_ORD
)

	)

214 
	#RE_SYNTAX_GREP
 \

215 (
RE_BK_PLUS_QM
 | 
RE_CHAR_CLASSES
 \

216 | 
RE_HAT_LISTS_NOT_NEWLINE
 | 
RE_INTERVALS
 \

217 | 
RE_NEWLINE_ALT
)

	)

219 
	#RE_SYNTAX_EGREP
 \

220 (
RE_CHAR_CLASSES
 | 
RE_CONTEXT_INDEP_ANCHORS
 \

221 | 
RE_CONTEXT_INDEP_OPS
 | 
RE_HAT_LISTS_NOT_NEWLINE
 \

222 | 
RE_NEWLINE_ALT
 | 
RE_NO_BK_PARENS
 \

223 | 
RE_NO_BK_VBAR
)

	)

225 
	#RE_SYNTAX_POSIX_EGREP
 \

226 (
RE_SYNTAX_EGREP
 | 
RE_INTERVALS
 | 
RE_NO_BK_BRACES
 \

227 | 
RE_INVALID_INTERVAL_ORD
)

	)

230 
	#RE_SYNTAX_ED
 
RE_SYNTAX_POSIX_BASIC


	)

232 
	#RE_SYNTAX_SED
 
RE_SYNTAX_POSIX_BASIC


	)

235 
	#_RE_SYNTAX_POSIX_COMMON
 \

236 (
RE_CHAR_CLASSES
 | 
RE_DOT_NEWLINE
 | 
RE_DOT_NOT_NULL
 \

237 | 
RE_INTERVALS
 | 
RE_NO_EMPTY_RANGES
)

	)

239 #ifde‡
__OPTION_POSIX_REGEXP_GLIBC


240 
	#RE_SYNTAX_POSIX_BASIC
 \

241 (
_RE_SYNTAX_POSIX_COMMON
 | 
RE_BK_PLUS_QM
 | 
RE_CONTEXT_INVALID_DUP
)

	)

243 
	#RE_SYNTAX_POSIX_BASIC
 \

244 (
_RE_SYNTAX_POSIX_COMMON
 | 
RE_BK_PLUS_QM
)

	)

250 
	#RE_SYNTAX_POSIX_MINIMAL_BASIC
 \

251 (
_RE_SYNTAX_POSIX_COMMON
 | 
RE_LIMITED_OPS
)

	)

253 
	#RE_SYNTAX_POSIX_EXTENDED
 \

254 (
_RE_SYNTAX_POSIX_COMMON
 | 
RE_CONTEXT_INDEP_ANCHORS
 \

255 | 
RE_CONTEXT_INDEP_OPS
 | 
RE_NO_BK_BRACES
 \

256 | 
RE_NO_BK_PARENS
 | 
RE_NO_BK_VBAR
 \

257 | 
RE_CONTEXT_INVALID_OPS
 | 
RE_UNMATCHED_RIGHT_PAREN_ORD
)

	)

261 
	#RE_SYNTAX_POSIX_MINIMAL_EXTENDED
 \

262 (
_RE_SYNTAX_POSIX_COMMON
 | 
RE_CONTEXT_INDEP_ANCHORS
 \

263 | 
RE_CONTEXT_INVALID_OPS
 | 
RE_NO_BK_BRACES
 \

264 | 
RE_NO_BK_PARENS
 | 
RE_NO_BK_REFS
 \

265 | 
RE_NO_BK_VBAR
 | 
RE_UNMATCHED_RIGHT_PAREN_ORD
)

	)

271 #ifde‡
RE_DUP_MAX


272 #unde‡
RE_DUP_MAX


275 
	#RE_DUP_MAX
 (0x7fff)

	)

283 
	#REG_EXTENDED
 1

	)

287 
	#REG_ICASE
 (
REG_EXTENDED
 << 1)

	)

292 
	#REG_NEWLINE
 (
REG_ICASE
 << 1)

	)

296 
	#REG_NOSUB
 (
REG_NEWLINE
 << 1)

	)

306 
	#REG_NOTBOL
 1

	)

309 
	#REG_NOTEOL
 (1 << 1)

	)

311 #ifde‡
__OPTION_POSIX_REGEXP_GLIBC


314 
	#REG_STARTEND
 (1 << 2)

	)

322 #i‡
deföed
 
_XOPEN_SOURCE
 || deföed 
__USE_XOPEN2K


323 
	gREG_ENOSYS
 = -1,

326 
	gREG_NOERROR
 = 0,

327 
	gREG_NOMATCH
,

331 
	gREG_BADPAT
,

332 
	gREG_ECOLLATE
,

333 
	gREG_ECTYPE
,

334 
	gREG_EESCAPE
,

335 
	gREG_ESUBREG
,

336 
	gREG_EBRACK
,

337 
	gREG_EPAREN
,

338 
	gREG_EBRACE
,

339 
	gREG_BADBR
,

340 
	gREG_ERANGE
,

341 
	gREG_ESPACE
,

342 
	gREG_BADRPT
,

345 
	gREG_EEND
,

346 
	gREG_ESIZE
,

347 
	gREG_ERPAREN


348 } 
	tªg_îrcode_t
;

356 #i‚de‡
RE_TRANSLATE_TYPE


357 
	#__RE_TRANSLATE_TYPE
 *

	)

358 #ifde‡
__USE_GNU


359 
	#RE_TRANSLATE_TYPE
 
__RE_TRANSLATE_TYPE


	)

363 #ifde‡
__USE_GNU


364 
	#__REPB_PREFIX
(
«me
Ë
	)
name

366 
	#__REPB_PREFIX
(
«me
Ë
__
##
	)
name

369 
	sª_∑âîn_buf„r


374 *
__REPB_PREFIX
(
buf„r
);

377 
__REPB_PREFIX
(
Æloˇãd
);

380 
__REPB_PREFIX
(
u£d
);

383 
ªg_sy¡ax_t
 
__REPB_PREFIX
(
sy¡ax
);

388 *
__REPB_PREFIX
(
Á°m≠
);

394 
__RE_TRANSLATE_TYPE
 
__REPB_PREFIX
(
å™¶©e
);

397 
size_t
 
	gª_nsub
;

403 
__REPB_PREFIX
(
ˇn_be_nuŒ
) : 1;

409 #ifde‡
__USE_GNU


410 
	#REGS_UNALLOCATED
 0

	)

411 
	#REGS_REALLOCATE
 1

	)

412 
	#REGS_FIXED
 2

	)

414 
__REPB_PREFIX
(
ªgs_Æloˇãd
) : 2;

418 
__REPB_PREFIX
(
Á°m≠_accuøã
) : 1;

422 
__REPB_PREFIX
(
no_sub
) : 1;

426 
__REPB_PREFIX
(
nŸ_bﬁ
) : 1;

429 
__REPB_PREFIX
(
nŸ_eﬁ
) : 1;

432 
__REPB_PREFIX
(
√wlöe_™ch‹
) : 1;

435 
ª_∑âîn_buf„r
 
	tªgex_t
;

438 
	tªgoff_t
;

441 #ifde‡
__USE_GNU


444 
	sª_ªgi°îs


446 
	gnum_ªgs
;

447 
ªgoff_t
 *
	g°¨t
;

448 
ªgoff_t
 *
	gíd
;

455 #i‚de‡
RE_NREGS


456 
	#RE_NREGS
 30

	)

466 
ªgoff_t
 
	grm_so
;

467 
ªgoff_t
 
	grm_eo
;

468 } 
	tªgm©ch_t
;

472 #ifde‡
__USE_GNU


475 
ªg_sy¡ax_t
 
ª_£t_sy¡ax
 (ªg_sy¡ax_à
__sy¡ax
);

485 c⁄° *
ª_compûe_∑âîn
 (c⁄° *
__∑âîn
, 
size_t
 
__Àngth
,

486 
ª_∑âîn_buf„r
 *
__buf„r
);

492 
ª_compûe_Á°m≠
 (
ª_∑âîn_buf„r
 *
__buf„r
);

500 
ª_£¨ch
 (
ª_∑âîn_buf„r
 *
__buf„r
, c⁄° *
__°rög
,

501 
__Àngth
, 
__°¨t
, 
__ønge
,

502 
ª_ªgi°îs
 *
__ªgs
);

507 
ª_£¨ch_2
 (
ª_∑âîn_buf„r
 *
__buf„r
,

508 c⁄° *
__°rög1
, 
__Àngth1
,

509 c⁄° *
__°rög2
, 
__Àngth2
, 
__°¨t
,

510 
__ønge
, 
ª_ªgi°îs
 *
__ªgs
, 
__°›
);

515 
ª_m©ch
 (
ª_∑âîn_buf„r
 *
__buf„r
, c⁄° *
__°rög
,

516 
__Àngth
, 
__°¨t
, 
ª_ªgi°îs
 *
__ªgs
);

520 
ª_m©ch_2
 (
ª_∑âîn_buf„r
 *
__buf„r
,

521 c⁄° *
__°rög1
, 
__Àngth1
,

522 c⁄° *
__°rög2
, 
__Àngth2
, 
__°¨t
,

523 
ª_ªgi°îs
 *
__ªgs
, 
__°›
);

538 
ª_£t_ªgi°îs
 (
ª_∑âîn_buf„r
 *
__buf„r
,

539 
ª_ªgi°îs
 *
__ªgs
,

540 
__num_ªgs
,

541 
ªgoff_t
 *
__°¨ts
,Ñegoff_à*
__íds
);

544 #i‡
deföed
 
_REGEX_RE_COMP
 || (deföed 
_LIBC
 && deföed 
__USE_BSD
)

545 #i‚de‡
_CRAY


547 *
ª_comp
 (const *);

548 
ª_exec
 (const *);

554 #i‚de‡
__ª°ri˘


555 #i‡! (2 < 
__GNUC__
 || (2 =__GNUC__ && 95 <
__GNUC_MINOR__
))

556 #i‡
deföed
 
ª°ri˘
 || 199901L <
__STDC_VERSION__


557 
	#__ª°ri˘
 
ª°ri˘


	)

559 
	#__ª°ri˘


	)

564 #i‚de‡
__ª°ri˘_¨r


565 #i‡(
__GNUC__
 > 3 || (__GNUC__ =3 && 
__GNUC_MINOR__
 >= 1)) \

566 && !
deföed
 
	g__GNUG__


567 
	#__ª°ri˘_¨r
 
__ª°ri˘


	)

569 
	#__ª°ri˘_¨r


	)

574 
ªgcomp
 (
ªgex_t
 *
__ª°ri˘
 
__¥eg
,

575 c⁄° *
__ª°ri˘
 
__∑âîn
,

576 
__cÊags
);

578 
ªgexec
 (c⁄° 
ªgex_t
 *
__ª°ri˘
 
__¥eg
,

579 c⁄° *
__ª°ri˘
 
__°rög
, 
size_t
 
__nm©ch
,

580 
ªgm©ch_t
 
__pm©ch
[
__ª°ri˘_¨r
],

581 
__eÊags
);

583 
size_t
 
ªgîr‹
 (
__îrcode
, c⁄° 
ªgex_t
 *
__ª°ri˘
 
__¥eg
,

584 *
__ª°ri˘
 
__îrbuf
, 
size_t
 
__îrbuf_size
);

586 
ªg‰ì
 (
ªgex_t
 *
__¥eg
);

589 #ifde‡
__˝lu•lus


	@/usr/include/resolv.h

52 #i‚de‡
_RESOLV_H_


56 
	~<sys/ty≥s.h
>

57 
	~<√töë/ö.h
>

59 #i‚de‡
__√ed_ªs_°©e


60 
	#_RESOLV_H_


	)

62 
	~<sys/∑øm.h
>

63 
	~<sys/cdefs.h
>

64 
	~<°dio.h
>

65 
	~<¨∑/«me£r.h
>

68 #i‚de‡
__ªs_°©e_deföed


69 
	#__ªs_°©e_deföed


	)

71 íum { 
	mªs_gﬂhód
, 
	mªs_√xäs
, 
	mªs_modifõd
, 
	mªs_d⁄e
, 
	mªs_îr‹
 }

72 
	tªs_£ndhooka˘
;

74 
	$ªs_£ndhooka˘
 (*
	tªs_£nd_qhook
Ë(
	tsockaddr_ö
 * c⁄° *
	t__ns
,

75 c⁄° 
	tu_ch¨
 **
	t__quîy
,

76 *
	t__quîyÀn
,

77 
	tu_ch¨
 *
	t__™s
,

78 
	t__™ssiz
,

79 *
	t__ª•Àn
);

81 
	$ªs_£ndhooka˘
 (*
	tªs_£nd_rhook
Ë(c⁄° 
	tsockaddr_ö
 *
	t__ns
,

82 c⁄° 
	tu_ch¨
 *
	t__quîy
,

83 
	t__quîyÀn
,

84 
	tu_ch¨
 *
	t__™s
,

85 
	t__™ssiz
,

86 *
	t__ª•Àn
);

91 
	#MAXNS
 3

	)

92 
	#MAXDFLSRCH
 3

	)

93 
	#MAXDNSRCH
 6

	)

94 
	#LOCALDOMAINPARTS
 2

	)

96 
	#RES_TIMEOUT
 5

	)

97 
	#MAXRESOLVSORT
 10

	)

98 
	#RES_MAXNDOTS
 15

	)

99 
	#RES_MAXRETRANS
 30

	)

100 
	#RES_MAXRETRY
 5

	)

101 
	#RES_DFLRETRY
 2

	)

102 
	#RES_MAXTIME
 65535

	)

104 
	s__ªs_°©e
 {

105 
ªå™s
;

106 
ªåy
;

107 
u_l⁄g
 
›ti⁄s
;

108 
nscou¡
;

109 
sockaddr_ö


110 
nßddr_li°
[
MAXNS
];

111 
	#nßddr
 
nßddr_li°
[0]

	)

112 
u_sh‹t
 
id
;

114 *
dn§ch
[
MAXDNSRCH
+1];

115 
defd«me
[256];

116 
u_l⁄g
 
pfcode
;

117 
ndŸs
:4;

118 
ns‹t
:4;

119 
ùv6_u«vaû
:1;

120 
unu£d
:23;

122 
ö_addr
 
addr
;

123 
u_öt32_t
 
mask
;

124 } 
s‹t_li°
[
MAXRESOLVSORT
];

126 
ªs_£nd_qhook
 
qhook
;

127 
ªs_£nd_rhook
 
rhook
;

128 
ªs_h_î∫o
;

129 
_vcsock
;

130 
u_öt
 
_Êags
;

133 
∑d
[52];

135 
u_öt16_t
 
nscou¡
;

136 
u_öt16_t
 
nsm≠
[
MAXNS
];

137 
nssocks
[
MAXNS
];

138 
u_öt16_t
 
nscou¡6
;

139 
u_öt16_t
 
nsöô
;

140 
sockaddr_ö6
 *
nßddrs
[
MAXNS
];

141 #ifde‡
_LIBC


142 
öô°amp


143 
	`__©åibuã__
((
∑cked
));

145 
_öô°amp
[2];

147 } 
_ext
;

148 } 
_u
;

151 
__ªs_°©e
 *
	tªs_°©e
;

152 #unde‡
__√ed_ªs_°©e


155 #ifde‡
_RESOLV_H_


164 
	#__RES
 19991006

	)

172 #i‚de‡
_PATH_RESCONF


173 
	#_PATH_RESCONF
 "/ëc/ªsﬁv.c⁄f"

	)

176 
	sªs_sym
 {

177 
numbî
;

178 * 
«me
;

179 * 
hum™«me
;

185 
	#RES_F_VC
 0x00000001

	)

186 
	#RES_F_CONN
 0x00000002

	)

187 
	#RES_F_EDNS0ERR
 0x00000004

	)

190 
	#RES_EXHAUSTIVE
 0x00000001

	)

195 
	#RES_INIT
 0x00000001

	)

196 
	#RES_DEBUG
 0x00000002

	)

197 
	#RES_AAONLY
 0x00000004

	)

198 
	#RES_USEVC
 0x00000008

	)

199 
	#RES_PRIMARY
 0x00000010

	)

200 
	#RES_IGNTC
 0x00000020

	)

201 
	#RES_RECURSE
 0x00000040

	)

202 
	#RES_DEFNAMES
 0x00000080

	)

203 
	#RES_STAYOPEN
 0x00000100

	)

204 
	#RES_DNSRCH
 0x00000200

	)

205 
	#RES_INSECURE1
 0x00000400

	)

206 
	#RES_INSECURE2
 0x00000800

	)

207 
	#RES_NOALIASES
 0x00001000

	)

208 
	#RES_USE_INET6
 0x00002000

	)

209 
	#RES_ROTATE
 0x00004000

	)

210 
	#RES_NOCHECKNAME
 0x00008000

	)

211 
	#RES_KEEPTSIG
 0x00010000

	)

212 
	#RES_BLAST
 0x00020000

	)

213 
	#RES_USEBSTRING
 0x00040000

	)

215 
	#RES_NOIP6DOTINT
 0x00080000

	)

217 
	#RES_USE_EDNS0
 0x00100000

	)

218 
	#RES_SNGLKUP
 0x00200000

	)

219 
	#RES_SNGLKUPREOP
 0x00400000

	)

221 
	#RES_USE_DNSSEC
 0x00800000

	)

222 
	#RES_NOTLDQUERY
 0x01000000

	)

225 
	#RES_DEFAULT
 (
RES_RECURSE
|
RES_DEFNAMES
|
RES_DNSRCH
|
RES_NOIP6DOTINT
)

	)

230 
	#RES_PRF_STATS
 0x00000001

	)

231 
	#RES_PRF_UPDATE
 0x00000002

	)

232 
	#RES_PRF_CLASS
 0x00000004

	)

233 
	#RES_PRF_CMD
 0x00000008

	)

234 
	#RES_PRF_QUES
 0x00000010

	)

235 
	#RES_PRF_ANS
 0x00000020

	)

236 
	#RES_PRF_AUTH
 0x00000040

	)

237 
	#RES_PRF_ADD
 0x00000080

	)

238 
	#RES_PRF_HEAD1
 0x00000100

	)

239 
	#RES_PRF_HEAD2
 0x00000200

	)

240 
	#RES_PRF_TTLID
 0x00000400

	)

241 
	#RES_PRF_HEADX
 0x00000800

	)

242 
	#RES_PRF_QUERY
 0x00001000

	)

243 
	#RES_PRF_REPLY
 0x00002000

	)

244 
	#RES_PRF_INIT
 0x00004000

	)

248 
__BEGIN_DECLS


249 
__ªs_°©e
 *
	$__ªs_°©e
(Ë
	`__©åibuã__
 ((
__c⁄°__
));

250 
__END_DECLS


251 
	#_ªs
 (*
	`__ªs_°©e
())

	)

253 #i‚de‡
__BIND_NOSTATIC


254 
	#Â_nquîy
 
__Â_nquîy


	)

255 
	#Â_quîy
 
__Â_quîy


	)

256 
	#ho°Æüs
 
__ho°Æüs


	)

257 
	#p_quîy
 
__p_quîy


	)

258 
	#ªs_˛o£
 
__ªs_˛o£


	)

259 
	#ªs_öô
 
__ªs_öô


	)

260 
	#ªs_isour£rvî
 
__ªs_isour£rvî


	)

261 
	#ªs_mkquîy
 
__ªs_mkquîy


	)

262 
	#ªs_quîy
 
__ªs_quîy


	)

263 
	#ªs_quîydomaö
 
__ªs_quîydomaö


	)

264 
	#ªs_£¨ch
 
__ªs_£¨ch


	)

265 
	#ªs_£nd
 
__ªs_£nd


	)

267 
__BEGIN_DECLS


268 
	$Â_nquîy
 (c⁄° 
u_ch¨
 *, , 
FILE
 *Ë
__THROW
;

269 
	$Â_quîy
 (c⁄° 
u_ch¨
 *, 
FILE
 *Ë
__THROW
;

270 c⁄° * 
	$ho°Æüs
 (c⁄° *Ë
__THROW
;

271 
	$p_quîy
 (c⁄° 
u_ch¨
 *Ë
__THROW
;

272 
	$ªs_˛o£
 (Ë
__THROW
;

273 
	$ªs_öô
 (Ë
__THROW
;

274 
	$ªs_isour£rvî
 (c⁄° 
sockaddr_ö
 *Ë
__THROW
;

275 
	$ªs_mkquîy
 (, c⁄° *, , , c⁄° 
u_ch¨
 *,

276 , c⁄° 
u_ch¨
 *, u_ch¨ *, Ë
__THROW
;

277 
	$ªs_quîy
 (c⁄° *, , , 
u_ch¨
 *, Ë
__THROW
;

278 
	$ªs_quîydomaö
 (const *, const *, , ,

279 
u_ch¨
 *, Ë
__THROW
;

280 
	$ªs_£¨ch
 (c⁄° *, , , 
u_ch¨
 *, Ë
__THROW
;

281 
	$ªs_£nd
 (c⁄° 
u_ch¨
 *, , u_ch¨ *, Ë
__THROW
;

282 
__END_DECLS


285 
	#b64_¡›
 
__b64_¡›


	)

286 
	#b64_±⁄
 
__b64_±⁄


	)

287 
	#dn_comp
 
__dn_comp


	)

288 
	#dn_cou¡_œbñs
 
__dn_cou¡_œbñs


	)

289 
	#dn_ex∑nd
 
__dn_ex∑nd


	)

290 
	#dn_skù«me
 
__dn_skù«me


	)

291 
	#Â_ªs°©
 
__Â_ªs°©


	)

292 
	#loc_©⁄
 
__loc_©⁄


	)

293 
	#loc_¡ﬂ
 
__loc_¡ﬂ


	)

294 
	#p_cd«me
 
__p_cd«me


	)

295 
	#p_cd¬ame
 
__p_cd¬ame


	)

296 
	#p_˛ass
 
__p_˛ass


	)

297 
	#p_fq«me
 
__p_fq«me


	)

298 
	#p_fq¬ame
 
__p_fq¬ame


	)

299 
	#p_›ti⁄
 
__p_›ti⁄


	)

300 
	#p_£c°od©e
 
__p_£c°od©e


	)

301 
	#p_£˘i⁄
 
__p_£˘i⁄


	)

302 
	#p_time
 
__p_time


	)

303 
	#p_ty≥
 
__p_ty≥


	)

304 
	#p_rcode
 
__p_rcode


	)

305 
	#pué⁄g
 
__pué⁄g


	)

306 
	#putsh‹t
 
__putsh‹t


	)

307 
	#ªs_dnok
 
__ªs_dnok


	)

308 
	#ªs_hnok
 
__ªs_hnok


	)

309 
	#ªs_ho°Æüs
 
__ªs_ho°Æüs


	)

310 
	#ªs_maûok
 
__ªs_maûok


	)

311 
	#ªs_«meöquîy
 
__ªs_«meöquîy


	)

312 
	#ªs_n˛o£
 
__ªs_n˛o£


	)

313 
	#ªs_nöô
 
__ªs_nöô


	)

314 
	#ªs_nmkquîy
 
__ªs_nmkquîy


	)

315 
	#ªs_≈quîy
 
__ªs_≈quîy


	)

316 
	#ªs_nquîy
 
__ªs_nquîy


	)

317 
	#ªs_nquîydomaö
 
__ªs_nquîydomaö


	)

318 
	#ªs_n£¨ch
 
__ªs_n£¨ch


	)

319 
	#ªs_n£nd
 
__ªs_n£nd


	)

320 
	#ªs_nisour£rvî
 
__ªs_nisour£rvî


	)

321 
	#ªs_ownok
 
__ªs_ownok


	)

322 
	#ªs_quîõsm©ch
 
__ªs_quîõsm©ch


	)

323 
	#ªs_øndomid
 
__ªs_øndomid


	)

324 
	#sym_¡›
 
__sym_¡›


	)

325 
	#sym_¡os
 
__sym_¡os


	)

326 
	#sym_°⁄
 
__sym_°⁄


	)

327 
__BEGIN_DECLS


328 
	$ªs_hnok
 (c⁄° *Ë
__THROW
;

329 
	$ªs_ownok
 (c⁄° *Ë
__THROW
;

330 
	$ªs_maûok
 (c⁄° *Ë
__THROW
;

331 
	$ªs_dnok
 (c⁄° *Ë
__THROW
;

332 
	$sym_°⁄
 (c⁄° 
ªs_sym
 *, c⁄° *, *Ë
__THROW
;

333 c⁄° * 
	$sym_¡os
 (c⁄° 
ªs_sym
 *, , *Ë
__THROW
;

334 c⁄° * 
	$sym_¡›
 (c⁄° 
ªs_sym
 *, , *Ë
__THROW
;

335 
	$b64_¡›
 (
u_ch¨
 c⁄° *, 
size_t
, *, size_tË
__THROW
;

336 
	$b64_±⁄
 (c⁄° *, 
u_ch¨
 *, 
size_t
Ë
__THROW
;

337 
	$loc_©⁄
 (c⁄° *
__ascii
, 
u_ch¨
 *
__bö¨y
Ë
__THROW
;

338 c⁄° * 
	$loc_¡ﬂ
 (c⁄° 
u_ch¨
 *
__bö¨y
, *
__ascii
Ë
__THROW
;

339 
	$dn_skù«me
 (c⁄° 
u_ch¨
 *, c⁄° u_ch¨ *Ë
__THROW
;

340 
	$pué⁄g
 (
u_öt32_t
, 
u_ch¨
 *Ë
__THROW
;

341 
	$putsh‹t
 (
u_öt16_t
, 
u_ch¨
 *Ë
__THROW
;

342 c⁄° * 
	$p_˛ass
 (Ë
__THROW
;

343 c⁄° * 
	$p_time
 (
u_öt32_t
Ë
__THROW
;

344 c⁄° * 
	$p_ty≥
 (Ë
__THROW
;

345 c⁄° * 
	$p_rcode
 (Ë
__THROW
;

346 c⁄° 
u_ch¨
 * 
	$p_cd¬ame
 (c⁄° 
u_ch¨
 *, c⁄° u_ch¨ *, , 
FILE
 *)

347 
__THROW
;

348 c⁄° 
u_ch¨
 * 
	$p_cd«me
 (c⁄° 
u_ch¨
 *, c⁄° u_ch¨ *, 
FILE
 *Ë
__THROW
;

349 c⁄° 
u_ch¨
 * 
	$p_fq¬ame
 (c⁄° 
u_ch¨
 *
__˝
, c⁄° u_ch¨ *
__msg
,

350 , *, Ë
__THROW
;

351 c⁄° 
u_ch¨
 * 
	$p_fq«me
 (c⁄° 
u_ch¨
 *, c⁄° u_ch¨ *, 
FILE
 *Ë
__THROW
;

352 c⁄° * 
	$p_›ti⁄
 (
u_l⁄g
 
__›ti⁄
Ë
__THROW
;

353 * 
	$p_£c°od©e
 (
u_l⁄g
Ë
__THROW
;

354 
	$dn_cou¡_œbñs
 (c⁄° *Ë
__THROW
;

355 
	$dn_comp
 (c⁄° *, 
u_ch¨
 *, , u_char **, u_char **)

356 
__THROW
;

357 
	$dn_ex∑nd
 (c⁄° 
u_ch¨
 *, const u_char *, const u_char *,

358 *, Ë
__THROW
;

359 
u_öt
 
	$ªs_øndomid
 (Ë
__THROW
;

360 
	$ªs_«meöquîy
 (const *, , ,

361 c⁄° 
u_ch¨
 *, c⁄° u_ch¨ *Ë
__THROW
;

362 
	$ªs_quîõsm©ch
 (c⁄° 
u_ch¨
 *, const u_char *,

363 c⁄° 
u_ch¨
 *, c⁄° u_ch¨ *Ë
__THROW
;

364 c⁄° * 
	$p_£˘i⁄
 (
__£˘i⁄
, 
__›code
Ë
__THROW
;

366 
	$ªs_nöô
 (
ªs_°©e
Ë
__THROW
;

367 
	$ªs_nisour£rvî
 (c⁄° 
ªs_°©e
,

368 c⁄° 
sockaddr_ö
 *Ë
__THROW
;

369 
	$Â_ªs°©
 (c⁄° 
ªs_°©e
, 
FILE
 *Ë
__THROW
;

370 
	$ªs_≈quîy
 (c⁄° 
ªs_°©e
, c⁄° 
u_ch¨
 *, , 
FILE
 *)

371 
__THROW
;

372 c⁄° * 
	$ªs_ho°Æüs
 (c⁄° 
ªs_°©e
, c⁄° *, *, 
size_t
)

373 
__THROW
;

374 
	$ªs_nquîy
 (
ªs_°©e
, c⁄° *, , , 
u_ch¨
 *, )

375 
__THROW
;

376 
	$ªs_n£¨ch
 (
ªs_°©e
, c⁄° *, , , 
u_ch¨
 *, )

377 
__THROW
;

378 
	$ªs_nquîydomaö
 (
ªs_°©e
, const *, const *, ,

379 , 
u_ch¨
 *, Ë
__THROW
;

380 
	$ªs_nmkquîy
 (
ªs_°©e
, , const *, , ,

381 c⁄° 
u_ch¨
 *, , const u_char *, u_char *,

382 Ë
__THROW
;

383 
	$ªs_n£nd
 (
ªs_°©e
, c⁄° 
u_ch¨
 *, , u_char *, )

384 
__THROW
;

385 
	$ªs_n˛o£
 (
ªs_°©e
Ë
__THROW
;

386 
__END_DECLS


	@/usr/include/signal.h

22 #i‚def 
_SIGNAL_H


24 #i‡!
deföed
 
__√ed_sig_©omic_t
 && !deföed 
__√ed_sig£t_t


25 
	#_SIGNAL_H


	)

28 
	~<„©uªs.h
>

30 
	g__BEGIN_DECLS


32 
	~<bôs/sig£t.h
>

36 #i‡
deföed
 
__√ed_sig_©omic_t
 || deföed 
_SIGNAL_H


37 #i‚de‡
__sig_©omic_t_deföed


38 
	#__sig_©omic_t_deföed


	)

39 
__BEGIN_NAMESPACE_STD


40 
__sig_©omic_t
 
	tsig_©omic_t
;

41 
	g__END_NAMESPACE_STD


43 #unde‡
__√ed_sig_©omic_t


46 #i‡
deföed
 
__√ed_sig£t_t
 || (deföed 
_SIGNAL_H
 && deföed 
__USE_POSIX
)

47 #i‚de‡
__sig£t_t_deföed


48 
	#__sig£t_t_deföed


	)

49 
__sig£t_t
 
	tsig£t_t
;

51 #unde‡
__√ed_sig£t_t


54 #ifde‡
_SIGNAL_H


56 
	~<bôs/ty≥s.h
>

57 
	~<bôs/signum.h
>

59 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K


60 #i‚de‡
__pid_t_deföed


61 
__pid_t
 
	tpid_t
;

62 
	#__pid_t_deföed


	)

64 #ifde‡
__USE_XOPEN


66 #i‚de‡
__uid_t_deföed


67 
__uid_t
 
	tuid_t
;

68 
	#__uid_t_deföed


	)

72 #ifde‡
__USE_POSIX199309


74 
	#__√ed_time•ec


	)

75 
	~<time.h
>

78 #i‡
deföed
 
__USE_POSIX199309
 || deföed 
__USE_XOPEN_EXTENDED


80 
	~<bôs/sigöfo.h
>

85 (*
	t__sigh™dÀr_t
) ();

90 
__sigh™dÀr_t
 
	$__sysv_sig«l
 (
__sig
, 
__sigh™dÀr_t
 
__h™dÀr
)

91 
__THROW
;

92 #ifde‡
__USE_GNU


93 
__sigh™dÀr_t
 
	$sysv_sig«l
 (
__sig
, 
__sigh™dÀr_t
 
__h™dÀr
)

94 
__THROW
;

100 
__BEGIN_NAMESPACE_STD


101 #ifde‡
__USE_BSD


102 
__sigh™dÀr_t
 
	$sig«l
 (
__sig
, 
__sigh™dÀr_t
 
__h™dÀr
)

103 
__THROW
;

106 #ifde‡
__REDIRECT_NTH


107 
__sigh™dÀr_t
 
	`__REDIRECT_NTH
 (
sig«l
,

108 (
__sig
, 
__sigh™dÀr_t
 
__h™dÀr
),

109 
__sysv_sig«l
);

111 
	#sig«l
 
__sysv_sig«l


	)

114 
__END_NAMESPACE_STD


116 #ifde‡
__USE_XOPEN


119 
__sigh™dÀr_t
 
	$bsd_sig«l
 (
__sig
, 
__sigh™dÀr_t
 
__h™dÀr
)

120 
__THROW
;

126 #ifde‡
__USE_POSIX


127 
	$kûl
 (
__pid_t
 
__pid
, 
__sig
Ë
__THROW
;

130 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


134 
	$kûÕg
 (
__pid_t
 
__pgΩ
, 
__sig
Ë
__THROW
;

137 
__BEGIN_NAMESPACE_STD


139 
	$øi£
 (
__sig
Ë
__THROW
;

140 
__END_NAMESPACE_STD


142 #ifde‡
__USE_SVID


144 
__sigh™dÀr_t
 
	$ssig«l
 (
__sig
, 
__sigh™dÀr_t
 
__h™dÀr
)

145 
__THROW
;

146 
	$gsig«l
 (
__sig
Ë
__THROW
;

149 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN2K


151 
	`psig«l
 (
__sig
, c⁄° *
__s
);

154 #ifde‡
__USE_XOPEN2K


156 
	`psigöfo
 (c⁄° 
sigöfo_t
 *
__pöfo
, c⁄° *
__s
);

169 
	`__sig∑u£
 (
__sig_‹_mask
, 
__is_sig
);

171 #ifde‡
__FAVOR_BSD


174 
	$sig∑u£
 (
__mask
Ë
__THROW
 
__©åibuã_dïªˇãd__
;

176 #ifde‡
__USE_XOPEN


177 #ifde‡
__GNUC__


178 
	$sig∑u£
 (
__sig
Ë
	`__asm__
 ("__xpg_sigpause");

181 
	#sig∑u£
(
sig
Ë
	`__sig∑u£
 ((sig), 1)

	)

187 #ifde‡
__USE_BSD


194 
	#sigmask
(
sig
Ë
	`__sigmask
(sig)

	)

197 
	$sigblock
 (
__mask
Ë
__THROW
 
__©åibuã_dïªˇãd__
;

200 
	$sig£tmask
 (
__mask
Ë
__THROW
 
__©åibuã_dïªˇãd__
;

203 
	$siggëmask
 (Ë
__THROW
 
__©åibuã_dïªˇãd__
;

207 #ifde‡
__USE_MISC


208 
	#NSIG
 
_NSIG


	)

211 #ifde‡
__USE_GNU


212 
__sigh™dÀr_t
 
	tsigh™dÀr_t
;

216 #ifde‡
__USE_BSD


217 
__sigh™dÀr_t
 
	tsig_t
;

220 #ifde‡
__USE_POSIX


223 
	$sigem±y£t
 (
sig£t_t
 *
__£t
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

226 
	$sigfûl£t
 (
sig£t_t
 *
__£t
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

229 
	$sigadd£t
 (
sig£t_t
 *
__£t
, 
__signo
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

232 
	$sigdñ£t
 (
sig£t_t
 *
__£t
, 
__signo
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

235 
	$sigismembî
 (c⁄° 
sig£t_t
 *
__£t
, 
__signo
)

236 
__THROW
 
	`__n⁄nuŒ
 ((1));

238 #ifde‡
__USE_GNU


240 
	$sigi£m±y£t
 (c⁄° 
sig£t_t
 *
__£t
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

243 
	$sig™d£t
 (
sig£t_t
 *
__£t
, c⁄° sig£t_à*
__À·
,

244 c⁄° 
sig£t_t
 *
__right
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2, 3));

247 
	$sig‹£t
 (
sig£t_t
 *
__£t
, c⁄° sig£t_à*
__À·
,

248 c⁄° 
sig£t_t
 *
__right
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2, 3));

253 
	~<bôs/siga˘i⁄.h
>

256 
	$sig¥ocmask
 (
__how
, c⁄° 
sig£t_t
 *
__ª°ri˘
 
__£t
,

257 
sig£t_t
 *
__ª°ri˘
 
__o£t
Ë
__THROW
;

264 
	$sigsu•íd
 (c⁄° 
sig£t_t
 *
__£t
Ë
	`__n⁄nuŒ
 ((1));

267 
	$siga˘i⁄
 (
__sig
, c⁄° 
siga˘i⁄
 *
__ª°ri˘
 
__a˘
,

268 
siga˘i⁄
 *
__ª°ri˘
 
__ﬂ˘
Ë
__THROW
;

271 
	$sig≥ndög
 (
sig£t_t
 *
__£t
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

278 
	$sigwaô
 (c⁄° 
sig£t_t
 *
__ª°ri˘
 
__£t
, *__ª°ri˘ 
__sig
)

279 
	`__n⁄nuŒ
 ((1, 2));

281 #ifde‡
__USE_POSIX199309


286 
	$sigwaôöfo
 (c⁄° 
sig£t_t
 *
__ª°ri˘
 
__£t
,

287 
sigöfo_t
 *
__ª°ri˘
 
__öfo
Ë
	`__n⁄nuŒ
 ((1));

294 
	$sigtimedwaô
 (c⁄° 
sig£t_t
 *
__ª°ri˘
 
__£t
,

295 
sigöfo_t
 *
__ª°ri˘
 
__öfo
,

296 c⁄° 
time•ec
 *
__ª°ri˘
 
__timeout
)

297 
	`__n⁄nuŒ
 ((1));

301 
	$sigqueue
 (
__pid_t
 
__pid
, 
__sig
, c⁄° 
sigvÆ
 
__vÆ
)

302 
__THROW
;

307 #ifde‡
__USE_BSD


311 c⁄° *c⁄° 
_sys_sigli°
[
_NSIG
];

312 c⁄° *c⁄° 
sys_sigli°
[
_NSIG
];

315 
	ssigvec


317 
__sigh™dÀr_t
 
sv_h™dÀr
;

318 
sv_mask
;

320 
sv_Êags
;

321 
	#sv_⁄°ack
 
sv_Êags


	)

325 
	#SV_ONSTACK
 (1 << 0)

	)

326 
	#SV_INTERRUPT
 (1 << 1)

	)

327 
	#SV_RESETHAND
 (1 << 2)

	)

335 
	$sigvec
 (
__sig
, c⁄° 
sigvec
 *
__vec
,

336 
sigvec
 *
__ovec
Ë
__THROW
;

340 
	~<bôs/sigc⁄ãxt.h
>

343 
	$sigªtu∫
 (
sigc⁄ãxt
 *
__s˝
Ë
__THROW
;

348 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


349 
	#__√ed_size_t


	)

350 
	~<°ddef.h
>

355 
	$sigöãºu±
 (
__sig
, 
__öãºu±
Ë
__THROW
;

357 
	~<bôs/sig°ack.h
>

358 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8


360 
	~<sys/uc⁄ãxt.h
>

366 
	$sig°ack
 (
sig°ack
 *
__ss
, sig°ack *
__oss
)

367 
__THROW
 
__©åibuã_dïªˇãd__
;

371 
	$sigÆt°ack
 (c⁄° 
sigÆt°ack
 *
__ª°ri˘
 
__ss
,

372 
sigÆt°ack
 *
__ª°ri˘
 
__oss
Ë
__THROW
;

376 #ifde‡
__USE_XOPEN_EXTENDED


380 
	$sighﬁd
 (
__sig
Ë
__THROW
;

383 
	$sigªl£
 (
__sig
Ë
__THROW
;

386 
	$sigign‹e
 (
__sig
Ë
__THROW
;

389 
__sigh™dÀr_t
 
	$sig£t
 (
__sig
, 
__sigh™dÀr_t
 
__di•
Ë
__THROW
;

392 #i‡
deföed
 
__USE_POSIX199506
 || deföed 
__USE_UNIX98


395 
	~<bôs/±hªadty≥s.h
>

396 
	~<bôs/sigthªad.h
>

403 
	$__libc_cuºít_sigπmö
 (Ë
__THROW
;

405 
	$__libc_cuºít_sigπmax
 (Ë
__THROW
;

409 
__END_DECLS


	@/usr/include/stdint.h

22 #i‚de‡
_STDINT_H


23 
	#_STDINT_H
 1

	)

25 
	~<„©uªs.h
>

26 
	~<bôs/wch¨.h
>

27 
	~<bôs/w‹dsize.h
>

34 #i‚de‡
__öt8_t_deföed


35 
	#__öt8_t_deföed


	)

36 sig√d 
	töt8_t
;

37 
	töt16_t
;

38 
	töt32_t
;

39 #i‡
__WORDSIZE
 == 64

40 
	töt64_t
;

42 
__exãnsi⁄__


43 
	töt64_t
;

48 
	tuöt8_t
;

49 
	tuöt16_t
;

50 #i‚de‡
__uöt32_t_deföed


51 
	tuöt32_t
;

52 
	#__uöt32_t_deföed


	)

54 #i‡
__WORDSIZE
 == 64

55 
	tuöt64_t
;

57 
__exãnsi⁄__


58 
	tuöt64_t
;

65 sig√d 
	töt_Àa°8_t
;

66 
	töt_Àa°16_t
;

67 
	töt_Àa°32_t
;

68 #i‡
__WORDSIZE
 == 64

69 
	töt_Àa°64_t
;

71 
__exãnsi⁄__


72 
	töt_Àa°64_t
;

76 
	tuöt_Àa°8_t
;

77 
	tuöt_Àa°16_t
;

78 
	tuöt_Àa°32_t
;

79 #i‡
__WORDSIZE
 == 64

80 
	tuöt_Àa°64_t
;

82 
__exãnsi⁄__


83 
	tuöt_Àa°64_t
;

90 sig√d 
	töt_Á°8_t
;

91 #i‡
__WORDSIZE
 == 64

92 
	töt_Á°16_t
;

93 
	töt_Á°32_t
;

94 
	töt_Á°64_t
;

96 
	töt_Á°16_t
;

97 
	töt_Á°32_t
;

98 
__exãnsi⁄__


99 
	töt_Á°64_t
;

103 
	tuöt_Á°8_t
;

104 #i‡
__WORDSIZE
 == 64

105 
	tuöt_Á°16_t
;

106 
	tuöt_Á°32_t
;

107 
	tuöt_Á°64_t
;

109 
	tuöt_Á°16_t
;

110 
	tuöt_Á°32_t
;

111 
__exãnsi⁄__


112 
	tuöt_Á°64_t
;

117 #i‡
__WORDSIZE
 == 64

118 #i‚de‡
__öçå_t_deföed


119 
	töçå_t
;

120 
	#__öçå_t_deföed


	)

122 
	tuöçå_t
;

124 #i‚de‡
__öçå_t_deföed


125 
	töçå_t
;

126 
	#__öçå_t_deföed


	)

128 
	tuöçå_t
;

133 #i‡
__WORDSIZE
 == 64

134 
	tötmax_t
;

135 
	tuötmax_t
;

137 
__exãnsi⁄__


138 
	tötmax_t
;

139 
__exãnsi⁄__


140 
	tuötmax_t
;

146 #i‡!
deföed
 
__˝lu•lus
 || deföed 
__STDC_LIMIT_MACROS


148 #i‡
__WORDSIZE
 == 64

149 
	#__INT64_C
(
c
Ë¯## 
L


	)

150 
	#__UINT64_C
(
c
Ë¯## 
UL


	)

152 
	#__INT64_C
(
c
Ë¯## 
LL


	)

153 
	#__UINT64_C
(
c
Ë¯## 
ULL


	)

159 
	#INT8_MIN
 (-128)

	)

160 
	#INT16_MIN
 (-32767-1)

	)

161 
	#INT32_MIN
 (-2147483647-1)

	)

162 
	#INT64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

164 
	#INT8_MAX
 (127)

	)

165 
	#INT16_MAX
 (32767)

	)

166 
	#INT32_MAX
 (2147483647)

	)

167 
	#INT64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

170 
	#UINT8_MAX
 (255)

	)

171 
	#UINT16_MAX
 (65535)

	)

172 
	#UINT32_MAX
 (4294967295U)

	)

173 
	#UINT64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

177 
	#INT_LEAST8_MIN
 (-128)

	)

178 
	#INT_LEAST16_MIN
 (-32767-1)

	)

179 
	#INT_LEAST32_MIN
 (-2147483647-1)

	)

180 
	#INT_LEAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

182 
	#INT_LEAST8_MAX
 (127)

	)

183 
	#INT_LEAST16_MAX
 (32767)

	)

184 
	#INT_LEAST32_MAX
 (2147483647)

	)

185 
	#INT_LEAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

188 
	#UINT_LEAST8_MAX
 (255)

	)

189 
	#UINT_LEAST16_MAX
 (65535)

	)

190 
	#UINT_LEAST32_MAX
 (4294967295U)

	)

191 
	#UINT_LEAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

195 
	#INT_FAST8_MIN
 (-128)

	)

196 #i‡
__WORDSIZE
 == 64

197 
	#INT_FAST16_MIN
 (-9223372036854775807L-1)

	)

198 
	#INT_FAST32_MIN
 (-9223372036854775807L-1)

	)

200 
	#INT_FAST16_MIN
 (-2147483647-1)

	)

201 
	#INT_FAST32_MIN
 (-2147483647-1)

	)

203 
	#INT_FAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

205 
	#INT_FAST8_MAX
 (127)

	)

206 #i‡
__WORDSIZE
 == 64

207 
	#INT_FAST16_MAX
 (9223372036854775807L)

	)

208 
	#INT_FAST32_MAX
 (9223372036854775807L)

	)

210 
	#INT_FAST16_MAX
 (2147483647)

	)

211 
	#INT_FAST32_MAX
 (2147483647)

	)

213 
	#INT_FAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

216 
	#UINT_FAST8_MAX
 (255)

	)

217 #i‡
__WORDSIZE
 == 64

218 
	#UINT_FAST16_MAX
 (18446744073709551615UL)

	)

219 
	#UINT_FAST32_MAX
 (18446744073709551615UL)

	)

221 
	#UINT_FAST16_MAX
 (4294967295U)

	)

222 
	#UINT_FAST32_MAX
 (4294967295U)

	)

224 
	#UINT_FAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

228 #i‡
__WORDSIZE
 == 64

229 
	#INTPTR_MIN
 (-9223372036854775807L-1)

	)

230 
	#INTPTR_MAX
 (9223372036854775807L)

	)

231 
	#UINTPTR_MAX
 (18446744073709551615UL)

	)

233 
	#INTPTR_MIN
 (-2147483647-1)

	)

234 
	#INTPTR_MAX
 (2147483647)

	)

235 
	#UINTPTR_MAX
 (4294967295U)

	)

240 
	#INTMAX_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

242 
	#INTMAX_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

245 
	#UINTMAX_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

251 #i‡
__WORDSIZE
 == 64

252 
	#PTRDIFF_MIN
 (-9223372036854775807L-1)

	)

253 
	#PTRDIFF_MAX
 (9223372036854775807L)

	)

255 
	#PTRDIFF_MIN
 (-2147483647-1)

	)

256 
	#PTRDIFF_MAX
 (2147483647)

	)

260 
	#SIG_ATOMIC_MIN
 (-2147483647-1)

	)

261 
	#SIG_ATOMIC_MAX
 (2147483647)

	)

264 #i‡
__WORDSIZE
 == 64

265 
	#SIZE_MAX
 (18446744073709551615UL)

	)

267 
	#SIZE_MAX
 (4294967295U)

	)

271 #i‚de‡
WCHAR_MIN


273 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

274 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

278 
	#WINT_MIN
 (0u)

	)

279 
	#WINT_MAX
 (4294967295u)

	)

286 #i‡!
deföed
 
__˝lu•lus
 || deföed 
__STDC_CONSTANT_MACROS


289 
	#INT8_C
(
c
Ë
	)
c

290 
	#INT16_C
(
c
Ë
	)
c

291 
	#INT32_C
(
c
Ë
	)
c

292 #i‡
__WORDSIZE
 == 64

293 
	#INT64_C
(
c
Ë¯## 
L


	)

295 
	#INT64_C
(
c
Ë¯## 
LL


	)

299 
	#UINT8_C
(
c
Ë
	)
c

300 
	#UINT16_C
(
c
Ë
	)
c

301 
	#UINT32_C
(
c
Ë¯## 
U


	)

302 #i‡
__WORDSIZE
 == 64

303 
	#UINT64_C
(
c
Ë¯## 
UL


	)

305 
	#UINT64_C
(
c
Ë¯## 
ULL


	)

309 #i‡
__WORDSIZE
 == 64

310 
	#INTMAX_C
(
c
Ë¯## 
L


	)

311 
	#UINTMAX_C
(
c
Ë¯## 
UL


	)

313 
	#INTMAX_C
(
c
Ë¯## 
LL


	)

314 
	#UINTMAX_C
(
c
Ë¯## 
ULL


	)

	@/usr/include/stdio.h

23 #i‚de‡
_STDIO_H


25 #i‡!
deföed
 
__√ed_FILE
 && !deföed 
__√ed___FILE


26 
	#_STDIO_H
 1

	)

27 
	~<„©uªs.h
>

29 
	g__BEGIN_DECLS


31 
	#__√ed_size_t


	)

32 
	#__√ed_NULL


	)

33 
	~<°ddef.h
>

35 
	~<bôs/ty≥s.h
>

36 
	#__√ed_FILE


	)

37 
	#__√ed___FILE


	)

41 #i‡!
deföed
 
__FILE_deföed
 && deföed 
__√ed_FILE


44 
	g_IO_FILE
;

46 
__BEGIN_NAMESPACE_STD


48 
_IO_FILE
 
	tFILE
;

49 
	g__END_NAMESPACE_STD


50 #i‡
deföed
 
__USE_LARGEFILE64
 || deföed 
__USE_SVID
 || deföed 
__USE_POSIX
 \

51 || 
deföed
 
	g__USE_BSD
 || deföed 
	g__USE_ISOC99
 || deföed 
	g__USE_XOPEN
 \

52 || 
deföed
 
__USE_POSIX2


53 
	$__USING_NAMESPACE_STD
(
FILE
)

56 
	#__FILE_deföed
 1

	)

58 #unde‡
__√ed_FILE


61 #i‡!
deföed
 
____FILE_deföed
 && deföed 
__√ed___FILE


64 
_IO_FILE
 
	t__FILE
;

66 
	#____FILE_deföed
 1

	)

68 #unde‡
__√ed___FILE


71 #ifdef 
_STDIO_H


72 
	#_STDIO_USES_IOSTREAM


	)

74 
	~<libio.h
>

76 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8


77 #ifde‡
__GNUC__


78 #i‚de‡
_VA_LIST_DEFINED


79 
_G_va_li°
 
	tva_li°
;

80 
	#_VA_LIST_DEFINED


	)

83 
	~<°d¨g.h
>

87 #ifde‡
__USE_XOPEN2K8


88 #i‚de‡
__off_t_deföed


89 #i‚de‡
__USE_FILE_OFFSET64


90 
__off_t
 
	toff_t
;

92 
__off64_t
 
	toff_t
;

94 
	#__off_t_deföed


	)

96 #i‡
deföed
 
__USE_LARGEFILE64
 && !deföed 
__off64_t_deföed


97 
__off64_t
 
	toff64_t
;

98 
	#__off64_t_deföed


	)

101 #i‚de‡
__ssize_t_deföed


102 
__ssize_t
 
	tssize_t
;

103 
	#__ssize_t_deföed


	)

108 
__BEGIN_NAMESPACE_STD


109 #i‚de‡
__USE_FILE_OFFSET64


110 
_G_Âos_t
 
	tÂos_t
;

112 
_G_Âos64_t
 
	tÂos_t
;

114 
__END_NAMESPACE_STD


115 #ifde‡
__USE_LARGEFILE64


116 
_G_Âos64_t
 
	tÂos64_t
;

120 
	#_IOFBF
 0

	)

121 
	#_IOLBF
 1

	)

122 
	#_IONBF
 2

	)

126 #i‚de‡
BUFSIZ


127 
	#BUFSIZ
 
_IO_BUFSIZ


	)

133 #i‚de‡
EOF


134 
	#EOF
 (-1)

	)

140 
	#SEEK_SET
 0

	)

141 
	#SEEK_CUR
 1

	)

142 
	#SEEK_END
 2

	)

143 #ifde‡
__USE_GNU


144 
	#SEEK_DATA
 3

	)

145 
	#SEEK_HOLE
 4

	)

149 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


151 
	#P_tmpdú
 "/tmp"

	)

164 
	~<bôs/°dio_lim.h
>

168 
_IO_FILE
 *
°dö
;

169 
_IO_FILE
 *
°dout
;

170 
_IO_FILE
 *
°dîr
;

172 
	#°dö
 
°dö


	)

173 
	#°dout
 
°dout


	)

174 
	#°dîr
 
°dîr


	)

176 
__BEGIN_NAMESPACE_STD


178 
	$ªmove
 (c⁄° *
__fûíame
Ë
__THROW
;

180 
	$ª«me
 (c⁄° *
__ﬁd
, c⁄° *
__√w
Ë
__THROW
;

181 
__END_NAMESPACE_STD


183 #ifde‡
__USE_ATFILE


185 
	$ª«mót
 (
__ﬁdfd
, c⁄° *
__ﬁd
, 
__√wfd
,

186 c⁄° *
__√w
Ë
__THROW
;

189 
__BEGIN_NAMESPACE_STD


194 #i‚de‡
__USE_FILE_OFFSET64


195 
FILE
 *
	$tmpfûe
 (Ë
__wur
;

197 #ifde‡
__REDIRECT


198 
FILE
 *
	`__REDIRECT
 (
tmpfûe
, (), 
tmpfûe64
Ë
__wur
;

200 
	#tmpfûe
 
tmpfûe64


	)

204 #ifde‡
__USE_LARGEFILE64


205 
FILE
 *
	$tmpfûe64
 (Ë
__wur
;

209 *
	$tm≤am
 (*
__s
Ë
__THROW
 
__wur
;

210 
__END_NAMESPACE_STD


212 #ifde‡
__USE_MISC


215 *
	$tm≤am_r
 (*
__s
Ë
__THROW
 
__wur
;

219 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


227 *
	$ãm≤am
 (c⁄° *
__dú
, c⁄° *
__pfx
)

228 
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

232 
__BEGIN_NAMESPACE_STD


237 
	`f˛o£
 (
FILE
 *
__°ªam
);

242 
	`fÊush
 (
FILE
 *
__°ªam
);

243 
__END_NAMESPACE_STD


245 #ifde‡
__USE_MISC


252 
	`fÊush_u∆ocked
 (
FILE
 *
__°ªam
);

255 #ifde‡
__USE_GNU


262 
	`f˛o£Æl
 ();

266 
__BEGIN_NAMESPACE_STD


267 #i‚de‡
__USE_FILE_OFFSET64


272 
FILE
 *
	$f›í
 (c⁄° *
__ª°ri˘
 
__fûíame
,

273 c⁄° *
__ª°ri˘
 
__modes
Ë
__wur
;

278 
FILE
 *
	$‰e›í
 (c⁄° *
__ª°ri˘
 
__fûíame
,

279 c⁄° *
__ª°ri˘
 
__modes
,

280 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

282 #ifde‡
__REDIRECT


283 
FILE
 *
	`__REDIRECT
 (
f›í
, (c⁄° *
__ª°ri˘
 
__fûíame
,

284 c⁄° *
__ª°ri˘
 
__modes
), 
f›í64
)

285 
__wur
;

286 
FILE
 *
	`__REDIRECT
 (
‰e›í
, (c⁄° *
__ª°ri˘
 
__fûíame
,

287 c⁄° *
__ª°ri˘
 
__modes
,

288 
FILE
 *
__ª°ri˘
 
__°ªam
), 
‰e›í64
)

289 
__wur
;

291 
	#f›í
 
f›í64


	)

292 
	#‰e›í
 
‰e›í64


	)

295 
__END_NAMESPACE_STD


296 #ifde‡
__USE_LARGEFILE64


297 
FILE
 *
	$f›í64
 (c⁄° *
__ª°ri˘
 
__fûíame
,

298 c⁄° *
__ª°ri˘
 
__modes
Ë
__wur
;

299 
FILE
 *
	$‰e›í64
 (c⁄° *
__ª°ri˘
 
__fûíame
,

300 c⁄° *
__ª°ri˘
 
__modes
,

301 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

304 #ifdef 
__USE_POSIX


306 
FILE
 *
	$fd›í
 (
__fd
, c⁄° *
__modes
Ë
__THROW
 
__wur
;

309 #ifdef 
__USE_GNU


312 
FILE
 *
	$f›ícookõ
 (*
__ª°ri˘
 
__magic_cookõ
,

313 c⁄° *
__ª°ri˘
 
__modes
,

314 
_IO_cookõ_io_fun˘i⁄s_t
 
__io_funcs
Ë
__THROW
 
__wur
;

317 #ifde‡
__USE_XOPEN2K8


319 
FILE
 *
	$fmem›í
 (*
__s
, 
size_t
 
__Àn
, c⁄° *
__modes
)

320 
__THROW
 
__wur
;

325 
FILE
 *
	$›í_mem°ªam
 (**
__buÊoc
, 
size_t
 *
__sizñoc
Ë
__THROW
 
__wur
;

329 
__BEGIN_NAMESPACE_STD


332 
	$£tbuf
 (
FILE
 *
__ª°ri˘
 
__°ªam
, *__ª°ri˘ 
__buf
Ë
__THROW
;

336 
	$£tvbuf
 (
FILE
 *
__ª°ri˘
 
__°ªam
, *__ª°ri˘ 
__buf
,

337 
__modes
, 
size_t
 
__n
Ë
__THROW
;

338 
__END_NAMESPACE_STD


340 #ifdef 
__USE_BSD


343 
	$£tbuf„r
 (
FILE
 *
__ª°ri˘
 
__°ªam
, *__ª°ri˘ 
__buf
,

344 
size_t
 
__size
Ë
__THROW
;

347 
	$£éöebuf
 (
FILE
 *
__°ªam
Ë
__THROW
;

351 
__BEGIN_NAMESPACE_STD


356 
	`Ârötf
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

357 c⁄° *
__ª°ri˘
 
__f‹m©
, ...);

362 
	`¥ötf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, ...);

364 
	$•rötf
 (*
__ª°ri˘
 
__s
,

365 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__THROWNL
;

371 
	`vÂrötf
 (
FILE
 *
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__f‹m©
,

372 
_G_va_li°
 
__¨g
);

377 
	`v¥ötf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
);

379 
	$v•rötf
 (*
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__f‹m©
,

380 
_G_va_li°
 
__¨g
Ë
__THROWNL
;

381 
__END_NAMESPACE_STD


383 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_ISOC99
 || deföed 
__USE_UNIX98


384 
__BEGIN_NAMESPACE_C99


386 
	$¢¥ötf
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxÀn
,

387 c⁄° *
__ª°ri˘
 
__f‹m©
, ...)

388 
__THROWNL
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 4)));

390 
	$v¢¥ötf
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxÀn
,

391 c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
)

392 
__THROWNL
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 0)));

393 
__END_NAMESPACE_C99


396 #ifde‡
__USE_GNU


399 
	$va•rötf
 (**
__ª°ri˘
 
__±r
, c⁄° *__ª°ri˘ 
__f
,

400 
_G_va_li°
 
__¨g
)

401 
__THROWNL
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 2, 0))Ë
__wur
;

402 
	$__a•rötf
 (**
__ª°ri˘
 
__±r
,

403 c⁄° *
__ª°ri˘
 
__fmt
, ...)

404 
__THROWNL
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 2, 3))Ë
__wur
;

405 
	$a•rötf
 (**
__ª°ri˘
 
__±r
,

406 c⁄° *
__ª°ri˘
 
__fmt
, ...)

407 
__THROWNL
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 2, 3))Ë
__wur
;

410 #ifde‡
__USE_XOPEN2K8


412 
	$vd¥ötf
 (
__fd
, c⁄° *
__ª°ri˘
 
__fmt
,

413 
_G_va_li°
 
__¨g
)

414 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 0)));

415 
	$d¥ötf
 (
__fd
, c⁄° *
__ª°ri˘
 
__fmt
, ...)

416 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 3)));

420 
__BEGIN_NAMESPACE_STD


425 
	$fsˇnf
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

426 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

431 
	$sˇnf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

433 
	$ssˇnf
 (c⁄° *
__ª°ri˘
 
__s
,

434 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__THROW
;

436 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__USE_GNU
 \

437 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

438 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

439 #ifde‡
__REDIRECT


443 
	`__REDIRECT
 (
fsˇnf
, (
FILE
 *
__ª°ri˘
 
__°ªam
,

444 c⁄° *
__ª°ri˘
 
__f‹m©
, ...),

445 
__isoc99_fsˇnf
Ë
__wur
;

446 
	`__REDIRECT
 (
sˇnf
, (c⁄° *
__ª°ri˘
 
__f‹m©
, ...),

447 
__isoc99_sˇnf
Ë
__wur
;

448 
	`__REDIRECT_NTH
 (
ssˇnf
, (c⁄° *
__ª°ri˘
 
__s
,

449 c⁄° *
__ª°ri˘
 
__f‹m©
, ...),

450 
__isoc99_ssˇnf
);

452 
	$__isoc99_fsˇnf
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

453 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

454 
	$__isoc99_sˇnf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

455 
	$__isoc99_ssˇnf
 (c⁄° *
__ª°ri˘
 
__s
,

456 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__THROW
;

457 
	#fsˇnf
 
__isoc99_fsˇnf


	)

458 
	#sˇnf
 
__isoc99_sˇnf


	)

459 
	#ssˇnf
 
__isoc99_ssˇnf


	)

463 
__END_NAMESPACE_STD


465 #ifdef 
__USE_ISOC99


466 
__BEGIN_NAMESPACE_C99


471 
	$vfsˇnf
 (
FILE
 *
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__f‹m©
,

472 
_G_va_li°
 
__¨g
)

473 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 2, 0))Ë
__wur
;

479 
	$vsˇnf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
)

480 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 1, 0))Ë
__wur
;

483 
	$vssˇnf
 (c⁄° *
__ª°ri˘
 
__s
,

484 c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
)

485 
__THROW
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__sˇnf__
, 2, 0)));

487 #i‡!
deföed
 
__USE_GNU
 \

488 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

489 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

490 #ifde‡
__REDIRECT


494 
	`__REDIRECT
 (
vfsˇnf
,

495 (
FILE
 *
__ª°ri˘
 
__s
,

496 c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
),

497 
__isoc99_vfsˇnf
)

498 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 2, 0))Ë
__wur
;

499 
	`__REDIRECT
 (
vsˇnf
, (c⁄° *
__ª°ri˘
 
__f‹m©
,

500 
_G_va_li°
 
__¨g
), 
__isoc99_vsˇnf
)

501 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 1, 0))Ë
__wur
;

502 
	`__REDIRECT_NTH
 (
vssˇnf
,

503 (c⁄° *
__ª°ri˘
 
__s
,

504 c⁄° *
__ª°ri˘
 
__f‹m©
,

505 
_G_va_li°
 
__¨g
), 
__isoc99_vssˇnf
)

506 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__sˇnf__
, 2, 0)));

508 
	$__isoc99_vfsˇnf
 (
FILE
 *
__ª°ri˘
 
__s
,

509 c⁄° *
__ª°ri˘
 
__f‹m©
,

510 
_G_va_li°
 
__¨g
Ë
__wur
;

511 
	$__isoc99_vsˇnf
 (c⁄° *
__ª°ri˘
 
__f‹m©
,

512 
_G_va_li°
 
__¨g
Ë
__wur
;

513 
	$__isoc99_vssˇnf
 (c⁄° *
__ª°ri˘
 
__s
,

514 c⁄° *
__ª°ri˘
 
__f‹m©
,

515 
_G_va_li°
 
__¨g
Ë
__THROW
;

516 
	#vfsˇnf
 
__isoc99_vfsˇnf


	)

517 
	#vsˇnf
 
__isoc99_vsˇnf


	)

518 
	#vssˇnf
 
__isoc99_vssˇnf


	)

522 
__END_NAMESPACE_C99


526 
__BEGIN_NAMESPACE_STD


531 
	`fgëc
 (
FILE
 *
__°ªam
);

532 
	`gëc
 (
FILE
 *
__°ªam
);

538 
	`gëch¨
 ();

539 
__END_NAMESPACE_STD


543 
	#gëc
(
_Â
Ë
	`_IO_gëc
 (_Â)

	)

545 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


550 
	`gëc_u∆ocked
 (
FILE
 *
__°ªam
);

551 
	`gëch¨_u∆ocked
 ();

554 #ifde‡
__USE_MISC


561 
	`fgëc_u∆ocked
 (
FILE
 *
__°ªam
);

565 
__BEGIN_NAMESPACE_STD


573 
	`Âutc
 (
__c
, 
FILE
 *
__°ªam
);

574 
	`putc
 (
__c
, 
FILE
 *
__°ªam
);

580 
	`putch¨
 (
__c
);

581 
__END_NAMESPACE_STD


585 
	#putc
(
_ch
, 
_Â
Ë
	`_IO_putc
 (_ch, _Â)

	)

587 #ifde‡
__USE_MISC


594 
	`Âutc_u∆ocked
 (
__c
, 
FILE
 *
__°ªam
);

597 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


602 
	`putc_u∆ocked
 (
__c
, 
FILE
 *
__°ªam
);

603 
	`putch¨_u∆ocked
 (
__c
);

607 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC
 \

608 || (
deföed
 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K
)

610 
	`gëw
 (
FILE
 *
__°ªam
);

613 
	`putw
 (
__w
, 
FILE
 *
__°ªam
);

617 
__BEGIN_NAMESPACE_STD


622 *
	$fgës
 (*
__ª°ri˘
 
__s
, 
__n
, 
FILE
 *__ª°ri˘ 
__°ªam
)

623 
__wur
;

625 #i‡!
deföed
 
__USE_ISOC11
 \

626 || (
deföed
 
__˝lu•lus
 && __cplusplus <= 201103L)

638 *
	$gës
 (*
__s
Ë
__wur
 
__©åibuã_dïªˇãd__
;

640 
__END_NAMESPACE_STD


642 #ifde‡
__USE_GNU


649 *
	$fgës_u∆ocked
 (*
__ª°ri˘
 
__s
, 
__n
,

650 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

654 #ifdef 
__USE_XOPEN2K8


665 
_IO_ssize_t
 
	$__gëdñim
 (**
__ª°ri˘
 
__löïå
,

666 
size_t
 *
__ª°ri˘
 
__n
, 
__dñimôî
,

667 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

668 
_IO_ssize_t
 
	$gëdñim
 (**
__ª°ri˘
 
__löïå
,

669 
size_t
 *
__ª°ri˘
 
__n
, 
__dñimôî
,

670 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

678 
_IO_ssize_t
 
	$gëlöe
 (**
__ª°ri˘
 
__löïå
,

679 
size_t
 *
__ª°ri˘
 
__n
,

680 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

684 
__BEGIN_NAMESPACE_STD


689 
	`Âuts
 (c⁄° *
__ª°ri˘
 
__s
, 
FILE
 *__ª°ri˘ 
__°ªam
);

695 
	`puts
 (c⁄° *
__s
);

702 
	`ungëc
 (
__c
, 
FILE
 *
__°ªam
);

709 
size_t
 
	$‰ód
 (*
__ª°ri˘
 
__±r
, 
size_t
 
__size
,

710 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

715 
size_t
 
	`fwrôe
 (c⁄° *
__ª°ri˘
 
__±r
, size_à
__size
,

716 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__s
);

717 
__END_NAMESPACE_STD


719 #ifde‡
__USE_GNU


726 
	`Âuts_u∆ocked
 (c⁄° *
__ª°ri˘
 
__s
,

727 
FILE
 *
__ª°ri˘
 
__°ªam
);

730 #ifde‡
__USE_MISC


737 
size_t
 
	$‰ód_u∆ocked
 (*
__ª°ri˘
 
__±r
, 
size_t
 
__size
,

738 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

739 
size_t
 
	`fwrôe_u∆ocked
 (c⁄° *
__ª°ri˘
 
__±r
, size_à
__size
,

740 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
);

744 
__BEGIN_NAMESPACE_STD


749 
	`f£ek
 (
FILE
 *
__°ªam
, 
__off
, 
__whí˚
);

754 
	$·ñl
 (
FILE
 *
__°ªam
Ë
__wur
;

759 
	`ªwöd
 (
FILE
 *
__°ªam
);

760 
__END_NAMESPACE_STD


767 #i‡
deföed
 
__USE_LARGEFILE
 || deföed 
__USE_XOPEN2K


768 #i‚de‡
__USE_FILE_OFFSET64


773 
	`f£eko
 (
FILE
 *
__°ªam
, 
__off_t
 
__off
, 
__whí˚
);

778 
__off_t
 
	$·ñlo
 (
FILE
 *
__°ªam
Ë
__wur
;

780 #ifde‡
__REDIRECT


781 
	`__REDIRECT
 (
f£eko
,

782 (
FILE
 *
__°ªam
, 
__off64_t
 
__off
, 
__whí˚
),

783 
f£eko64
);

784 
__off64_t
 
	`__REDIRECT
 (
·ñlo
, (
FILE
 *
__°ªam
), 
·ñlo64
);

786 
	#f£eko
 
f£eko64


	)

787 
	#·ñlo
 
·ñlo64


	)

792 
__BEGIN_NAMESPACE_STD


793 #i‚de‡
__USE_FILE_OFFSET64


798 
	`fgëpos
 (
FILE
 *
__ª°ri˘
 
__°ªam
, 
Âos_t
 *__ª°ri˘ 
__pos
);

803 
	`f£ços
 (
FILE
 *
__°ªam
, c⁄° 
Âos_t
 *
__pos
);

805 #ifde‡
__REDIRECT


806 
	`__REDIRECT
 (
fgëpos
, (
FILE
 *
__ª°ri˘
 
__°ªam
,

807 
Âos_t
 *
__ª°ri˘
 
__pos
), 
fgëpos64
);

808 
	`__REDIRECT
 (
f£ços
,

809 (
FILE
 *
__°ªam
, c⁄° 
Âos_t
 *
__pos
), 
f£ços64
);

811 
	#fgëpos
 
fgëpos64


	)

812 
	#f£ços
 
f£ços64


	)

815 
__END_NAMESPACE_STD


817 #ifde‡
__USE_LARGEFILE64


818 
	`f£eko64
 (
FILE
 *
__°ªam
, 
__off64_t
 
__off
, 
__whí˚
);

819 
__off64_t
 
	$·ñlo64
 (
FILE
 *
__°ªam
Ë
__wur
;

820 
	`fgëpos64
 (
FILE
 *
__ª°ri˘
 
__°ªam
, 
Âos64_t
 *__ª°ri˘ 
__pos
);

821 
	`f£ços64
 (
FILE
 *
__°ªam
, c⁄° 
Âos64_t
 *
__pos
);

824 
__BEGIN_NAMESPACE_STD


826 
	$˛óªº
 (
FILE
 *
__°ªam
Ë
__THROW
;

828 
	$„of
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

830 
	$„º‹
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

831 
__END_NAMESPACE_STD


833 #ifde‡
__USE_MISC


835 
	$˛óªº_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
;

836 
	$„of_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

837 
	$„º‹_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

841 
__BEGIN_NAMESPACE_STD


846 
	`≥º‹
 (c⁄° *
__s
);

847 
__END_NAMESPACE_STD


853 
	~<bôs/sys_îæi°.h
>

856 #ifdef 
__USE_POSIX


858 
	$fûío
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

861 #ifde‡
__USE_MISC


863 
	$fûío_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

867 #i‡(
deföed
 
__USE_POSIX2
 || deföed 
__USE_SVID
 || deföed 
__USE_BSD
 || \

868 
deföed
 
__USE_MISC
)

873 
FILE
 *
	$p›í
 (c⁄° *
__comm™d
, c⁄° *
__modes
Ë
__wur
;

879 
	`p˛o£
 (
FILE
 *
__°ªam
);

883 #ifdef 
__USE_POSIX


885 *
	$˘îmid
 (*
__s
Ë
__THROW
;

889 #ifde‡
__USE_XOPEN


891 *
	`cu£rid
 (*
__s
);

895 #ifdef 
__USE_GNU


896 
ob°ack
;

899 
	$ob°ack_¥ötf
 (
ob°ack
 *
__ª°ri˘
 
__ob°ack
,

900 c⁄° *
__ª°ri˘
 
__f‹m©
, ...)

901 
__THROWNL
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 3)));

902 
	$ob°ack_v¥ötf
 (
ob°ack
 *
__ª°ri˘
 
__ob°ack
,

903 c⁄° *
__ª°ri˘
 
__f‹m©
,

904 
_G_va_li°
 
__¨gs
)

905 
__THROWNL
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 0)));

909 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


913 
	$Êockfûe
 (
FILE
 *
__°ªam
Ë
__THROW
;

917 
	$·rylockfûe
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

920 
	$fu∆ockfûe
 (
FILE
 *
__°ªam
Ë
__THROW
;

923 #i‡
deföed
 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K
 && !deföed 
__USE_GNU


927 
	#__√ed_gë›t


	)

928 
	~<gë›t.h
>

933 #ifde‡
__USE_EXTERN_INLINES


934 
	~<bôs/°dio.h
>

936 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__exã∫_Æways_ölöe


937 
	~<bôs/°dio2.h
>

939 #ifde‡
__LDBL_COMPAT


940 
	~<bôs/°dio-ldbl.h
>

943 
__END_DECLS


	@/usr/include/stdlib.h

22 #i‚def 
_STDLIB_H


24 
	~<„©uªs.h
>

27 
	#__√ed_size_t


	)

28 #i‚de‡
__√ed_mÆloc_™d_ˇŒoc


29 
	#__√ed_wch¨_t


	)

30 
	#__√ed_NULL


	)

32 
	~<°ddef.h
>

34 
	g__BEGIN_DECLS


36 #i‚de‡
__√ed_mÆloc_™d_ˇŒoc


37 
	#_STDLIB_H
 1

	)

39 #i‡(
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8
Ë&& !deföed 
_SYS_WAIT_H


41 
	~<bôs/waôÊags.h
>

42 
	~<bôs/waô°©us.h
>

44 #ifde‡
__USE_BSD


49 #i‡
deföed
 
__GNUC__
 && !deföed 
__˝lu•lus


50 
	#__WAIT_INT
(
°©us
) \

51 (
	`__exãnsi⁄__
 (((uni⁄ { 
	`__ty≥of
(
°©us
Ë
__ö
; 
__i
; }) \

52 { .
__ö
 = (
°©us
Ë}).
__i
))

	)

54 
	#__WAIT_INT
(
°©us
Ë(*(*Ë&(°©us))

	)

62 #i‡!
deföed
 
__GNUC__
 || __GNUC__ < 2 || deföed 
__˝lu•lus


63 
	#__WAIT_STATUS
 *

	)

64 
	#__WAIT_STATUS_DEFN
 *

	)

69 
waô
 *
	m__u±r
;

70 *
	m__ùå
;

71 } 
	t__WAIT_STATUS
 
	t__©åibuã__
 ((
	t__å™•¨ít_uni⁄__
));

72 
	#__WAIT_STATUS_DEFN
 *

	)

77 
	#__WAIT_INT
(
°©us
Ë(°©us)

	)

78 
	#__WAIT_STATUS
 *

	)

79 
	#__WAIT_STATUS_DEFN
 *

	)

84 
	#WEXITSTATUS
(
°©us
Ë
	`__WEXITSTATUS
 (
	`__WAIT_INT
 (°©us))

	)

85 
	#WTERMSIG
(
°©us
Ë
	`__WTERMSIG
 (
	`__WAIT_INT
 (°©us))

	)

86 
	#WSTOPSIG
(
°©us
Ë
	`__WSTOPSIG
 (
	`__WAIT_INT
 (°©us))

	)

87 
	#WIFEXITED
(
°©us
Ë
	`__WIFEXITED
 (
	`__WAIT_INT
 (°©us))

	)

88 
	#WIFSIGNALED
(
°©us
Ë
	`__WIFSIGNALED
 (
	`__WAIT_INT
 (°©us))

	)

89 
	#WIFSTOPPED
(
°©us
Ë
	`__WIFSTOPPED
 (
	`__WAIT_INT
 (°©us))

	)

90 #ifde‡
__WIFCONTINUED


91 
	#WIFCONTINUED
(
°©us
Ë
	`__WIFCONTINUED
 (
	`__WAIT_INT
 (°©us))

	)

95 
__BEGIN_NAMESPACE_STD


99 
	mquŸ
;

100 
	mªm
;

101 } 
	tdiv_t
;

104 #i‚de‡
__ldiv_t_deföed


107 
	mquŸ
;

108 
	mªm
;

109 } 
	tldiv_t
;

110 
	#__ldiv_t_deföed
 1

	)

112 
	g__END_NAMESPACE_STD


114 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__Œdiv_t_deföed


115 
__BEGIN_NAMESPACE_C99


117 
__exãnsi⁄__
 struct

119 
	mquŸ
;

120 
	mªm
;

121 } 
	tŒdiv_t
;

122 
	#__Œdiv_t_deföed
 1

	)

123 
	g__END_NAMESPACE_C99


128 
	#RAND_MAX
 2147483647

	)

133 
	#EXIT_FAILURE
 1

	)

134 
	#EXIT_SUCCESS
 0

	)

138 
	#MB_CUR_MAX
 (
	`__˘y≥_gë_mb_cur_max
 ())

	)

139 
size_t
 
	$__˘y≥_gë_mb_cur_max
 (Ë
__THROW
 
__wur
;

142 
__BEGIN_NAMESPACE_STD


144 
	$©of
 (c⁄° *
__≈å
)

145 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

147 
	$©oi
 (c⁄° *
__≈å
)

148 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

150 
	$©ﬁ
 (c⁄° *
__≈å
)

151 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

152 
__END_NAMESPACE_STD


154 #i‡
deföed
 
__USE_ISOC99
 || (deföed 
__GLIBC_HAVE_LONG_LONG
 && deföed 
__USE_MISC
)

155 
__BEGIN_NAMESPACE_C99


157 
__exãnsi⁄__
 
	$©ﬁl
 (c⁄° *
__≈å
)

158 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

159 
__END_NAMESPACE_C99


162 
__BEGIN_NAMESPACE_STD


164 
	$°πod
 (c⁄° *
__ª°ri˘
 
__≈å
,

165 **
__ª°ri˘
 
__íd±r
)

166 
__THROW
 
	`__n⁄nuŒ
 ((1));

167 
__END_NAMESPACE_STD


169 #ifdef 
__USE_ISOC99


170 
__BEGIN_NAMESPACE_C99


172 
	$°πof
 (c⁄° *
__ª°ri˘
 
__≈å
,

173 **
__ª°ri˘
 
__íd±r
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

175 
	$°πﬁd
 (c⁄° *
__ª°ri˘
 
__≈å
,

176 **
__ª°ri˘
 
__íd±r
)

177 
__THROW
 
	`__n⁄nuŒ
 ((1));

178 
__END_NAMESPACE_C99


181 
__BEGIN_NAMESPACE_STD


183 
	$°πﬁ
 (c⁄° *
__ª°ri˘
 
__≈å
,

184 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

185 
__THROW
 
	`__n⁄nuŒ
 ((1));

187 
	$°πoul
 (c⁄° *
__ª°ri˘
 
__≈å
,

188 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

189 
__THROW
 
	`__n⁄nuŒ
 ((1));

190 
__END_NAMESPACE_STD


192 #i‡
deföed
 
__GLIBC_HAVE_LONG_LONG
 && deföed 
__USE_BSD


194 
__exãnsi⁄__


195 
	$°πoq
 (c⁄° *
__ª°ri˘
 
__≈å
,

196 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

197 
__THROW
 
	`__n⁄nuŒ
 ((1));

199 
__exãnsi⁄__


200 
	$°πouq
 (c⁄° *
__ª°ri˘
 
__≈å
,

201 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

202 
__THROW
 
	`__n⁄nuŒ
 ((1));

205 #i‡
deföed
 
__USE_ISOC99
 || (deföed 
__GLIBC_HAVE_LONG_LONG
 && deföed 
__USE_MISC
)

206 
__BEGIN_NAMESPACE_C99


208 
__exãnsi⁄__


209 
	$°πﬁl
 (c⁄° *
__ª°ri˘
 
__≈å
,

210 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

211 
__THROW
 
	`__n⁄nuŒ
 ((1));

213 
__exãnsi⁄__


214 
	$°πouŒ
 (c⁄° *
__ª°ri˘
 
__≈å
,

215 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

216 
__THROW
 
	`__n⁄nuŒ
 ((1));

217 
__END_NAMESPACE_C99


221 #ifde‡
__USE_GNU


235 
	~<xloˇÀ.h
>

239 
	$°πﬁ_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

240 **
__ª°ri˘
 
__íd±r
, 
__ba£
,

241 
__loˇÀ_t
 
__loc
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 4));

243 
	$°πoul_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

244 **
__ª°ri˘
 
__íd±r
,

245 
__ba£
, 
__loˇÀ_t
 
__loc
)

246 
__THROW
 
	`__n⁄nuŒ
 ((1, 4));

248 
__exãnsi⁄__


249 
	$°πﬁl_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

250 **
__ª°ri˘
 
__íd±r
, 
__ba£
,

251 
__loˇÀ_t
 
__loc
)

252 
__THROW
 
	`__n⁄nuŒ
 ((1, 4));

254 
__exãnsi⁄__


255 
	$°πouŒ_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

256 **
__ª°ri˘
 
__íd±r
,

257 
__ba£
, 
__loˇÀ_t
 
__loc
)

258 
__THROW
 
	`__n⁄nuŒ
 ((1, 4));

260 
	$°πod_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

261 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

262 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

264 
	$°πof_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

265 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

266 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

268 
	$°πﬁd_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

269 **
__ª°ri˘
 
__íd±r
,

270 
__loˇÀ_t
 
__loc
)

271 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

275 #ifde‡
__USE_EXTERN_INLINES


276 
__BEGIN_NAMESPACE_STD


277 
__exã∫_ölöe
 

278 
	`__NTH
 (
	$©oi
 (c⁄° *
__≈å
))

280  (Ë
	`°πﬁ
 (
__≈å
, (**Ë
NULL
, 10);

281 
	}
}

282 
__exã∫_ölöe
 

283 
__NTH
 (
	$©ﬁ
 (c⁄° *
__≈å
))

285  
	`°πﬁ
 (
__≈å
, (**Ë
NULL
, 10);

286 
	}
}

287 
	g__END_NAMESPACE_STD


289 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_ISOC99


290 
__BEGIN_NAMESPACE_C99


291 
__exãnsi⁄__
 
__exã∫_ölöe
 

292 
__NTH
 (
	$©ﬁl
 (c⁄° *
__≈å
))

294  
	`°πﬁl
 (
__≈å
, (**Ë
NULL
, 10);

295 
	}
}

296 
	g__END_NAMESPACE_C99


301 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN_EXTENDED


305 *
	$l64a
 (
__n
Ë
__THROW
 
__wur
;

308 
	$a64l
 (c⁄° *
__s
)

309 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

313 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_BSD


314 
	~<sys/ty≥s.h
>

321 
	$øndom
 (Ë
__THROW
;

324 
	$§™dom
 (
__£ed
Ë
__THROW
;

330 *
	$öô°©e
 (
__£ed
, *
__°©ebuf
,

331 
size_t
 
__°©ñí
Ë
__THROW
 
	`__n⁄nuŒ
 ((2));

335 *
	$£t°©e
 (*
__°©ebuf
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

338 #ifde‡
__USE_MISC


343 
	søndom_d©a


345 
öt32_t
 *
Âå
;

346 
öt32_t
 *
Ωå
;

347 
öt32_t
 *
°©e
;

348 
ønd_ty≥
;

349 
ønd_deg
;

350 
ønd_£p
;

351 
öt32_t
 *
íd_±r
;

354 
	$øndom_r
 (
øndom_d©a
 *
__ª°ri˘
 
__buf
,

355 
öt32_t
 *
__ª°ri˘
 
__ªsu…
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

357 
	$§™dom_r
 (
__£ed
, 
øndom_d©a
 *
__buf
)

358 
__THROW
 
	`__n⁄nuŒ
 ((2));

360 
	$öô°©e_r
 (
__£ed
, *
__ª°ri˘
 
__°©ebuf
,

361 
size_t
 
__°©ñí
,

362 
øndom_d©a
 *
__ª°ri˘
 
__buf
)

363 
__THROW
 
	`__n⁄nuŒ
 ((2, 4));

365 
	$£t°©e_r
 (*
__ª°ri˘
 
__°©ebuf
,

366 
øndom_d©a
 *
__ª°ri˘
 
__buf
)

367 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

372 
__BEGIN_NAMESPACE_STD


374 
	$ønd
 (Ë
__THROW
;

376 
	$§™d
 (
__£ed
Ë
__THROW
;

377 
__END_NAMESPACE_STD


379 #ifde‡
__USE_POSIX


381 
	$ønd_r
 (*
__£ed
Ë
__THROW
;

385 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


389 
	$dønd48
 (Ë
__THROW
;

390 
	$î™d48
 (
__xsubi
[3]Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

393 
	$Ã™d48
 (Ë
__THROW
;

394 
	$ƒ™d48
 (
__xsubi
[3])

395 
__THROW
 
	`__n⁄nuŒ
 ((1));

398 
	$mønd48
 (Ë
__THROW
;

399 
	$jønd48
 (
__xsubi
[3])

400 
__THROW
 
	`__n⁄nuŒ
 ((1));

403 
	$§™d48
 (
__£edvÆ
Ë
__THROW
;

404 *
	$£ed48
 (
__£ed16v
[3])

405 
__THROW
 
	`__n⁄nuŒ
 ((1));

406 
	$lc⁄g48
 (
__∑øm
[7]Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

408 #ifde‡
__USE_MISC


412 
	sdønd48_d©a


414 
__x
[3];

415 
__ﬁd_x
[3];

416 
__c
;

417 
__öô
;

418 
__a
;

422 
	$dønd48_r
 (
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

423 *
__ª°ri˘
 
__ªsu…
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

424 
	$î™d48_r
 (
__xsubi
[3],

425 
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

426 *
__ª°ri˘
 
__ªsu…
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

429 
	$Ã™d48_r
 (
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

430 *
__ª°ri˘
 
__ªsu…
)

431 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

432 
	$ƒ™d48_r
 (
__xsubi
[3],

433 
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

434 *
__ª°ri˘
 
__ªsu…
)

435 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

438 
	$mønd48_r
 (
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

439 *
__ª°ri˘
 
__ªsu…
)

440 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

441 
	$jønd48_r
 (
__xsubi
[3],

442 
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

443 *
__ª°ri˘
 
__ªsu…
)

444 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

447 
	$§™d48_r
 (
__£edvÆ
, 
dønd48_d©a
 *
__buf„r
)

448 
__THROW
 
	`__n⁄nuŒ
 ((2));

450 
	$£ed48_r
 (
__£ed16v
[3],

451 
dønd48_d©a
 *
__buf„r
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

453 
	$lc⁄g48_r
 (
__∑øm
[7],

454 
dønd48_d©a
 *
__buf„r
)

455 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

461 #i‚de‡
__mÆloc_™d_ˇŒoc_deföed


462 
	#__mÆloc_™d_ˇŒoc_deföed


	)

463 
__BEGIN_NAMESPACE_STD


465 *
	$mÆloc
 (
size_t
 
__size
Ë
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

467 *
	$ˇŒoc
 (
size_t
 
__nmemb
, size_à
__size
)

468 
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

469 
__END_NAMESPACE_STD


472 #i‚de‡
__√ed_mÆloc_™d_ˇŒoc


473 
__BEGIN_NAMESPACE_STD


479 *
	$ªÆloc
 (*
__±r
, 
size_t
 
__size
)

480 
__THROW
 
__©åibuã_w¨n_unu£d_ªsu…__
;

482 
	$‰ì
 (*
__±r
Ë
__THROW
;

483 
__END_NAMESPACE_STD


485 #ifdef 
__USE_MISC


487 
	$c‰ì
 (*
__±r
Ë
__THROW
;

490 #i‡
deföed
 
__USE_GNU
 || deföed 
__USE_BSD
 || deföed 
__USE_MISC


491 
	~<Æloˇ.h
>

494 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K
) \

495 || 
deföed
 
__USE_BSD


497 *
	$vÆloc
 (
size_t
 
__size
Ë
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

500 #ifde‡
__USE_XOPEN2K


502 
	$posix_memÆign
 (**
__mem±r
, 
size_t
 
__Æignmít
, size_à
__size
)

503 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

506 #ifde‡
__USE_ISOC11


508 *
	$Æig√d_Æloc
 (
size_t
 
__Æignmít
, size_à
__size
)

509 
__THROW
 
__wur
 
	`__©åibuã__
 ((
__mÆloc__
, 
	`__Æloc_size__
 (2)));

512 
__BEGIN_NAMESPACE_STD


514 
	$ab‹t
 (Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

518 
	`©exô
 ((*
__func
Ë()Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

520 #i‡
deföed
 
__USE_ISOC11
 || deföed 
__USE_ISOCXX11


522 #ifde‡
__˝lu•lus


523 "C++" 
	`©_quick_exô
 ((*
__func
) ())

524 
__THROW
 
	`__asm
 ("©_quick_exô"Ë
	`__n⁄nuŒ
 ((1));

526 
	`©_quick_exô
 ((*
__func
Ë()Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

529 
__END_NAMESPACE_STD


531 #ifdef 
__USE_MISC


534 
	`⁄_exô
 ((*
__func
Ë(
__°©us
, *
__¨g
), *__arg)

535 
__THROW
 
	`__n⁄nuŒ
 ((1));

538 
__BEGIN_NAMESPACE_STD


542 
	$exô
 (
__°©us
Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

544 #i‡
deföed
 
__USE_ISOC11
 || deföed 
__USE_ISOCXX11


548 
	$quick_exô
 (
__°©us
Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

550 
__END_NAMESPACE_STD


552 #ifde‡
__USE_ISOC99


553 
__BEGIN_NAMESPACE_C99


556 
	$_Exô
 (
__°©us
Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

557 
__END_NAMESPACE_C99


561 
__BEGIN_NAMESPACE_STD


563 *
	$gëív
 (c⁄° *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

564 
__END_NAMESPACE_STD


566 #ifde‡
__USE_GNU


569 *
	$£cuª_gëív
 (c⁄° *
__«me
)

570 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

573 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


577 
	$puãnv
 (*
__°rög
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

580 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN2K


583 
	$£ãnv
 (c⁄° *
__«me
, c⁄° *
__vÆue
, 
__ª∂a˚
)

584 
__THROW
 
	`__n⁄nuŒ
 ((2));

587 
	$un£ãnv
 (c⁄° *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

590 #ifdef 
__USE_MISC


594 
	$˛óªnv
 (Ë
__THROW
;

598 #i‡
deföed
 
__USE_MISC
 \

599 || (
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
)

605 *
	$mkãmp
 (*
__ãm∂©e
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

608 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
 \

609 || 
deföed
 
__USE_XOPEN2K8


618 #i‚de‡
__USE_FILE_OFFSET64


619 
	$mk°emp
 (*
__ãm∂©e
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

621 #ifde‡
__REDIRECT


622 
	`__REDIRECT
 (
mk°emp
, (*
__ãm∂©e
), 
mk°emp64
)

623 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

625 
	#mk°emp
 
mk°emp64


	)

628 #ifde‡
__USE_LARGEFILE64


629 
	$mk°emp64
 (*
__ãm∂©e
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

633 #ifde‡
__USE_MISC


640 #i‚de‡
__USE_FILE_OFFSET64


641 
	$mk°emps
 (*
__ãm∂©e
, 
__suffixÀn
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

643 #ifde‡
__REDIRECT


644 
	`__REDIRECT
 (
mk°emps
, (*
__ãm∂©e
, 
__suffixÀn
),

645 
mk°emps64
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

647 
	#mk°emps
 
mk°emps64


	)

650 #ifde‡
__USE_LARGEFILE64


651 
	$mk°emps64
 (*
__ãm∂©e
, 
__suffixÀn
)

652 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

656 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN2K8


662 *
	$mkdãmp
 (*
__ãm∂©e
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

665 #ifde‡
__USE_GNU


672 #i‚de‡
__USE_FILE_OFFSET64


673 
	$mko°emp
 (*
__ãm∂©e
, 
__Êags
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

675 #ifde‡
__REDIRECT


676 
	`__REDIRECT
 (
mko°emp
, (*
__ãm∂©e
, 
__Êags
), 
mko°emp64
)

677 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

679 
	#mko°emp
 
mko°emp64


	)

682 #ifde‡
__USE_LARGEFILE64


683 
	$mko°emp64
 (*
__ãm∂©e
, 
__Êags
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

692 #i‚de‡
__USE_FILE_OFFSET64


693 
	$mko°emps
 (*
__ãm∂©e
, 
__suffixÀn
, 
__Êags
)

694 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

696 #ifde‡
__REDIRECT


697 
	`__REDIRECT
 (
mko°emps
, (*
__ãm∂©e
, 
__suffixÀn
,

698 
__Êags
), 
mko°emps64
)

699 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

701 
	#mko°emps
 
mko°emps64


	)

704 #ifde‡
__USE_LARGEFILE64


705 
	$mko°emps64
 (*
__ãm∂©e
, 
__suffixÀn
, 
__Êags
)

706 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

711 
__BEGIN_NAMESPACE_STD


716 
	$sy°em
 (c⁄° *
__comm™d
Ë
__wur
;

717 
__END_NAMESPACE_STD


720 #ifdef 
__USE_GNU


723 *
	$ˇn⁄iˇlize_fûe_«me
 (c⁄° *
__«me
)

724 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

727 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


733 *
	$ªÆ∑th
 (c⁄° *
__ª°ri˘
 
__«me
,

734 *
__ª°ri˘
 
__ªsﬁved
Ë
__THROW
 
__wur
;

739 #i‚de‡
__COMPAR_FN_T


740 
	#__COMPAR_FN_T


	)

741 (*
	t__com∑r_‚_t
) (const *, const *);

743 #ifdef 
__USE_GNU


744 
__com∑r_‚_t
 
	tcom∑ris⁄_‚_t
;

747 #ifde‡
__USE_GNU


748 (*
	t__com∑r_d_‚_t
) (const *, const *, *);

751 
__BEGIN_NAMESPACE_STD


754 *
	$b£¨ch
 (c⁄° *
__key
, c⁄° *
__ba£
,

755 
size_t
 
__nmemb
, size_à
__size
, 
__com∑r_‚_t
 
__com∑r
)

756 
	`__n⁄nuŒ
 ((1, 2, 5)Ë
__wur
;

760 
	$qs‹t
 (*
__ba£
, 
size_t
 
__nmemb
, size_à
__size
,

761 
__com∑r_‚_t
 
__com∑r
Ë
	`__n⁄nuŒ
 ((1, 4));

762 #ifde‡
__USE_GNU


763 
	$qs‹t_r
 (*
__ba£
, 
size_t
 
__nmemb
, size_à
__size
,

764 
__com∑r_d_‚_t
 
__com∑r
, *
__¨g
)

765 
	`__n⁄nuŒ
 ((1, 4));

770 
	$abs
 (
__x
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

771 
	$œbs
 (
__x
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

772 
__END_NAMESPACE_STD


774 #ifde‡
__USE_ISOC99


775 
__exãnsi⁄__
 
	$Œabs
 (
__x
)

776 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

780 
__BEGIN_NAMESPACE_STD


784 
div_t
 
	$div
 (
__numî
, 
__díom
)

785 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

786 
ldiv_t
 
	$ldiv
 (
__numî
, 
__díom
)

787 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

788 
__END_NAMESPACE_STD


790 #ifde‡
__USE_ISOC99


791 
__BEGIN_NAMESPACE_C99


792 
__exãnsi⁄__
 
Œdiv_t
 
	$Œdiv
 (
__numî
,

793 
__díom
)

794 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

795 
__END_NAMESPACE_C99


799 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
) \

800 || 
deföed
 
__USE_SVID


807 *
	$ecvt
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

808 *
__ª°ri˘
 
__sign
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

813 *
	$fcvt
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

814 *
__ª°ri˘
 
__sign
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

819 *
	$gcvt
 (
__vÆue
, 
__ndigô
, *
__buf
)

820 
__THROW
 
	`__n⁄nuŒ
 ((3)Ë
__wur
;

823 #ifde‡
__USE_MISC


825 *
	$qecvt
 (
__vÆue
, 
__ndigô
,

826 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
)

827 
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

828 *
	$qfcvt
 (
__vÆue
, 
__ndigô
,

829 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
)

830 
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

831 *
	$qgcvt
 (
__vÆue
, 
__ndigô
, *
__buf
)

832 
__THROW
 
	`__n⁄nuŒ
 ((3)Ë
__wur
;

837 
	$ecvt_r
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

838 *
__ª°ri˘
 
__sign
, *__ª°ri˘ 
__buf
,

839 
size_t
 
__Àn
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

840 
	$fcvt_r
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

841 *
__ª°ri˘
 
__sign
, *__ª°ri˘ 
__buf
,

842 
size_t
 
__Àn
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

844 
	$qecvt_r
 (
__vÆue
, 
__ndigô
,

845 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
,

846 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

847 
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

848 
	$qfcvt_r
 (
__vÆue
, 
__ndigô
,

849 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
,

850 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

851 
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

856 
__BEGIN_NAMESPACE_STD


859 
	$mbÀn
 (c⁄° *
__s
, 
size_t
 
__n
Ë
__THROW
 
__wur
;

862 
	$mbtowc
 (
wch¨_t
 *
__ª°ri˘
 
__pwc
,

863 c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
Ë
__THROW
 
__wur
;

866 
	$w˘omb
 (*
__s
, 
wch¨_t
 
__wch¨
Ë
__THROW
 
__wur
;

870 
size_t
 
	$mb°owcs
 (
wch¨_t
 *
__ª°ri˘
 
__pwcs
,

871 c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
Ë
__THROW
;

873 
size_t
 
	$wc°ombs
 (*
__ª°ri˘
 
__s
,

874 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__pwcs
, 
size_t
 
__n
)

875 
__THROW
;

876 
__END_NAMESPACE_STD


879 #ifde‡
__USE_SVID


884 
	$Ωm©ch
 (c⁄° *
__ª•⁄£
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

888 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


895 
	$gësub›t
 (**
__ª°ri˘
 
__›ti⁄p
,

896 *c⁄° *
__ª°ri˘
 
__tokís
,

897 **
__ª°ri˘
 
__vÆuï
)

898 
__THROW
 
	`__n⁄nuŒ
 ((1, 2, 3)Ë
__wur
;

902 #ifde‡
__USE_XOPEN


904 
	$£tkey
 (c⁄° *
__key
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

910 #ifde‡
__USE_XOPEN2KXSI


912 
	$posix_›í±
 (
__oÊag
Ë
__wur
;

915 #ifde‡
__USE_XOPEN


920 
	$gø¡±
 (
__fd
Ë
__THROW
;

924 
	$u∆ock±
 (
__fd
Ë
__THROW
;

929 *
	$±¢ame
 (
__fd
Ë
__THROW
 
__wur
;

932 #ifde‡
__USE_GNU


936 
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buÊí
)

937 
__THROW
 
	`__n⁄nuŒ
 ((2));

940 
	`gë±
 ();

943 #ifde‡
__USE_BSD


947 
	$gëlﬂdavg
 (
__lﬂdavg
[], 
__√Àm
)

948 
__THROW
 
	`__n⁄nuŒ
 ((1));

951 
	~<bôs/°dlib-Êﬂt.h
>

954 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


955 
	~<bôs/°dlib.h
>

957 #ifde‡
__LDBL_COMPAT


958 
	~<bôs/°dlib-ldbl.h
>

962 #unde‡
__√ed_mÆloc_™d_ˇŒoc


964 
__END_DECLS


	@/usr/include/string.h

22 #i‚def 
_STRING_H


23 
	#_STRING_H
 1

	)

25 
	~<„©uªs.h
>

27 
	g__BEGIN_DECLS


30 
	#__√ed_size_t


	)

31 
	#__√ed_NULL


	)

32 
	~<°ddef.h
>

35 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (4, 4)

36 
	#__CORRECT_ISO_CPP_STRING_H_PROTO


	)

40 
__BEGIN_NAMESPACE_STD


42 *
	$mem˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
,

43 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

46 *
	$memmove
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__n
)

47 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

48 
__END_NAMESPACE_STD


53 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_BSD
 || deföed 
__USE_XOPEN


54 *
	$memc˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
,

55 
__c
, 
size_t
 
__n
)

56 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

60 
__BEGIN_NAMESPACE_STD


62 *
	$mem£t
 (*
__s
, 
__c
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

65 
	$memcmp
 (c⁄° *
__s1
, c⁄° *
__s2
, 
size_t
 
__n
)

66 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

69 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


72 *
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

73 
__THROW
 
	`__asm
 ("memchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

74 c⁄° *
	`memchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
)

75 
__THROW
 
	`__asm
 ("memchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

77 #ifde‡
__OPTIMIZE__


78 
__exã∫_Æways_ölöe
 *

79 
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
Ë
__THROW


81  
	`__buûtö_memchr
 (
__s
, 
__c
, 
__n
);

84 
__exã∫_Æways_ölöe
 const *

85 
	`memchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
Ë
__THROW


87  
	`__buûtö_memchr
 (
__s
, 
__c
, 
__n
);

90 
	}
}

92 *
	$memchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
)

93 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

95 
__END_NAMESPACE_STD


97 #ifde‡
__USE_GNU


100 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


101 "C++" *
	$øwmemchr
 (*
__s
, 
__c
)

102 
__THROW
 
	`__asm
 ("øwmemchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

103 "C++" c⁄° *
	$øwmemchr
 (c⁄° *
__s
, 
__c
)

104 
__THROW
 
	`__asm
 ("øwmemchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

106 *
	$øwmemchr
 (c⁄° *
__s
, 
__c
)

107 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

111 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


112 "C++" *
	$memrchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

113 
__THROW
 
	`__asm
 ("memrchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

114 "C++" c⁄° *
	$memrchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
)

115 
__THROW
 
	`__asm
 ("memrchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

117 *
	$memrchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
)

118 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

123 
__BEGIN_NAMESPACE_STD


125 *
	$°r˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
)

126 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

128 *
	$°∫˝y
 (*
__ª°ri˘
 
__de°
,

129 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

130 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

133 *
	$°rˇt
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
)

134 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

136 *
	$°∫ˇt
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
,

137 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

140 
	$°rcmp
 (c⁄° *
__s1
, c⁄° *
__s2
)

141 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

143 
	$°∫cmp
 (c⁄° *
__s1
, c⁄° *
__s2
, 
size_t
 
__n
)

144 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

147 
	$°rcﬁl
 (c⁄° *
__s1
, c⁄° *
__s2
)

148 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

150 
size_t
 
	$°rx‰m
 (*
__ª°ri˘
 
__de°
,

151 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

152 
__THROW
 
	`__n⁄nuŒ
 ((2));

153 
__END_NAMESPACE_STD


155 #ifde‡
__USE_XOPEN2K8


159 
	~<xloˇÀ.h
>

162 
	$°rcﬁl_l
 (c⁄° *
__s1
, c⁄° *
__s2
, 
__loˇÀ_t
 
__l
)

163 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2, 3));

165 
size_t
 
	$°rx‰m_l
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__n
,

166 
__loˇÀ_t
 
__l
Ë
__THROW
 
	`__n⁄nuŒ
 ((2, 4));

169 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 \

170 || 
deföed
 
__USE_XOPEN2K8


172 *
	$°rdup
 (c⁄° *
__s
)

173 
__THROW
 
__©åibuã_mÆloc__
 
	`__n⁄nuŒ
 ((1));

179 #i‡
deföed
 
__USE_XOPEN2K8


180 *
	$°∫dup
 (c⁄° *
__°rög
, 
size_t
 
__n
)

181 
__THROW
 
__©åibuã_mÆloc__
 
	`__n⁄nuŒ
 ((1));

184 #i‡
deföed
 
__USE_GNU
 && deföed 
__GNUC__


186 
	#°rdu∑
(
s
) \

187 (
__exãnsi⁄__
 \

189 c⁄° *
__ﬁd
 = (
s
); \

190 
size_t
 
__Àn
 = 
	`°æí
 (
__ﬁd
) + 1; \

191 *
__√w
 = (*Ë
	`__buûtö_Æloˇ
 (
__Àn
); \

192 (*Ë
	`mem˝y
 (
__√w
, 
__ﬁd
, 
__Àn
); \

193 
	}
}))

	)

196 
	#°∫du∑
(
s
, 
n
) \

197 (
__exãnsi⁄__
 \

199 c⁄° *
__ﬁd
 = (
s
); \

200 
size_t
 
__Àn
 = 
	`°∫Àn
 (
__ﬁd
, (
n
)); \

201 *
__√w
 = (*Ë
	`__buûtö_Æloˇ
 (
__Àn
 + 1); \

202 
__√w
[
__Àn
] = '\0'; \

203 (*Ë
	`mem˝y
 (
__√w
, 
__ﬁd
, 
__Àn
); \

204 }))

	)

207 
	g__BEGIN_NAMESPACE_STD


209 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


212 *
°rchr
 (*
__s
, 
__c
)

213 
__THROW
 
__asm
 ("°rchr"Ë
__©åibuã_puª__
 
__n⁄nuŒ
 ((1));

214 c⁄° *
°rchr
 (c⁄° *
__s
, 
__c
)

215 
__THROW
 
__asm
 ("°rchr"Ë
__©åibuã_puª__
 
__n⁄nuŒ
 ((1));

217 #ifde‡
__OPTIMIZE__


218 
__exã∫_Æways_ölöe
 *

219 
°rchr
 (*
__s
, 
__c
Ë
	g__THROW


221  
__buûtö_°rchr
 (
__s
, 
__c
);

224 
__exã∫_Æways_ölöe
 const *

225 
°rchr
 (c⁄° *
__s
, 
__c
Ë
	g__THROW


227  
__buûtö_°rchr
 (
__s
, 
__c
);

232 *
	$°rchr
 (c⁄° *
__s
, 
__c
)

233 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

236 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


239 *
	`°ºchr
 (*
__s
, 
__c
)

240 
__THROW
 
	`__asm
 ("°ºchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

241 c⁄° *
	`°ºchr
 (c⁄° *
__s
, 
__c
)

242 
__THROW
 
	`__asm
 ("°ºchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

244 #ifde‡
__OPTIMIZE__


245 
__exã∫_Æways_ölöe
 *

246 
	`°ºchr
 (*
__s
, 
__c
Ë
__THROW


248  
	`__buûtö_°ºchr
 (
__s
, 
__c
);

251 
__exã∫_Æways_ölöe
 const *

252 
	`°ºchr
 (c⁄° *
__s
, 
__c
Ë
__THROW


254  
	`__buûtö_°ºchr
 (
__s
, 
__c
);

257 
	}
}

259 *
	$°ºchr
 (c⁄° *
__s
, 
__c
)

260 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

262 
__END_NAMESPACE_STD


264 #ifde‡
__USE_GNU


267 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


268 "C++" *
	$°rch∫ul
 (*
__s
, 
__c
)

269 
__THROW
 
	`__asm
 ("°rch∫ul"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

270 "C++" c⁄° *
	$°rch∫ul
 (c⁄° *
__s
, 
__c
)

271 
__THROW
 
	`__asm
 ("°rch∫ul"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

273 *
	$°rch∫ul
 (c⁄° *
__s
, 
__c
)

274 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

278 
__BEGIN_NAMESPACE_STD


281 
size_t
 
	$°rc•n
 (c⁄° *
__s
, c⁄° *
__ªje˘
)

282 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

285 
size_t
 
	$°r•n
 (c⁄° *
__s
, c⁄° *
__ac˚±
)

286 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

288 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


291 *
	`°Ωbrk
 (*
__s
, c⁄° *
__ac˚±
)

292 
__THROW
 
	`__asm
 ("°Ωbrk"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

293 c⁄° *
	`°Ωbrk
 (c⁄° *
__s
, c⁄° *
__ac˚±
)

294 
__THROW
 
	`__asm
 ("°Ωbrk"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

296 #ifde‡
__OPTIMIZE__


297 
__exã∫_Æways_ölöe
 *

298 
	`°Ωbrk
 (*
__s
, c⁄° *
__ac˚±
Ë
__THROW


300  
	`__buûtö_°Ωbrk
 (
__s
, 
__ac˚±
);

303 
__exã∫_Æways_ölöe
 const *

304 
	`°Ωbrk
 (c⁄° *
__s
, c⁄° *
__ac˚±
Ë
__THROW


306  
	`__buûtö_°Ωbrk
 (
__s
, 
__ac˚±
);

309 
	}
}

311 *
	$°Ωbrk
 (c⁄° *
__s
, c⁄° *
__ac˚±
)

312 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

315 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


318 *
	`°r°r
 (*
__hay°ack
, c⁄° *
__√edÀ
)

319 
__THROW
 
	`__asm
 ("°r°r"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

320 c⁄° *
	`°r°r
 (c⁄° *
__hay°ack
, c⁄° *
__√edÀ
)

321 
__THROW
 
	`__asm
 ("°r°r"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

323 #ifde‡
__OPTIMIZE__


324 
__exã∫_Æways_ölöe
 *

325 
	`°r°r
 (*
__hay°ack
, c⁄° *
__√edÀ
Ë
__THROW


327  
	`__buûtö_°r°r
 (
__hay°ack
, 
__√edÀ
);

330 
__exã∫_Æways_ölöe
 const *

331 
	`°r°r
 (c⁄° *
__hay°ack
, c⁄° *
__√edÀ
Ë
__THROW


333  
	`__buûtö_°r°r
 (
__hay°ack
, 
__√edÀ
);

336 
	}
}

338 *
	$°r°r
 (c⁄° *
__hay°ack
, c⁄° *
__√edÀ
)

339 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

344 *
	$°πok
 (*
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__dñim
)

345 
__THROW
 
	`__n⁄nuŒ
 ((2));

346 
__END_NAMESPACE_STD


350 *
	$__°πok_r
 (*
__ª°ri˘
 
__s
,

351 c⁄° *
__ª°ri˘
 
__dñim
,

352 **
__ª°ri˘
 
__ßve_±r
)

353 
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

354 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


355 *
	$°πok_r
 (*
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__dñim
,

356 **
__ª°ri˘
 
__ßve_±r
)

357 
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

360 #ifde‡
__USE_GNU


362 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


363 "C++" *
	$°rˇ£°r
 (*
__hay°ack
, c⁄° *
__√edÀ
)

364 
__THROW
 
	`__asm
 ("°rˇ£°r"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

365 "C++" c⁄° *
	$°rˇ£°r
 (c⁄° *
__hay°ack
,

366 c⁄° *
__√edÀ
)

367 
__THROW
 
	`__asm
 ("°rˇ£°r"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

369 *
	$°rˇ£°r
 (c⁄° *
__hay°ack
, c⁄° *
__√edÀ
)

370 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

374 #ifde‡
__USE_GNU


378 *
	$memmem
 (c⁄° *
__hay°ack
, 
size_t
 
__hay°ackÀn
,

379 c⁄° *
__√edÀ
, 
size_t
 
__√edÀÀn
)

380 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 3));

384 *
	$__memp˝y
 (*
__ª°ri˘
 
__de°
,

385 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

386 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

387 *
	$memp˝y
 (*
__ª°ri˘
 
__de°
,

388 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

389 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

393 
__BEGIN_NAMESPACE_STD


395 
size_t
 
	$°æí
 (c⁄° *
__s
)

396 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

397 
__END_NAMESPACE_STD


399 #ifdef 
__USE_XOPEN2K8


402 
size_t
 
	$°∫Àn
 (c⁄° *
__°rög
, 
size_t
 
__maxÀn
)

403 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

407 
__BEGIN_NAMESPACE_STD


409 *
	$°ªº‹
 (
__î∫um
Ë
__THROW
;

410 
__END_NAMESPACE_STD


411 #i‡
deföed
 
__USE_XOPEN2K
 || deföed 
__USE_MISC


419 #i‡
deföed
 
__USE_XOPEN2K
 && !deföed 
__USE_GNU


422 #ifde‡
__REDIRECT_NTH


423 
	`__REDIRECT_NTH
 (
°ªº‹_r
,

424 (
__î∫um
, *
__buf
, 
size_t
 
__buÊí
),

425 
__xpg_°ªº‹_r
Ë
	`__n⁄nuŒ
 ((2));

427 
	$__xpg_°ªº‹_r
 (
__î∫um
, *
__buf
, 
size_t
 
__buÊí
)

428 
__THROW
 
	`__n⁄nuŒ
 ((2));

429 
	#°ªº‹_r
 
__xpg_°ªº‹_r


	)

434 *
	$°ªº‹_r
 (
__î∫um
, *
__buf
, 
size_t
 
__buÊí
)

435 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

439 #ifde‡
__USE_XOPEN2K8


441 *
	$°ªº‹_l
 (
__î∫um
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

447 
	$__bzîo
 (*
__s
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

449 #ifde‡
__USE_BSD


451 
	$bc›y
 (c⁄° *
__§c
, *
__de°
, 
size_t
 
__n
)

452 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

455 
	$bzîo
 (*
__s
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

458 
	$bcmp
 (c⁄° *
__s1
, c⁄° *
__s2
, 
size_t
 
__n
)

459 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

462 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


465 *
	`ödex
 (*
__s
, 
__c
)

466 
__THROW
 
	`__asm
 ("ödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

467 c⁄° *
	`ödex
 (c⁄° *
__s
, 
__c
)

468 
__THROW
 
	`__asm
 ("ödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

470 #i‡
deföed
 
__OPTIMIZE__
 && !deföed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


471 
__exã∫_Æways_ölöe
 *

472 
	`ödex
 (*
__s
, 
__c
Ë
__THROW


474  
	`__buûtö_ödex
 (
__s
, 
__c
);

477 
__exã∫_Æways_ölöe
 const *

478 
	`ödex
 (c⁄° *
__s
, 
__c
Ë
__THROW


480  
	`__buûtö_ödex
 (
__s
, 
__c
);

483 
	}
}

485 *
	$ödex
 (c⁄° *
__s
, 
__c
)

486 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

490 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


493 *
	`rödex
 (*
__s
, 
__c
)

494 
__THROW
 
	`__asm
 ("rödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

495 c⁄° *
	`rödex
 (c⁄° *
__s
, 
__c
)

496 
__THROW
 
	`__asm
 ("rödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

498 #i‡
deföed
 
__OPTIMIZE__
 && !deföed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


499 
__exã∫_Æways_ölöe
 *

500 
	`rödex
 (*
__s
, 
__c
Ë
__THROW


502  
	`__buûtö_rödex
 (
__s
, 
__c
);

505 
__exã∫_Æways_ölöe
 const *

506 
	`rödex
 (c⁄° *
__s
, 
__c
Ë
__THROW


508  
	`__buûtö_rödex
 (
__s
, 
__c
);

511 
	}
}

513 *
	$rödex
 (c⁄° *
__s
, 
__c
)

514 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

519 
	$ffs
 (
__i
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

523 #ifdef 
__USE_GNU


524 
	$ff¶
 (
__l
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

525 #ifde‡
__GNUC__


526 
__exãnsi⁄__
 
	$ff¶l
 (
__Œ
)

527 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

532 
	$°rˇ£cmp
 (c⁄° *
__s1
, c⁄° *
__s2
)

533 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

536 
	$°∫ˇ£cmp
 (c⁄° *
__s1
, c⁄° *
__s2
, 
size_t
 
__n
)

537 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

540 #ifdef 
__USE_GNU


543 
	$°rˇ£cmp_l
 (c⁄° *
__s1
, c⁄° *
__s2
,

544 
__loˇÀ_t
 
__loc
)

545 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2, 3));

547 
	$°∫ˇ£cmp_l
 (c⁄° *
__s1
, c⁄° *
__s2
,

548 
size_t
 
__n
, 
__loˇÀ_t
 
__loc
)

549 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2, 4));

552 #ifdef 
__USE_BSD


555 *
	$°r£p
 (**
__ª°ri˘
 
__°rögp
,

556 c⁄° *
__ª°ri˘
 
__dñim
)

557 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

560 #ifdef 
__USE_XOPEN2K8


562 *
	$°rsig«l
 (
__sig
Ë
__THROW
;

565 *
	$__°p˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
)

566 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

567 *
	$°p˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
)

568 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

572 *
	$__°≤˝y
 (*
__ª°ri˘
 
__de°
,

573 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

574 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

575 *
	$°≤˝y
 (*
__ª°ri˘
 
__de°
,

576 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

577 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

580 #ifdef 
__USE_GNU


582 
	$°rvîscmp
 (c⁄° *
__s1
, c⁄° *
__s2
)

583 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

586 *
	$°r‰y
 (*
__°rög
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

589 *
	$mem‰ob
 (*
__s
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

591 #i‚de‡
ba£«me


596 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


597 "C++" *
	$ba£«me
 (*
__fûíame
)

598 
__THROW
 
	`__asm
 ("ba£«me"Ë
	`__n⁄nuŒ
 ((1));

599 "C++" c⁄° *
	$ba£«me
 (c⁄° *
__fûíame
)

600 
__THROW
 
	`__asm
 ("ba£«me"Ë
	`__n⁄nuŒ
 ((1));

602 *
	$ba£«me
 (c⁄° *
__fûíame
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

608 #i‡
deföed
 
__GNUC__
 && __GNUC__ >= 2

609 #i‡
deföed
 
__OPTIMIZE__
 && !deföed 
__OPTIMIZE_SIZE__
 \

610 && !
deföed
 
__NO_INLINE__
 && !deföed 
__˝lu•lus


630 
	~<bôs/°rög.h
>

633 
	~<bôs/°rög2.h
>

636 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


638 
	~<bôs/°rög3.h
>

642 
__END_DECLS


	@/usr/include/syslog.h

1 
	~<sys/sy¶og.h
>

	@/usr/include/time.h

22 #i‚def 
_TIME_H


24 #i‡(! 
deföed
 
__√ed_time_t
 && !deföed 
__√ed_˛ock_t
 && \

25 ! 
deföed
 
	g__√ed_time•ec
)

26 
	#_TIME_H
 1

	)

27 
	~<„©uªs.h
>

29 
	g__BEGIN_DECLS


33 #ifdef 
_TIME_H


35 
	#__√ed_size_t


	)

36 
	#__√ed_NULL


	)

37 
	~<°ddef.h
>

41 
	~<bôs/time.h
>

44 #i‡!
deföed
 
__STRICT_ANSI__
 && !deföed 
__USE_XOPEN2K


45 #i‚de‡
CLK_TCK


46 
	#CLK_TCK
 
CLOCKS_PER_SEC


	)

52 #i‡!
deföed
 
__˛ock_t_deföed
 && (deföed 
_TIME_H
 || deföed 
__√ed_˛ock_t
)

53 
	#__˛ock_t_deföed
 1

	)

55 
	~<bôs/ty≥s.h
>

57 
__BEGIN_NAMESPACE_STD


59 
__˛ock_t
 
	t˛ock_t
;

60 
	g__END_NAMESPACE_STD


61 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_POSIX
 || deföed 
__USE_MISC


62 
	$__USING_NAMESPACE_STD
(
˛ock_t
)

66 #unde‡
__√ed_˛ock_t


68 #i‡!
deföed
 
__time_t_deföed
 && (deföed 
_TIME_H
 || deföed 
__√ed_time_t
)

69 
	#__time_t_deföed
 1

	)

71 
	~<bôs/ty≥s.h
>

73 
__BEGIN_NAMESPACE_STD


75 
__time_t
 
	ttime_t
;

76 
__END_NAMESPACE_STD


77 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC
 || deföed 
__USE_SVID


78 
	$__USING_NAMESPACE_STD
(
time_t
)

82 #unde‡
__√ed_time_t


84 #i‡!
deföed
 
__˛ockid_t_deföed
 && \

85 ((
deföed
 
_TIME_H
 && deföed 
__USE_POSIX199309
Ë|| deföed 
__√ed_˛ockid_t
)

86 
	#__˛ockid_t_deföed
 1

	)

88 
	~<bôs/ty≥s.h
>

91 
__˛ockid_t
 
	t˛ockid_t
;

94 #unde‡
__˛ockid_time_t


96 #i‡!
deföed
 
__timî_t_deföed
 && \

97 ((
deföed
 
_TIME_H
 && deföed 
__USE_POSIX199309
Ë|| deföed 
__√ed_timî_t
)

98 
	#__timî_t_deföed
 1

	)

100 
	~<bôs/ty≥s.h
>

103 
__timî_t
 
	ttimî_t
;

106 #unde‡
__√ed_timî_t


109 #i‡(!
deföed
 
__time•ec_deföed
 \

110 && ((
deföed
 
_TIME_H
 \

111 && (
deföed
 
__USE_POSIX199309
 || deföed 
__USE_MISC
 \

112 || 
deföed
 
__USE_ISOC11
)) \

113 || 
deföed
 
__√ed_time•ec
))

114 
	#__time•ec_deföed
 1

	)

116 
	~<bôs/ty≥s.h
>

120 
	stime•ec


122 
__time_t
 
tv_£c
;

123 
__sysˇŒ_¶⁄g_t
 
tv_n£c
;

127 #unde‡
__√ed_time•ec


130 #ifdef 
_TIME_H


131 
__BEGIN_NAMESPACE_STD


133 
	stm


135 
tm_£c
;

136 
tm_mö
;

137 
tm_hour
;

138 
tm_mday
;

139 
tm_m⁄
;

140 
tm_yór
;

141 
tm_wday
;

142 
tm_yday
;

143 
tm_isd°
;

145 #ifdef 
__USE_BSD


146 
tm_gmtoff
;

147 c⁄° *
tm_z⁄e
;

149 
__tm_gmtoff
;

150 c⁄° *
__tm_z⁄e
;

153 
__END_NAMESPACE_STD


154 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_POSIX
 || deföed 
__USE_MISC


155 
	$__USING_NAMESPACE_STD
(
tm
)

159 #ifde‡
__USE_POSIX199309


161 
	sôimî•ec


163 
time•ec
 
ô_öãrvÆ
;

164 
time•ec
 
ô_vÆue
;

168 
sigevít
;

172 #ifde‡
__USE_XOPEN2K


173 #i‚de‡
__pid_t_deföed


174 
__pid_t
 
	tpid_t
;

175 
	#__pid_t_deföed


	)

180 #ifde‡
__USE_ISOC11


182 
	#TIME_UTC
 1

	)

186 
__BEGIN_NAMESPACE_STD


189 
˛ock_t
 
	$˛ock
 (Ë
__THROW
;

192 
time_t
 
	$time
 (
time_t
 *
__timî
Ë
__THROW
;

195 
	$dif·ime
 (
time_t
 
__time1
,Åime_à
__time0
)

196 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

199 
time_t
 
	$mktime
 (
tm
 *
__ç
Ë
__THROW
;

205 
size_t
 
	$°r·ime
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

206 c⁄° *
__ª°ri˘
 
__f‹m©
,

207 c⁄° 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

208 
__END_NAMESPACE_STD


210 #ifde‡
__USE_XOPEN


213 *
	$°Ωtime
 (c⁄° *
__ª°ri˘
 
__s
,

214 c⁄° *
__ª°ri˘
 
__fmt
, 
tm
 *
__ç
)

215 
__THROW
;

218 #ifde‡
__USE_XOPEN2K8


221 
	~<xloˇÀ.h
>

223 
size_t
 
	$°r·ime_l
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

224 c⁄° *
__ª°ri˘
 
__f‹m©
,

225 c⁄° 
tm
 *
__ª°ri˘
 
__ç
,

226 
__loˇÀ_t
 
__loc
Ë
__THROW
;

229 #ifde‡
__USE_GNU


230 *
	$°Ωtime_l
 (c⁄° *
__ª°ri˘
 
__s
,

231 c⁄° *
__ª°ri˘
 
__fmt
, 
tm
 *
__ç
,

232 
__loˇÀ_t
 
__loc
Ë
__THROW
;

236 
__BEGIN_NAMESPACE_STD


239 
tm
 *
	$gmtime
 (c⁄° 
time_t
 *
__timî
Ë
__THROW
;

243 
tm
 *
	$loˇ…ime
 (c⁄° 
time_t
 *
__timî
Ë
__THROW
;

244 
__END_NAMESPACE_STD


246 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


249 
tm
 *
	$gmtime_r
 (c⁄° 
time_t
 *
__ª°ri˘
 
__timî
,

250 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

254 
tm
 *
	$loˇ…ime_r
 (c⁄° 
time_t
 *
__ª°ri˘
 
__timî
,

255 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

258 
__BEGIN_NAMESPACE_STD


261 *
	$as˘ime
 (c⁄° 
tm
 *
__ç
Ë
__THROW
;

264 *
	$˘ime
 (c⁄° 
time_t
 *
__timî
Ë
__THROW
;

265 
__END_NAMESPACE_STD


267 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


272 *
	$as˘ime_r
 (c⁄° 
tm
 *
__ª°ri˘
 
__ç
,

273 *
__ª°ri˘
 
__buf
Ë
__THROW
;

276 *
	$˘ime_r
 (c⁄° 
time_t
 *
__ª°ri˘
 
__timî
,

277 *
__ª°ri˘
 
__buf
Ë
__THROW
;

282 *
__tz«me
[2];

283 
__daylight
;

284 
__timez⁄e
;

287 #ifdef 
__USE_POSIX


289 *
tz«me
[2];

293 
	$tz£t
 (Ë
__THROW
;

296 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


297 
daylight
;

298 
timez⁄e
;

301 #ifde‡
__USE_SVID


304 
	$°ime
 (c⁄° 
time_t
 *
__whí
Ë
__THROW
;

310 
	#__i¶óp
(
yór
) \

311 ((
yór
Ë% 4 =0 && ((yórË% 100 !0 || (yórË% 400 =0))

	)

314 #ifde‡
__USE_MISC


319 
time_t
 
	$timegm
 (
tm
 *
__ç
Ë
__THROW
;

322 
time_t
 
	$timñoˇl
 (
tm
 *
__ç
Ë
__THROW
;

325 
	$dysize
 (
__yór
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

329 #ifde‡
__USE_POSIX199309


334 
	`«no¶ìp
 (c⁄° 
time•ec
 *
__ªque°ed_time
,

335 
time•ec
 *
__ªmaöög
);

339 
	$˛ock_gëªs
 (
˛ockid_t
 
__˛ock_id
, 
time•ec
 *
__ªs
Ë
__THROW
;

342 
	$˛ock_gëtime
 (
˛ockid_t
 
__˛ock_id
, 
time•ec
 *
__ç
Ë
__THROW
;

345 
	$˛ock_£âime
 (
˛ockid_t
 
__˛ock_id
, c⁄° 
time•ec
 *
__ç
)

346 
__THROW
;

348 #ifde‡
__USE_XOPEN2K


353 
	`˛ock_«no¶ìp
 (
˛ockid_t
 
__˛ock_id
, 
__Êags
,

354 c⁄° 
time•ec
 *
__ªq
,

355 
time•ec
 *
__ªm
);

358 
	$˛ock_gë˝u˛ockid
 (
pid_t
 
__pid
, 
˛ockid_t
 *
__˛ock_id
Ë
__THROW
;

363 
	$timî_¸óã
 (
˛ockid_t
 
__˛ock_id
,

364 
sigevít
 *
__ª°ri˘
 
__evp
,

365 
timî_t
 *
__ª°ri˘
 
__timîid
Ë
__THROW
;

368 
	$timî_dñëe
 (
timî_t
 
__timîid
Ë
__THROW
;

371 
	$timî_£âime
 (
timî_t
 
__timîid
, 
__Êags
,

372 c⁄° 
ôimî•ec
 *
__ª°ri˘
 
__vÆue
,

373 
ôimî•ec
 *
__ª°ri˘
 
__ovÆue
Ë
__THROW
;

376 
	$timî_gëtime
 (
timî_t
 
__timîid
, 
ôimî•ec
 *
__vÆue
)

377 
__THROW
;

380 
	$timî_gëovîrun
 (
timî_t
 
__timîid
Ë
__THROW
;

384 #ifde‡
__USE_ISOC11


386 
	$time•ec_gë
 (
time•ec
 *
__ts
, 
__ba£
)

387 
__THROW
 
	`__n⁄nuŒ
 ((1));

391 #ifde‡
__USE_XOPEN_EXTENDED


403 
gëd©e_îr
;

412 
tm
 *
	`gëd©e
 (c⁄° *
__°rög
);

415 #ifde‡
__USE_GNU


426 
	`gëd©e_r
 (c⁄° *
__ª°ri˘
 
__°rög
,

427 
tm
 *
__ª°ri˘
 
__ªsbuÂ
);

430 
__END_DECLS


	@/usr/include/unistd.h

22 #i‚def 
_UNISTD_H


23 
	#_UNISTD_H
 1

	)

25 
	~<„©uªs.h
>

27 
	g__BEGIN_DECLS


32 #ifde‡
__USE_XOPEN2K8


34 
	#_POSIX_VERSION
 200809L

	)

35 #ñi‡
deföed
 
__USE_XOPEN2K


37 
	#_POSIX_VERSION
 200112L

	)

38 #ñi‡
deföed
 
__USE_POSIX199506


40 
	#_POSIX_VERSION
 199506L

	)

41 #ñi‡
deföed
 
__USE_POSIX199309


43 
	#_POSIX_VERSION
 199309L

	)

46 
	#_POSIX_VERSION
 199009L

	)

52 #ifde‡
__USE_XOPEN2K8


53 
	#__POSIX2_THIS_VERSION
 200809L

	)

55 #ñi‡
deföed
 
__USE_XOPEN2K


57 
	#__POSIX2_THIS_VERSION
 200112L

	)

58 #ñi‡
deföed
 
__USE_POSIX199506


60 
	#__POSIX2_THIS_VERSION
 199506L

	)

63 
	#__POSIX2_THIS_VERSION
 199209L

	)

67 
	#_POSIX2_VERSION
 
__POSIX2_THIS_VERSION


	)

71 
	#_POSIX2_C_BIND
 
__POSIX2_THIS_VERSION


	)

75 
	#_POSIX2_C_DEV
 
__POSIX2_THIS_VERSION


	)

79 
	#_POSIX2_SW_DEV
 
__POSIX2_THIS_VERSION


	)

83 
	#_POSIX2_LOCALEDEF
 
__POSIX2_THIS_VERSION


	)

86 #ifde‡
__USE_XOPEN2K8


87 
	#_XOPEN_VERSION
 700

	)

88 #ñi‡
deföed
 
__USE_XOPEN2K


89 
	#_XOPEN_VERSION
 600

	)

90 #ñi‡
deföed
 
__USE_UNIX98


91 
	#_XOPEN_VERSION
 500

	)

93 
	#_XOPEN_VERSION
 4

	)

97 
	#_XOPEN_XCU_VERSION
 4

	)

100 
	#_XOPEN_XPG2
 1

	)

101 
	#_XOPEN_XPG3
 1

	)

102 
	#_XOPEN_XPG4
 1

	)

105 
	#_XOPEN_UNIX
 1

	)

108 
	#_XOPEN_CRYPT
 1

	)

112 
	#_XOPEN_ENH_I18N
 1

	)

115 
	#_XOPEN_LEGACY
 1

	)

202 
	~<bôs/posix_›t.h
>

205 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


206 
	~<bôs/ívú⁄míts.h
>

210 
	#STDIN_FILENO
 0

	)

211 
	#STDOUT_FILENO
 1

	)

212 
	#STDERR_FILENO
 2

	)

217 
	~<bôs/ty≥s.h
>

219 #i‚def 
__ssize_t_deföed


220 
__ssize_t
 
	tssize_t
;

221 
	#__ssize_t_deföed


	)

224 
	#__√ed_size_t


	)

225 
	#__√ed_NULL


	)

226 
	~<°ddef.h
>

228 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K


231 #i‚de‡
__gid_t_deföed


232 
__gid_t
 
	tgid_t
;

233 
	#__gid_t_deföed


	)

236 #i‚de‡
__uid_t_deföed


237 
__uid_t
 
	tuid_t
;

238 
	#__uid_t_deföed


	)

241 #i‚de‡
__off_t_deföed


242 #i‚de‡
__USE_FILE_OFFSET64


243 
__off_t
 
	toff_t
;

245 
__off64_t
 
	toff_t
;

247 
	#__off_t_deföed


	)

249 #i‡
deföed
 
__USE_LARGEFILE64
 && !deföed 
__off64_t_deföed


250 
__off64_t
 
	toff64_t
;

251 
	#__off64_t_deföed


	)

254 #i‚de‡
__u£c⁄ds_t_deföed


255 
__u£c⁄ds_t
 
	tu£c⁄ds_t
;

256 
	#__u£c⁄ds_t_deföed


	)

259 #i‚de‡
__pid_t_deföed


260 
__pid_t
 
	tpid_t
;

261 
	#__pid_t_deföed


	)

265 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K


266 #i‚de‡
__öçå_t_deföed


267 
__öçå_t
 
	töçå_t
;

268 
	#__öçå_t_deföed


	)

272 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN


273 #i‚de‡
__sockÀn_t_deföed


274 
__sockÀn_t
 
	tsockÀn_t
;

275 
	#__sockÀn_t_deföed


	)

281 
	#R_OK
 4

	)

282 
	#W_OK
 2

	)

283 
	#X_OK
 1

	)

284 
	#F_OK
 0

	)

287 
	$ac˚ss
 (c⁄° *
__«me
, 
__ty≥
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

289 #ifde‡
__USE_GNU


292 
	$euidac˚ss
 (c⁄° *
__«me
, 
__ty≥
)

293 
__THROW
 
	`__n⁄nuŒ
 ((1));

296 
	$óc˚ss
 (c⁄° *
__«me
, 
__ty≥
)

297 
__THROW
 
	`__n⁄nuŒ
 ((1));

300 #ifde‡
__USE_ATFILE


304 
	$Ác˚sßt
 (
__fd
, c⁄° *
__fûe
, 
__ty≥
, 
__Êag
)

305 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

310 #i‚def 
_STDIO_H


311 
	#SEEK_SET
 0

	)

312 
	#SEEK_CUR
 1

	)

313 
	#SEEK_END
 2

	)

314 #ifde‡
__USE_GNU


315 
	#SEEK_DATA
 3

	)

316 
	#SEEK_HOLE
 4

	)

320 #i‡
deföed
 
__USE_BSD
 && !deföed 
L_SET


322 
	#L_SET
 
SEEK_SET


	)

323 
	#L_INCR
 
SEEK_CUR


	)

324 
	#L_XTND
 
SEEK_END


	)

333 #i‚de‡
__USE_FILE_OFFSET64


334 
__off_t
 
	$l£ek
 (
__fd
, 
__off_t
 
__off£t
, 
__whí˚
Ë
__THROW
;

336 #ifde‡
__REDIRECT_NTH


337 
__off64_t
 
	`__REDIRECT_NTH
 (
l£ek
,

338 (
__fd
, 
__off64_t
 
__off£t
, 
__whí˚
),

339 
l£ek64
);

341 
	#l£ek
 
l£ek64


	)

344 #ifde‡
__USE_LARGEFILE64


345 
__off64_t
 
	$l£ek64
 (
__fd
, 
__off64_t
 
__off£t
, 
__whí˚
)

346 
__THROW
;

353 
	`˛o£
 (
__fd
);

360 
ssize_t
 
	$ªad
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
Ë
__wur
;

366 
ssize_t
 
	$wrôe
 (
__fd
, c⁄° *
__buf
, 
size_t
 
__n
Ë
__wur
;

368 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K8


369 #i‚de‡
__USE_FILE_OFFSET64


376 
ssize_t
 
	$¥ód
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

377 
__off_t
 
__off£t
Ë
__wur
;

384 
ssize_t
 
	$pwrôe
 (
__fd
, c⁄° *
__buf
, 
size_t
 
__n
,

385 
__off_t
 
__off£t
Ë
__wur
;

387 #ifde‡
__REDIRECT


388 
ssize_t
 
	`__REDIRECT
 (
¥ód
, (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

389 
__off64_t
 
__off£t
),

390 
¥ód64
Ë
__wur
;

391 
ssize_t
 
	`__REDIRECT
 (
pwrôe
, (
__fd
, c⁄° *
__buf
,

392 
size_t
 
__nbyãs
, 
__off64_t
 
__off£t
),

393 
pwrôe64
Ë
__wur
;

395 
	#¥ód
 
¥ód64


	)

396 
	#pwrôe
 
pwrôe64


	)

400 #ifde‡
__USE_LARGEFILE64


404 
ssize_t
 
	$¥ód64
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

405 
__off64_t
 
__off£t
Ë
__wur
;

408 
ssize_t
 
	$pwrôe64
 (
__fd
, c⁄° *
__buf
, 
size_t
 
__n
,

409 
__off64_t
 
__off£t
Ë
__wur
;

417 
	$pùe
 (
__pùedes
[2]Ë
__THROW
 
__wur
;

419 #ifde‡
__USE_GNU


422 
	$pùe2
 (
__pùedes
[2], 
__Êags
Ë
__THROW
 
__wur
;

432 
	$Æ¨m
 (
__£c⁄ds
Ë
__THROW
;

444 
	`¶ìp
 (
__£c⁄ds
);

446 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
) \

447 || 
deföed
 
__USE_BSD


452 
__u£c⁄ds_t
 
	$uÆ¨m
 (
__u£c⁄ds_t
 
__vÆue
, __u£c⁄ds_à
__öãrvÆ
)

453 
__THROW
;

460 
	`u¶ìp
 (
__u£c⁄ds_t
 
__u£c⁄ds
);

469 
	`∑u£
 ();

473 
	$chown
 (c⁄° *
__fûe
, 
__uid_t
 
__ow√r
, 
__gid_t
 
__group
)

474 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

476 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


478 
	$fchown
 (
__fd
, 
__uid_t
 
__ow√r
, 
__gid_t
 
__group
Ë
__THROW
 
__wur
;

483 
	$lchown
 (c⁄° *
__fûe
, 
__uid_t
 
__ow√r
, 
__gid_t
 
__group
)

484 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

488 #ifde‡
__USE_ATFILE


491 
	$fchow«t
 (
__fd
, c⁄° *
__fûe
, 
__uid_t
 
__ow√r
,

492 
__gid_t
 
__group
, 
__Êag
)

493 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

497 
	$chdú
 (c⁄° *
__∑th
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

499 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


501 
	$fchdú
 (
__fd
Ë
__THROW
 
__wur
;

511 *
	$gëcwd
 (*
__buf
, 
size_t
 
__size
Ë
__THROW
 
__wur
;

513 #ifdef 
__USE_GNU


517 *
	$gë_cuºít_dú_«me
 (Ë
__THROW
;

520 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
) \

521 || 
deföed
 
__USE_BSD


525 *
	$gëwd
 (*
__buf
)

526 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__©åibuã_dïªˇãd__
 
__wur
;

531 
	$dup
 (
__fd
Ë
__THROW
 
__wur
;

534 
	$dup2
 (
__fd
, 
__fd2
Ë
__THROW
;

536 #ifde‡
__USE_GNU


539 
	$dup3
 (
__fd
, 
__fd2
, 
__Êags
Ë
__THROW
;

543 **
__ívú⁄
;

544 #ifde‡
__USE_GNU


545 **
ívú⁄
;

551 
	$execve
 (c⁄° *
__∑th
, *c⁄° 
__¨gv
[],

552 *c⁄° 
__ívp
[]Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

554 #ifde‡
__USE_XOPEN2K8


557 
	$„xecve
 (
__fd
, *c⁄° 
__¨gv
[], *c⁄° 
__ívp
[])

558 
__THROW
 
	`__n⁄nuŒ
 ((2));

563 
	$execv
 (c⁄° *
__∑th
, *c⁄° 
__¨gv
[])

564 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

568 
	$exe˛e
 (c⁄° *
__∑th
, c⁄° *
__¨g
, ...)

569 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

573 
	$exe˛
 (c⁄° *
__∑th
, c⁄° *
__¨g
, ...)

574 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

578 
	$execvp
 (c⁄° *
__fûe
, *c⁄° 
__¨gv
[])

579 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

584 
	$exe˛p
 (c⁄° *
__fûe
, c⁄° *
__¨g
, ...)

585 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

587 #ifde‡
__USE_GNU


590 
	$execv≥
 (c⁄° *
__fûe
, *c⁄° 
__¨gv
[],

591 *c⁄° 
__ívp
[])

592 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

596 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


598 
	$ni˚
 (
__öc
Ë
__THROW
 
__wur
;

603 
	$_exô
 (
__°©us
Ë
	`__©åibuã__
 ((
__n‹ëu∫__
));

609 
	~<bôs/c⁄‚ame.h
>

612 
	$∑thc⁄f
 (c⁄° *
__∑th
, 
__«me
)

613 
__THROW
 
	`__n⁄nuŒ
 ((1));

616 
	$Â©hc⁄f
 (
__fd
, 
__«me
Ë
__THROW
;

619 
	$sysc⁄f
 (
__«me
Ë
__THROW
;

621 #ifdef 
__USE_POSIX2


623 
size_t
 
	$c⁄f°r
 (
__«me
, *
__buf
, 
size_t
 
__Àn
Ë
__THROW
;

628 
__pid_t
 
	$gëpid
 (Ë
__THROW
;

631 
__pid_t
 
	$gëµid
 (Ë
__THROW
;

635 #i‚de‡
__FAVOR_BSD


636 
__pid_t
 
	$gëpgΩ
 (Ë
__THROW
;

638 #ifde‡
__REDIRECT_NTH


639 
__pid_t
 
	`__REDIRECT_NTH
 (
gëpgΩ
, (__pid_à
__pid
), 
__gëpgid
);

641 
	#gëpgΩ
 
__gëpgid


	)

646 
__pid_t
 
	$__gëpgid
 (
__pid_t
 
__pid
Ë
__THROW
;

647 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


648 
__pid_t
 
	$gëpgid
 (
__pid_t
 
__pid
Ë
__THROW
;

655 
	$£çgid
 (
__pid_t
 
__pid
, __pid_à
__pgid
Ë
__THROW
;

657 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


668 #i‚de‡
__FAVOR_BSD


672 
	$£çgΩ
 (Ë
__THROW
;

677 #ifde‡
__REDIRECT_NTH


678 
	`__REDIRECT_NTH
 (
£çgΩ
, (
__pid_t
 
__pid
, __pid_à
__pgΩ
), 
£çgid
);

680 
	#£çgΩ
 
£çgid


	)

689 
__pid_t
 
	$£tsid
 (Ë
__THROW
;

691 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


693 
__pid_t
 
	$gësid
 (
__pid_t
 
__pid
Ë
__THROW
;

697 
__uid_t
 
	$gëuid
 (Ë
__THROW
;

700 
__uid_t
 
	$gëeuid
 (Ë
__THROW
;

703 
__gid_t
 
	$gëgid
 (Ë
__THROW
;

706 
__gid_t
 
	$gëegid
 (Ë
__THROW
;

711 
	$gëgroups
 (
__size
, 
__gid_t
 
__li°
[]Ë
__THROW
 
__wur
;

713 #ifdef 
__USE_GNU


715 
	$group_membî
 (
__gid_t
 
__gid
Ë
__THROW
;

722 
	$£tuid
 (
__uid_t
 
__uid
Ë
__THROW
 
__wur
;

724 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


727 
	$£åeuid
 (
__uid_t
 
__ruid
, __uid_à
__euid
Ë
__THROW
 
__wur
;

730 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN2K


732 
	$£ãuid
 (
__uid_t
 
__uid
Ë
__THROW
 
__wur
;

739 
	$£tgid
 (
__gid_t
 
__gid
Ë
__THROW
 
__wur
;

741 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


744 
	$£åegid
 (
__gid_t
 
__rgid
, __gid_à
__egid
Ë
__THROW
 
__wur
;

747 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN2K


749 
	$£ãgid
 (
__gid_t
 
__gid
Ë
__THROW
 
__wur
;

752 #ifde‡
__USE_GNU


755 
	$gëªsuid
 (
__uid_t
 *
__ruid
, __uid_à*
__euid
, __uid_à*
__suid
)

756 
__THROW
;

760 
	$gëªsgid
 (
__gid_t
 *
__rgid
, __gid_à*
__egid
, __gid_à*
__sgid
)

761 
__THROW
;

765 
	$£åesuid
 (
__uid_t
 
__ruid
, __uid_à
__euid
, __uid_à
__suid
)

766 
__THROW
 
__wur
;

770 
	$£åesgid
 (
__gid_t
 
__rgid
, __gid_à
__egid
, __gid_à
__sgid
)

771 
__THROW
 
__wur
;

778 
__pid_t
 
	$f‹k
 (Ë
__THROWNL
;

780 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
) \

781 || 
deföed
 
__USE_BSD


786 
__pid_t
 
	$vf‹k
 (Ë
__THROW
;

792 *
	$ây«me
 (
__fd
Ë
__THROW
;

796 
	$ây«me_r
 (
__fd
, *
__buf
, 
size_t
 
__buÊí
)

797 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

801 
	$ißây
 (
__fd
Ë
__THROW
;

803 #i‡
deföed
 
__USE_BSD
 \

804 || (
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_UNIX98
)

807 
	$ây¶Ÿ
 (Ë
__THROW
;

812 
	$lök
 (c⁄° *
__‰om
, c⁄° *
__to
)

813 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

815 #ifde‡
__USE_ATFILE


818 
	$lök©
 (
__‰omfd
, c⁄° *
__‰om
, 
__tofd
,

819 c⁄° *
__to
, 
__Êags
)

820 
__THROW
 
	`__n⁄nuŒ
 ((2, 4)Ë
__wur
;

823 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K


825 
	$symlök
 (c⁄° *
__‰om
, c⁄° *
__to
)

826 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

831 
ssize_t
 
	$ªadlök
 (c⁄° *
__ª°ri˘
 
__∑th
,

832 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

833 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

836 #ifde‡
__USE_ATFILE


838 
	$symlök©
 (c⁄° *
__‰om
, 
__tofd
,

839 c⁄° *
__to
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 3)Ë
__wur
;

842 
ssize_t
 
	$ªadlök©
 (
__fd
, c⁄° *
__ª°ri˘
 
__∑th
,

843 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

844 
__THROW
 
	`__n⁄nuŒ
 ((2, 3)Ë
__wur
;

848 
	$u∆ök
 (c⁄° *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

850 #ifde‡
__USE_ATFILE


852 
	$u∆ök©
 (
__fd
, c⁄° *
__«me
, 
__Êag
)

853 
__THROW
 
	`__n⁄nuŒ
 ((2));

857 
	$rmdú
 (c⁄° *
__∑th
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

861 
__pid_t
 
	$tcgëpgΩ
 (
__fd
Ë
__THROW
;

864 
	$tc£çgΩ
 (
__fd
, 
__pid_t
 
__pgΩ_id
Ë
__THROW
;

871 *
	`gëlogö
 ();

872 #i‡
deföed
 
__USE_REENTRANT
 || deföed 
__USE_POSIX199506


879 
	$gëlogö_r
 (*
__«me
, 
size_t
 
__«me_Àn
Ë
	`__n⁄nuŒ
 ((1));

882 #ifdef 
__USE_BSD


884 
	$£éogö
 (c⁄° *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

888 #ifdef 
__USE_POSIX2


892 
	#__√ed_gë›t


	)

893 
	~<gë›t.h
>

897 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


901 
	$gëho°«me
 (*
__«me
, 
size_t
 
__Àn
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

905 #i‡
deföed
 
__USE_BSD
 || (deföed 
__USE_XOPEN
 && !deföed 
__USE_UNIX98
)

908 
	$£tho°«me
 (c⁄° *
__«me
, 
size_t
 
__Àn
)

909 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

913 
	$£tho°id
 (
__id
Ë
__THROW
 
__wur
;

919 
	$gëdomaö«me
 (*
__«me
, 
size_t
 
__Àn
)

920 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

921 
	$£tdomaö«me
 (c⁄° *
__«me
, 
size_t
 
__Àn
)

922 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

928 
	$vh™gup
 (Ë
__THROW
;

931 
	$ªvoke
 (c⁄° *
__fûe
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

939 
	$¥ofû
 (*
__ßm∂e_buf„r
, 
size_t
 
__size
,

940 
size_t
 
__off£t
, 
__sˇÀ
)

941 
__THROW
 
	`__n⁄nuŒ
 ((1));

947 
	$ac˘
 (c⁄° *
__«me
Ë
__THROW
;

951 *
	$gëu£rshñl
 (Ë
__THROW
;

952 
	$ídu£rshñl
 (Ë
__THROW
;

953 
	$£tu£rshñl
 (Ë
__THROW
;

959 
	$d´m⁄
 (
__nochdú
, 
__no˛o£
Ë
__THROW
 
__wur
;

963 #i‡
deföed
 
__USE_BSD
 || (deföed 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K
)

966 
	$chroŸ
 (c⁄° *
__∑th
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

970 *
	$gë∑ss
 (c⁄° *
__¥om±
Ë
	`__n⁄nuŒ
 ((1));

978 
	`fsync
 (
__fd
);

981 #ifde‡
__USE_GNU


984 
	$syncfs
 (
__fd
Ë
__THROW
;

988 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


991 
	`gëho°id
 ();

994 
	$sync
 (Ë
__THROW
;

997 #i‡
deföed
 
__USE_BSD
 || !deföed 
__USE_XOPEN2K


1000 
	$gë∑gesize
 (Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

1005 
	$gëdèbÀsize
 (Ë
__THROW
;

1011 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


1014 #i‚de‡
__USE_FILE_OFFSET64


1015 
	$åunˇã
 (c⁄° *
__fûe
, 
__off_t
 
__Àngth
)

1016 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

1018 #ifde‡
__REDIRECT_NTH


1019 
	`__REDIRECT_NTH
 (
åunˇã
,

1020 (c⁄° *
__fûe
, 
__off64_t
 
__Àngth
),

1021 
åunˇã64
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

1023 
	#åunˇã
 
åunˇã64


	)

1026 #ifde‡
__USE_LARGEFILE64


1027 
	$åunˇã64
 (c⁄° *
__fûe
, 
__off64_t
 
__Àngth
)

1028 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

1033 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_POSIX199309
 \

1034 || 
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K


1037 #i‚de‡
__USE_FILE_OFFSET64


1038 
	$·runˇã
 (
__fd
, 
__off_t
 
__Àngth
Ë
__THROW
 
__wur
;

1040 #ifde‡
__REDIRECT_NTH


1041 
	`__REDIRECT_NTH
 (
·runˇã
, (
__fd
, 
__off64_t
 
__Àngth
),

1042 
·runˇã64
Ë
__wur
;

1044 
	#·runˇã
 
·runˇã64


	)

1047 #ifde‡
__USE_LARGEFILE64


1048 
	$·runˇã64
 (
__fd
, 
__off64_t
 
__Àngth
Ë
__THROW
 
__wur
;

1054 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K
) \

1055 || 
deföed
 
__USE_MISC


1059 
	$brk
 (*
__addr
Ë
__THROW
 
__wur
;

1065 *
	$sbrk
 (
öçå_t
 
__dñè
Ë
__THROW
;

1069 #ifde‡
__USE_MISC


1080 
	$sysˇŒ
 (
__sy¢o
, ...Ë
__THROW
;

1085 #i‡(
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
Ë&& !deföed 
F_LOCK


1097 
	#F_ULOCK
 0

	)

1098 
	#F_LOCK
 1

	)

1099 
	#F_TLOCK
 2

	)

1100 
	#F_TEST
 3

	)

1102 #i‚de‡
__USE_FILE_OFFSET64


1103 
	$lockf
 (
__fd
, 
__cmd
, 
__off_t
 
__Àn
Ë
__wur
;

1105 #ifde‡
__REDIRECT


1106 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Àn
),

1107 
lockf64
Ë
__wur
;

1109 
	#lockf
 
lockf64


	)

1112 #ifde‡
__USE_LARGEFILE64


1113 
	$lockf64
 (
__fd
, 
__cmd
, 
__off64_t
 
__Àn
Ë
__wur
;

1118 #ifde‡
__USE_GNU


1123 
	#TEMP_FAILURE_RETRY
(
ex¥essi⁄
) \

1124 (
__exãnsi⁄__
 \

1125 ({ 
__ªsu…
; \

1126 dÿ
__ªsu…
 = (Ë(
ex¥essi⁄
); \

1127 
__ªsu…
 =-1L && 
î∫o
 =
EINTR
); \

1128 
__ªsu…
; 
	}
}))

	)

1131 #i‡
deföed
 
__USE_POSIX199309
 || deföed 
__USE_UNIX98


1134 
fd©async
 (
__fûdes
);

1140 #ifdef 
__USE_XOPEN


1142 *
	$¸y±
 (c⁄° *
__key
, c⁄° *
__ß…
)

1143 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1147 
	$í¸y±
 (*
__libc_block
, 
__edÊag
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

1154 
	$swab
 (c⁄° *
__ª°ri˘
 
__‰om
, *__ª°ri˘ 
__to
,

1155 
ssize_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1161 #i‡
deföed
 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K


1163 *
	$˘îmid
 (*
__s
Ë
__THROW
;

1168 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


1169 
	~<bôs/uni°d.h
>

1172 
__END_DECLS


	@/usr/include/alloca.h

18 #i‚def 
_ALLOCA_H


19 
	#_ALLOCA_H
 1

	)

21 
	~<„©uªs.h
>

23 
	#__√ed_size_t


	)

24 
	~<°ddef.h
>

26 
	g__BEGIN_DECLS


29 #unde‡
Æloˇ


32 *
	$Æloˇ
 (
size_t
 
__size
Ë
__THROW
;

34 #ifdef 
__GNUC__


35 
	#Æloˇ
(
size
Ë
	`__buûtö_Æloˇ
 (size)

	)

38 
__END_DECLS


	@/usr/include/arpa/nameser.h

52 #i‚de‡
_ARPA_NAMESER_H_


53 
	#_ARPA_NAMESER_H_


	)

57 
	#BIND_4_COMPAT


	)

59 
	~<sys/∑øm.h
>

60 #i‡(!
deföed
(
BSD
)) || (BSD < 199306)

61 
	~<sys/bôy≥s.h
>

63 
	~<sys/ty≥s.h
>

65 
	~<sys/cdefs.h
>

75 
	#__NAMESER
 19991006

	)

79 
	#NS_PACKETSZ
 512

	)

80 
	#NS_MAXDNAME
 1025

	)

81 
	#NS_MAXMSG
 65535

	)

82 
	#NS_MAXCDNAME
 255

	)

83 
	#NS_MAXLABEL
 63

	)

84 
	#NS_HFIXEDSZ
 12

	)

85 
	#NS_QFIXEDSZ
 4

	)

86 
	#NS_RRFIXEDSZ
 10

	)

87 
	#NS_INT32SZ
 4

	)

88 
	#NS_INT16SZ
 2

	)

89 
	#NS_INT8SZ
 1

	)

90 
	#NS_INADDRSZ
 4

	)

91 
	#NS_IN6ADDRSZ
 16

	)

92 
	#NS_CMPRSFLGS
 0xc0

	)

93 
	#NS_DEFAULTPORT
 53

	)

98 
	e__ns_£˘
 {

99 
	mns_s_qd
 = 0,

100 
	mns_s_zn
 = 0,

101 
	mns_s_™
 = 1,

102 
	mns_s_¥
 = 1,

103 
	mns_s_ns
 = 2,

104 
	mns_s_ud
 = 2,

105 
	mns_s_¨
 = 3,

106 
	mns_s_max
 = 4

107 } 
	tns_£˘
;

114 
	s__ns_msg
 {

115 c⁄° 
u_ch¨
 *
	m_msg
, *
	m_eom
;

116 
u_öt16_t
 
	m_id
, 
	m_Êags
, 
	m_cou¡s
[
ns_s_max
];

117 c⁄° 
u_ch¨
 *
	m_£˘i⁄s
[
ns_s_max
];

118 
ns_£˘
 
	m_£˘
;

119 
	m_ºnum
;

120 c⁄° 
u_ch¨
 *
	m_msg_±r
;

121 } 
	tns_msg
;

124 
	s_ns_Êagd©a
 { 
	mmask
, 
	mshi·
; };

125 c⁄° 
_ns_Êagd©a
 _ns_flagdata[];

129 
	#ns_msg_id
(
h™dÀ
Ë((h™dÀ).
_id
 + 0)

	)

130 
	#ns_msg_ba£
(
h™dÀ
Ë((h™dÀ).
_msg
 + 0)

	)

131 
	#ns_msg_íd
(
h™dÀ
Ë((h™dÀ).
_eom
 + 0)

	)

132 
	#ns_msg_size
(
h™dÀ
Ë((h™dÀ).
_eom
 - (h™dÀ).
_msg
)

	)

133 
	#ns_msg_cou¡
(
h™dÀ
, 
£˘i⁄
Ë((h™dÀ).
_cou¡s
[£˘i⁄] + 0)

	)

138 
	s__ns_º
 {

139 
	m«me
[
NS_MAXDNAME
];

140 
u_öt16_t
 
	mty≥
;

141 
u_öt16_t
 
	mº_˛ass
;

142 
u_öt32_t
 
	mâl
;

143 
u_öt16_t
 
	mrdÀngth
;

144 c⁄° 
u_ch¨
 * 
	mrd©a
;

145 } 
	tns_º
;

148 
	#ns_º_«me
(
º
Ë((‘r).
«me
[0] !'\0'Ë? (º).«mê: ".")

	)

149 
	#ns_º_ty≥
(
º
Ë((
ns_ty≥
)(‘r).
ty≥
 + 0))

	)

150 
	#ns_º_˛ass
(
º
Ë((
ns_˛ass
)(‘r).
º_˛ass
 + 0))

	)

151 
	#ns_º_âl
(
º
Ë(‘r).
âl
 + 0)

	)

152 
	#ns_º_rdÀn
(
º
Ë(‘r).
rdÀngth
 + 0)

	)

153 
	#ns_º_rd©a
(
º
Ë(‘r).
rd©a
 + 0)

	)

160 
	e__ns_Êag
 {

161 
	mns_f_qr
,

162 
	mns_f_›code
,

163 
	mns_f_Ø
,

164 
	mns_f_tc
,

165 
	mns_f_rd
,

166 
	mns_f_ø
,

167 
	mns_f_z
,

168 
	mns_f_ad
,

169 
	mns_f_cd
,

170 
	mns_f_rcode
,

171 
	mns_f_max


172 } 
	tns_Êag
;

177 
	e__ns_›code
 {

178 
	mns_o_quîy
 = 0,

179 
	mns_o_iquîy
 = 1,

180 
	mns_o_°©us
 = 2,

182 
	mns_o_nŸify
 = 4,

183 
	mns_o_upd©e
 = 5,

184 
	mns_o_max
 = 6

185 } 
	tns_›code
;

190 
	e__ns_rcode
 {

191 
	mns_r_n€º‹
 = 0,

192 
	mns_r_f‹mîr
 = 1,

193 
	mns_r_£rvÁû
 = 2,

194 
	mns_r_nxdomaö
 = 3,

195 
	mns_r_nŸim∂
 = 4,

196 
	mns_r_ªfu£d
 = 5,

198 
	mns_r_yxdomaö
 = 6,

199 
	mns_r_yxº£t
 = 7,

200 
	mns_r_nxº£t
 = 8,

201 
	mns_r_nŸauth
 = 9,

202 
	mns_r_nŸz⁄e
 = 10,

203 
	mns_r_max
 = 11,

205 
	mns_r_badvîs
 = 16,

207 
	mns_r_badsig
 = 16,

208 
	mns_r_badkey
 = 17,

209 
	mns_r_badtime
 = 18

210 } 
	tns_rcode
;

213 
	e__ns_upd©e_›î©i⁄
 {

214 
	mns_u›_dñëe
 = 0,

215 
	mns_u›_add
 = 1,

216 
	mns_u›_max
 = 2

217 } 
	tns_upd©e_›î©i⁄
;

222 
	sns_tsig_key
 {

223 
	m«me
[
NS_MAXDNAME
], 
	mÆg
[NS_MAXDNAME];

224 *
	md©a
;

225 
	mÀn
;

227 
ns_tsig_key
 
	tns_tsig_key
;

232 
	sns_t˝_tsig_°©e
 {

233 
	mcou¡î
;

234 
d°_key
 *
	mkey
;

235 *
	m˘x
;

236 
	msig
[
NS_PACKETSZ
];

237 
	msigÀn
;

239 
ns_t˝_tsig_°©e
 
	tns_t˝_tsig_°©e
;

241 
	#NS_TSIG_FUDGE
 300

	)

242 
	#NS_TSIG_TCP_COUNT
 100

	)

243 
	#NS_TSIG_ALG_HMAC_MD5
 "HMAC-MD5.SIG-ALG.REG.INT"

	)

245 
	#NS_TSIG_ERROR_NO_TSIG
 -10

	)

246 
	#NS_TSIG_ERROR_NO_SPACE
 -11

	)

247 
	#NS_TSIG_ERROR_FORMERR
 -12

	)

252 
	e__ns_ty≥
 {

253 
	mns_t_övÆid
 = 0,

254 
	mns_t_a
 = 1,

255 
	mns_t_ns
 = 2,

256 
	mns_t_md
 = 3,

257 
	mns_t_mf
 = 4,

258 
	mns_t_˙ame
 = 5,

259 
	mns_t_sﬂ
 = 6,

260 
	mns_t_mb
 = 7,

261 
	mns_t_mg
 = 8,

262 
	mns_t_mr
 = 9,

263 
	mns_t_nuŒ
 = 10,

264 
	mns_t_wks
 = 11,

265 
	mns_t_±r
 = 12,

266 
	mns_t_höfo
 = 13,

267 
	mns_t_möfo
 = 14,

268 
	mns_t_mx
 = 15,

269 
	mns_t_txt
 = 16,

270 
	mns_t_Ω
 = 17,

271 
	mns_t_afsdb
 = 18,

272 
	mns_t_x25
 = 19,

273 
	mns_t_isdn
 = 20,

274 
	mns_t_π
 = 21,

275 
	mns_t_nßp
 = 22,

276 
	mns_t_nßp_±r
 = 23,

277 
	mns_t_sig
 = 24,

278 
	mns_t_key
 = 25,

279 
	mns_t_px
 = 26,

280 
	mns_t_gpos
 = 27,

281 
	mns_t_ØØ
 = 28,

282 
	mns_t_loc
 = 29,

283 
	mns_t_nxt
 = 30,

284 
	mns_t_eid
 = 31,

285 
	mns_t_nimloc
 = 32,

286 
	mns_t_§v
 = 33,

287 
	mns_t_©ma
 = 34,

288 
	mns_t_«±r
 = 35,

289 
	mns_t_kx
 = 36,

290 
	mns_t_˚π
 = 37,

291 
	mns_t_a6
 = 38,

292 
	mns_t_d«me
 = 39,

293 
	mns_t_sök
 = 40,

294 
	mns_t_›t
 = 41,

295 
	mns_t_≠l
 = 42,

296 
	mns_t_tkey
 = 249,

297 
	mns_t_tsig
 = 250,

298 
	mns_t_ix‰
 = 251,

299 
	mns_t_ax‰
 = 252,

300 
	mns_t_maûb
 = 253,

301 
	mns_t_maûa
 = 254,

302 
	mns_t_™y
 = 255,

303 
	mns_t_zx‰
 = 256,

304 
	mns_t_max
 = 65536

305 } 
	tns_ty≥
;

308 
	#ns_t_qt_p
(
t
Ë(
	`ns_t_x‰_p
—Ë|| (tË=
ns_t_™y
 || \

309 (
t
Ë=
ns_t_maûb
 || (tË=
ns_t_maûa
)

	)

311 
	#ns_t_mº_p
(
t
Ë(—Ë=
ns_t_tsig
 || (tË=
ns_t_›t
)

	)

313 
	#ns_t_º_p
(
t
Ë(!
	`ns_t_qt_p
—Ë&& !
	`ns_t_mº_p
—))

	)

314 
	#ns_t_udp_p
(
t
Ë(—Ë!
ns_t_ax‰
 && (tË!
ns_t_zx‰
)

	)

315 
	#ns_t_x‰_p
(
t
Ë(—Ë=
ns_t_ax‰
 || (tË=
ns_t_ix‰
 || \

316 (
t
Ë=
ns_t_zx‰
)

	)

321 
	e__ns_˛ass
 {

322 
	mns_c_övÆid
 = 0,

323 
	mns_c_ö
 = 1,

324 
	mns_c_2
 = 2,

325 
	mns_c_chaos
 = 3,

326 
	mns_c_hs
 = 4,

328 
	mns_c_n⁄e
 = 254,

329 
	mns_c_™y
 = 255,

330 
	mns_c_max
 = 65536

331 } 
	tns_˛ass
;

335 
	e__ns_key_ty≥s
 {

336 
	mns_kt_rß
 = 1,

337 
	mns_kt_dh
 = 2,

338 
	mns_kt_dß
 = 3,

339 
	mns_kt_¥iv©e
 = 254

340 } 
	tns_key_ty≥s
;

342 
	e__ns_˚π_ty≥s
 {

343 
	m˚π_t_pkix
 = 1,

344 
	m˚π_t_•ki
 = 2,

345 
	m˚π_t_pgp
 = 3,

346 
	m˚π_t_uæ
 = 253,

347 
	m˚π_t_oid
 = 254

348 } 
	tns_˚π_ty≥s
;

351 
	#NS_KEY_TYPEMASK
 0xC000

	)

352 
	#NS_KEY_TYPE_AUTH_CONF
 0x0000

	)

353 
	#NS_KEY_TYPE_CONF_ONLY
 0x8000

	)

354 
	#NS_KEY_TYPE_AUTH_ONLY
 0x4000

	)

355 
	#NS_KEY_TYPE_NO_KEY
 0xC000

	)

357 
	#NS_KEY_NO_AUTH
 0x8000

	)

358 
	#NS_KEY_NO_CONF
 0x4000

	)

359 
	#NS_KEY_RESERVED2
 0x2000

	)

360 
	#NS_KEY_EXTENDED_FLAGS
 0x1000

	)

361 
	#NS_KEY_RESERVED4
 0x0800

	)

362 
	#NS_KEY_RESERVED5
 0x0400

	)

363 
	#NS_KEY_NAME_TYPE
 0x0300

	)

364 
	#NS_KEY_NAME_USER
 0x0000

	)

365 
	#NS_KEY_NAME_ENTITY
 0x0200

	)

366 
	#NS_KEY_NAME_ZONE
 0x0100

	)

367 
	#NS_KEY_NAME_RESERVED
 0x0300

	)

368 
	#NS_KEY_RESERVED8
 0x0080

	)

369 
	#NS_KEY_RESERVED9
 0x0040

	)

370 
	#NS_KEY_RESERVED10
 0x0020

	)

371 
	#NS_KEY_RESERVED11
 0x0010

	)

372 
	#NS_KEY_SIGNATORYMASK
 0x000F

	)

373 
	#NS_KEY_RESERVED_BITMASK
 ( 
NS_KEY_RESERVED2
 | \

374 
NS_KEY_RESERVED4
 | \

375 
NS_KEY_RESERVED5
 | \

376 
NS_KEY_RESERVED8
 | \

377 
NS_KEY_RESERVED9
 | \

378 
NS_KEY_RESERVED10
 | \

379 
NS_KEY_RESERVED11
 )

	)

380 
	#NS_KEY_RESERVED_BITMASK2
 0xFFFF

	)

382 
	#NS_ALG_MD5RSA
 1

	)

383 
	#NS_ALG_DH
 2

	)

384 
	#NS_ALG_DSA
 3

	)

385 
	#NS_ALG_DSS
 
NS_ALG_DSA


	)

386 
	#NS_ALG_EXPIRE_ONLY
 253

	)

387 
	#NS_ALG_PRIVATE_OID
 254

	)

390 
	#NS_KEY_PROT_TLS
 1

	)

391 
	#NS_KEY_PROT_EMAIL
 2

	)

392 
	#NS_KEY_PROT_DNSSEC
 3

	)

393 
	#NS_KEY_PROT_IPSEC
 4

	)

394 
	#NS_KEY_PROT_ANY
 255

	)

397 
	#NS_MD5RSA_MIN_BITS
 512

	)

398 
	#NS_MD5RSA_MAX_BITS
 4096

	)

400 
	#NS_MD5RSA_MAX_BYTES
 ((
NS_MD5RSA_MAX_BITS
+7/8)*2+3)

	)

402 
	#NS_MD5RSA_MAX_BASE64
 (((
NS_MD5RSA_MAX_BYTES
+2)/3)*4)

	)

403 
	#NS_MD5RSA_MIN_SIZE
 ((
NS_MD5RSA_MIN_BITS
+7)/8)

	)

404 
	#NS_MD5RSA_MAX_SIZE
 ((
NS_MD5RSA_MAX_BITS
+7)/8)

	)

406 
	#NS_DSA_SIG_SIZE
 41

	)

407 
	#NS_DSA_MIN_SIZE
 213

	)

408 
	#NS_DSA_MAX_BYTES
 405

	)

411 
	#NS_SIG_TYPE
 0

	)

412 
	#NS_SIG_ALG
 2

	)

413 
	#NS_SIG_LABELS
 3

	)

414 
	#NS_SIG_OTTL
 4

	)

415 
	#NS_SIG_EXPIR
 8

	)

416 
	#NS_SIG_SIGNED
 12

	)

417 
	#NS_SIG_FOOT
 16

	)

418 
	#NS_SIG_SIGNER
 18

	)

420 
	#NS_NXT_BITS
 8

	)

421 
	#NS_NXT_BIT_SET
–
n
,
p
Ë’[“)/
NS_NXT_BITS
] |(0x80>>(“)%NS_NXT_BITS)))

	)

422 
	#NS_NXT_BIT_CLEAR
(
n
,
p
Ë’[“)/
NS_NXT_BITS
] &~(0x80>>(“)%NS_NXT_BITS)))

	)

423 
	#NS_NXT_BIT_ISSET
(
n
,
p
Ë’[“)/
NS_NXT_BITS
] & (0x80>>(“)%NS_NXT_BITS)))

	)

424 
	#NS_NXT_MAX
 127

	)

429 
	#NS_OPT_DNSSEC_OK
 0x8000U

	)

430 
	#NS_OPT_NSID
 3

	)

435 
	#NS_GET16
(
s
, 
˝
) do { \

436 c⁄° 
u_ch¨
 *
t_˝
 = (c⁄° u_ch¨ *)(
˝
); \

437 (
s
Ë((
u_öt16_t
)
t_˝
[0] << 8) \

438 | ((
u_öt16_t
)
t_˝
[1]) \

440 (
˝
Ë+
NS_INT16SZ
; \

441 } 0)

	)

443 
	#NS_GET32
(
l
, 
˝
) do { \

444 c⁄° 
u_ch¨
 *
t_˝
 = (c⁄° u_ch¨ *)(
˝
); \

445 (
l
Ë((
u_öt32_t
)
t_˝
[0] << 24) \

446 | ((
u_öt32_t
)
t_˝
[1] << 16) \

447 | ((
u_öt32_t
)
t_˝
[2] << 8) \

448 | ((
u_öt32_t
)
t_˝
[3]) \

450 (
˝
Ë+
NS_INT32SZ
; \

451 } 0)

	)

453 
	#NS_PUT16
(
s
, 
˝
) do { \

454 
u_öt16_t
 
t_s
 = (u_öt16_t)(
s
); \

455 
u_ch¨
 *
t_˝
 = (u_ch¨ *)(
˝
); \

456 *
t_˝
++ = 
t_s
 >> 8; \

457 *
t_˝
 = 
t_s
; \

458 (
˝
Ë+
NS_INT16SZ
; \

459 } 0)

	)

461 
	#NS_PUT32
(
l
, 
˝
) do { \

462 
u_öt32_t
 
t_l
 = (u_öt32_t)(
l
); \

463 
u_ch¨
 *
t_˝
 = (u_ch¨ *)(
˝
); \

464 *
t_˝
++ = 
t_l
 >> 24; \

465 *
t_˝
++ = 
t_l
 >> 16; \

466 *
t_˝
++ = 
t_l
 >> 8; \

467 *
t_˝
 = 
t_l
; \

468 (
˝
Ë+
NS_INT32SZ
; \

469 } 0)

	)

471 
__BEGIN_DECLS


472 
	$ns_msg_gëÊag
 (
ns_msg
, Ë
__THROW
;

473 
u_öt
 
	$ns_gë16
 (c⁄° 
u_ch¨
 *Ë
__THROW
;

474 
u_l⁄g
 
	$ns_gë32
 (c⁄° 
u_ch¨
 *Ë
__THROW
;

475 
	$ns_put16
 (
u_öt
, 
u_ch¨
 *Ë
__THROW
;

476 
	$ns_put32
 (
u_l⁄g
, 
u_ch¨
 *Ë
__THROW
;

477 
	$ns_öô∑r£
 (c⁄° 
u_ch¨
 *, , 
ns_msg
 *Ë
__THROW
;

478 
	$ns_skùº
 (c⁄° 
u_ch¨
 *, c⁄° u_ch¨ *, 
ns_£˘
, )

479 
__THROW
;

480 
	$ns_∑r£º
 (
ns_msg
 *, 
ns_£˘
, , 
ns_º
 *Ë
__THROW
;

481 
	$ns_•röår
 (c⁄° 
ns_msg
 *, c⁄° 
ns_º
 *,

482 c⁄° *, c⁄° *, *, 
size_t
)

483 
__THROW
;

484 
	$ns_•röårf
 (c⁄° 
u_ch¨
 *, 
size_t
, const *,

485 
ns_˛ass
, 
ns_ty≥
, 
u_l⁄g
, c⁄° 
u_ch¨
 *,

486 
size_t
, const *, const *,

487 *, 
size_t
Ë
__THROW
;

488 
	$ns_f‹m©_âl
 (
u_l⁄g
, *, 
size_t
Ë
__THROW
;

489 
	$ns_∑r£_âl
 (c⁄° *, 
u_l⁄g
 *Ë
__THROW
;

490 
u_öt32_t
 
	$ns_d©ëo£cs
 (c⁄° *, *Ë
__THROW
;

491 
	$ns_«me_¡ﬁ
 (c⁄° 
u_ch¨
 *, u_ch¨ *, 
size_t
Ë
__THROW
;

492 
	$ns_«me_¡›
 (c⁄° 
u_ch¨
 *, *, 
size_t
Ë
__THROW
;

493 
	$ns_«me_±⁄
 (c⁄° *, 
u_ch¨
 *, 
size_t
Ë
__THROW
;

494 
	$ns_«me_u≈ack
 (c⁄° 
u_ch¨
 *, const u_char *,

495 c⁄° 
u_ch¨
 *, u_ch¨ *, 
size_t
Ë
__THROW
;

496 
	$ns_«me_∑ck
 (c⁄° 
u_ch¨
 *, u_char *, ,

497 c⁄° 
u_ch¨
 **, c⁄° u_ch¨ **Ë
__THROW
;

498 
	$ns_«me_uncom¥ess
 (c⁄° 
u_ch¨
 *, const u_char *,

499 c⁄° 
u_ch¨
 *, *, 
size_t
Ë
__THROW
;

500 
	$ns_«me_com¥ess
 (c⁄° *, 
u_ch¨
 *, 
size_t
,

501 c⁄° 
u_ch¨
 **, c⁄° u_ch¨ **Ë
__THROW
;

502 
	$ns_«me_skù
 (c⁄° 
u_ch¨
 **, c⁄° u_ch¨ *Ë
__THROW
;

503 
	$ns_«me_rﬁlback
 (c⁄° 
u_ch¨
 *, const u_char **,

504 c⁄° 
u_ch¨
 **Ë
__THROW
;

505 
	$ns_sign
 (
u_ch¨
 *, *, , , *,

506 c⁄° 
u_ch¨
 *, , u_ch¨ *, *, 
time_t
Ë
__THROW
;

507 
	$ns_sign2
 (
u_ch¨
 *, *, , , *,

508 c⁄° 
u_ch¨
 *, , u_ch¨ *, *, 
time_t
,

509 
u_ch¨
 **, u_ch¨ **Ë
__THROW
;

510 
	$ns_sign_t˝
 (
u_ch¨
 *, *, , ,

511 
ns_t˝_tsig_°©e
 *, Ë
__THROW
;

512 
	$ns_sign_t˝2
 (
u_ch¨
 *, *, , ,

513 
ns_t˝_tsig_°©e
 *, ,

514 
u_ch¨
 **, u_ch¨ **Ë
__THROW
;

515 
	$ns_sign_t˝_öô
 (*, c⁄° 
u_ch¨
 *, ,

516 
ns_t˝_tsig_°©e
 *Ë
__THROW
;

517 
u_ch¨
 *
	$ns_föd_tsig
 (
u_ch¨
 *, u_ch¨ *Ë
__THROW
;

518 
	$ns_vîify
 (
u_ch¨
 *, *, *, const u_char *, ,

519 
u_ch¨
 *, *, 
time_t
 *, Ë
__THROW
;

520 
	$ns_vîify_t˝
 (
u_ch¨
 *, *, 
ns_t˝_tsig_°©e
 *, )

521 
__THROW
;

522 
	$ns_vîify_t˝_öô
 (*, c⁄° 
u_ch¨
 *, ,

523 
ns_t˝_tsig_°©e
 *Ë
__THROW
;

524 
	$ns_ßmedomaö
 (c⁄° *, c⁄° *Ë
__THROW
;

525 
	$ns_subdomaö
 (c⁄° *, c⁄° *Ë
__THROW
;

526 
	$ns_makeˇn⁄
 (c⁄° *, *, 
size_t
Ë
__THROW
;

527 
	$ns_ßmíame
 (c⁄° *, c⁄° *Ë
__THROW
;

528 
__END_DECLS


530 #ifde‡
BIND_4_COMPAT


531 
	~<¨∑/«me£r_com∑t.h
>

	@/usr/include/endian.h

18 #i‚def 
_ENDIAN_H


19 
	#_ENDIAN_H
 1

	)

21 
	~<„©uªs.h
>

31 
	#__LITTLE_ENDIAN
 1234

	)

32 
	#__BIG_ENDIAN
 4321

	)

33 
	#__PDP_ENDIAN
 3412

	)

36 
	~<bôs/ídün.h
>

40 #i‚de‡
__FLOAT_WORD_ORDER


41 
	#__FLOAT_WORD_ORDER
 
__BYTE_ORDER


	)

44 #ifdef 
__USE_BSD


45 
	#LITTLE_ENDIAN
 
__LITTLE_ENDIAN


	)

46 
	#BIG_ENDIAN
 
__BIG_ENDIAN


	)

47 
	#PDP_ENDIAN
 
__PDP_ENDIAN


	)

48 
	#BYTE_ORDER
 
__BYTE_ORDER


	)

51 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


52 
	#__LONG_LONG_PAIR
(
HI
, 
LO
ËLO, 
	)
HI

53 #ñi‡
__BYTE_ORDER
 =
__BIG_ENDIAN


54 
	#__LONG_LONG_PAIR
(
HI
, 
LO
ËHI, 
	)
LO

58 #i‡
deföed
 
__USE_BSD
 && !deföed 
__ASSEMBLER__


60 
	~<bôs/byãsw≠.h
>

62 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


63 
	#htobe16
(
x
Ë
	`__bsw≠_16
 (x)

	)

64 
	#htﬁe16
(
x
Ë(x)

	)

65 
	#be16toh
(
x
Ë
	`__bsw≠_16
 (x)

	)

66 
	#À16toh
(
x
Ë(x)

	)

68 
	#htobe32
(
x
Ë
	`__bsw≠_32
 (x)

	)

69 
	#htﬁe32
(
x
Ë(x)

	)

70 
	#be32toh
(
x
Ë
	`__bsw≠_32
 (x)

	)

71 
	#À32toh
(
x
Ë(x)

	)

73 #i‡
__GLIBC_HAVE_LONG_LONG


74 
	#htobe64
(
x
Ë
	`__bsw≠_64
 (x)

	)

75 
	#htﬁe64
(
x
Ë(x)

	)

76 
	#be64toh
(
x
Ë
	`__bsw≠_64
 (x)

	)

77 
	#À64toh
(
x
Ë(x)

	)

81 
	#htobe16
(
x
Ë(x)

	)

82 
	#htﬁe16
(
x
Ë
	`__bsw≠_16
 (x)

	)

83 
	#be16toh
(
x
Ë(x)

	)

84 
	#À16toh
(
x
Ë
	`__bsw≠_16
 (x)

	)

86 
	#htobe32
(
x
Ë(x)

	)

87 
	#htﬁe32
(
x
Ë
	`__bsw≠_32
 (x)

	)

88 
	#be32toh
(
x
Ë(x)

	)

89 
	#À32toh
(
x
Ë
	`__bsw≠_32
 (x)

	)

91 #i‡
__GLIBC_HAVE_LONG_LONG


92 
	#htobe64
(
x
Ë(x)

	)

93 
	#htﬁe64
(
x
Ë
	`__bsw≠_64
 (x)

	)

94 
	#be64toh
(
x
Ë(x)

	)

95 
	#À64toh
(
x
Ë
	`__bsw≠_64
 (x)

	)

	@/usr/include/features.h

18 #i‚def 
_FEATURES_H


19 
	#_FEATURES_H
 1

	)

98 #unde‡
__USE_ISOC11


99 #unde‡
__USE_ISOC99


100 #unde‡
__USE_ISOC95


101 #unde‡
__USE_ISOCXX11


102 #unde‡
__USE_POSIX


103 #unde‡
__USE_POSIX2


104 #unde‡
__USE_POSIX199309


105 #unde‡
__USE_POSIX199506


106 #unde‡
__USE_XOPEN


107 #unde‡
__USE_XOPEN_EXTENDED


108 #unde‡
__USE_UNIX98


109 #unde‡
__USE_XOPEN2K


110 #unde‡
__USE_XOPEN2KXSI


111 #unde‡
__USE_XOPEN2K8


112 #unde‡
__USE_XOPEN2K8XSI


113 #unde‡
__USE_LARGEFILE


114 #unde‡
__USE_LARGEFILE64


115 #unde‡
__USE_FILE_OFFSET64


116 #unde‡
__USE_BSD


117 #unde‡
__USE_SVID


118 #unde‡
__USE_MISC


119 #unde‡
__USE_ATFILE


120 #unde‡
__USE_GNU


121 #unde‡
__USE_REENTRANT


122 #unde‡
__USE_FORTIFY_LEVEL


123 #unde‡
__FAVOR_BSD


124 #unde‡
__KERNEL_STRICT_NAMES


128 #i‚de‡
_LOOSE_KERNEL_NAMES


129 
	#__KERNEL_STRICT_NAMES


	)

133 
	#__USE_ANSI
 1

	)

142 #i‡
deföed
 
__GNUC__
 && deföed 
__GNUC_MINOR__


143 
	#__GNUC_PREREQ
(
maj
, 
mö
) \

144 ((
__GNUC__
 << 16Ë+ 
__GNUC_MINOR__
 >((
maj
Ë<< 16Ë+ (
mö
))

	)

146 
	#__GNUC_PREREQ
(
maj
, 
mö
Ë0

	)

151 #i‡
deföed
 
_BSD_SOURCE
 && \

152 !(
deföed
 
	g_POSIX_SOURCE
 || deföed 
	g_POSIX_C_SOURCE
 || \

153 
deföed
 
	g_XOPEN_SOURCE
 || deföed 
	g_GNU_SOURCE
 || deföed 
	g_SVID_SOURCE
)

154 
	#__FAVOR_BSD
 1

	)

158 #ifde‡
_GNU_SOURCE


159 #unde‡
_ISOC95_SOURCE


160 
	#_ISOC95_SOURCE
 1

	)

161 #unde‡
_ISOC99_SOURCE


162 
	#_ISOC99_SOURCE
 1

	)

163 #unde‡
_ISOC11_SOURCE


164 
	#_ISOC11_SOURCE
 1

	)

165 #unde‡
_POSIX_SOURCE


166 
	#_POSIX_SOURCE
 1

	)

167 #unde‡
_POSIX_C_SOURCE


168 
	#_POSIX_C_SOURCE
 200809L

	)

169 #unde‡
_XOPEN_SOURCE


170 
	#_XOPEN_SOURCE
 700

	)

171 #unde‡
_XOPEN_SOURCE_EXTENDED


172 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

173 #unde‡
_LARGEFILE64_SOURCE


174 
	#_LARGEFILE64_SOURCE
 1

	)

175 #unde‡
_BSD_SOURCE


176 
	#_BSD_SOURCE
 1

	)

177 #unde‡
_SVID_SOURCE


178 
	#_SVID_SOURCE
 1

	)

179 #unde‡
_ATFILE_SOURCE


180 
	#_ATFILE_SOURCE
 1

	)

185 #i‡(!
deföed
 
__STRICT_ANSI__
 && !deföed 
_ISOC99_SOURCE
 && \

186 !
deföed
 
	g_POSIX_SOURCE
 && !deföed 
	g_POSIX_C_SOURCE
 && \

187 !
deföed
 
	g_XOPEN_SOURCE
 && !deföed 
	g_BSD_SOURCE
 && !deföed 
	g_SVID_SOURCE
)

188 
	#_BSD_SOURCE
 1

	)

189 
	#_SVID_SOURCE
 1

	)

193 #i‡(
deföed
 
_ISOC11_SOURCE
 \

194 || (
deföed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 201112L))

195 
	#__USE_ISOC11
 1

	)

199 #i‡(
deföed
 
_ISOC99_SOURCE
 || deföed 
_ISOC11_SOURCE
 \

200 || (
deföed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

201 
	#__USE_ISOC99
 1

	)

205 #i‡(
deföed
 
_ISOC99_SOURCE
 || deföed 
_ISOC11_SOURCE
 \

206 || (
deföed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

207 
	#__USE_ISOC95
 1

	)

214 #i‡((
deföed
 
__˝lu•lus
 && __cplusplus >= 201103L) \

215 || 
deföed
 
__GXX_EXPERIMENTAL_CXX0X__
)

216 
	#__USE_ISOCXX11
 1

	)

221 #i‡((!
deföed
 
__STRICT_ANSI__
 || (
_XOPEN_SOURCE
 - 0) >= 500) && \

222 !
deföed
 
_POSIX_SOURCE
 && !deföed 
_POSIX_C_SOURCE
)

223 
	#_POSIX_SOURCE
 1

	)

224 #i‡
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

225 
	#_POSIX_C_SOURCE
 2

	)

226 #ñi‡
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

227 
	#_POSIX_C_SOURCE
 199506L

	)

228 #ñi‡
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

229 
	#_POSIX_C_SOURCE
 200112L

	)

231 
	#_POSIX_C_SOURCE
 200809L

	)

233 
	#__USE_POSIX_IMPLICITLY
 1

	)

236 #i‡
deföed
 
_POSIX_SOURCE
 || 
_POSIX_C_SOURCE
 >1 || deföed 
_XOPEN_SOURCE


237 
	#__USE_POSIX
 1

	)

240 #i‡
deföed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >2 || deföed 
_XOPEN_SOURCE


241 
	#__USE_POSIX2
 1

	)

244 #i‡(
_POSIX_C_SOURCE
 - 0) >= 199309L

245 
	#__USE_POSIX199309
 1

	)

248 #i‡(
_POSIX_C_SOURCE
 - 0) >= 199506L

249 
	#__USE_POSIX199506
 1

	)

252 #i‡(
_POSIX_C_SOURCE
 - 0) >= 200112L

253 
	#__USE_XOPEN2K
 1

	)

254 #unde‡
__USE_ISOC95


255 
	#__USE_ISOC95
 1

	)

256 #unde‡
__USE_ISOC99


257 
	#__USE_ISOC99
 1

	)

260 #i‡(
_POSIX_C_SOURCE
 - 0) >= 200809L

261 
	#__USE_XOPEN2K8
 1

	)

262 #unde‡
_ATFILE_SOURCE


263 
	#_ATFILE_SOURCE
 1

	)

266 #ifdef 
_XOPEN_SOURCE


267 
	#__USE_XOPEN
 1

	)

268 #i‡(
_XOPEN_SOURCE
 - 0) >= 500

269 
	#__USE_XOPEN_EXTENDED
 1

	)

270 
	#__USE_UNIX98
 1

	)

271 #unde‡
_LARGEFILE_SOURCE


272 
	#_LARGEFILE_SOURCE
 1

	)

273 #i‡(
_XOPEN_SOURCE
 - 0) >= 600

274 #i‡(
_XOPEN_SOURCE
 - 0) >= 700

275 
	#__USE_XOPEN2K8
 1

	)

276 
	#__USE_XOPEN2K8XSI
 1

	)

278 
	#__USE_XOPEN2K
 1

	)

279 
	#__USE_XOPEN2KXSI
 1

	)

280 #unde‡
__USE_ISOC95


281 
	#__USE_ISOC95
 1

	)

282 #unde‡
__USE_ISOC99


283 
	#__USE_ISOC99
 1

	)

286 #ifde‡
_XOPEN_SOURCE_EXTENDED


287 
	#__USE_XOPEN_EXTENDED
 1

	)

292 #ifde‡
_LARGEFILE_SOURCE


293 
	#__USE_LARGEFILE
 1

	)

296 #ifde‡
_LARGEFILE64_SOURCE


297 
	#__USE_LARGEFILE64
 1

	)

300 #i‡
deföed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

301 
	#__USE_FILE_OFFSET64
 1

	)

304 #i‡
deföed
 
_BSD_SOURCE
 || deföed 
_SVID_SOURCE


305 
	#__USE_MISC
 1

	)

308 #ifdef 
_BSD_SOURCE


309 
	#__USE_BSD
 1

	)

312 #ifdef 
_SVID_SOURCE


313 
	#__USE_SVID
 1

	)

316 #ifdef 
_ATFILE_SOURCE


317 
	#__USE_ATFILE
 1

	)

320 #ifdef 
_GNU_SOURCE


321 
	#__USE_GNU
 1

	)

324 #i‡
deföed
 
_REENTRANT
 || deföed 
_THREAD_SAFE


325 
	#__USE_REENTRANT
 1

	)

328 #i‡
deföed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0 \

329 && 
__GNUC_PREREQ
 (4, 1Ë&& 
deföed
 
	g__OPTIMIZE__
 && __OPTIMIZE__ > 0

330 #i‡
_FORTIFY_SOURCE
 > 1

331 
	#__USE_FORTIFY_LEVEL
 2

	)

333 
	#__USE_FORTIFY_LEVEL
 1

	)

336 
	#__USE_FORTIFY_LEVEL
 0

	)

341 
	~<°dc-¥edef.h
>

349 #unde‡
__GNU_LIBRARY__


350 
	#__GNU_LIBRARY__
 6

	)

354 
	#__GLIBC__
 2

	)

355 
	#__GLIBC_MINOR__
 17

	)

357 
	#__GLIBC_PREREQ
(
maj
, 
mö
) \

358 ((
__GLIBC__
 << 16Ë+ 
__GLIBC_MINOR__
 >((
maj
Ë<< 16Ë+ (
mö
))

	)

361 #i‡
deföed
 
__GNUC__
 \

362 || (
deföed
 
	g__PGI
 && deföed 
	g__i386__
 ) \

363 || (
deföed
 
	g__INTEL_COMPILER
 && (deföed 
	g__i386__
 || deföed 
	g__ü64__
)) \

364 || (
deföed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L)

365 
	#__GLIBC_HAVE_LONG_LONG
 1

	)

369 #i‚de‡
__ASSEMBLER__


370 #i‚de‡
_SYS_CDEFS_H


371 
	~<sys/cdefs.h
>

376 #i‡
deföed
 
__USE_FILE_OFFSET64
 && !deföed 
__REDIRECT


377 
	#__USE_LARGEFILE
 1

	)

378 
	#__USE_LARGEFILE64
 1

	)

384 #i‡
__GNUC_PREREQ
 (2, 7Ë&& 
deföed
 
__OPTIMIZE__
 \

385 && !
deföed
 
	g__OPTIMIZE_SIZE__
 && !deföed 
	g__NO_INLINE__
 \

386 && 
deföed
 
	g__exã∫_ölöe


387 
	#__USE_EXTERN_INLINES
 1

	)

395 
	~<gnu/°ubs.h
>

	@/usr/include/getopt.h

20 #i‚de‡
_GETOPT_H


22 #i‚de‡
__√ed_gë›t


23 
	#_GETOPT_H
 1

	)

33 #i‡!
deföed
 
__GNU_LIBRARY__


34 
	~<˘y≥.h
>

37 #i‚de‡
__THROW


38 #i‚de‡
__GNUC_PREREQ


39 
	#__GNUC_PREREQ
(
maj
, 
mö
Ë(0)

	)

41 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (2,8)

42 
	#__THROW
 
	`throw
 ()

	)

44 
	#__THROW


	)

48 #ifdef 
__˝lu•lus


58 *
›èrg
;

72 
›töd
;

77 
›ãº
;

81 
›t›t
;

83 #i‚de‡
__√ed_gë›t


105 
	s›ti⁄


107 c⁄° *
	g«me
;

110 
	ghas_¨g
;

111 *
	gÊag
;

112 
	gvÆ
;

117 
	#no_¨gumít
 0

	)

118 
	#ªquúed_¨gumít
 1

	)

119 
	#›ti⁄Æ_¨gumít
 2

	)

147 #ifde‡
__GNU_LIBRARY__


151 
gë›t
 (
___¨gc
, *c⁄° *
___¨gv
, c⁄° *
__sh‹t›ts
)

152 
__THROW
;

154 #i‡
deföed
 
__√ed_gë›t
 && deföed 
__USE_POSIX2
 \

155 && !
deföed
 
	g__USE_POSIX_IMPLICITLY
 && !deföed 
	g__USE_GNU


159 #ifde‡
__REDIRECT


160 
__REDIRECT_NTH
 (
gë›t
, (
___¨gc
, *c⁄° *
___¨gv
,

161 c⁄° *
__sh‹t›ts
),

162 
__posix_gë›t
);

164 
__posix_gë›t
 (
___¨gc
, *c⁄° *
___¨gv
,

165 c⁄° *
__sh‹t›ts
Ë
__THROW
;

166 
	#gë›t
 
__posix_gë›t


	)

170 
gë›t
 ();

173 #i‚de‡
__√ed_gë›t


174 
gë›t_l⁄g
 (
___¨gc
, *c⁄° *
___¨gv
,

175 c⁄° *
__sh‹t›ts
,

176 c⁄° 
›ti⁄
 *
__l⁄g›ts
, *
__l⁄göd
)

177 
__THROW
;

178 
gë›t_l⁄g_⁄ly
 (
___¨gc
, *c⁄° *
___¨gv
,

179 c⁄° *
__sh‹t›ts
,

180 c⁄° 
›ti⁄
 *
__l⁄g›ts
, *
__l⁄göd
)

181 
__THROW
;

185 #ifdef 
__˝lu•lus


190 #unde‡
__√ed_gë›t


	@/usr/include/libio.h

29 #i‚de‡
_IO_STDIO_H


30 
	#_IO_STDIO_H


	)

32 
	~<_G_c⁄fig.h
>

34 
	#_IO_Âos_t
 
_G_Âos_t


	)

35 
	#_IO_Âos64_t
 
_G_Âos64_t


	)

36 
	#_IO_size_t
 
size_t


	)

37 
	#_IO_ssize_t
 
__ssize_t


	)

38 
	#_IO_off_t
 
__off_t


	)

39 
	#_IO_off64_t
 
__off64_t


	)

40 
	#_IO_pid_t
 
__pid_t


	)

41 
	#_IO_uid_t
 
__uid_t


	)

42 
	#_IO_ic⁄v_t
 
_G_ic⁄v_t


	)

43 
	#_IO_HAVE_ST_BLKSIZE
 
_G_HAVE_ST_BLKSIZE


	)

44 
	#_IO_BUFSIZ
 
_G_BUFSIZ


	)

45 
	#_IO_va_li°
 
_G_va_li°


	)

46 
	#_IO_wöt_t
 
wöt_t


	)

49 
	#__√ed___va_li°


	)

50 
	~<°d¨g.h
>

51 #ifde‡
__GNUC_VA_LIST


52 #unde‡
_IO_va_li°


53 
	#_IO_va_li°
 
__gnuc_va_li°


	)

56 #i‚de‡
__P


57 
	~<sys/cdefs.h
>

60 
	#_IO_UNIFIED_JUMPTABLES
 1

	)

62 #i‚de‡
EOF


63 
	#EOF
 (-1)

	)

65 #i‚de‡
NULL


66 #i‡
deföed
 
__GNUG__
 && \

67 (
	g__GNUC__
 > 2 || (__GNUC__ =2 && 
__GNUC_MINOR__
 >= 8))

68 
	#NULL
 (
__nuŒ
)

	)

70 #i‡!
deföed
(
__˝lu•lus
)

71 
	#NULL
 ((*)0)

	)

73 
	#NULL
 (0)

	)

78 
	#_IOS_INPUT
 1

	)

79 
	#_IOS_OUTPUT
 2

	)

80 
	#_IOS_ATEND
 4

	)

81 
	#_IOS_APPEND
 8

	)

82 
	#_IOS_TRUNC
 16

	)

83 
	#_IOS_NOCREATE
 32

	)

84 
	#_IOS_NOREPLACE
 64

	)

85 
	#_IOS_BIN
 128

	)

93 
	#_IO_MAGIC
 0xFBAD0000

	)

94 
	#_OLD_STDIO_MAGIC
 0xFABC0000

	)

95 
	#_IO_MAGIC_MASK
 0xFFFF0000

	)

96 
	#_IO_USER_BUF
 1

	)

97 
	#_IO_UNBUFFERED
 2

	)

98 
	#_IO_NO_READS
 4

	)

99 
	#_IO_NO_WRITES
 8

	)

100 
	#_IO_EOF_SEEN
 0x10

	)

101 
	#_IO_ERR_SEEN
 0x20

	)

102 
	#_IO_DELETE_DONT_CLOSE
 0x40

	)

103 
	#_IO_LINKED
 0x80

	)

104 
	#_IO_IN_BACKUP
 0x100

	)

105 
	#_IO_LINE_BUF
 0x200

	)

106 
	#_IO_TIED_PUT_GET
 0x400

	)

107 
	#_IO_CURRENTLY_PUTTING
 0x800

	)

108 
	#_IO_IS_APPENDING
 0x1000

	)

109 
	#_IO_IS_FILEBUF
 0x2000

	)

110 
	#_IO_BAD_SEEN
 0x4000

	)

111 
	#_IO_USER_LOCK
 0x8000

	)

113 
	#_IO_FLAGS2_MMAP
 1

	)

114 
	#_IO_FLAGS2_NOTCANCEL
 2

	)

115 #ifde‡
_LIBC


116 
	#_IO_FLAGS2_FORTIFY
 4

	)

118 
	#_IO_FLAGS2_USER_WBUF
 8

	)

119 #ifde‡
_LIBC


120 
	#_IO_FLAGS2_SCANF_STD
 16

	)

121 
	#_IO_FLAGS2_NOCLOSE
 32

	)

122 
	#_IO_FLAGS2_CLOEXEC
 64

	)

126 
	#_IO_SKIPWS
 01

	)

127 
	#_IO_LEFT
 02

	)

128 
	#_IO_RIGHT
 04

	)

129 
	#_IO_INTERNAL
 010

	)

130 
	#_IO_DEC
 020

	)

131 
	#_IO_OCT
 040

	)

132 
	#_IO_HEX
 0100

	)

133 
	#_IO_SHOWBASE
 0200

	)

134 
	#_IO_SHOWPOINT
 0400

	)

135 
	#_IO_UPPERCASE
 01000

	)

136 
	#_IO_SHOWPOS
 02000

	)

137 
	#_IO_SCIENTIFIC
 04000

	)

138 
	#_IO_FIXED
 010000

	)

139 
	#_IO_UNITBUF
 020000

	)

140 
	#_IO_STDIO
 040000

	)

141 
	#_IO_DONT_CLOSE
 0100000

	)

142 
	#_IO_BOOLALPHA
 0200000

	)

145 
_IO_jump_t
; 
	g_IO_FILE
;

148 #ifde‡
_IO_MTSAFE_IO


149 #i‡
deföed
 
__GLIBC__
 && __GLIBC__ >= 2

150 
	~<bôs/°dio-lock.h
>

155 
	t_IO_lock_t
;

161 
	s_IO_m¨kî
 {

162 
_IO_m¨kî
 *
	m_√xt
;

163 
_IO_FILE
 *
	m_sbuf
;

167 
	m_pos
;

169 
£t_°ªampos
(
°ªampos
 
•
Ë{ 
	m_•os
 = sp; }

170 
£t_off£t
(
off£t
Ë{ 
	m_pos
 = off£t; 
	m_•os
 = (
°ªampos
)(-2); }

171 
	mpublic
:

172 
°ªamm¨kî
(
°ªambuf
 *
sb
);

173 ~
°ªamm¨kî
();

174 
ßvög
(Ë{  
	m_•os
 == -2; }

175 
dñè
(
°ªamm¨kî
&);

176 
dñè
();

181 
	e__codecvt_ªsu…


183 
	m__codecvt_ok
,

184 
	m__codecvt_∑πül
,

185 
	m__codecvt_îr‹
,

186 
	m__codecvt_noc⁄v


189 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


192 
	s_IO_codecvt


194 (*
	m__codecvt_de°r
Ë(
	m_IO_codecvt
 *);

195 
__codecvt_ªsu…
 (*
__codecvt_do_out
Ë(
	m_IO_codecvt
 *,

196 
	m__mb°©e_t
 *,

197 c⁄° 
	mwch¨_t
 *,

198 c⁄° 
	mwch¨_t
 *,

199 c⁄° 
	mwch¨_t
 **, *,

201 
__codecvt_ªsu…
 (*
__codecvt_do_unshi·
Ë(
	m_IO_codecvt
 *,

202 
	m__mb°©e_t
 *, *,

204 
__codecvt_ªsu…
 (*
__codecvt_do_ö
Ë(
	m_IO_codecvt
 *,

205 
	m__mb°©e_t
 *,

207 c⁄° **, 
	mwch¨_t
 *,

208 
	mwch¨_t
 *, wchar_t **);

209 (*
	m__codecvt_do_ícodög
Ë(
	m_IO_codecvt
 *);

210 (*
	m__codecvt_do_Æways_noc⁄v
Ë(
	m_IO_codecvt
 *);

211 (*
	m__codecvt_do_Àngth
Ë(
	m_IO_codecvt
 *, 
	m__mb°©e_t
 *,

212 c⁄° *, c⁄° *, 
	m_IO_size_t
);

213 (*
	m__codecvt_do_max_Àngth
Ë(
	m_IO_codecvt
 *);

215 
_IO_ic⁄v_t
 
	m__cd_ö
;

216 
_IO_ic⁄v_t
 
	m__cd_out
;

220 
	s_IO_wide_d©a


222 
wch¨_t
 *
	m_IO_ªad_±r
;

223 
wch¨_t
 *
	m_IO_ªad_íd
;

224 
wch¨_t
 *
	m_IO_ªad_ba£
;

225 
wch¨_t
 *
	m_IO_wrôe_ba£
;

226 
wch¨_t
 *
	m_IO_wrôe_±r
;

227 
wch¨_t
 *
	m_IO_wrôe_íd
;

228 
wch¨_t
 *
	m_IO_buf_ba£
;

229 
wch¨_t
 *
	m_IO_buf_íd
;

231 
wch¨_t
 *
	m_IO_ßve_ba£
;

232 
wch¨_t
 *
	m_IO_backup_ba£
;

234 
wch¨_t
 *
	m_IO_ßve_íd
;

236 
__mb°©e_t
 
	m_IO_°©e
;

237 
__mb°©e_t
 
	m_IO_œ°_°©e
;

238 
_IO_codecvt
 
	m_codecvt
;

240 
wch¨_t
 
	m_sh‹tbuf
[1];

242 c⁄° 
_IO_jump_t
 *
	m_wide_vèbÀ
;

246 
	s_IO_FILE
 {

247 
	m_Êags
;

248 
	#_IO_fûe_Êags
 
_Êags


	)

252 * 
	m_IO_ªad_±r
;

253 * 
	m_IO_ªad_íd
;

254 * 
	m_IO_ªad_ba£
;

255 * 
	m_IO_wrôe_ba£
;

256 * 
	m_IO_wrôe_±r
;

257 * 
	m_IO_wrôe_íd
;

258 * 
	m_IO_buf_ba£
;

259 * 
	m_IO_buf_íd
;

261 *
	m_IO_ßve_ba£
;

262 *
	m_IO_backup_ba£
;

263 *
	m_IO_ßve_íd
;

265 
_IO_m¨kî
 *
	m_m¨kîs
;

267 
_IO_FILE
 *
	m_chaö
;

269 
	m_fûío
;

271 
	m_blksize
;

273 
	m_Êags2
;

275 
_IO_off_t
 
	m_ﬁd_off£t
;

277 
	#__HAVE_COLUMN


	)

279 
	m_cur_cﬁumn
;

280 sig√d 
	m_vèbÀ_off£t
;

281 
	m_sh‹tbuf
[1];

285 
_IO_lock_t
 *
	m_lock
;

286 #ifde‡
_IO_USE_OLD_IO_FILE


289 
	s_IO_FILE_com∂ëe


291 
_IO_FILE
 
	m_fûe
;

293 #i‡
deföed
 
_G_IO_IO_FILE_VERSION
 && _G_IO_IO_FILE_VERSION == 0x20001

294 
_IO_off64_t
 
	m_off£t
;

295 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


297 
_IO_codecvt
 *
	m_codecvt
;

298 
_IO_wide_d©a
 *
	m_wide_d©a
;

299 
_IO_FILE
 *
	m_‰ìªs_li°
;

300 *
	m_‰ìªs_buf
;

301 
size_t
 
	m_‰ìªs_size
;

303 *
	m__∑d1
;

304 *
	m__∑d2
;

305 *
	m__∑d3
;

306 *
	m__∑d4
;

307 
size_t
 
	m__∑d5
;

309 
	m_mode
;

311 
	m_unu£d2
[15 *  (Ë- 4 *  (*Ë-  (
size_t
)];

315 #i‚de‡
__˝lu•lus


316 
_IO_FILE
 
	t_IO_FILE
;

319 
	g_IO_FILE_∂us
;

321 
_IO_FILE_∂us
 
_IO_2_1_°dö_
;

322 
_IO_FILE_∂us
 
_IO_2_1_°dout_
;

323 
_IO_FILE_∂us
 
_IO_2_1_°dîr_
;

324 #i‚de‡
_LIBC


325 
	#_IO_°dö
 ((
_IO_FILE
*)(&
_IO_2_1_°dö_
))

	)

326 
	#_IO_°dout
 ((
_IO_FILE
*)(&
_IO_2_1_°dout_
))

	)

327 
	#_IO_°dîr
 ((
_IO_FILE
*)(&
_IO_2_1_°dîr_
))

	)

329 
_IO_FILE
 *
_IO_°dö
 
©åibuã_hiddí
;

330 
_IO_FILE
 *
_IO_°dout
 
©åibuã_hiddí
;

331 
_IO_FILE
 *
_IO_°dîr
 
©åibuã_hiddí
;

339 
__ssize_t
 
	t__io_ªad_‚
 (*
	t__cookõ
, *
	t__buf
, 
	tsize_t
 
	t__nbyãs
);

347 
__ssize_t
 
	t__io_wrôe_‚
 (*
	t__cookõ
, c⁄° *
	t__buf
,

348 
	tsize_t
 
	t__n
);

356 
	t__io_£ek_‚
 (*
	t__cookõ
, 
	t_IO_off64_t
 *
	t__pos
, 
	t__w
);

359 
	t__io_˛o£_‚
 (*
	t__cookõ
);

362 #ifde‡
_GNU_SOURCE


364 
__io_ªad_‚
 
	tcookõ_ªad_fun˘i⁄_t
;

365 
__io_wrôe_‚
 
	tcookõ_wrôe_fun˘i⁄_t
;

366 
__io_£ek_‚
 
	tcookõ_£ek_fun˘i⁄_t
;

367 
__io_˛o£_‚
 
	tcookõ_˛o£_fun˘i⁄_t
;

372 
__io_ªad_‚
 *
	mªad
;

373 
__io_wrôe_‚
 *
	mwrôe
;

374 
__io_£ek_‚
 *
	m£ek
;

375 
__io_˛o£_‚
 *
	m˛o£
;

376 } 
	t_IO_cookõ_io_fun˘i⁄s_t
;

377 
_IO_cookõ_io_fun˘i⁄s_t
 
	tcookõ_io_fun˘i⁄s_t
;

379 
	g_IO_cookõ_fûe
;

382 
_IO_cookõ_öô
 (
_IO_cookõ_fûe
 *
__cfûe
, 
__ªad_wrôe
,

383 *
__cookõ
, 
_IO_cookõ_io_fun˘i⁄s_t
 
__‚s
);

387 #ifde‡
__˝lu•lus


391 
__undîÊow
 (
_IO_FILE
 *);

392 
__uÊow
 (
_IO_FILE
 *);

393 
__ovîÊow
 (
_IO_FILE
 *, );

394 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


395 
_IO_wöt_t
 
__wundîÊow
 (
_IO_FILE
 *);

396 
_IO_wöt_t
 
__wuÊow
 (
_IO_FILE
 *);

397 
_IO_wöt_t
 
__wovîÊow
 (
_IO_FILE
 *, _IO_wint_t);

400 #i‡ 
__GNUC__
 >= 3

401 
	#_IO_BE
(
ex¥
, 
ªs
Ë
	`__buûtö_ex≥˘
 (”x¥),Ñes)

	)

403 
	#_IO_BE
(
ex¥
, 
ªs
Ë”x¥)

	)

406 
	#_IO_gëc_u∆ocked
(
_Â
) \

407 (
	`_IO_BE
 ((
_Â
)->
_IO_ªad_±r
 >(_Â)->
_IO_ªad_íd
, 0) \

408 ? 
	`__uÊow
 (
_Â
Ë: *(*Ë(_Â)->
_IO_ªad_±r
++)

	)

409 
	#_IO_≥ekc_u∆ocked
(
_Â
) \

410 (
	`_IO_BE
 ((
_Â
)->
_IO_ªad_±r
 >(_Â)->
_IO_ªad_íd
, 0) \

411 && 
	`__undîÊow
 (
_Â
Ë=
EOF
 ? EOF \

412 : *(*Ë(
_Â
)->
_IO_ªad_±r
)

	)

413 
	#_IO_putc_u∆ocked
(
_ch
, 
_Â
) \

414 (
	`_IO_BE
 ((
_Â
)->
_IO_wrôe_±r
 >(_Â)->
_IO_wrôe_íd
, 0) \

415 ? 
	`__ovîÊow
 (
_Â
, (Ë(
_ch
)) \

416 : (Ë(*(
_Â
)->
_IO_wrôe_±r
++ = (
_ch
)))

	)

418 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


419 
	#_IO_gëwc_u∆ocked
(
_Â
) \

420 (
	`_IO_BE
 ((
_Â
)->
_wide_d©a
 =
NULL
 \

421 || ((
_Â
)->
_wide_d©a
->
_IO_ªad_±r
 \

422 >(
_Â
)->
_wide_d©a
->
_IO_ªad_íd
), 0) \

423 ? 
	`__wuÊow
 (
_Â
Ë: (
_IO_wöt_t
Ë*(_Â)->
_wide_d©a
->
_IO_ªad_±r
++)

	)

424 
	#_IO_putwc_u∆ocked
(
_wch
, 
_Â
) \

425 (
	`_IO_BE
 ((
_Â
)->
_wide_d©a
 =
NULL
 \

426 || ((
_Â
)->
_wide_d©a
->
_IO_wrôe_±r
 \

427 >(
_Â
)->
_wide_d©a
->
_IO_wrôe_íd
), 0) \

428 ? 
	`__wovîÊow
 (
_Â
, 
_wch
) \

429 : (
_IO_wöt_t
Ë(*(
_Â
)->
_wide_d©a
->
_IO_wrôe_±r
++ = (
_wch
)))

	)

432 
	#_IO_„of_u∆ocked
(
__Â
Ë(((__Â)->
_Êags
 & 
_IO_EOF_SEEN
Ë!0)

	)

433 
	#_IO_„º‹_u∆ocked
(
__Â
Ë(((__Â)->
_Êags
 & 
_IO_ERR_SEEN
Ë!0)

	)

435 
_IO_gëc
 (
_IO_FILE
 *
__Â
);

436 
_IO_putc
 (
__c
, 
_IO_FILE
 *
__Â
);

437 
_IO_„of
 (
_IO_FILE
 *
__Â
Ë
__THROW
;

438 
_IO_„º‹
 (
_IO_FILE
 *
__Â
Ë
__THROW
;

440 
_IO_≥ekc_locked
 (
_IO_FILE
 *
__Â
);

443 
	#_IO_PENDING_OUTPUT_COUNT
(
_Â
) \

444 ((
_Â
)->
_IO_wrôe_±r
 - (_Â)->
_IO_wrôe_ba£
)

	)

446 
_IO_Êockfûe
 (
_IO_FILE
 *Ë
__THROW
;

447 
_IO_fu∆ockfûe
 (
_IO_FILE
 *Ë
__THROW
;

448 
_IO_·rylockfûe
 (
_IO_FILE
 *Ë
__THROW
;

450 #ifde‡
_IO_MTSAFE_IO


451 
	#_IO_≥ekc
(
_Â
Ë
	`_IO_≥ekc_locked
 (_Â)

	)

452 
	#_IO_Êockfûe
(
_Â
) \

453 i‡(((
_Â
)->
_Êags
 & 
_IO_USER_LOCK
Ë=0Ë
	`_IO_Êockfûe
 (_Â)

	)

454 
	#_IO_fu∆ockfûe
(
_Â
) \

455 i‡(((
_Â
)->
_Êags
 & 
_IO_USER_LOCK
Ë=0Ë
	`_IO_fu∆ockfûe
 (_Â)

	)

457 
	#_IO_≥ekc
(
_Â
Ë
	`_IO_≥ekc_u∆ocked
 (_Â)

	)

458 
	#_IO_Êockfûe
(
_Â
Ë

	)

459 
	#_IO_fu∆ockfûe
(
_Â
Ë

	)

460 
	#_IO_·rylockfûe
(
_Â
Ë

	)

461 
	#_IO_˛ónup_ªgi⁄_°¨t
(
_f˘
, 
_Â
Ë

	)

462 
	#_IO_˛ónup_ªgi⁄_íd
(
_Doô
Ë

	)

465 
_IO_vfsˇnf
 (
_IO_FILE
 * 
__ª°ri˘
, const * __restrict,

466 
_IO_va_li°
, *
__ª°ri˘
);

467 
_IO_vÂrötf
 (
_IO_FILE
 *
__ª°ri˘
, const *__restrict,

468 
_IO_va_li°
);

469 
_IO_ssize_t
 
_IO_∑dn
 (
_IO_FILE
 *, , _IO_ssize_t);

470 
_IO_size_t
 
_IO_sgën
 (
_IO_FILE
 *, *, _IO_size_t);

472 
_IO_off64_t
 
_IO_£ekoff
 (
_IO_FILE
 *, _IO_off64_t, , );

473 
_IO_off64_t
 
_IO_£ekpos
 (
_IO_FILE
 *, _IO_off64_t, );

475 
_IO_‰ì_backup_¨ó
 (
_IO_FILE
 *Ë
__THROW
;

477 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


478 
_IO_wöt_t
 
_IO_gëwc
 (
_IO_FILE
 *
__Â
);

479 
_IO_wöt_t
 
_IO_putwc
 (
wch¨_t
 
__wc
, 
_IO_FILE
 *
__Â
);

480 
_IO_fwide
 (
_IO_FILE
 *
__Â
, 
__mode
Ë
__THROW
;

481 #i‡
__GNUC__
 >= 2

484 #i‡
deföed
 
_LIBC
 && deföed 
SHARED


485 
	~<shlib-com∑t.h
>

486 #i‡
SHLIB_COMPAT
 (
libc
, 
GLIBC_2_0
, 
GLIBC_2_1
)

487 
	#_IO_fwide_maybe_öcom∑tibÀ
 \

488 (
	`__buûtö_ex≥˘
 (&
_IO_°dö_u£d
 =
NULL
, 0))

	)

489 c⁄° 
_IO_°dö_u£d
;

490 
wók_exã∫
 (
_IO_°dö_u£d
);

493 #i‚de‡
_IO_fwide_maybe_öcom∑tibÀ


494 
	#_IO_fwide_maybe_öcom∑tibÀ
 (0)

	)

498 
	#_IO_fwide
(
__Â
, 
__mode
) \

499 ({ 
__ªsu…
 = (
__mode
); \

500 i‡(
__ªsu…
 < 0 && ! 
_IO_fwide_maybe_öcom∑tibÀ
) \

502 i‡((
__Â
)->
_mode
 == 0) \

504 (
__Â
)->
_mode
 = -1; \

505 
__ªsu…
 = (
__Â
)->
_mode
; \

507 i‡(
	`__buûtö_c⁄°™t_p
 (
__mode
) && (__mode) == 0) \

508 
__ªsu…
 = 
_IO_fwide_maybe_öcom∑tibÀ
 ? -1 : (
__Â
)->
_mode
; \

510 
__ªsu…
 = 
	`_IO_fwide
 (
__Â
, __result); \

511 
__ªsu…
; })

	)

514 
_IO_vfwsˇnf
 (
_IO_FILE
 * 
__ª°ri˘
, c⁄° 
wch¨_t
 * __restrict,

515 
_IO_va_li°
, *
__ª°ri˘
);

516 
_IO_vfw¥ötf
 (
_IO_FILE
 *
__ª°ri˘
, c⁄° 
wch¨_t
 *__restrict,

517 
_IO_va_li°
);

518 
_IO_ssize_t
 
_IO_w∑dn
 (
_IO_FILE
 *, 
wöt_t
, _IO_ssize_t);

519 
_IO_‰ì_wbackup_¨ó
 (
_IO_FILE
 *Ë
__THROW
;

522 #ifde‡
__LDBL_COMPAT


523 
	~<bôs/libio-ldbl.h
>

526 #ifde‡
__˝lu•lus


	@/usr/include/linux/if_ether.h

21 #i‚de‡
_LINUX_IF_ETHER_H


22 
	#_LINUX_IF_ETHER_H


	)

24 
	~<löux/ty≥s.h
>

31 
	#ETH_ALEN
 6

	)

32 
	#ETH_HLEN
 14

	)

33 
	#ETH_ZLEN
 60

	)

34 
	#ETH_DATA_LEN
 1500

	)

35 
	#ETH_FRAME_LEN
 1514

	)

36 
	#ETH_FCS_LEN
 4

	)

42 
	#ETH_P_LOOP
 0x0060

	)

43 
	#ETH_P_PUP
 0x0200

	)

44 
	#ETH_P_PUPAT
 0x0201

	)

45 
	#ETH_P_IP
 0x0800

	)

46 
	#ETH_P_X25
 0x0805

	)

47 
	#ETH_P_ARP
 0x0806

	)

48 
	#ETH_P_BPQ
 0x08FF

	)

49 
	#ETH_P_IEEEPUP
 0x0a00

	)

50 
	#ETH_P_IEEEPUPAT
 0x0a01

	)

51 
	#ETH_P_BATMAN
 0x4305

	)

52 
	#ETH_P_DEC
 0x6000

	)

53 
	#ETH_P_DNA_DL
 0x6001

	)

54 
	#ETH_P_DNA_RC
 0x6002

	)

55 
	#ETH_P_DNA_RT
 0x6003

	)

56 
	#ETH_P_LAT
 0x6004

	)

57 
	#ETH_P_DIAG
 0x6005

	)

58 
	#ETH_P_CUST
 0x6006

	)

59 
	#ETH_P_SCA
 0x6007

	)

60 
	#ETH_P_TEB
 0x6558

	)

61 
	#ETH_P_RARP
 0x8035

	)

62 
	#ETH_P_ATALK
 0x809B

	)

63 
	#ETH_P_AARP
 0x80F3

	)

64 
	#ETH_P_8021Q
 0x8100

	)

65 
	#ETH_P_IPX
 0x8137

	)

66 
	#ETH_P_IPV6
 0x86DD

	)

67 
	#ETH_P_PAUSE
 0x8808

	)

68 
	#ETH_P_SLOW
 0x8809

	)

69 
	#ETH_P_WCCP
 0x883E

	)

71 
	#ETH_P_PPP_DISC
 0x8863

	)

72 
	#ETH_P_PPP_SES
 0x8864

	)

73 
	#ETH_P_MPLS_UC
 0x8847

	)

74 
	#ETH_P_MPLS_MC
 0x8848

	)

75 
	#ETH_P_ATMMPOA
 0x884¯

	)

76 
	#ETH_P_LINK_CTL
 0x886¯

	)

77 
	#ETH_P_ATMFATE
 0x8884

	)

80 
	#ETH_P_PAE
 0x888E

	)

81 
	#ETH_P_AOE
 0x88A2

	)

82 
	#ETH_P_8021AD
 0x88A8

	)

83 
	#ETH_P_802_EX1
 0x88B5

	)

84 
	#ETH_P_TIPC
 0x88CA

	)

85 
	#ETH_P_8021AH
 0x88E7

	)

86 
	#ETH_P_1588
 0x88F7

	)

87 
	#ETH_P_FCOE
 0x8906

	)

88 
	#ETH_P_TDLS
 0x890D

	)

89 
	#ETH_P_FIP
 0x8914

	)

90 
	#ETH_P_QINQ1
 0x9100

	)

91 
	#ETH_P_QINQ2
 0x9200

	)

92 
	#ETH_P_QINQ3
 0x9300

	)

93 
	#ETH_P_EDSA
 0xDADA

	)

94 
	#ETH_P_AF_IUCV
 0xFBFB

	)

100 
	#ETH_P_802_3
 0x0001

	)

101 
	#ETH_P_AX25
 0x0002

	)

102 
	#ETH_P_ALL
 0x0003

	)

103 
	#ETH_P_802_2
 0x0004

	)

104 
	#ETH_P_SNAP
 0x0005

	)

105 
	#ETH_P_DDCMP
 0x0006

	)

106 
	#ETH_P_WAN_PPP
 0x0007

	)

107 
	#ETH_P_PPP_MP
 0x0008

	)

108 
	#ETH_P_LOCALTALK
 0x0009

	)

109 
	#ETH_P_CAN
 0x000C

	)

110 
	#ETH_P_CANFD
 0x000D

	)

111 
	#ETH_P_PPPTALK
 0x0010

	)

112 
	#ETH_P_TR_802_2
 0x0011

	)

113 
	#ETH_P_MOBITEX
 0x0015

	)

114 
	#ETH_P_CONTROL
 0x0016

	)

115 
	#ETH_P_IRDA
 0x0017

	)

116 
	#ETH_P_ECONET
 0x0018

	)

117 
	#ETH_P_HDLC
 0x0019

	)

118 
	#ETH_P_ARCNET
 0x001A

	)

119 
	#ETH_P_DSA
 0x001B

	)

120 
	#ETH_P_TRAILER
 0x001C

	)

121 
	#ETH_P_PHONET
 0x00F5

	)

122 
	#ETH_P_IEEE802154
 0x00F6

	)

123 
	#ETH_P_CAIF
 0x00F7

	)

129 
	sëhhdr
 {

130 
	mh_de°
[
ETH_ALEN
];

131 
	mh_sour˚
[
ETH_ALEN
];

132 
__be16
 
	mh_¥Ÿo
;

133 } 
__©åibuã__
((
∑cked
));

	@/usr/include/net/ethernet.h

21 #i‚de‡
__NET_ETHERNET_H


22 
	#__NET_ETHERNET_H
 1

	)

24 
	~<sys/cdefs.h
>

25 
	~<sys/ty≥s.h
>

26 
	~<löux/if_ëhî.h
>

28 
__BEGIN_DECLS


32 
	sëhî_addr


34 
u_öt8_t
 
	mëhî_addr_o˘ë
[
ETH_ALEN
];

35 } 
__©åibuã__
 ((
__∑cked__
));

38 
	sëhî_hódî


40 
u_öt8_t
 
	mëhî_dho°
[
ETH_ALEN
];

41 
u_öt8_t
 
	mëhî_sho°
[
ETH_ALEN
];

42 
u_öt16_t
 
	mëhî_ty≥
;

43 } 
__©åibuã__
 ((
__∑cked__
));

46 
	#ETHERTYPE_PUP
 0x0200

	)

47 
	#ETHERTYPE_SPRITE
 0x0500

	)

48 
	#ETHERTYPE_IP
 0x0800

	)

49 
	#ETHERTYPE_ARP
 0x0806

	)

50 
	#ETHERTYPE_REVARP
 0x8035

	)

51 
	#ETHERTYPE_AT
 0x809B

	)

52 
	#ETHERTYPE_AARP
 0x80F3

	)

53 
	#ETHERTYPE_VLAN
 0x8100

	)

54 
	#ETHERTYPE_IPX
 0x8137

	)

55 
	#ETHERTYPE_IPV6
 0x86dd

	)

56 
	#ETHERTYPE_LOOPBACK
 0x9000

	)

59 
	#ETHER_ADDR_LEN
 
ETH_ALEN


	)

60 
	#ETHER_TYPE_LEN
 2

	)

61 
	#ETHER_CRC_LEN
 4

	)

62 
	#ETHER_HDR_LEN
 
ETH_HLEN


	)

63 
	#ETHER_MIN_LEN
 (
ETH_ZLEN
 + 
ETHER_CRC_LEN
Ë

	)

64 
	#ETHER_MAX_LEN
 (
ETH_FRAME_LEN
 + 
ETHER_CRC_LEN
Ë

	)

67 
	#ETHER_IS_VALID_LEN
(
foo
) \

68 ((
foo
Ë>
ETHER_MIN_LEN
 && (fooË<
ETHER_MAX_LEN
)

	)

75 
	#ETHERTYPE_TRAIL
 0x1000

	)

76 
	#ETHERTYPE_NTRAILER
 16

	)

78 
	#ETHERMTU
 
ETH_DATA_LEN


	)

79 
	#ETHERMIN
 (
ETHER_MIN_LEN
 - 
ETHER_HDR_LEN
 - 
ETHER_CRC_LEN
)

	)

81 
	g__END_DECLS


	@/usr/include/net/if_arp.h

22 #i‚de‡
_NET_IF_ARP_H


24 
	#_NET_IF_ARP_H
 1

	)

25 
	~<sys/cdefs.h
>

27 
	~<sys/ty≥s.h
>

28 
	~<sys/sockë.h
>

30 
	g__BEGIN_DECLS


33 
	#MAX_ADDR_LEN
 7

	)

39 
	#ARPOP_REQUEST
 1

	)

40 
	#ARPOP_REPLY
 2

	)

41 
	#ARPOP_RREQUEST
 3

	)

42 
	#ARPOP_RREPLY
 4

	)

43 
	#ARPOP_InREQUEST
 8

	)

44 
	#ARPOP_InREPLY
 9

	)

45 
	#ARPOP_NAK
 10

	)

54 
	s¨phdr


56 
	m¨_hrd
;

57 
	m¨_¥o
;

58 
	m¨_h 
;

59 
	m¨_∂n
;

60 
	m¨_›
;

64 
	m__¨_sha
[
ETH_ALEN
];

65 
	m__¨_sù
[4];

66 
	m__¨_tha
[
ETH_ALEN
];

67 
	m__¨_tù
[4];

73 
	#ARPHRD_NETROM
 0

	)

74 
	#ARPHRD_ETHER
 1

	)

75 
	#ARPHRD_EETHER
 2

	)

76 
	#ARPHRD_AX25
 3

	)

77 
	#ARPHRD_PRONET
 4

	)

78 
	#ARPHRD_CHAOS
 5

	)

79 
	#ARPHRD_IEEE802
 6

	)

80 
	#ARPHRD_ARCNET
 7

	)

81 
	#ARPHRD_APPLETLK
 8

	)

82 
	#ARPHRD_DLCI
 15

	)

83 
	#ARPHRD_ATM
 19

	)

84 
	#ARPHRD_METRICOM
 23

	)

85 
	#ARPHRD_IEEE1394
 24

	)

86 
	#ARPHRD_EUI64
 27

	)

87 
	#ARPHRD_INFINIBAND
 32

	)

90 
	#ARPHRD_SLIP
 256

	)

91 
	#ARPHRD_CSLIP
 257

	)

92 
	#ARPHRD_SLIP6
 258

	)

93 
	#ARPHRD_CSLIP6
 259

	)

94 
	#ARPHRD_RSRVD
 260

	)

95 
	#ARPHRD_ADAPT
 264

	)

96 
	#ARPHRD_ROSE
 270

	)

97 
	#ARPHRD_X25
 271

	)

98 
	#ARPHRD_HWX25
 272

	)

99 
	#ARPHRD_PPP
 512

	)

100 
	#ARPHRD_CISCO
 513

	)

101 
	#ARPHRD_HDLC
 
ARPHRD_CISCO


	)

102 
	#ARPHRD_LAPB
 516

	)

103 
	#ARPHRD_DDCMP
 517

	)

104 
	#ARPHRD_RAWHDLC
 518

	)

106 
	#ARPHRD_TUNNEL
 768

	)

107 
	#ARPHRD_TUNNEL6
 769

	)

108 
	#ARPHRD_FRAD
 770

	)

109 
	#ARPHRD_SKIP
 771

	)

110 
	#ARPHRD_LOOPBACK
 772

	)

111 
	#ARPHRD_LOCALTLK
 773

	)

112 
	#ARPHRD_FDDI
 774

	)

113 
	#ARPHRD_BIF
 775

	)

114 
	#ARPHRD_SIT
 776

	)

115 
	#ARPHRD_IPDDP
 777

	)

116 
	#ARPHRD_IPGRE
 778

	)

117 
	#ARPHRD_PIMREG
 779

	)

118 
	#ARPHRD_HIPPI
 780

	)

119 
	#ARPHRD_ASH
 781

	)

120 
	#ARPHRD_ECONET
 782

	)

121 
	#ARPHRD_IRDA
 783

	)

122 
	#ARPHRD_FCPP
 784

	)

123 
	#ARPHRD_FCAL
 785

	)

124 
	#ARPHRD_FCPL
 786

	)

125 
	#ARPHRD_FCFABRIC
 787

	)

126 
	#ARPHRD_IEEE802_TR
 800

	)

127 
	#ARPHRD_IEEE80211
 801

	)

128 
	#ARPHRD_IEEE80211_PRISM
 802

	)

129 
	#ARPHRD_IEEE80211_RADIOTAP
 803

	)

130 
	#ARPHRD_IEEE802154
 804

	)

131 
	#ARPHRD_IEEE802154_PHY
 805

	)

133 
	#ARPHRD_VOID
 0xFFFF

	)

134 
	#ARPHRD_NONE
 0xFFFE

	)

138 
	s¨¥eq


140 
sockaddr
 
	m¨p_∑
;

141 
sockaddr
 
	m¨p_ha
;

142 
	m¨p_Êags
;

143 
sockaddr
 
	m¨p_√tmask
;

144 
	m¨p_dev
[16];

147 
	s¨¥eq_ﬁd


149 
sockaddr
 
	m¨p_∑
;

150 
sockaddr
 
	m¨p_ha
;

151 
	m¨p_Êags
;

152 
sockaddr
 
	m¨p_√tmask
;

156 
	#ATF_COM
 0x02

	)

157 
	#ATF_PERM
 0x04

	)

158 
	#ATF_PUBL
 0x08

	)

159 
	#ATF_USETRAILERS
 0x10

	)

160 
	#ATF_NETMASK
 0x20

	)

162 
	#ATF_DONTPUB
 0x40

	)

163 
	#ATF_MAGIC
 0x80

	)

167 
	#ARPD_UPDATE
 0x01

	)

168 
	#ARPD_LOOKUP
 0x02

	)

169 
	#ARPD_FLUSH
 0x03

	)

171 
	s¨pd_ªque°


173 
	mªq
;

174 
u_öt32_t
 
	mù
;

175 
	mdev
;

176 
	m°amp
;

177 
	mupd©ed
;

178 
	mha
[
MAX_ADDR_LEN
];

181 
	g__END_DECLS


	@/usr/include/rpc/netdb.h

36 #i‚de‡
_RPC_NETDB_H


37 
	#_RPC_NETDB_H
 1

	)

39 
	~<„©uªs.h
>

41 
	#__√ed_size_t


	)

42 
	~<°ddef.h
>

44 
__BEGIN_DECLS


46 
	sΩ˚¡


48 *
	mr_«me
;

49 **
	mr_Æü£s
;

50 
	mr_numbî
;

53 
	$£åp˚¡
 (
__°ay›í
Ë
__THROW
;

54 
	$ídΩ˚¡
 (Ë
__THROW
;

55 
Ω˚¡
 *
	$gëΩcby«me
 (c⁄° *
__«me
Ë
__THROW
;

56 
Ω˚¡
 *
	$gëΩcbynumbî
 (
__numbî
Ë
__THROW
;

57 
Ω˚¡
 *
	$gëΩ˚¡
 (Ë
__THROW
;

59 #ifde‡
__USE_MISC


60 
	$gëΩcby«me_r
 (c⁄° *
__«me
, 
Ω˚¡
 *
__ªsu…_buf
,

61 *
__buf„r
, 
size_t
 
__buÊí
,

62 
Ω˚¡
 **
__ªsu…
Ë
__THROW
;

64 
	$gëΩcbynumbî_r
 (
__numbî
, 
Ω˚¡
 *
__ªsu…_buf
,

65 *
__buf„r
, 
size_t
 
__buÊí
,

66 
Ω˚¡
 **
__ªsu…
Ë
__THROW
;

68 
	$gëΩ˚¡_r
 (
Ω˚¡
 *
__ªsu…_buf
, *
__buf„r
,

69 
size_t
 
__buÊí
, 
Ω˚¡
 **
__ªsu…
Ë
__THROW
;

72 
__END_DECLS


	@/usr/include/xlocale.h

20 #i‚de‡
_XLOCALE_H


21 
	#_XLOCALE_H
 1

	)

27 
	s__loˇÀ_°ru˘


30 
__loˇÀ_d©a
 *
	m__loˇÀs
[13];

33 c⁄° *
	m__˘y≥_b
;

34 c⁄° *
	m__˘y≥_tﬁowî
;

35 c⁄° *
	m__˘y≥_touµî
;

38 c⁄° *
	m__«mes
[13];

39 } *
	t__loˇÀ_t
;

42 
__loˇÀ_t
 
	tloˇÀ_t
;

	@/usr/include/_G_config.h

4 #i‚de‡
_G_c⁄fig_h


5 
	#_G_c⁄fig_h
 1

	)

9 
	~<bôs/ty≥s.h
>

10 
	#__√ed_size_t


	)

11 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


12 
	#__√ed_wch¨_t


	)

14 
	#__√ed_NULL


	)

15 
	~<°ddef.h
>

16 
	#__√ed_mb°©e_t


	)

17 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


18 
	#__√ed_wöt_t


	)

20 
	~<wch¨.h
>

23 
__off_t
 
	m__pos
;

24 
__mb°©e_t
 
	m__°©e
;

25 } 
	t_G_Âos_t
;

28 
__off64_t
 
	m__pos
;

29 
__mb°©e_t
 
	m__°©e
;

30 } 
	t_G_Âos64_t
;

31 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


32 
	~<gc⁄v.h
>

35 
__gc⁄v_öfo
 
	m__cd
;

38 
__gc⁄v_öfo
 
	m__cd
;

39 
__gc⁄v_°ï_d©a
 
	m__d©a
;

40 } 
	m__comböed
;

41 } 
	t_G_ic⁄v_t
;

46 
	#_G_va_li°
 
__gnuc_va_li°


	)

48 
	#_G_HAVE_MMAP
 1

	)

49 
	#_G_HAVE_MREMAP
 1

	)

51 
	#_G_IO_IO_FILE_VERSION
 0x20001

	)

54 
	#_G_HAVE_ST_BLKSIZE
 
	`deföed
 (
_STATBUF_ST_BLKSIZE
)

	)

56 
	#_G_BUFSIZ
 8192

	)

	@/usr/include/arpa/nameser_compat.h

34 #i‚de‡
_ARPA_NAMESER_COMPAT_


35 
	#_ARPA_NAMESER_COMPAT_


	)

37 
	#__BIND
 19950621

	)

39 
	~<ídün.h
>

49 
	mid
 :16;

50 #i‡
BYTE_ORDER
 =
BIG_ENDIAN


52 
	mqr
: 1;

53 
	m›code
: 4;

54 
	mØ
: 1;

55 
	mtc
: 1;

56 
	mrd
: 1;

58 
	mø
: 1;

59 
	munu£d
 :1;

60 
	mad
: 1;

61 
	mcd
: 1;

62 
	mrcode
 :4;

64 #i‡
BYTE_ORDER
 =
LITTLE_ENDIAN
 || BYTE_ORDER =
PDP_ENDIAN


66 
	mrd
 :1;

67 
	mtc
 :1;

68 
	mØ
 :1;

69 
	m›code
 :4;

70 
	mqr
 :1;

72 
	mrcode
 :4;

73 
	mcd
: 1;

74 
	mad
: 1;

75 
	munu£d
 :1;

76 
	mø
 :1;

79 
	mqdcou¡
 :16;

80 
	m™cou¡
 :16;

81 
	mnscou¡
 :16;

82 
	m¨cou¡
 :16;

83 } 
	tHEADER
;

85 
	#PACKETSZ
 
NS_PACKETSZ


	)

86 
	#MAXDNAME
 
NS_MAXDNAME


	)

87 
	#MAXCDNAME
 
NS_MAXCDNAME


	)

88 
	#MAXLABEL
 
NS_MAXLABEL


	)

89 
	#HFIXEDSZ
 
NS_HFIXEDSZ


	)

90 
	#QFIXEDSZ
 
NS_QFIXEDSZ


	)

91 
	#RRFIXEDSZ
 
NS_RRFIXEDSZ


	)

92 
	#INT32SZ
 
NS_INT32SZ


	)

93 
	#INT16SZ
 
NS_INT16SZ


	)

94 
	#INT8SZ
 
NS_INT8SZ


	)

95 
	#INADDRSZ
 
NS_INADDRSZ


	)

96 
	#IN6ADDRSZ
 
NS_IN6ADDRSZ


	)

97 
	#INDIR_MASK
 
NS_CMPRSFLGS


	)

98 
	#NAMESERVER_PORT
 
NS_DEFAULTPORT


	)

100 
	#S_ZONE
 
ns_s_zn


	)

101 
	#S_PREREQ
 
ns_s_¥


	)

102 
	#S_UPDATE
 
ns_s_ud


	)

103 
	#S_ADDT
 
ns_s_¨


	)

105 
	#QUERY
 
ns_o_quîy


	)

106 
	#IQUERY
 
ns_o_iquîy


	)

107 
	#STATUS
 
ns_o_°©us


	)

108 
	#NS_NOTIFY_OP
 
ns_o_nŸify


	)

109 
	#NS_UPDATE_OP
 
ns_o_upd©e


	)

111 
	#NOERROR
 
ns_r_n€º‹


	)

112 
	#FORMERR
 
ns_r_f‹mîr


	)

113 
	#SERVFAIL
 
ns_r_£rvÁû


	)

114 
	#NXDOMAIN
 
ns_r_nxdomaö


	)

115 
	#NOTIMP
 
ns_r_nŸim∂


	)

116 
	#REFUSED
 
ns_r_ªfu£d


	)

117 
	#YXDOMAIN
 
ns_r_yxdomaö


	)

118 
	#YXRRSET
 
ns_r_yxº£t


	)

119 
	#NXRRSET
 
ns_r_nxº£t


	)

120 
	#NOTAUTH
 
ns_r_nŸauth


	)

121 
	#NOTZONE
 
ns_r_nŸz⁄e


	)

127 
	#DELETE
 
ns_u›_dñëe


	)

128 
	#ADD
 
ns_u›_add


	)

130 
	#T_A
 
ns_t_a


	)

131 
	#T_NS
 
ns_t_ns


	)

132 
	#T_MD
 
ns_t_md


	)

133 
	#T_MF
 
ns_t_mf


	)

134 
	#T_CNAME
 
ns_t_˙ame


	)

135 
	#T_SOA
 
ns_t_sﬂ


	)

136 
	#T_MB
 
ns_t_mb


	)

137 
	#T_MG
 
ns_t_mg


	)

138 
	#T_MR
 
ns_t_mr


	)

139 
	#T_NULL
 
ns_t_nuŒ


	)

140 
	#T_WKS
 
ns_t_wks


	)

141 
	#T_PTR
 
ns_t_±r


	)

142 
	#T_HINFO
 
ns_t_höfo


	)

143 
	#T_MINFO
 
ns_t_möfo


	)

144 
	#T_MX
 
ns_t_mx


	)

145 
	#T_TXT
 
ns_t_txt


	)

146 
	#T_RP
 
ns_t_Ω


	)

147 
	#T_AFSDB
 
ns_t_afsdb


	)

148 
	#T_X25
 
ns_t_x25


	)

149 
	#T_ISDN
 
ns_t_isdn


	)

150 
	#T_RT
 
ns_t_π


	)

151 
	#T_NSAP
 
ns_t_nßp


	)

152 
	#T_NSAP_PTR
 
ns_t_nßp_±r


	)

153 
	#T_SIG
 
ns_t_sig


	)

154 
	#T_KEY
 
ns_t_key


	)

155 
	#T_PX
 
ns_t_px


	)

156 
	#T_GPOS
 
ns_t_gpos


	)

157 
	#T_AAAA
 
ns_t_ØØ


	)

158 
	#T_LOC
 
ns_t_loc


	)

159 
	#T_NXT
 
ns_t_nxt


	)

160 
	#T_EID
 
ns_t_eid


	)

161 
	#T_NIMLOC
 
ns_t_nimloc


	)

162 
	#T_SRV
 
ns_t_§v


	)

163 
	#T_ATMA
 
ns_t_©ma


	)

164 
	#T_NAPTR
 
ns_t_«±r


	)

165 
	#T_A6
 
ns_t_a6


	)

166 
	#T_DNAME
 
ns_t_d«me


	)

167 
	#T_TSIG
 
ns_t_tsig


	)

168 
	#T_IXFR
 
ns_t_ix‰


	)

169 
	#T_AXFR
 
ns_t_ax‰


	)

170 
	#T_MAILB
 
ns_t_maûb


	)

171 
	#T_MAILA
 
ns_t_maûa


	)

172 
	#T_ANY
 
ns_t_™y


	)

174 
	#C_IN
 
ns_c_ö


	)

175 
	#C_CHAOS
 
ns_c_chaos


	)

176 
	#C_HS
 
ns_c_hs


	)

178 
	#C_NONE
 
ns_c_n⁄e


	)

179 
	#C_ANY
 
ns_c_™y


	)

181 
	#GETSHORT
 
NS_GET16


	)

182 
	#GETLONG
 
NS_GET32


	)

183 
	#PUTSHORT
 
NS_PUT16


	)

184 
	#PUTLONG
 
NS_PUT32


	)

	@/usr/include/linux/types.h

1 #i‚de‡
_LINUX_TYPES_H


2 
	#_LINUX_TYPES_H


	)

4 
	~<asm/ty≥s.h
>

6 #i‚de‡
__ASSEMBLY__


8 
	~<löux/posix_ty≥s.h
>

16 #ifde‡
__CHECKER__


17 
	#__bôwi£__
 
	`__©åibuã__
((
bôwi£
))

	)

19 
	#__bôwi£__


	)

21 #ifde‡
__CHECK_ENDIAN__


22 
	#__bôwi£
 
__bôwi£__


	)

24 
	#__bôwi£


	)

27 
__u16
 
	t__bôwi£
 
	t__À16
;

28 
__u16
 
	t__bôwi£
 
	t__be16
;

29 
__u32
 
	t__bôwi£
 
	t__À32
;

30 
__u32
 
	t__bôwi£
 
	t__be32
;

31 
__u64
 
	t__bôwi£
 
	t__À64
;

32 
__u64
 
	t__bôwi£
 
	t__be64
;

34 
__u16
 
	t__bôwi£
 
	t__sum16
;

35 
__u32
 
	t__bôwi£
 
	t__wsum
;

46 
	#__Æig√d_u64
 
__u64
 
	`__©åibuã__
((
	`Æig√d
(8)))

	)

47 
	#__Æig√d_be64
 
__be64
 
	`__©åibuã__
((
	`Æig√d
(8)))

	)

48 
	#__Æig√d_À64
 
__À64
 
	`__©åibuã__
((
	`Æig√d
(8)))

	)

	@/usr/include/stdc-predef.h

18 #i‚def 
_STDC_PREDEF_H


19 
	#_STDC_PREDEF_H
 1

	)

30 
	~<bôs/¥edefs.h
>

34 
	#__STDC_ISO_10646__
 201103L

	)

37 
	#__STDC_NO_THREADS__
 1

	)

	@/usr/include/gconv.h

22 #i‚de‡
_GCONV_H


23 
	#_GCONV_H
 1

	)

25 
	~<„©uªs.h
>

26 
	#__√ed_mb°©e_t


	)

27 
	#__√ed_wöt_t


	)

28 
	~<wch¨.h
>

29 
	#__√ed_size_t


	)

30 
	#__√ed_wch¨_t


	)

31 
	~<°ddef.h
>

34 
	#__UNKNOWN_10646_CHAR
 ((
wch¨_t
Ë0xfffd)

	)

39 
	m__GCONV_OK
 = 0,

40 
	m__GCONV_NOCONV
,

41 
	m__GCONV_NODB
,

42 
	m__GCONV_NOMEM
,

44 
	m__GCONV_EMPTY_INPUT
,

45 
	m__GCONV_FULL_OUTPUT
,

46 
	m__GCONV_ILLEGAL_INPUT
,

47 
	m__GCONV_INCOMPLETE_INPUT
,

49 
	m__GCONV_ILLEGAL_DESCRIPTOR
,

50 
	m__GCONV_INTERNAL_ERROR


57 
	m__GCONV_IS_LAST
 = 0x0001,

58 
	m__GCONV_IGNORE_ERRORS
 = 0x0002,

59 
	m__GCONV_SWAP
 = 0x0004

64 
	g__gc⁄v_°ï
;

65 
	g__gc⁄v_°ï_d©a
;

66 
	g__gc⁄v_lﬂded_obje˘
;

67 
	g__gc⁄v_å™s_d©a
;

71 (*
	t__gc⁄v_f˘
Ë(
	t__gc⁄v_°ï
 *, 
	t__gc⁄v_°ï_d©a
 *,

73 **, 
	tsize_t
 *, , );

76 
	$wöt_t
 (*
	t__gc⁄v_btowc_f˘
Ë(
	t__gc⁄v_°ï
 *, );

79 (*
	t__gc⁄v_öô_f˘
Ë(
	t__gc⁄v_°ï
 *);

80 (*
	t__gc⁄v_íd_f˘
Ë(
	t__gc⁄v_°ï
 *);

84 (*
	t__gc⁄v_å™s_f˘
Ë(
	t__gc⁄v_°ï
 *,

85 
	t__gc⁄v_°ï_d©a
 *, *,

89 
	tsize_t
 *);

92 (*
	t__gc⁄v_å™s_c⁄ãxt_f˘
) (*, const *,

97 (*
	t__gc⁄v_å™s_quîy_f˘
) (const *, const ***,

98 
	tsize_t
 *);

101 (*
	t__gc⁄v_å™s_öô_f˘
) (**, const *);

102 (*
	t__gc⁄v_å™s_íd_f˘
) (*);

104 
	s__gc⁄v_å™s_d©a


107 
__gc⁄v_å™s_f˘
 
__å™s_f˘
;

108 
__gc⁄v_å™s_c⁄ãxt_f˘
 
__å™s_c⁄ãxt_f˘
;

109 
__gc⁄v_å™s_íd_f˘
 
__å™s_íd_f˘
;

110 *
__d©a
;

111 
__gc⁄v_å™s_d©a
 *
__√xt
;

116 
	s__gc⁄v_°ï


118 
__gc⁄v_lﬂded_obje˘
 *
__shlib_h™dÀ
;

119 c⁄° *
__mod«me
;

121 
__cou¡î
;

123 *
__‰om_«me
;

124 *
__to_«me
;

126 
__gc⁄v_f˘
 
__f˘
;

127 
__gc⁄v_btowc_f˘
 
__btowc_f˘
;

128 
__gc⁄v_öô_f˘
 
__öô_f˘
;

129 
__gc⁄v_íd_f˘
 
__íd_f˘
;

133 
__mö_√eded_‰om
;

134 
__max_√eded_‰om
;

135 
__mö_√eded_to
;

136 
__max_√eded_to
;

139 
__°©eful
;

141 *
__d©a
;

146 
	s__gc⁄v_°ï_d©a


148 *
__outbuf
;

149 *
__outbu„nd
;

153 
__Êags
;

157 
__övoˇti⁄_cou¡î
;

161 
__öã∫Æ_u£
;

163 
__mb°©e_t
 *
__°©ï
;

164 
__mb°©e_t
 
__°©e
;

168 
__gc⁄v_å™s_d©a
 *
__å™s
;

173 
	s__gc⁄v_öfo


175 
size_t
 
__n°ïs
;

176 
__gc⁄v_°ï
 *
__°ïs
;

177 
__exãnsi⁄__
 
__gc⁄v_°ï_d©a
 
__d©a
 
__Êex¨r
;

178 } *
	t__gc⁄v_t
;

	@/usr/include/linux/posix_types.h

1 #i‚de‡
_LINUX_POSIX_TYPES_H


2 
	#_LINUX_POSIX_TYPES_H


	)

4 
	~<löux/°ddef.h
>

21 #unde‡
__FD_SETSIZE


22 
	#__FD_SETSIZE
 1024

	)

25 
	mfds_bôs
[
__FD_SETSIZE
 / (8 * ())];

26 } 
	t__kî√l_fd_£t
;

29 (*
	t__kî√l_sigh™dÀr_t
)();

32 
	t__kî√l_key_t
;

33 
	t__kî√l_mqd_t
;

35 
	~<asm/posix_ty≥s.h
>

	@/usr/include/wchar.h

23 #i‚de‡
_WCHAR_H


25 #i‡!
deföed
 
__√ed_mb°©e_t
 && !deföed 
__√ed_wöt_t


26 
	#_WCHAR_H
 1

	)

27 
	~<„©uªs.h
>

30 #ifde‡
_WCHAR_H


32 
	#__√ed___FILE


	)

33 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


34 
	#__√ed_FILE


	)

36 
	~<°dio.h
>

38 
	#__√ed___va_li°


	)

39 
	~<°d¨g.h
>

41 
	~<bôs/wch¨.h
>

44 
	#__√ed_size_t


	)

45 
	#__√ed_wch¨_t


	)

46 
	#__√ed_NULL


	)

48 #i‡
deföed
 
_WCHAR_H
 || deföed 
__√ed_wöt_t
 || !deföed 
__WINT_TYPE__


49 #unde‡
__√ed_wöt_t


50 
	#__√ed_wöt_t


	)

51 
	~<°ddef.h
>

55 #i‚de‡
_WINT_T


60 
	#_WINT_T


	)

61 
	twöt_t
;

65 #i‡
deföed
 
__˝lu•lus
 && deföed 
_GLIBCPP_USE_NAMESPACES
 \

66 && 
deföed
 
__WINT_TYPE__


67 
__BEGIN_NAMESPACE_STD


68 
__WINT_TYPE__
 
	twöt_t
;

69 
	g__END_NAMESPACE_STD


74 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (4, 4)

75 
	#__CORRECT_ISO_CPP_WCHAR_H_PROTO


	)

79 #i‡(
deföed
 
_WCHAR_H
 || deföed 
__√ed_mb°©e_t
Ë&& !deföed 
____mb°©e_t_deföed


80 
	#____mb°©e_t_deföed
 1

	)

84 
	m__cou¡
;

87 #ifde‡
__WINT_TYPE__


88 
__WINT_TYPE__
 
	m__wch
;

90 
wöt_t
 
	m__wch
;

92 
	m__wchb
[4];

93 } 
	m__vÆue
;

94 } 
	t__mb°©e_t
;

96 #unde‡
__√ed_mb°©e_t


101 #ifde‡
_WCHAR_H


103 #i‚de‡
__mb°©e_t_deföed


104 
__BEGIN_NAMESPACE_C99


106 
__mb°©e_t
 
	tmb°©e_t
;

107 
	g__END_NAMESPACE_C99


108 
	#__mb°©e_t_deföed
 1

	)

111 #ifde‡
__USE_GNU


112 
	$__USING_NAMESPACE_C99
(
mb°©e_t
)

115 #i‚de‡
WCHAR_MIN


117 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

118 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

121 #i‚de‡
WEOF


122 
	#WEOF
 (0xffffffffu)

	)

127 #i‡
deföed
 
__USE_XOPEN
 && !deföed 
__USE_UNIX98


128 
	~<w˘y≥.h
>

132 
__BEGIN_DECLS


134 
__BEGIN_NAMESPACE_STD


137 
tm
;

138 
__END_NAMESPACE_STD


142 
	$__USING_NAMESPACE_STD
(
tm
)

145 
__BEGIN_NAMESPACE_STD


147 
wch¨_t
 *
	$wcs˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

148 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
Ë
__THROW
;

150 
wch¨_t
 *
	$wc¢˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

151 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

152 
__THROW
;

155 
wch¨_t
 *
	$wcsˇt
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

156 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
Ë
__THROW
;

158 
wch¨_t
 *
	$wc¢ˇt
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

159 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

160 
__THROW
;

163 
	$wcscmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
)

164 
__THROW
 
__©åibuã_puª__
;

166 
	$wc¢cmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
, 
size_t
 
__n
)

167 
__THROW
 
__©åibuã_puª__
;

168 
__END_NAMESPACE_STD


170 #ifde‡
__USE_XOPEN2K8


172 
	$wcsˇ£cmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
Ë
__THROW
;

175 
	$wc¢ˇ£cmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

176 
size_t
 
__n
Ë
__THROW
;

180 
	~<xloˇÀ.h
>

182 
	$wcsˇ£cmp_l
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

183 
__loˇÀ_t
 
__loc
Ë
__THROW
;

185 
	$wc¢ˇ£cmp_l
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

186 
size_t
 
__n
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

189 
__BEGIN_NAMESPACE_STD


192 
	$wcscﬁl
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
Ë
__THROW
;

196 
size_t
 
	$wcsx‰m
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

197 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
Ë
__THROW
;

198 
__END_NAMESPACE_STD


200 #ifde‡
__USE_XOPEN2K8


206 
	$wcscﬁl_l
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

207 
__loˇÀ_t
 
__loc
Ë
__THROW
;

212 
size_t
 
	$wcsx‰m_l
 (
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

213 
size_t
 
__n
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

216 
wch¨_t
 *
	$wcsdup
 (c⁄° 
wch¨_t
 *
__s
Ë
__THROW
 
__©åibuã_mÆloc__
;

219 
__BEGIN_NAMESPACE_STD


221 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


222 "C++" 
wch¨_t
 *
	$wcschr
 (
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

223 
__THROW
 
	`__asm
 ("wcschr"Ë
__©åibuã_puª__
;

224 "C++" c⁄° 
wch¨_t
 *
	$wcschr
 (c⁄° 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

225 
__THROW
 
	`__asm
 ("wcschr"Ë
__©åibuã_puª__
;

227 
wch¨_t
 *
	$wcschr
 (c⁄° 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

228 
__THROW
 
__©åibuã_puª__
;

231 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


232 "C++" 
wch¨_t
 *
	$wc§chr
 (
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

233 
__THROW
 
	`__asm
 ("wc§chr"Ë
__©åibuã_puª__
;

234 "C++" c⁄° 
wch¨_t
 *
	$wc§chr
 (c⁄° 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

235 
__THROW
 
	`__asm
 ("wc§chr"Ë
__©åibuã_puª__
;

237 
wch¨_t
 *
	$wc§chr
 (c⁄° 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

238 
__THROW
 
__©åibuã_puª__
;

240 
__END_NAMESPACE_STD


242 #ifde‡
__USE_GNU


245 
wch¨_t
 *
	$wcsch∫ul
 (c⁄° 
wch¨_t
 *
__s
, wch¨_à
__wc
)

246 
__THROW
 
__©åibuã_puª__
;

249 
__BEGIN_NAMESPACE_STD


252 
size_t
 
	$wcsc•n
 (c⁄° 
wch¨_t
 *
__wcs
, c⁄° wch¨_à*
__ªje˘
)

253 
__THROW
 
__©åibuã_puª__
;

256 
size_t
 
	$wcs•n
 (c⁄° 
wch¨_t
 *
__wcs
, c⁄° wch¨_à*
__ac˚±
)

257 
__THROW
 
__©åibuã_puª__
;

259 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


260 "C++" 
wch¨_t
 *
	$wc•brk
 (
wch¨_t
 *
__wcs
, c⁄° wch¨_à*
__ac˚±
)

261 
__THROW
 
	`__asm
 ("wc•brk"Ë
__©åibuã_puª__
;

262 "C++" c⁄° 
wch¨_t
 *
	$wc•brk
 (c⁄° 
wch¨_t
 *
__wcs
,

263 c⁄° 
wch¨_t
 *
__ac˚±
)

264 
__THROW
 
	`__asm
 ("wc•brk"Ë
__©åibuã_puª__
;

266 
wch¨_t
 *
	$wc•brk
 (c⁄° 
wch¨_t
 *
__wcs
, c⁄° wch¨_à*
__ac˚±
)

267 
__THROW
 
__©åibuã_puª__
;

270 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


271 "C++" 
wch¨_t
 *
	$wcs°r
 (
wch¨_t
 *
__hay°ack
, c⁄° wch¨_à*
__√edÀ
)

272 
__THROW
 
	`__asm
 ("wcs°r"Ë
__©åibuã_puª__
;

273 "C++" c⁄° 
wch¨_t
 *
	$wcs°r
 (c⁄° 
wch¨_t
 *
__hay°ack
,

274 c⁄° 
wch¨_t
 *
__√edÀ
)

275 
__THROW
 
	`__asm
 ("wcs°r"Ë
__©åibuã_puª__
;

277 
wch¨_t
 *
	$wcs°r
 (c⁄° 
wch¨_t
 *
__hay°ack
, c⁄° wch¨_à*
__√edÀ
)

278 
__THROW
 
__©åibuã_puª__
;

282 
wch¨_t
 *
	$wc°ok
 (
wch¨_t
 *
__ª°ri˘
 
__s
,

283 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__dñim
,

284 
wch¨_t
 **
__ª°ri˘
 
__±r
Ë
__THROW
;

287 
size_t
 
	$wc¶í
 (c⁄° 
wch¨_t
 *
__s
Ë
__THROW
 
__©åibuã_puª__
;

288 
__END_NAMESPACE_STD


290 #ifde‡
__USE_XOPEN


292 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


293 "C++" 
wch¨_t
 *
	$wcswcs
 (
wch¨_t
 *
__hay°ack
, c⁄° wch¨_à*
__√edÀ
)

294 
__THROW
 
	`__asm
 ("wcswcs"Ë
__©åibuã_puª__
;

295 "C++" c⁄° 
wch¨_t
 *
	$wcswcs
 (c⁄° 
wch¨_t
 *
__hay°ack
,

296 c⁄° 
wch¨_t
 *
__√edÀ
)

297 
__THROW
 
	`__asm
 ("wcswcs"Ë
__©åibuã_puª__
;

299 
wch¨_t
 *
	$wcswcs
 (c⁄° 
wch¨_t
 *
__hay°ack
, c⁄° wch¨_à*
__√edÀ
)

300 
__THROW
 
__©åibuã_puª__
;

304 #ifde‡
__USE_XOPEN2K8


306 
size_t
 
	$wc¢Àn
 (c⁄° 
wch¨_t
 *
__s
, 
size_t
 
__maxÀn
)

307 
__THROW
 
__©åibuã_puª__
;

311 
__BEGIN_NAMESPACE_STD


313 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


314 "C++" 
wch¨_t
 *
	$wmemchr
 (
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
)

315 
__THROW
 
	`__asm
 ("wmemchr"Ë
__©åibuã_puª__
;

316 "C++" c⁄° 
wch¨_t
 *
	$wmemchr
 (c⁄° 
wch¨_t
 *
__s
, wch¨_à
__c
,

317 
size_t
 
__n
)

318 
__THROW
 
	`__asm
 ("wmemchr"Ë
__©åibuã_puª__
;

320 
wch¨_t
 *
	$wmemchr
 (c⁄° 
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
)

321 
__THROW
 
__©åibuã_puª__
;

325 
	$wmemcmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
, 
size_t
 
__n
)

326 
__THROW
 
__©åibuã_puª__
;

329 
wch¨_t
 *
	$wmem˝y
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

330 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
Ë
__THROW
;

334 
wch¨_t
 *
	$wmemmove
 (
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
, 
size_t
 
__n
)

335 
__THROW
;

338 
wch¨_t
 *
	$wmem£t
 (
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
Ë
__THROW
;

339 
__END_NAMESPACE_STD


341 #ifde‡
__USE_GNU


344 
wch¨_t
 *
	$wmemp˝y
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

345 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
)

346 
__THROW
;

350 
__BEGIN_NAMESPACE_STD


353 
wöt_t
 
	$btowc
 (
__c
Ë
__THROW
;

357 
	$w˘ob
 (
wöt_t
 
__c
Ë
__THROW
;

361 
	$mbsöô
 (c⁄° 
mb°©e_t
 *
__ps
Ë
__THROW
 
__©åibuã_puª__
;

365 
size_t
 
	$mbπowc
 (
wch¨_t
 *
__ª°ri˘
 
__pwc
,

366 c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

367 
mb°©e_t
 *
__ª°ri˘
 
__p
Ë
__THROW
;

370 
size_t
 
	$w¸tomb
 (*
__ª°ri˘
 
__s
, 
wch¨_t
 
__wc
,

371 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

374 
size_t
 
	$__mbæí
 (c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

375 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

376 
size_t
 
	$mbæí
 (c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

377 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

378 
__END_NAMESPACE_STD


380 #ifde‡
__USE_EXTERN_INLINES


386 
wöt_t
 
	$__btowc_Æüs
 (
__c
Ë
	`__asm
 ("btowc");

387 
__exã∫_ölöe
 
wöt_t


388 
	`__NTH
 (
	$btowc
 (
__c
))

389 {  (
	`__buûtö_c⁄°™t_p
 (
__c
) && __c >= '\0' && __c <= '\x7f'

390 ? (
wöt_t
Ë
__c
 : 
	`__btowc_Æüs
 (__c)); 
	}
}

392 
	$__w˘ob_Æüs
 (
wöt_t
 
__c
Ë
	`__asm
 ("wctob");

393 
__exã∫_ölöe
 

394 
	`__NTH
 (
	$w˘ob
 (
wöt_t
 
__wc
))

395 {  (
	`__buûtö_c⁄°™t_p
 (
__wc
Ë&& __w¯>
L
'\0' && __wc <= L'\x7f'

396 ? (Ë
__wc
 : 
	`__w˘ob_Æüs
 (__wc)); 
	}
}

398 
__exã∫_ölöe
 
size_t


399 
__NTH
 (
	$mbæí
 (c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

400 
mb°©e_t
 *
__ª°ri˘
 
__ps
))

401 {  (
__ps
 !
NULL


402 ? 
	`mbπowc
 (
NULL
, 
__s
, 
__n
, 
__ps
Ë: 
	`__mbæí
 (__s, __n, NULL)); 
	}
}

405 
__BEGIN_NAMESPACE_STD


408 
size_t
 
	$mb§towcs
 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

409 c⁄° **
__ª°ri˘
 
__§c
, 
size_t
 
__Àn
,

410 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

414 
size_t
 
	$wc§tombs
 (*
__ª°ri˘
 
__d°
,

415 c⁄° 
wch¨_t
 **
__ª°ri˘
 
__§c
, 
size_t
 
__Àn
,

416 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

417 
__END_NAMESPACE_STD


420 #ifdef 
__USE_XOPEN2K8


423 
size_t
 
	$mb¢πowcs
 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

424 c⁄° **
__ª°ri˘
 
__§c
, 
size_t
 
__nmc
,

425 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

429 
size_t
 
	$wc¢πombs
 (*
__ª°ri˘
 
__d°
,

430 c⁄° 
wch¨_t
 **
__ª°ri˘
 
__§c
,

431 
size_t
 
__nwc
, size_à
__Àn
,

432 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

437 #ifde‡
__USE_XOPEN


439 
	$wcwidth
 (
wch¨_t
 
__c
Ë
__THROW
;

443 
	$wcswidth
 (c⁄° 
wch¨_t
 *
__s
, 
size_t
 
__n
Ë
__THROW
;

447 
__BEGIN_NAMESPACE_STD


450 
	$wc°od
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

451 
wch¨_t
 **
__ª°ri˘
 
__íd±r
Ë
__THROW
;

452 
__END_NAMESPACE_STD


454 #ifde‡
__USE_ISOC99


455 
__BEGIN_NAMESPACE_C99


457 
	$wc°of
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

458 
wch¨_t
 **
__ª°ri˘
 
__íd±r
Ë
__THROW
;

459 
	$wc°ﬁd
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

460 
wch¨_t
 **
__ª°ri˘
 
__íd±r
Ë
__THROW
;

461 
__END_NAMESPACE_C99


465 
__BEGIN_NAMESPACE_STD


468 
	$wc°ﬁ
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

469 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
Ë
__THROW
;

473 
	$wc°oul
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

474 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

475 
__THROW
;

476 
__END_NAMESPACE_STD


478 #i‡
deföed
 
__USE_ISOC99
 || (deföed 
__GNUC__
 && deföed 
__USE_GNU
)

479 
__BEGIN_NAMESPACE_C99


482 
__exãnsi⁄__


483 
	$wc°ﬁl
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

484 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

485 
__THROW
;

489 
__exãnsi⁄__


490 
	$wc°ouŒ
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

491 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

492 
__ba£
Ë
__THROW
;

493 
__END_NAMESPACE_C99


496 #i‡
deföed
 
__GNUC__
 && deföed 
__USE_GNU


499 
__exãnsi⁄__


500 
	$wc°oq
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

501 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

502 
__THROW
;

506 
__exãnsi⁄__


507 
	$wc°ouq
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

508 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

509 
__ba£
Ë
__THROW
;

512 #ifde‡
__USE_GNU


526 
	~<xloˇÀ.h
>

530 
	$wc°ﬁ_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

531 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
,

532 
__loˇÀ_t
 
__loc
Ë
__THROW
;

534 
	$wc°oul_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

535 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

536 
__ba£
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

538 
__exãnsi⁄__


539 
	$wc°ﬁl_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

540 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

541 
__ba£
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

543 
__exãnsi⁄__


544 
	$wc°ouŒ_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

545 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

546 
__ba£
, 
__loˇÀ_t
 
__loc
)

547 
__THROW
;

549 
	$wc°od_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

550 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

551 
__THROW
;

553 
	$wc°of_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

554 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

555 
__THROW
;

557 
	$wc°ﬁd_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

558 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

559 
__loˇÀ_t
 
__loc
Ë
__THROW
;

563 #ifde‡
__USE_XOPEN2K8


566 
wch¨_t
 *
	$w˝˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

567 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
Ë
__THROW
;

571 
wch¨_t
 *
	$w˝n˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

572 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

573 
__THROW
;

580 
__FILE
 *
	$›í_wmem°ªam
 (
wch¨_t
 **
__buÊoc
, 
size_t
 *
__sizñoc
Ë
__THROW
;

583 #i‡
deföed
 
__USE_ISOC95
 || deföed 
__USE_UNIX98


584 
__BEGIN_NAMESPACE_STD


587 
	$fwide
 (
__FILE
 *
__Â
, 
__mode
Ë
__THROW
;

594 
	`fw¥ötf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
,

595 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

601 
	`w¥ötf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

604 
	$sw¥ötf
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

605 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

606 
__THROW
 ;

612 
	`vfw¥ötf
 (
__FILE
 *
__ª°ri˘
 
__s
,

613 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

614 
__gnuc_va_li°
 
__¨g
)

620 
	`vw¥ötf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

621 
__gnuc_va_li°
 
__¨g
)

625 
	$vsw¥ötf
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

626 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

627 
__gnuc_va_li°
 
__¨g
)

628 
__THROW
 ;

635 
	`fwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
,

636 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

642 
	`wsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

645 
	$swsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

646 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

647 
__THROW
 ;

649 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__USE_GNU
 \

650 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

651 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

652 #ifde‡
__REDIRECT


656 
	`__REDIRECT
 (
fwsˇnf
, (
__FILE
 *
__ª°ri˘
 
__°ªam
,

657 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...),

658 
__isoc99_fwsˇnf
)

660 
	`__REDIRECT
 (
wsˇnf
, (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...),

661 
__isoc99_wsˇnf
)

663 
	`__REDIRECT_NTH
 (
swsˇnf
, (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

664 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

665 ...), 
__isoc99_swsˇnf
)

668 
	`__isoc99_fwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
,

669 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...);

670 
	`__isoc99_wsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...);

671 
	$__isoc99_swsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

672 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

673 
__THROW
;

674 
	#fwsˇnf
 
__isoc99_fwsˇnf


	)

675 
	#wsˇnf
 
__isoc99_wsˇnf


	)

676 
	#swsˇnf
 
__isoc99_swsˇnf


	)

680 
__END_NAMESPACE_STD


683 #ifde‡
__USE_ISOC99


684 
__BEGIN_NAMESPACE_C99


689 
	`vfwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__s
,

690 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

691 
__gnuc_va_li°
 
__¨g
)

697 
	`vwsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

698 
__gnuc_va_li°
 
__¨g
)

701 
	$vswsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

702 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

703 
__gnuc_va_li°
 
__¨g
)

704 
__THROW
 ;

706 #i‡!
deföed
 
__USE_GNU
 \

707 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

708 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

709 #ifde‡
__REDIRECT


710 
	`__REDIRECT
 (
vfwsˇnf
, (
__FILE
 *
__ª°ri˘
 
__s
,

711 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

712 
__gnuc_va_li°
 
__¨g
), 
__isoc99_vfwsˇnf
)

714 
	`__REDIRECT
 (
vwsˇnf
, (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

715 
__gnuc_va_li°
 
__¨g
), 
__isoc99_vwsˇnf
)

717 
	`__REDIRECT_NTH
 (
vswsˇnf
, (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

718 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

719 
__gnuc_va_li°
 
__¨g
), 
__isoc99_vswsˇnf
)

722 
	`__isoc99_vfwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__s
,

723 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

724 
__gnuc_va_li°
 
__¨g
);

725 
	`__isoc99_vwsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

726 
__gnuc_va_li°
 
__¨g
);

727 
	$__isoc99_vswsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

728 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

729 
__gnuc_va_li°
 
__¨g
Ë
__THROW
;

730 
	#vfwsˇnf
 
__isoc99_vfwsˇnf


	)

731 
	#vwsˇnf
 
__isoc99_vwsˇnf


	)

732 
	#vswsˇnf
 
__isoc99_vswsˇnf


	)

736 
__END_NAMESPACE_C99


740 
__BEGIN_NAMESPACE_STD


745 
wöt_t
 
	`fgëwc
 (
__FILE
 *
__°ªam
);

746 
wöt_t
 
	`gëwc
 (
__FILE
 *
__°ªam
);

752 
wöt_t
 
	`gëwch¨
 ();

759 
wöt_t
 
	`Âutwc
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

760 
wöt_t
 
	`putwc
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

766 
wöt_t
 
	`putwch¨
 (
wch¨_t
 
__wc
);

774 
wch¨_t
 *
	`fgëws
 (wch¨_à*
__ª°ri˘
 
__ws
, 
__n
,

775 
__FILE
 *
__ª°ri˘
 
__°ªam
);

781 
	`Âutws
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__ws
,

782 
__FILE
 *
__ª°ri˘
 
__°ªam
);

789 
wöt_t
 
	`ungëwc
 (wöt_à
__wc
, 
__FILE
 *
__°ªam
);

790 
__END_NAMESPACE_STD


793 #ifde‡
__USE_GNU


801 
wöt_t
 
	`gëwc_u∆ocked
 (
__FILE
 *
__°ªam
);

802 
wöt_t
 
	`gëwch¨_u∆ocked
 ();

810 
wöt_t
 
	`fgëwc_u∆ocked
 (
__FILE
 *
__°ªam
);

818 
wöt_t
 
	`Âutwc_u∆ocked
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

827 
wöt_t
 
	`putwc_u∆ocked
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

828 
wöt_t
 
	`putwch¨_u∆ocked
 (
wch¨_t
 
__wc
);

837 
wch¨_t
 *
	`fgëws_u∆ocked
 (wch¨_à*
__ª°ri˘
 
__ws
, 
__n
,

838 
__FILE
 *
__ª°ri˘
 
__°ªam
);

846 
	`Âutws_u∆ocked
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__ws
,

847 
__FILE
 *
__ª°ri˘
 
__°ªam
);

851 
__BEGIN_NAMESPACE_C99


855 
size_t
 
	$wcs·ime
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

856 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

857 c⁄° 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

858 
__END_NAMESPACE_C99


860 #ifde‡
__USE_GNU


861 
	~<xloˇÀ.h
>

865 
size_t
 
	$wcs·ime_l
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

866 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

867 c⁄° 
tm
 *
__ª°ri˘
 
__ç
,

868 
__loˇÀ_t
 
__loc
Ë
__THROW
;

877 #i‡
deföed
 
__USE_UNIX98
 && !deföed 
__USE_GNU


878 
	#__√ed_iswxxx


	)

879 
	~<w˘y≥.h
>

883 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


884 
	~<bôs/wch¨2.h
>

887 #ifde‡
__LDBL_COMPAT


888 
	~<bôs/wch¨-ldbl.h
>

891 
__END_DECLS


899 #unde‡
__√ed_mb°©e_t


900 #unde‡
__√ed_wöt_t


	@/usr/include/linux/stddef.h

	@/usr/include/wctype.h

23 #i‚de‡
_WCTYPE_H


25 
	~<„©uªs.h
>

26 
	~<bôs/ty≥s.h
>

28 #i‚de‡
__√ed_iswxxx


29 
	#_WCTYPE_H
 1

	)

32 
	#__√ed_wöt_t


	)

33 
	~<wch¨.h
>

37 #i‚de‡
WEOF


38 
	#WEOF
 (0xffffffffu)

	)

41 #unde‡
__√ed_iswxxx


46 #i‚de‡
__iswxxx_deföed


47 
	#__iswxxx_deföed
 1

	)

49 
__BEGIN_NAMESPACE_C99


52 
	tw˘y≥_t
;

53 
	g__END_NAMESPACE_C99


55 #i‚de‡
_ISwbô


60 
	~<ídün.h
>

61 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


62 
	#_ISwbô
(
bô
Ë(1 << (bô))

	)

64 
	#_ISwbô
(
bô
) \

65 ((
bô
) < 8 ? () ((1UL << (bit)) << 24) \

66 : ((
bô
) < 16 ? () ((1UL << (bit)) << 8) \

67 : ((
bô
) < 24 ? () ((1UL << (bit)) >> 8) \

68 : (Ë((1UL << (
bô
)Ë>> 24))))

	)

73 
	m__ISwuµî
 = 0,

74 
	m__ISwlowî
 = 1,

75 
	m__ISwÆpha
 = 2,

76 
	m__ISwdigô
 = 3,

77 
	m__ISwxdigô
 = 4,

78 
	m__ISw•a˚
 = 5,

79 
	m__ISw¥öt
 = 6,

80 
	m__ISwgøph
 = 7,

81 
	m__ISwbœnk
 = 8,

82 
	m__ISw˙ål
 = 9,

83 
	m__ISwpun˘
 = 10,

84 
	m__ISwÆnum
 = 11,

86 
	m_ISwuµî
 = 
_ISwbô
 (
__ISwuµî
),

87 
	m_ISwlowî
 = 
_ISwbô
 (
__ISwlowî
),

88 
	m_ISwÆpha
 = 
_ISwbô
 (
__ISwÆpha
),

89 
	m_ISwdigô
 = 
_ISwbô
 (
__ISwdigô
),

90 
	m_ISwxdigô
 = 
_ISwbô
 (
__ISwxdigô
),

91 
	m_ISw•a˚
 = 
_ISwbô
 (
__ISw•a˚
),

92 
	m_ISw¥öt
 = 
_ISwbô
 (
__ISw¥öt
),

93 
	m_ISwgøph
 = 
_ISwbô
 (
__ISwgøph
),

94 
	m_ISwbœnk
 = 
_ISwbô
 (
__ISwbœnk
),

95 
	m_ISw˙ål
 = 
_ISwbô
 (
__ISw˙ål
),

96 
	m_ISwpun˘
 = 
_ISwbô
 (
__ISwpun˘
),

97 
	m_ISwÆnum
 = 
_ISwbô
 (
__ISwÆnum
)

102 
__BEGIN_DECLS


104 
__BEGIN_NAMESPACE_C99


111 
	$iswÆnum
 (
wöt_t
 
__wc
Ë
__THROW
;

117 
	$iswÆpha
 (
wöt_t
 
__wc
Ë
__THROW
;

120 
	$isw˙ål
 (
wöt_t
 
__wc
Ë
__THROW
;

124 
	$iswdigô
 (
wöt_t
 
__wc
Ë
__THROW
;

128 
	$iswgøph
 (
wöt_t
 
__wc
Ë
__THROW
;

133 
	$iswlowî
 (
wöt_t
 
__wc
Ë
__THROW
;

136 
	$isw¥öt
 (
wöt_t
 
__wc
Ë
__THROW
;

141 
	$iswpun˘
 (
wöt_t
 
__wc
Ë
__THROW
;

146 
	$isw•a˚
 (
wöt_t
 
__wc
Ë
__THROW
;

151 
	$iswuµî
 (
wöt_t
 
__wc
Ë
__THROW
;

156 
	$iswxdigô
 (
wöt_t
 
__wc
Ë
__THROW
;

161 #ifde‡
__USE_ISOC99


162 
	$iswbœnk
 (
wöt_t
 
__wc
Ë
__THROW
;

171 
w˘y≥_t
 
	$w˘y≥
 (c⁄° *
__¥›îty
Ë
__THROW
;

175 
	$isw˘y≥
 (
wöt_t
 
__wc
, 
w˘y≥_t
 
__desc
Ë
__THROW
;

176 
__END_NAMESPACE_C99


183 
__BEGIN_NAMESPACE_C99


186 c⁄° 
	t__öt32_t
 *
	tw˘øns_t
;

187 
__END_NAMESPACE_C99


188 #ifde‡
__USE_GNU


189 
	$__USING_NAMESPACE_C99
(
w˘øns_t
)

192 
__BEGIN_NAMESPACE_C99


194 
wöt_t
 
	$towlowî
 (
wöt_t
 
__wc
Ë
__THROW
;

197 
wöt_t
 
	$towuµî
 (
wöt_t
 
__wc
Ë
__THROW
;

198 
__END_NAMESPACE_C99


200 
__END_DECLS


207 #ifde‡
_WCTYPE_H


213 
__BEGIN_DECLS


215 
__BEGIN_NAMESPACE_C99


218 
w˘øns_t
 
	$w˘øns
 (c⁄° *
__¥›îty
Ë
__THROW
;

221 
wöt_t
 
	$tow˘øns
 (
wöt_t
 
__wc
, 
w˘øns_t
 
__desc
Ë
__THROW
;

222 
__END_NAMESPACE_C99


224 #ifde‡
__USE_XOPEN2K8


226 
	~<xloˇÀ.h
>

230 
	$iswÆnum_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

236 
	$iswÆpha_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

239 
	$isw˙ål_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

243 
	$iswdigô_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

247 
	$iswgøph_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

252 
	$iswlowî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

255 
	$isw¥öt_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

260 
	$iswpun˘_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

265 
	$isw•a˚_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

270 
	$iswuµî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

275 
	$iswxdigô_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

280 
	$iswbœnk_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

284 
w˘y≥_t
 
	$w˘y≥_l
 (c⁄° *
__¥›îty
, 
__loˇÀ_t
 
__loˇÀ
)

285 
__THROW
;

289 
	$isw˘y≥_l
 (
wöt_t
 
__wc
, 
w˘y≥_t
 
__desc
, 
__loˇÀ_t
 
__loˇÀ
)

290 
__THROW
;

298 
wöt_t
 
	$towlowî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

301 
wöt_t
 
	$towuµî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

305 
w˘øns_t
 
	$w˘øns_l
 (c⁄° *
__¥›îty
, 
__loˇÀ_t
 
__loˇÀ
)

306 
__THROW
;

309 
wöt_t
 
	$tow˘øns_l
 (
wöt_t
 
__wc
, 
w˘øns_t
 
__desc
,

310 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

314 
__END_DECLS


	@
1
.
1
/usr/include
84
2088
libs/qid/include/mcn_api.h
libs/qid/include/qcloud.h
libs/qid/include/qcloud_dao.h
libs/qid/include/qcloud_gen_apirequest.h
libs/qid/include/qcloud_tool.h
libs/qid/include/qid_api.h
libs/qid/include/qid_httpc.h
libs/qid/include/qid_openssl_aes.h
libs/qid/include/qid_status_code.h
libs/qid/include/qid_struct.h
libs/qid/include/qid_system.h
libs/qid/mcn_api.c
libs/qid/qcloud_dao.c
libs/qid/qcloud_gen_apirequest.c
libs/qid/qcloud_utils.c
libs/qid/qid_api.c
libs/qid/qid_httpc.c
libs/qid/qid_openssl_aes.c
libs/qid/qid_system.c
libs/utils/MD5.c
libs/utils/buff.c
libs/utils/conf.c
libs/utils/error_code.c
libs/utils/include/MD5.h
libs/utils/include/buff.h
libs/utils/include/comm_hdr.h
libs/utils/include/conf.h
libs/utils/include/const.h
libs/utils/include/error_code.h
libs/utils/include/log.h
libs/utils/include/qcloud_util.h
libs/utils/include/sha1.h
libs/utils/include/std_hdr.h
libs/utils/include/util.h
libs/utils/include/util_aes.h
libs/utils/log.c
libs/utils/qcloud_util.c
libs/utils/sha1.c
libs/utils/util.c
libs/utils/util_aes.c
porter/include/porter_ev.h
porter/porter.c
porter/porter_ev.c
sample/qcloud_sample.c
/usr/include/arpa/inet.h
/usr/include/ctype.h
/usr/include/errno.h
/usr/include/fcntl.h
/usr/include/linux/string.h
/usr/include/math.h
/usr/include/net/if.h
/usr/include/netdb.h
/usr/include/netinet/if_ether.h
/usr/include/netinet/in.h
/usr/include/regex.h
/usr/include/resolv.h
/usr/include/signal.h
/usr/include/stdint.h
/usr/include/stdio.h
/usr/include/stdlib.h
/usr/include/string.h
/usr/include/syslog.h
/usr/include/time.h
/usr/include/unistd.h
/usr/include/alloca.h
/usr/include/arpa/nameser.h
/usr/include/endian.h
/usr/include/features.h
/usr/include/getopt.h
/usr/include/libio.h
/usr/include/linux/if_ether.h
/usr/include/net/ethernet.h
/usr/include/net/if_arp.h
/usr/include/rpc/netdb.h
/usr/include/xlocale.h
/usr/include/_G_config.h
/usr/include/arpa/nameser_compat.h
/usr/include/linux/types.h
/usr/include/stdc-predef.h
/usr/include/gconv.h
/usr/include/linux/posix_types.h
/usr/include/wchar.h
/usr/include/linux/stddef.h
/usr/include/wctype.h
